{"version":3,"names":["PhysicsShape","FixtureBox2DDef","Physics2DOption","allowSleeping","gravity","x","y","customUpdate","velocityIterations","positionIterations","pixelRatio","debugDraw","drawShape","drawJoint","drawAABB","drawCenterOfMass","Physics2D","EventDispatcher","constructor","this","_eventList","I","_I","enableDebugDraw","enable","_factory","createDebugDraw","drawFlags_shapeBit","removeDebugDraw","flag","appendFlags","clearFlags","drawFlags_jointBit","drawFlags_aabbBit","drawPair","drawFlags_pairBit","drawFlags_centerOfMassBit","initialize","then","start","Promise","resolve","destroyWorld","_enabled","ILaya","physicsTimer","clear","_update","_emptyBody","createBody","_rigiBodyList","SingletonList","_updataattributeLists","LayaEnv","isPlaying","frameLoop","addRigidBody","body","add","removeRigidBody","remove","updataRigidBodyAttribute","removeRigidBodyAttribute","i","n","length","elements","updatePhysicsAttribute","delta","Math","min","timer","update","_updatePhysicsTransformToRender","len","sendEvent","updatePhysicsTransformToRender","stop","value","getBodyCount","bodyCount","getContactCount","contactCount","getJointCount","jointCount","worldRoot","_worldRoot","stage","p","localToGlobal","Point","TEMP","setTo","shiftOrigin","updatePhysicsByWorldRoot","Laya","addInitCallback","RigidBody2DInfo","position","Vector2","linearVelocity","RigidBody","Component","_type","_allowSleep","_angularVelocity","_angularDamping","_linearVelocity","_linearDamping","_bullet","_allowRotation","_gravityScale","group","category","mask","label","_createBody","_body","owner","factory","sp","defRigidBodyDef","setValue","globalPosX","globalPosY","angle","Utils","toRadian","globalRotation","allowSleep","angularDamping","angularVelocity","bullet","fixedRotation","gravityScale","linearDamping","obj","type","rigidBodyDef_Create","_needrefeshShape","_updateBodyType","set_rigidBody_type","_onAwake","cacheGlobal","on","_globalChangeHandler","changeFlag","_onEnable","point","GetWorldPoint","set_RigibBody_Transform","comps","getComponents","ColliderBase","collider","rigidBody","refresh","retSet_rigidBody_MassData","set_rigidbody_Awake","event","get_rigidBody_IsAwake","pos","TempVector2","get_RigidBody_Position","setGlobalPos","toAngle","get_RigidBody_Angle","_onDisable","off","removeBody","_onDestroy","getBody","_getOriBody","applyForce","force","rigidBody_applyForce","applyForceToCenter","rigidBody_applyForceToCenter","applyLinearImpulse","impulse","rigidbody_ApplyLinearImpulse","applyLinearImpulseToCenter","rigidbody_ApplyLinearImpulseToCenter","applyTorque","torque","rigidbody_applyTorque","setVelocity","velocity","set_rigidBody_linearVelocity","setAngle","getMass","get_rigidbody_Mass","getCenter","get_rigidBody_Center","getWorldCenter","get_rigidBody_WorldCenter","set_rigidBody_gravityScale","allowRotation","set_rigidBody_allowRotation","set_rigidBody_allowSleep","set_rigidBody_angularDamping","get_rigidBody_angularVelocity","set_rigidBody_angularVelocity","set_rigidBody_linearDamping","vec","get_rigidBody_linearVelocity","Array","set_rigidBody_bullet","getGlobalMatrix","transformPoint","GetLocalPoint","Sprite","Sprite_GlobalDeltaFlage_Position_X","Sprite_GlobalDeltaFlage_Position_Y","Sprite_GlobalDeltaFlage_Rotation","Sprite_GlobalDeltaFlage_Scale_X","Sprite_GlobalDeltaFlage_Scale_Y","super","_isSensor","_density","_friction","_restitution","_x","_y","_singleton","_needupdataShapeAttribute","scaleX","globalScaleX","scaleY","globalScaleY","_setShapeData","shape","pivotoffx","pivotX","pivotoffy","pivotY","createfixture","def","TempDef","density","friction","isSensor","restitution","_physicShape","fixtureDef","createFixtureDef","_shape","fixture","resetFixtureData","getComponent","enabled","set_fixtureDef_GroupIndex","set_fixtureDef_CategoryBits","set_fixtureDef_maskBits","set_fixture_collider","rigidBody_DestroyFixture","BoxCollider","_width","_height","BoxShape","helfW","helfH","center","set_collider_SetAsBox","abs","width","height","ChainCollider","_points","_datas","_loop","ChainShape","set_ChainShape_data","points","onAdded","push","arr","split","parseInt","datas","loop","CircleCollider","_radius","CircleShape","scale","max","radius","set_CircleShape_radius","set_CircleShape_pos","EdgeCollider","EdgeShape","set_EdgeShape_data","PolygonCollider","PolygonShape","set_PolygonShape_data","JointBase","getBodyAnchor","anchorx","anchory","node","transform","transformPointN","joint","_joint","_createJoint","getJoint_userData","getJoint_userData_destroy","removeJoint","physics2D_DistancJointDef","localAnchorA","localAnchorB","physics2D_GearJointDef","physics2D_MotorJointDef","linearOffset","physics2D_MouseJointJointDef","target","physics2D_PrismaticJointDef","anchor","axis","physics2D_PulleyJointDef","groundAnchorA","groundAnchorB","physics2D_RevoluteJointDef","physics2D_WeldJointDef","physics2D_WheelJointDef","DistanceJoint","selfAnchor","otherAnchor","collideConnected","_length","_maxLength","_minLength","_frequency","_dampingRatio","selfBody","_temp","bodyB","_refeahJoint","otherBody","bodyA","dampingRatio","frequency","maxLength","minLength","createDistanceJoint","set_DistanceJointStiffnessDamping","onDestroy","set_DistanceJoint_length","set_DistanceJoint_MinLength","set_DistanceJoint_MaxLength","damping","jointLength","phyToLayaValue","GetLength","GearJoint","_ratio","joint1","joint2","ratio","create_GearJoint","set_GearJoint_SetRatio","MotorJoint","_linearOffset","_angularOffset","_maxForce","_maxTorque","_correctionFactor","angularOffset","maxForce","maxTorque","correctionFactor","create_MotorJoint","set_MotorJoint_linearOffset","set_MotorJoint_SetAngularOffset","set_MotorJoint_SetMaxForce","set_MotorJoint_SetMaxTorque","set_MotorJoint_SetCorrectionFactor","MouseJoint","mouseEnabled","Event","MOUSE_DOWN","onMouseDown","MOUSE_MOVE","onMouseMove","once","MOUSE_UP","onStageMouseUp","MOUSE_OUT","anchorPos","globalToLocal","mouseX","mouseY","create_MouseJoint","set_MouseJoint_target","set_MouseJoint_frequencyAndDampingRatio","PrismaticJoint","_axis","_enableMotor","_motorSpeed","_maxMotorForce","_enableLimit","_lowerTranslation","_upperTranslation","radian","cos","sin","enableMotor","motorSpeed","maxMotorForce","enableLimit","lowerTranslation","upperTranslation","create_PrismaticJoint","set_Joint_EnableMotor","set_Joint_SetMotorSpeed","set_Joint_SetMaxMotorTorque","set_Joint_EnableLimit","set_Joint_SetLimits","atan2","PulleyJoint","selfGroundPoint","otherGroundPoint","posA","posB","groundA","groundB","create_PulleyJoint","RevoluteJoint","_maxMotorTorque","_lowerAngle","_upperAngle","global","maxMotorTorque","lowerAngle","upperAngle","create_RevoluteJoint","WeldJoint","create_WeldJoint","set_Joint_frequencyAndDampingRatio","WheelJoint","create_WheelJoint","Physics2DDebugDraw","DrawString_color","Red","Green","_camera","m_center","m_extent","m_zoom","m_width","m_height","_mG","Graphics","graphics","_textSp","_textG","addChild","render","ctx","_renderToGraphic","world","save","PIXEL_RATIO","_lineWidth","layaToPhyValue","DebugDraw","DrawDebugData","restore","PushTransform","tx","ty","translate","rotate","PopTransform","mG","textG","lineWidth","camera","c","ClassUtils","regClass"],"sources":["../../src/layaAir/laya/physics/Collider2D/ColliderStructInfo.ts","../../src/layaAir/laya/physics/Physics2DOption.ts","../../src/layaAir/laya/physics/Physics2D.ts","../../src/layaAir/laya/physics/RigidBody2DInfo.ts","../../src/layaAir/laya/physics/RigidBody.ts","../../src/layaAir/laya/physics/Collider2D/ColliderBase.ts","../../src/layaAir/laya/physics/Collider2D/BoxCollider.ts","../../src/layaAir/laya/physics/Collider2D/ChainCollider.ts","../../src/layaAir/laya/physics/Collider2D/CircleCollider.ts","../../src/layaAir/laya/physics/Collider2D/EdgeCollider.ts","../../src/layaAir/laya/physics/Collider2D/PolygonCollider.ts","../../src/layaAir/laya/physics/joint/JointBase.ts","../../src/layaAir/laya/physics/joint/JointDefStructInfo.ts","../../src/layaAir/laya/physics/joint/DistanceJoint.ts","../../src/layaAir/laya/physics/joint/GearJoint.ts","../../src/layaAir/laya/physics/joint/MotorJoint.ts","../../src/layaAir/laya/physics/joint/MouseJoint.ts","../../src/layaAir/laya/physics/joint/PrismaticJoint.ts","../../src/layaAir/laya/physics/joint/PulleyJoint.ts","../../src/layaAir/laya/physics/joint/RevoluteJoint.ts","../../src/layaAir/laya/physics/joint/WeldJoint.ts","../../src/layaAir/laya/physics/joint/WheelJoint.ts","../../src/layaAir/laya/physics/Physics2DDebugDraw.ts","../../src/layaAir/laya/physics/ModuleDef.ts"],"sourcesContent":["export enum PhysicsShape {\n    BoxShape,\n    CircleShape,\n    PolygonShape,\n    ChainShape,\n    EdgeShape,\n}\n\nexport class FixtureBox2DDef {\n    density: number;\n    friction: number;\n    isSensor: boolean;\n    restitution: number;\n    shape: PhysicsShape;//Box2D Shape\n    groupIndex: number;\n}","/**\n *  Physics2DOption 用于配置2D物理的默认参数\n */\nexport class Physics2DOption {\n\n    /**设置是否允许休眠，休眠可以提高稳定性和性能，但通常会牺牲准确性*/\n    static allowSleeping: boolean = false;\n\n    /**重力 （单位：像素）*/\n    static gravity = { x: 0, y: 9.8 };\n\n    /**是否由外部跟新*/\n    static customUpdate: boolean = false;\n\n    /**旋转迭代次数，增大数字会提高精度，但是会降低性能*/\n    static velocityIterations: number = 8;\n\n    /**位置迭代次数，增大数字会提高精度，但是会降低性能*/\n    static positionIterations: number = 3;\n\n    /**2D游戏默认单位为像素，物理默认单位为米，此值设置了像素和米的转换比率，默认50像素=1米*/\n    static pixelRatio: number = 50;\n\n    /**是否开启物理绘制*/\n    static debugDraw: boolean = true;\n\n    /**是否绘制形状*/\n    static drawShape: boolean = true;\n\n    /**是否绘制关节*/\n    static drawJoint: boolean = true;\n\n    /**是否绘制包围盒*/\n    static drawAABB: boolean = false;\n\n    /**是否绘制质心*/\n    static drawCenterOfMass: boolean = false;\n}","import { Sprite } from \"../display/Sprite\"\nimport { EventDispatcher } from \"../events/EventDispatcher\"\nimport { Point } from \"../maths/Point\"\nimport { ILaya } from \"../../ILaya\";\nimport { LayaEnv } from \"../../LayaEnv\";\nimport { Physics2DOption } from \"./Physics2DOption\";\nimport { Vector2 } from \"../maths/Vector2\";\nimport { IPhysiscs2DFactory } from \"./IPhysiscs2DFactory\";\nimport { SingletonList } from \"../utils/SingletonList\";\nimport { RigidBody } from \"./RigidBody\";\nimport { Laya } from \"../../Laya\";\n\n/**\n * 2D物理引擎\n */\nexport class Physics2D extends EventDispatcher {\n\n    /**@private */\n    private static _I: Physics2D;\n\n    /**@private 是否已经激活*/\n    private _enabled: boolean;\n\n    /**@private 根容器*/\n    private _worldRoot: Sprite;\n\n    /**@private 空的body节点，给一些不需要节点的关节使用*/\n    _emptyBody: any;\n    /**@private */\n    _eventList: any[] = [];\n\n    _factory: IPhysiscs2DFactory;\n\n    /**@private 需要同步实时跟新数据列表*/\n    _rigiBodyList: SingletonList<RigidBody>;\n    /**@private 需要同步物理数据的列表；使用后会及时释放*/\n    _updataattributeLists: SingletonList<RigidBody>;\n\n    /**全局物理单例*/\n    static get I(): Physics2D {\n        return Physics2D._I || (Physics2D._I = new Physics2D());\n    }\n\n    /**\n     * 设置物理绘制\n     */\n    set enableDebugDraw(enable: boolean) {\n        if (enable) {\n            this._factory.createDebugDraw(this._factory.drawFlags_shapeBit);\n        } else {\n            this._factory.removeDebugDraw();\n        }\n    }\n\n    /**\n     * 是否绘制Shape\n     */\n    set drawShape(enable: boolean) {\n        let flag = this._factory.drawFlags_shapeBit;\n        if (enable) {\n            this._factory.appendFlags(flag);\n        } else {\n            this._factory.clearFlags(flag);\n        }\n    }\n\n    /**\n     * 是否绘制Joint\n     */\n    set drawJoint(enable: boolean) {\n        let flag = this._factory.drawFlags_jointBit;\n        if (enable) {\n            this._factory.appendFlags(flag);\n        } else {\n            this._factory.clearFlags(flag);\n        }\n    }\n\n    /**\n     * 是否绘制AABB\n     */\n    set drawAABB(enable: boolean) {\n        let flag = this._factory.drawFlags_aabbBit;\n        if (enable) {\n            this._factory.appendFlags(flag);\n        } else {\n            this._factory.clearFlags(flag);\n        }\n    }\n\n    /**\n    * 是否绘制Pair\n    */\n    set drawPair(enable: boolean) {\n        let flag = this._factory.drawFlags_pairBit;\n        if (enable) {\n            this._factory.appendFlags(flag);\n        } else {\n            this._factory.clearFlags(flag);\n        }\n    }\n\n    /**\n    * 是否绘制CenterOfMass\n    */\n    set drawCenterOfMass(enable: boolean) {\n        let flag = this._factory.drawFlags_centerOfMassBit;\n        if (enable) {\n            this._factory.appendFlags(flag);\n        } else {\n            this._factory.clearFlags(flag);\n        }\n    }\n\n    enable(): Promise<void> {\n        if (this._factory) {\n            return this._factory.initialize().then(() => {\n                this.start();\n                return Promise.resolve();\n            });\n        }\n        else\n            return Promise.resolve();\n    }\n\n    /**\n    * 销毁当前物理世界\n    */\n    destroyWorld() {\n        this._enabled = false;\n        this._factory.destroyWorld();\n        ILaya.physicsTimer.clear(this, this._update);\n    }\n\n    /**\n     * 开启物理世界\n     */\n    start(): void {\n        if (!this._enabled) {\n            this._enabled = true;\n            this._factory.start();\n            this.allowSleeping = Physics2DOption.allowSleeping;\n            this._emptyBody = this._factory.createBody(null);\n        } else {\n            ILaya.physicsTimer.clear(this, this._update);\n        }\n\n        if (Physics2DOption.debugDraw) {\n            this.enableDebugDraw = true;\n            this.drawShape = Physics2DOption.drawShape;\n            this.drawJoint = Physics2DOption.drawJoint;\n            this.drawAABB = Physics2DOption.drawAABB;\n            this.drawCenterOfMass = Physics2DOption.drawCenterOfMass;\n        } else {\n            this.enableDebugDraw = false;\n        }\n        if (!this._rigiBodyList) this._rigiBodyList = new SingletonList<RigidBody>();\n        else this._rigiBodyList.clear();\n\n        if (!this._updataattributeLists) this._updataattributeLists = new SingletonList<RigidBody>();\n        else this._updataattributeLists.clear();\n\n        if (!Physics2DOption.customUpdate && LayaEnv.isPlaying)\n            ILaya.physicsTimer.frameLoop(1, this, this._update);\n    }\n\n    /**@internal */\n    addRigidBody(body: RigidBody) {\n        this._rigiBodyList.add(body);\n    }\n\n    /**@internal */\n    removeRigidBody(body: RigidBody) {\n        this._rigiBodyList.remove(body);\n    }\n\n    /**@internal */\n    updataRigidBodyAttribute(body: RigidBody) {\n        this._updataattributeLists.add(body);\n    }\n\n    /**@internal */\n    removeRigidBodyAttribute(body: RigidBody) {\n        this._updataattributeLists.remove(body);\n    }\n\n    /**@private*/\n    private _update(): void {\n        //同步渲染世界参数到物理世界\n        for (var i = 0, n = this._updataattributeLists.length; i < n; i++) {\n            this._updataattributeLists.elements[i].updatePhysicsAttribute()\n        }\n        this._updataattributeLists.clear();\n        //时间步太长，会导致错误穿透\n        var delta = Math.min(ILaya.timer.delta / 1000, 0.033);\n        this._factory.update(delta);\n        //同步物理坐标到渲染坐标\n        this._updatePhysicsTransformToRender();\n        //同步事件\n        var len: number = this._eventList.length;\n        if (len > 0) {\n            for (var i: number = 0; i < len; i += 2) {\n                this._factory.sendEvent(this._eventList[i], this._eventList[i + 1]);\n            }\n            this._eventList.length = 0;\n        }\n    }\n\n    /**@private*/\n    _updatePhysicsTransformToRender() {\n        for (var i = 0, n = this._rigiBodyList.length; i < n; i++) {\n            this._rigiBodyList.elements[i].updatePhysicsTransformToRender()\n        }\n    }\n\n    /**\n     * 停止物理世界\n     */\n    stop(): void {\n        this._rigiBodyList.clear();\n        this._updataattributeLists.clear();\n        ILaya.physicsTimer.clear(this, this._update);\n    }\n\n    /**\n     * 设置是否允许休眠，休眠可以提高稳定性和性能，但通常会牺牲准确性\n     */\n    get allowSleeping(): boolean {\n        return this._factory.allowSleeping;\n    }\n\n    set allowSleeping(value: boolean) {\n        this._factory.allowSleeping = value;\n    }\n\n    /**\n    * 物理世界重力环境，默认值为{x:0,y:10}\n    * 如果修改y方向重力方向向上，可以直接设置gravity.y=-10;\n    */\n    get gravity(): any {\n        return this._factory.gravity;\n    }\n\n    set gravity(value: Vector2) {\n        this._factory.gravity = value;\n    }\n\n    /**获得刚体总数量*/\n    getBodyCount(): number {\n        return this._factory.bodyCount;\n    }\n\n    /**获得碰撞总数量*/\n    getContactCount(): number {\n        return this._factory.contactCount;\n    }\n\n    /**获得关节总数量*/\n    getJointCount(): number {\n        return this._factory.jointCount;\n    }\n\n    /**物理世界根容器，将根据此容器作为物理世界坐标世界，进行坐标变换，默认值为stage\n     * 设置特定容器后，就可整体位移物理对象，保持物理世界不变。\n     * 注意，仅会在 set worldRoot 时平移一次，其他情况请配合 updatePhysicsByWorldRoot 函数使用*/\n    get worldRoot(): Sprite {\n        return this._worldRoot || ILaya.stage;\n    }\n\n    set worldRoot(value: Sprite) {\n        this._worldRoot = value;\n        if (value) {\n            //TODO：\n            var p: Point = value.localToGlobal(Point.TEMP.setTo(0, 0));\n            this._factory.shiftOrigin(-p.x, -p.y);\n        }\n    }\n\n    /**\n     * 设定 worldRoot 后，手动触发物理世界更新\n     */\n    updatePhysicsByWorldRoot() {\n        if (!!this.worldRoot) {\n            var p: Point = this.worldRoot.localToGlobal(Point.TEMP.setTo(0, 0));\n            this._factory.shiftOrigin(-p.x, -p.y);\n        }\n    }\n}\n\nLaya.addInitCallback(() => Physics2D.I.enable());","import { Vector2 } from \"../maths/Vector2\";\n\nexport class RigidBody2DInfo {\n    position: Vector2 = new Vector2()\n    angle: number;\n    allowSleep: boolean\n    angularDamping: number;\n    angularVelocity: number;\n    bullet: boolean;\n    fixedRotation: boolean;\n    gravityScale: number;\n    linearDamping: number;\n    linearVelocity: Vector2 = new Vector2();\n    type: string;\n    group: number;\n}","import { ColliderBase } from \"./Collider2D/ColliderBase\";\nimport { Component } from \"../components/Component\"\nimport { Sprite } from \"..//display/Sprite\"\nimport { Point } from \"../maths/Point\"\nimport { Utils } from \"../utils/Utils\"\nimport { Physics2D } from \"./Physics2D\";\nimport { RigidBody2DInfo } from \"./RigidBody2DInfo\";\nimport { IV2, Vector2 } from \"../maths/Vector2\";\n\n/**\n * 2D刚体，显示对象通过RigidBody和物理世界进行绑定，保持物理和显示对象之间的位置同步\n * 物理世界的位置变化会自动同步到显示对象，显示对象本身的位移，旋转（父对象位移无效）也会自动同步到物理世界\n * 如果想整体位移物理世界，可以Physics2D.I.worldRoot=场景，然后移动场景即可\n * 可以通过IDE-\"项目设置\"-\"2D物理\"-\"是否开启2D物理绘制\" 开启物理辅助线显示，或者通过代码Physics2D.I.enableDebugDraw=true;\n */\nexport class RigidBody extends Component {\n\n    /** 用于判断节点属性更改时更新物理属性*/\n    private static changeFlag: number = Sprite.Sprite_GlobalDeltaFlage_Position_X | Sprite.Sprite_GlobalDeltaFlage_Position_Y | Sprite.Sprite_GlobalDeltaFlage_Rotation | Sprite.Sprite_GlobalDeltaFlage_Scale_X | Sprite.Sprite_GlobalDeltaFlage_Scale_Y\n    /**\n     * 刚体类型，支持三种类型static，dynamic和kinematic类型，默认为dynamic类型\n     * static为静态类型，静止不动，不受重力影响，质量无限大，可以通过节点移动，旋转，缩放进行控制\n     * dynamic为动态类型，受重力影响\n     * kinematic为运动类型，不受重力影响，可以通过施加速度或者力的方式使其运动\n     */\n    protected _type: string = \"dynamic\";\n    /**是否允许休眠，允许休眠能提高性能*/\n    protected _allowSleep: boolean = true;\n    /**角速度，设置会导致旋转*/\n    protected _angularVelocity: number = 0;\n    /**旋转速度阻尼系数，范围可以在0到无穷大之间，0表示没有阻尼，无穷大表示满阻尼，通常阻尼的值应该在0到0.1之间*/\n    protected _angularDamping: number = 0;\n    /**线性运动速度，比如{x:10,y:10}*/\n    protected _linearVelocity: any = { x: 0, y: 0 };\n    /**线性速度阻尼系数，范围可以在0到无穷大之间，0表示没有阻尼，无穷大表示满阻尼，通常阻尼的值应该在0到0.1之间*/\n    protected _linearDamping: number = 0;\n    /**是否高速移动的物体，设置为true，可以防止高速穿透*/\n    protected _bullet: boolean = false;\n    /**是否允许旋转，如果不希望刚体旋转，这设置为false*/\n    protected _allowRotation: boolean = true;\n    /**重力缩放系数，设置为0为没有重力*/\n    protected _gravityScale: number = 1;\n\n    /**[只读] 指定了该主体所属的碰撞组，默认为0，碰撞规则如下：\n     * 1.如果两个对象group相等\n     * \t\tgroup值大于零，它们将始终发生碰撞\n     * \t\tgroup值小于零，它们将永远不会发生碰撞\n     * \t\tgroup值等于0，则使用规则3\n     * 2.如果group值不相等，则使用规则3\n     * 3.每个刚体都有一个category类别，此属性接收位字段，范围为[1,2^31]范围内的2的幂\n     * 每个刚体也都有一个mask类别，指定与其碰撞的类别值之和（值是所有category按位AND的值）\n     */\n    group: number = 0;\n    /**[只读]碰撞类别，使用2的幂次方值指定，有32种不同的碰撞类别可用*/\n    category: number = 1;\n    /**[只读]指定冲突位掩码碰撞的类别，category位操作的结果*/\n    mask: number = -1;\n    /**[只读]自定义标签*/\n    label: string = \"RigidBody\";\n    /**[只读]原始刚体*/\n    protected _body: any;\n\n    /**\n     * @private \n     */\n    private _createBody(): void {\n        if (this._body || !this.owner) return;\n        let factory = Physics2D.I._factory;\n        var sp: Sprite = (<Sprite>this.owner);\n        var defRigidBodyDef = new RigidBody2DInfo();\n        defRigidBodyDef.position.setValue(sp.globalPosX, sp.globalPosY);\n        defRigidBodyDef.angle = Utils.toRadian(sp.globalRotation);\n        defRigidBodyDef.allowSleep = this._allowSleep;\n        defRigidBodyDef.angularDamping = this._angularDamping;\n        defRigidBodyDef.angularVelocity = this._angularVelocity;\n        defRigidBodyDef.bullet = this._bullet;\n        defRigidBodyDef.fixedRotation = !this._allowRotation;\n        defRigidBodyDef.gravityScale = this._gravityScale;\n        defRigidBodyDef.linearDamping = this._linearDamping;\n        defRigidBodyDef.group = this.group;\n        var obj: any = this._linearVelocity;\n        if (obj && obj.x != 0 || obj.y != 0) {\n            defRigidBodyDef.linearVelocity.setValue(obj.x, obj.y);\n        }\n        defRigidBodyDef.type = this._type;\n\n        this._body = factory.rigidBodyDef_Create(defRigidBodyDef);\n        this._needrefeshShape();\n        this._updateBodyType()\n    }\n\n    /**\n     * @private \n     * 同步Body 类型\n     */\n    private _updateBodyType() {\n        if (!this._body) return;\n        Physics2D.I._factory.set_rigidBody_type(this.body, this._type)\n        if (this.type == \"static\") {\n            Physics2D.I.removeRigidBody(this)\n        } else {\n            Physics2D.I.addRigidBody(this)\n        }\n    }\n\n    /** @override */\n    protected _onAwake(): void {\n        (<Sprite>this.owner).cacheGlobal = true;\n        this._createBody();\n        this.owner.on(\"GlobaChange\", this, this._globalChangeHandler)\n    }\n\n    /** @private */\n    private _globalChangeHandler(flag: number) {\n        if (flag & RigidBody.changeFlag) this._needrefeshShape()\n    }\n\n    /** @override */\n    protected _onEnable(): void {\n        this._createBody();\n        this.owner.on(\"GlobaChange\", this, this._globalChangeHandler)\n    }\n\n    /** @internal 通知需要跟新对象属性；下一帧执行*/\n    _needrefeshShape() {\n        Physics2D.I.updataRigidBodyAttribute(this);\n    }\n\n    /**\n     * @internal \n     * 同步节点坐标及旋转到物理世界,由系统调用\n     */\n    updatePhysicsAttribute(): void {\n        var factory = Physics2D.I._factory;\n        let point = this.GetWorldPoint(0, 0);\n        factory.set_RigibBody_Transform(this._body, point.x, point.y, Utils.toRadian((<Sprite>this.owner).globalRotation));\n        var comps: any[] = this.owner.getComponents(ColliderBase);\n        if (comps) {\n            for (var i: number = 0, n: number = comps.length; i < n; i++) {\n                var collider: ColliderBase = comps[i];\n                collider.rigidBody = this;\n                collider.refresh();\n            }\n            factory.retSet_rigidBody_MassData(this._body);\n            factory.set_rigidbody_Awake(this._body, true);\n            this.owner.event(\"shapeChange\");\n        }\n    }\n\n    /**\n     * @internal \n     * 同步物理坐标到游戏坐标,由系统调用\n     */\n    updatePhysicsTransformToRender(): void {\n        if (this.type == \"static\") {\n            return;\n        }\n        var factory = Physics2D.I._factory;\n        if (Physics2D.I._factory.get_rigidBody_IsAwake(this._body)) {\n            var pos = Vector2.TempVector2;\n            factory.get_RigidBody_Position(this.body, pos);\n            var sp: Sprite = (<Sprite>this.owner);\n            sp.setGlobalPos(pos.x, pos.y);\n            sp.globalRotation = Utils.toAngle(factory.get_RigidBody_Angle(this.body));\n        }\n    }\n\n    /** @override */\n    protected _onDisable(): void {\n        Physics2D.I.removeRigidBody(this);\n        Physics2D.I.removeRigidBodyAttribute(this);\n        this.owner.off(\"GlobaChange\", this, this._globalChangeHandler)\n        //添加到物理世界\n        this._body && Physics2D.I._factory.removeBody(this._body);\n        this._body = null;\n    }\n\n    /** @override */\n    protected _onDestroy(): void {\n        Physics2D.I.removeRigidBody(this);\n        Physics2D.I.removeRigidBodyAttribute(this);\n        this.owner.off(\"GlobaChange\", this, this._globalChangeHandler)\n        //添加到物理世界\n        this._body && Physics2D.I._factory.removeBody(this._body);\n        this._body = null;\n    }\n\n    /**获得原始body对象 */\n    getBody(): any {\n        if (!this._body) this._onAwake();\n        return this._body;\n    }\n\n    _getOriBody(): any {\n        return this._body;\n    }\n\n    /**[只读]获得原始body对象 */\n    get body(): any {\n        if (!this._body) this._onAwake();\n        return this._body;\n    }\n\n    /**\n     * 对刚体施加力\n     * @param\tposition 施加力的点，如{x:100,y:100}，全局坐标\n     * @param\tforce\t施加的力，如{x:0.1,y:0.1}\n     */\n    applyForce(position: IV2, force: IV2): void {\n        if (!this._body) this._onAwake();\n        Physics2D.I._factory.rigidBody_applyForce(this._body, force, position);\n    }\n\n    /**\n     * 从中心点对刚体施加力，防止对象旋转\n     * @param\tforce\t施加的力，如{x:0.1,y:0.1}\n     */\n    applyForceToCenter(force: IV2): void {\n        if (!this._body) this._onAwake();\n        Physics2D.I._factory.rigidBody_applyForceToCenter(this._body, force);\n    }\n\n    /**\n     * 施加速度冲量，添加的速度冲量会与刚体原有的速度叠加，产生新的速度\n     * @param\tposition 施加力的点，如{x:100,y:100}，全局坐标\n     * @param\timpulse\t施加的速度冲量，如{x:0.1,y:0.1}\n     */\n    applyLinearImpulse(position: IV2, impulse: IV2): void {\n        if (!this._body) this._onAwake();\n        Physics2D.I._factory.rigidbody_ApplyLinearImpulse(this._body, impulse, position);\n    }\n\n    /**\n     * 施加速度冲量，添加的速度冲量会与刚体原有的速度叠加，产生新的速度\n     * @param\timpulse\t施加的速度冲量，如{x:0.1,y:0.1}\n     */\n    applyLinearImpulseToCenter(impulse: IV2): void {\n        if (!this._body) this._onAwake();\n        Physics2D.I._factory.rigidbody_ApplyLinearImpulseToCenter(this._body, impulse);\n    }\n\n    /**\n     * 对刚体施加扭矩，使其旋转\n     * @param\ttorque\t施加的扭矩\n     */\n    applyTorque(torque: number): void {\n        if (!this._body) this._onAwake();\n        Physics2D.I._factory.rigidbody_applyTorque(this._body, torque);\n    }\n\n    /**\n     * 设置速度，比如{x:10,y:10}\n     * @param\tvelocity\n     */\n    setVelocity(velocity: IV2): void {\n        if (!this._body) this._onAwake();\n        Physics2D.I._factory.set_rigidBody_linearVelocity(this._body, velocity);\n    }\n\n    /**\n     * 设置角度\n     * @param\tvalue 单位为角度\n     */\n    setAngle(value: any): void {\n        if (!this._body) this._onAwake();\n        var factory = Physics2D.I._factory;\n        const p = this.GetWorldPoint(0, 0);\n        factory.set_RigibBody_Transform(this._body, p.x, p.y, value);\n        factory.set_rigidbody_Awake(this._body, true);\n    }\n\n    /**获得刚体质量*/\n    getMass(): number {\n        return this._body ? Physics2D.I._factory.get_rigidbody_Mass(this._body) : 0;\n    }\n\n    /**\n     * 获得质心的相对节点0,0点的位置偏移\n     */\n    getCenter(): any {\n        if (!this._body) this._onAwake();\n        var p: IV2 = Physics2D.I._factory.get_rigidBody_Center(this._body);\n        return p;\n    }\n\n    /**\n     * 获得质心的世界坐标，相对于Physics2D.I.worldRoot节点\n     */\n    getWorldCenter(): any {\n        if (!this._body) this._onAwake();\n        var p: IV2 = Physics2D.I._factory.get_rigidBody_WorldCenter(this._body);\n        return p;\n    }\n\n    /**\n     * 刚体类型，支持三种类型static，dynamic和kinematic类型\n     * static为静态类型，静止不动，不受重力影响，质量无限大，可以通过节点移动，旋转，缩放进行控制\n     * dynamic为动态类型，接受重力影响\n     * kinematic为运动类型，不受重力影响，可以通过施加速度或者力的方式使其运动\n     */\n    get type(): string {\n        return this._type;\n    }\n\n    set type(value: string) {\n        this._type = value;\n        this._updateBodyType()\n    }\n\n    /**重力缩放系数，设置为0为没有重力*/\n    get gravityScale(): number {\n        return this._gravityScale;\n    }\n\n    set gravityScale(value: number) {\n        this._gravityScale = value;\n        if (this._body) Physics2D.I._factory.set_rigidBody_gravityScale(this._body, value);\n    }\n\n    /**是否允许旋转，如果不希望刚体旋转，这设置为false*/\n    get allowRotation(): boolean {\n        return this._allowRotation;\n    }\n\n    set allowRotation(value: boolean) {\n        this._allowRotation = value;\n        if (this._body) Physics2D.I._factory.set_rigidBody_allowRotation(this._body, !value);\n    }\n\n    /**是否允许休眠，允许休眠能提高性能*/\n    get allowSleep(): boolean {\n        return this._allowSleep;\n    }\n\n    set allowSleep(value: boolean) {\n        this._allowSleep = value;\n        if (this._body) Physics2D.I._factory.set_rigidBody_allowSleep(this._body, value);\n    }\n\n    /**旋转速度阻尼系数，范围可以在0到无穷大之间，0表示没有阻尼，无穷大表示满阻尼，通常阻尼的值应该在0到0.1之间*/\n    get angularDamping(): number {\n        return this._angularDamping;\n    }\n\n    set angularDamping(value: number) {\n        this._angularDamping = value;\n        if (this._body) Physics2D.I._factory.set_rigidBody_angularDamping(this._body, value);\n    }\n\n    /**角速度，设置会导致旋转*/\n    get angularVelocity(): number {\n        if (this._body) return Physics2D.I._factory.get_rigidBody_angularVelocity(this._body);\n        return this._angularVelocity;\n    }\n\n    set angularVelocity(value: number) {\n        this._angularVelocity = value;\n        if (this._body) Physics2D.I._factory.set_rigidBody_angularVelocity(this.body, value);\n    }\n\n    /**线性速度阻尼系数，范围可以在0到无穷大之间，0表示没有阻尼，无穷大表示满阻尼，通常阻尼的值应该在0到0.1之间*/\n    get linearDamping(): number {\n        return this._linearDamping;\n    }\n\n    set linearDamping(value: number) {\n        this._linearDamping = value;\n        if (this._body) Physics2D.I._factory.set_rigidBody_linearDamping(this._body, value);\n    }\n\n    /**线性运动速度，比如{x:5,y:5}*/\n    get linearVelocity(): IV2 {\n        if (this._body) {\n            var vec: IV2 = Physics2D.I._factory.get_rigidBody_linearVelocity(this._body);\n            return { x: vec.x, y: vec.y };\n        }\n        return this._linearVelocity;\n    }\n\n    set linearVelocity(value: any) {\n        if (!value) return;\n        if (value instanceof Array) {\n            value = { x: value[0], y: value[1] };\n        }\n        this._linearVelocity = value;\n        if (this._body) Physics2D.I._factory.set_rigidBody_linearVelocity(this._body, value);\n    }\n\n    /**是否高速移动的物体，设置为true，可以防止高速穿透*/\n    get bullet(): boolean {\n        return this._bullet;\n    }\n\n    set bullet(value: boolean) {\n        this._bullet = value;\n        if (this._body) Physics2D.I._factory.set_rigidBody_bullet(this._body, value);\n    }\n\n    /** \n     * 获得相对body的世界坐标\n     * @param x (单位： 像素)\n     * @param y (单位： 像素)\n    */\n    GetWorldPoint(x: number, y: number) {\n        return (<Sprite>this.owner).getGlobalMatrix().transformPoint(Point.TEMP.setTo(x, y))\n    }\n\n    /** \n     * 获得相对body的本地坐标\n     * @param x (单位： 像素)\n     * @param y (单位： 像素)\n    */\n    GetLocalPoint(x: number, y: number) {\n        return (<Sprite>this.owner).getGlobalMatrix().transformPoint(Point.TEMP.setTo(x, y))\n    }\n\n}","import { Component } from \"../../components/Component\";\nimport { FixtureBox2DDef, PhysicsShape } from \"./ColliderStructInfo\";\nimport { Physics2D } from \"../Physics2D\";\nimport { RigidBody } from \"../RigidBody\";\nimport { Sprite } from \"../../display/Sprite\";\n\n\n/**\n * 碰撞体基类\n */\nexport class ColliderBase extends Component {\n\n    /**FixtureBox2DDef 数据 */\n    private static TempDef: FixtureBox2DDef = new FixtureBox2DDef()\n    /**是否是传感器，传感器能够触发碰撞事件，但不会产生碰撞反应*/\n    private _isSensor: boolean = false;\n    /**密度值，值可以为零或者是正数，建议使用相似的密度，这样做可以改善堆叠稳定性，默认值为10*/\n    private _density: number = 10;\n    /**摩擦力，取值范围0-1，值越大，摩擦越大，默认值为0.2*/\n    private _friction: number = 0.2;\n    /**弹性系数，取值范围0-1，值越大，弹性越大，默认值为0*/\n    private _restitution: number = 0;\n    /**标签*/\n    label: string;\n    /**@private box2D fixture Def */\n    protected _fixtureDef: any;\n    /**@readonly[只读]b2Fixture对象 */\n    fixture: any;\n    /**刚体引用*/\n    rigidBody: RigidBody;\n    /**@internal shape类型标记*/\n    protected _physicShape: PhysicsShape;\n\n    /**相对节点的x轴偏移*/\n    private _x: number = 0;\n    /**相对节点的y轴偏移*/\n    private _y: number = 0;\n\n    /**相对节点的x轴偏移*/\n    get x(): number {\n        return this._x;\n    }\n\n    set x(value: number) {\n        if (this._x == value) return;\n        this._x = value;\n        this._needupdataShapeAttribute();\n    }\n\n    /**相对节点的y轴偏移*/\n    get y(): number {\n        return this._y;\n    }\n\n    set y(value: number) {\n        if (this._y == value) return;\n        this._y = value;\n        this._needupdataShapeAttribute();\n    }\n\n    /**\n     * @internal\n     * 获得节点的全局缩放X\n     */\n    protected get scaleX(): number {\n        return (<Sprite>this.owner).globalScaleX;\n    }\n\n    /**\n     * @internal\n     * 获得节点的全局缩放Y\n     */\n    protected get scaleY(): number {\n        return (<Sprite>this.owner).globalScaleY;\n    }\n\n\n    /**\n     * 创建一个新的 <code>ColliderBase</code> 实例。\n     */\n    constructor() {\n        super();\n        this._singleton = false;\n    }\n\n    /**@internal 设置shape数据 */\n    protected _setShapeData(shape: any): void {\n        throw (\"ColliderBase: must override it.\");\n    }\n\n    /**@internal 创建获得相对于描点x的偏移 */\n    protected get pivotoffx(): number {\n        return this._x - (<Sprite>this.owner).pivotX;\n    }\n\n    /**@internal 创建获得相对于描点y的偏移 */\n    protected get pivotoffy(): number {\n        return this._y - (<Sprite>this.owner).pivotY;\n    }\n\n    /**@private 创建Shape*/\n    protected createfixture(): any {\n        let factory = Physics2D.I._factory;\n        var body: any = this.rigidBody.body;\n        var def: any = ColliderBase.TempDef;\n        def.density = this.density;\n        def.friction = this.friction;\n        def.isSensor = this.isSensor;\n        def.restitution = this.restitution;\n        def.shape = this._physicShape;\n        let fixtureDef = factory.createFixtureDef(def);\n        this._setShapeData(fixtureDef._shape);\n        this.fixture = factory.createfixture(body, fixtureDef);\n    }\n\n    /**@private 设置shape属性*/\n    protected resetFixtureData() {\n        var def: any = ColliderBase.TempDef;\n        def.density = this.density;\n        def.friction = this.friction;\n        def.isSensor = this.isSensor;\n        def.restitution = this.restitution;\n        Physics2D.I._factory.resetFixtureData(this.fixture, def);\n        this._setShapeData(this.fixture.shape);\n    }\n\n    protected _onEnable(): void {\n        if (this.owner.getComponent(RigidBody)) {\n            this.rigidBody = this.owner.getComponent(RigidBody)\n            this._needupdataShapeAttribute();\n        }\n    }\n\n    protected _onAwake(): void {\n        if (this.owner.getComponent(RigidBody)) {\n            this.rigidBody = this.owner.getComponent(RigidBody)\n            this._needupdataShapeAttribute();\n        }\n    }\n\n    /**通知rigidBody 更新shape 属性值 */\n    protected _needupdataShapeAttribute(): void {\n        if (!this.rigidBody) {\n            return;\n        }\n        this.rigidBody._needrefeshShape();\n    }\n\n\n    /**是否是传感器，传感器能够触发碰撞事件，但不会产生碰撞反应*/\n    get isSensor(): boolean {\n        return this._isSensor;\n    }\n\n    set isSensor(value: boolean) {\n        if (this._isSensor == value) return;\n        this._isSensor = value;\n        this._needupdataShapeAttribute();\n    }\n\n    /**密度值，值可以为零或者是正数，建议使用相似的密度，这样做可以改善堆叠稳定性，默认值为10*/\n    get density(): number {\n        return this._density;\n    }\n\n    set density(value: number) {\n        if (this._density == value) return;\n        this._density = value;\n        this._needupdataShapeAttribute();\n    }\n\n    /**摩擦力，取值范围0-1，值越大，摩擦越大，默认值为0.2*/\n    get friction(): number {\n        return this._friction;\n    }\n\n    set friction(value: number) {\n        if (this._friction == value) return;\n        this._friction = value;\n        this._needupdataShapeAttribute();\n    }\n\n    /**弹性系数，取值范围0-1，值越大，弹性越大，默认值为0*/\n    get restitution(): number {\n        return this._restitution;\n    }\n\n    set restitution(value: number) {\n        if (this._restitution == value) return;\n        this._restitution = value;\n        this._needupdataShapeAttribute();\n    }\n\n    /**\n     * @private\n     * 碰撞体参数发生变化后，刷新物理世界碰撞信息\n     */\n    refresh(): void {\n        if (!this.enabled) {\n            return;\n        }\n        let factory = Physics2D.I._factory;\n        if (!this.fixture) this.createfixture();\n        else this.resetFixtureData();\n        factory.set_fixtureDef_GroupIndex(this.fixture, this.rigidBody.group);\n        factory.set_fixtureDef_CategoryBits(this.fixture, this.rigidBody.category);\n        factory.set_fixtureDef_maskBits(this.fixture, this.rigidBody.mask);\n        factory.set_fixture_collider(this.fixture, this);\n    }\n\n    protected _onDisable(): void {\n        let factory = Physics2D.I._factory;\n        if (this.fixture && this.rigidBody._getOriBody()) {\n            factory.rigidBody_DestroyFixture(this.rigidBody.body, this.fixture);\n        }\n        this.fixture = null;\n        this.rigidBody = null;\n    }\n}\n","import { ColliderBase } from \"./ColliderBase\";\nimport { Physics2D } from \"../Physics2D\";\nimport { PhysicsShape } from \"./ColliderStructInfo\";\n\n\n/**\n * 2D矩形碰撞体\n */\nexport class BoxCollider extends ColliderBase {\n\n    /**矩形宽度*/\n    private _width: number = 100;\n    /**矩形高度*/\n    private _height: number = 100;\n\n    /**\n    * 创建一个新的 <code>BoxCollider</code> 实例。\n    */\n    constructor() {\n        super();\n        this._physicShape = PhysicsShape.BoxShape;\n    }\n\n    /**@override */\n    protected _setShapeData(shape: any): void {\n        let helfW: number = this._width * 0.5;\n        let helfH: number = this._height * 0.5;\n        var center = {\n            x: helfW + this.pivotoffx,\n            y: helfH + this.pivotoffy\n        }\n        Physics2D.I._factory.set_collider_SetAsBox(shape, helfW, helfH, center, Math.abs(this.scaleX), Math.abs(this.scaleY));\n    }\n\n    /**矩形宽度*/\n    get width(): number {\n        return this._width;\n    }\n\n    set width(value: number) {\n        if (value <= 0) throw \"BoxCollider size cannot be less than 0\";\n        if (this._width == value) return;\n        this._width = value;\n        this._needupdataShapeAttribute();\n    }\n\n    /**矩形高度*/\n    get height(): number {\n        return this._height;\n    }\n\n    set height(value: number) {\n        if (value <= 0) throw \"BoxCollider size cannot be less than 0\";\n        if (this._height == value) return;\n        this._height = value;\n        this._needupdataShapeAttribute();\n    }\n\n}\n","import { ColliderBase } from \"./ColliderBase\";\nimport { Physics2D } from \"../Physics2D\";\nimport { PhysicsShape } from \"./ColliderStructInfo\";\nimport { Sprite } from \"../../display/Sprite\";\n\n/**\n * 2D线形碰撞体\n */\nexport class ChainCollider extends ColliderBase {\n\n    /**\n     * @deprecated\n     * 用逗号隔开的点的集合，格式：x,y,x,y ...\n     */\n    private _points: string = \"0,0,100,0\";\n\n    /**顶点数据*/\n    private _datas: number[] = [];\n\n    /**是否是闭环，注意不要有自相交的链接形状，它可能不能正常工作*/\n    private _loop: boolean = false;\n\n    constructor() {\n        super();\n        this._physicShape = PhysicsShape.ChainShape;\n    }\n\n    /**\n    * @override\n    */\n    protected _setShapeData(shape: any): void {\n        var len: number = this._datas.length;\n        if (len % 2 == 1) throw \"ChainCollider datas lenth must a multiplier of 2\";\n        Physics2D.I._factory.set_ChainShape_data(shape, this.pivotoffx, this.pivotoffy, this._datas, this._loop, this.scaleX, this.scaleY);\n    }\n\n    /**\n     * @deprecated\n     * 用逗号隔开的点的集合，格式：x,y,x,y ...\n     */\n    get points(): string {\n        return this._points;\n    }\n    onAdded() {\n        super.onAdded();\n        let sp = this.owner as Sprite;\n        this._datas.push(0, 0, sp.width, 0, 0, sp.height, sp.width, sp.height);\n    }\n\n    set points(value: string) {\n        if (!value) throw \"ChainCollider points cannot be empty\";\n        this._points = value;\n        var arr: any[] = this._points.split(\",\");\n        let length = arr.length;\n        this._datas = [];\n        for (var i: number = 0, n: number = length; i < n; i++) {\n            this._datas.push(parseInt(arr[i]));\n        }\n        this._needupdataShapeAttribute();\n    }\n\n    /**顶点数据 x,y,x,y ...*/\n    get datas(): number[] {\n        return this._datas;\n    }\n\n    set datas(value: number[]) {\n        if (!value) throw \"ChainCollider datas cannot be empty\";\n        this._datas = value;\n        this._needupdataShapeAttribute();\n    }\n\n    /**是否是闭环，注意不要有自相交的链接形状，它可能不能正常工作*/\n    get loop(): boolean {\n        return this._loop;\n    }\n\n    set loop(value: boolean) {\n        if (this._loop == value) return;\n        this._loop = value;\n        this._needupdataShapeAttribute();\n    }\n}","import { ColliderBase } from \"./ColliderBase\";\nimport { Physics2D } from \"../Physics2D\";\nimport { PhysicsShape } from \"./ColliderStructInfo\";\n\n/**\n * 2D圆形碰撞体\n */\nexport class CircleCollider extends ColliderBase {\n\n    /**圆形半径，必须为正数*/\n    private _radius: number = 50;\n\n    constructor() {\n        super();\n        this._physicShape = PhysicsShape.CircleShape;\n    }\n\n    /**\n    * @override\n    */\n    protected _setShapeData(shape: any): void {\n        var scale: number = Math.max(Math.abs(this.scaleX), Math.abs(this.scaleY));\n        let radius = this.radius;\n        Physics2D.I._factory.set_CircleShape_radius(shape, radius, scale);\n        Physics2D.I._factory.set_CircleShape_pos(shape, this.x, this.y, scale);\n    }\n\n    /**圆形半径，必须为正数*/\n    get radius(): number {\n        return this._radius;\n    }\n\n    set radius(value: number) {\n        if (value <= 0) throw \"CircleCollider radius cannot be less than 0\";\n        if (this._radius == value) return;\n        this._radius = value;\n        this._needupdataShapeAttribute();\n    }\n\n\n}","import { ColliderBase } from \"./ColliderBase\";\nimport { Physics2D } from \"../Physics2D\";\nimport { PhysicsShape } from \"./ColliderStructInfo\";\n\n/**\n * 2D边框碰撞体\n */\nexport class EdgeCollider extends ColliderBase {\n    /**\n     * @deprecated\n     * 用逗号隔开的点的集合，注意只有两个点，格式：x,y,x,y\n     */\n    private _points: string = \"0,0,100,0\";\n\n    /**顶点数据*/\n    private _datas: number[] = [0, 0, 100, 0];\n\n    constructor() {\n        super();\n        this._physicShape = PhysicsShape.EdgeShape;\n    }\n\n    /**\n     * @override\n     */\n    protected _setShapeData(shape: any): void {\n        var len: number = this._datas.length;\n        if (len % 2 == 1) throw \"EdgeCollider points lenth must a multiplier of 2\";\n        Physics2D.I._factory.set_EdgeShape_data(shape, this.pivotoffx, this.pivotoffy, this._datas, this.scaleX, this.scaleY);\n    }\n\n    /**\n     * @deprecated\n     * 用逗号隔开的点的集合，注意只有两个点，格式：x,y,x,y*/\n    get points(): string {\n        return this._points;\n    }\n\n    set points(value: string) {\n        if (!value) throw \"EdgeCollider points cannot be empty\";\n        this._points = value;\n        var arr: any[] = this._points.split(\",\");\n        let length = arr.length;\n        this._datas = [];\n        for (var i: number = 0, n: number = length; i < n; i++) {\n            this._datas.push(parseInt(arr[i]));\n        }\n        this._needupdataShapeAttribute();\n    }\n\n    /**顶点数据 x,y,x,y ...*/\n    get datas(): number[] {\n        return this._datas;\n    }\n\n    set datas(value: number[]) {\n        if (!value) throw \"EdgeCollider points cannot be empty\";\n        this._datas = value;\n        this._needupdataShapeAttribute();\n    }\n}","import { ColliderBase } from \"./ColliderBase\";\nimport { Physics2D } from \"../Physics2D\";\nimport { PhysicsShape } from \"./ColliderStructInfo\";\nimport { Sprite } from \"../../display/Sprite\";\n\n/**\n * 2D多边形碰撞体，暂时不支持凹多边形，如果是凹多边形，先手动拆分为多个凸多边形\n * 节点个数最多是b2_maxPolygonVertices，这数值默认是8，所以点的数量不建议超过8个，也不能小于3个\n */\nexport class PolygonCollider extends ColliderBase {\n\n    /**\n     * @deprecated\n     * 用逗号隔开的点的集合，格式：x,y,x,y ...\n     */\n    private _points: string = \"50,0,100,100,0,100\";\n\n    /**顶点数据*/\n    private _datas: number[] = [];\n\n    constructor() {\n        super();\n        this._physicShape = PhysicsShape.PolygonShape;\n    }\n    onAdded() {\n        super.onAdded();\n        let sp = this.owner as Sprite;\n        this._datas.push(0, 0, sp.width, sp.height * 0.5, 0, sp.height);\n    }\n\n    /**\n    * @override\n    */\n    protected _setShapeData(shape: any): void {\n        var len: number = this.datas.length;\n        if (len < 6) throw \"PolygonCollider points must be greater than 3\";\n        if (len % 2 == 1) throw \"PolygonCollider points lenth must a multiplier of 2\";\n        Physics2D.I._factory.set_PolygonShape_data(shape, this.pivotoffx, this.pivotoffy, this.datas, this.scaleX, this.scaleY);\n    }\n\n    /**\n     * @deprecated\n     * 用逗号隔开的点的集合，格式：x,y,x,y ...\n     */\n    get points(): string {\n        return this._points;\n    }\n\n    set points(value: string) {\n        if (!value) throw \"PolygonCollider points cannot be empty\";\n        this._points = value;\n        var arr: any[] = this._points.split(\",\");\n        let length = arr.length;\n        this._datas = [];\n        for (var i: number = 0, n: number = length; i < n; i++) {\n            this._datas.push(parseInt(arr[i]))\n        }\n        this._needupdataShapeAttribute();\n    }\n\n    /**顶点数据 x,y,x,y ...*/\n    get datas(): number[] {\n        return this._datas;\n    }\n\n    set datas(value: number[]) {\n        if (!value) throw \"PolygonCollider points cannot be empty\";\n        this._datas = value;\n        this._needupdataShapeAttribute();\n    }\n}","import { Component } from \"../../components/Component\"\nimport { Sprite } from \"../../display/Sprite\";\nimport { Point } from \"../../maths/Point\";\nimport { IPhysiscs2DFactory } from \"../IPhysiscs2DFactory\";\nimport { Physics2D } from \"../Physics2D\"\nimport { RigidBody } from \"../RigidBody\";\n\n/**\n * 关节基类\n */\nexport class JointBase extends Component {\n    /**原生关节对象*/\n    protected _joint: any;\n\n    protected _factory: IPhysiscs2DFactory;\n    constructor() {\n        super();\n        this._factory = Physics2D.I._factory;\n        this._singleton = false;\n    }\n\n    protected getBodyAnchor(body: RigidBody, anchorx: number, anchory: number): Point {\n        Point.TEMP.setTo(anchorx, anchory)\n        let node = <Sprite>body.owner;\n        if (node) {\n            if (node.transform) {\n                node.transform.transformPointN(Point.TEMP)\n            } else {\n                Point.TEMP.x *= node.scaleX;\n                Point.TEMP.y *= node.scaleY;\n            }\n        }\n        return Point.TEMP;\n    }\n\n    /**[只读]原生关节对象*/\n    get joint(): any {\n        if (!this._joint) this._createJoint();\n        return this._joint;\n    }\n\n    protected _onEnable(): void {\n        this._createJoint();\n    }\n\n    protected _onAwake(): void {\n        this._createJoint();\n    }\n\n    protected _createJoint(): void {\n    }\n\n    protected _onDisable(): void {\n        if (this._joint && this._factory.getJoint_userData(this._joint) && !this._factory.getJoint_userData_destroy(this._joint)) {\n            Physics2D.I._factory.removeJoint(this._joint);\n        }\n        this._joint = null;\n    }\n}\n","import { Vector2 } from \"../../maths/Vector2\";\n\n/**\n * Box2D distance Joint def Struct\n */\nexport class physics2D_DistancJointDef {\n    bodyA: any;\n    bodyB: any;\n    localAnchorA: Vector2 = new Vector2();\n    localAnchorB: Vector2 = new Vector2();\n    frequency: number;\n    dampingRatio: number;\n    collideConnected: boolean;\n    length: number;\n    maxLength: number;\n    minLength: number;\n    isLocalAnchor: boolean\n}\n\nexport class physics2D_GearJointDef {\n    bodyA: any;\n    bodyB: any;\n    joint1: any;\n    joint2: any;\n    ratio: number;\n    collideConnected: boolean;\n}\n\n\nexport class physics2D_MotorJointDef {\n    bodyA: any;\n    bodyB: any;\n    linearOffset: Vector2 = new Vector2();\n    angularOffset: number;\n    maxForce: number;\n    maxTorque: number;\n    correctionFactor: number;\n    collideConnected: boolean;\n}\n\nexport class physics2D_MouseJointJointDef {\n    bodyA: any;\n    bodyB: any;\n    maxForce: number;\n    frequency: number;\n    dampingRatio: number;\n    target: Vector2 = new Vector2();\n}\n\nexport class physics2D_PrismaticJointDef {\n    bodyA: any;\n    bodyB: any;\n    anchor: Vector2 = new Vector2();\n    axis: Vector2 = new Vector2();\n    enableMotor: boolean;\n    motorSpeed: number;\n    maxMotorForce: number;\n    enableLimit: boolean;\n    lowerTranslation: number;\n    upperTranslation: number;\n    collideConnected: boolean;\n}\n\nexport class physics2D_PulleyJointDef {\n    bodyA: any;\n    bodyB: any;\n    groundAnchorA: Vector2 = new Vector2();\n    groundAnchorB: Vector2 = new Vector2();\n    localAnchorA: Vector2 = new Vector2();\n    localAnchorB: Vector2 = new Vector2();\n    ratio: number;\n    collideConnected: boolean;\n}\n\nexport class physics2D_RevoluteJointDef {\n    bodyA: any;\n    bodyB: any;\n    anchor: Vector2 = new Vector2();\n    enableMotor: boolean;\n    motorSpeed: number;\n    maxMotorTorque: number;\n    enableLimit: boolean;\n    lowerAngle: number;\n    upperAngle: number;\n    collideConnected: boolean;\n}\n\nexport class physics2D_WeldJointDef {\n    bodyA: any;\n    bodyB: any;\n    anchor: Vector2 = new Vector2();\n    frequency: number;\n    dampingRatio: number;\n    collideConnected: boolean;\n}\n\nexport class physics2D_WheelJointDef {\n    bodyA: any;\n    bodyB: any;\n    anchor: Vector2 = new Vector2();\n    axis: Vector2 = new Vector2();\n    enableMotor: boolean;\n    motorSpeed: number;\n    maxMotorTorque: number;\n    enableLimit: boolean;\n    lowerTranslation: number;\n    upperTranslation: number;\n    frequency: number;\n    dampingRatio: number;\n    collideConnected: boolean;\n}\n\n","import { JointBase } from \"./JointBase\";\nimport { Physics2D } from \"../Physics2D\"\nimport { RigidBody } from \"../RigidBody\"\nimport { physics2D_DistancJointDef } from \"./JointDefStructInfo\";\nimport { Sprite } from \"../../display/Sprite\";\n\n/**\n * 距离关节：两个物体上面各自有一点，两点之间的距离固定不变\n */\nexport class DistanceJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_DistancJointDef;\n    /**[首次设置有效]关节的自身刚体*/\n    selfBody: RigidBody;\n    /**[首次设置有效]关节的连接刚体，可不设置，默认为左上角空刚体*/\n    otherBody: RigidBody;\n    /**[首次设置有效]自身刚体链接点，是相对于自身刚体的左上角位置偏移*/\n    selfAnchor: any[] = [0, 0];\n    /**[首次设置有效]链接刚体链接点，是相对于otherBody的左上角位置偏移*/\n    otherAnchor: any[] = [0, 0];\n    /**[首次设置有效]两个刚体是否可以发生碰撞，默认为false*/\n    collideConnected: boolean = false;\n\n    /**约束的目标静止长度*/\n    private _length: number = 0;\n    /**约束的最小长度，-1表示使用默认值*/\n    private _maxLength: number = -1;\n    /**约束的最大长度，-1表示使用默认值*/\n    private _minLength: number = -1;\n\n    /**弹簧系统的震动频率，可以视为弹簧的弹性系数，通常频率应该小于时间步长频率的一半*/\n    private _frequency: number = 1;\n    /**刚体在回归到节点过程中受到的阻尼比，建议取值0~1*/\n    private _dampingRatio: number = 0;\n\n    /**\n     * @override\n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n            let node = <Sprite>this.owner;\n            this.selfBody = this.selfBody || node.getComponent(RigidBody);\n            if (!this.selfBody) throw \"selfBody can not be empty\";\n            let point = this.getBodyAnchor(this.selfBody, this.selfAnchor[0], this.selfAnchor[1]);\n            var def = DistanceJoint._temp || (DistanceJoint._temp = new physics2D_DistancJointDef());\n            def.bodyB = this.selfBody.getBody();\n            def.localAnchorB.setValue(point.x, point.y);\n            this.selfBody.owner.on(\"shapeChange\", this, this._refeahJoint);\n            if (this.otherBody) {\n                def.bodyA = this.otherBody.getBody();\n                point = this.getBodyAnchor(this.otherBody, this.otherAnchor[0], this.otherAnchor[1]);\n                def.localAnchorA.setValue(point.x, point.y);\n                this.otherBody.owner.on(\"shapeChange\", this, this._refeahJoint);\n            } else {\n                def.bodyA = Physics2D.I._emptyBody;\n                def.localAnchorA.setValue(this.otherAnchor[0], this.otherAnchor[1]);\n            }\n\n            def.dampingRatio = this._dampingRatio;\n            def.frequency = this._frequency;\n            def.collideConnected = this.collideConnected;\n            def.length = this._length;\n            def.maxLength = this._maxLength;\n            def.minLength = this._minLength;\n            this._joint = this._factory.createDistanceJoint(def);\n\n        }\n    }\n\n    /**@internal */\n    _refeahJoint(): void {\n        if (this._joint) {\n            this._factory.set_DistanceJointStiffnessDamping(this._joint, this._frequency, this._dampingRatio);\n        }\n    }\n\n    onDestroy(): void {\n        super.onDestroy();\n        this.selfBody.owner.off(\"shapeChange\", this._refeahJoint);\n        if (this.otherBody) this.otherBody.owner.off(\"shapeChange\", this._refeahJoint);\n    }\n\n    /**约束的目标静止长度*/\n    get length(): number {\n        return this._length;\n    }\n\n    set length(value: number) {\n        this._length = value;\n        if (this._joint) this._factory.set_DistanceJoint_length(this._joint, value);\n    }\n\n    /**约束的最小长度*/\n    get minLength(): number {\n        return this._minLength;\n    }\n\n    set minLength(value: number) {\n        this._minLength = value;\n        if (this._joint) this._factory.set_DistanceJoint_MinLength(this._joint, value);\n    }\n\n    /**约束的最大长度*/\n    get maxLength(): number {\n        return this._maxLength;\n    }\n\n    set maxLength(value: number) {\n        this._maxLength = value;\n        if (this._joint) this._factory.set_DistanceJoint_MaxLength(this._joint, value);\n    }\n\n    /**弹簧系统的震动频率，可以视为弹簧的弹性系数，通常频率应该小于时间步长频率的一半*/\n    get frequency(): number {\n        return this._frequency;\n    }\n\n    set frequency(value: number) {\n        this._frequency = value;\n        if (this._joint) {\n            this._factory.set_DistanceJointStiffnessDamping(this._joint, this._frequency, this._dampingRatio);\n        }\n    }\n\n    /**刚体在回归到节点过程中受到的阻尼比，建议取值0~1*/\n    get damping(): number {\n        return this._dampingRatio;\n    }\n\n    set damping(value: number) {\n        this._dampingRatio = value;\n        if (this._joint) {\n            this._factory.set_DistanceJointStiffnessDamping(this._joint, this._frequency, this._dampingRatio);\n        }\n    }\n\n    /**刚体当前长度*/\n    get jointLength(): number {\n        if (this._joint) {\n            return this._factory.phyToLayaValue(this.joint.GetLength())\n        } else {\n            return 0;\n        }\n\n    }\n}\n","import { JointBase } from \"./JointBase\";\nimport { RigidBody } from \"../RigidBody\"\nimport { RevoluteJoint } from \"./RevoluteJoint\";\nimport { PrismaticJoint } from \"./PrismaticJoint\";\nimport { physics2D_GearJointDef } from \"./JointDefStructInfo\";\n\n/**\n * 齿轮关节：用来模拟两个齿轮间的约束关系，齿轮旋转时，产生的动量有两种输出方式，一种是齿轮本身的角速度，另一种是齿轮表面的线速度\n */\nexport class GearJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_GearJointDef;\n    /**[首次设置有效]要绑定的第1个关节，类型可以是RevoluteJoint或者PrismaticJoint*/\n    joint1: RevoluteJoint | PrismaticJoint;\n    /**[首次设置有效]要绑定的第2个关节，类型可以是RevoluteJoint或者PrismaticJoint*/\n    joint2: RevoluteJoint | PrismaticJoint;\n    /**[首次设置有效]两个刚体是否可以发生碰撞，默认为false*/\n    collideConnected: boolean = false;\n\n    /**两个齿轮角速度比例，默认1*/\n    private _ratio: number = 1;\n    /**\n     * @override\n     * \n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n            if (!this.joint1) throw \"Joint1 can not be empty\";\n            if (!this.joint2) throw \"Joint2 can not be empty\";\n\n            var def: physics2D_GearJointDef = GearJoint._temp || (GearJoint._temp = new physics2D_GearJointDef());\n            def.bodyA = this.joint1.owner.getComponent(RigidBody).getBody();\n            def.bodyB = this.joint2.owner.getComponent(RigidBody).getBody();\n            def.joint1 = this.joint1.joint;\n            def.joint2 = this.joint2.joint;\n            def.ratio = -this._ratio;\n            def.collideConnected = this.collideConnected;\n            this._joint = this._factory.create_GearJoint(def);\n        }\n    }\n\n    /**两个齿轮角速度比例，默认1*/\n    get ratio(): number {\n        return this._ratio;\n    }\n\n    set ratio(value: number) {\n        this._ratio = value;\n        if (this._joint) this._factory.set_GearJoint_SetRatio(this._joint, value);\n    }\n}","import { JointBase } from \"./JointBase\";\nimport { RigidBody } from \"../RigidBody\"\nimport { physics2D_MotorJointDef } from \"./JointDefStructInfo\";\nimport { Utils } from \"../../utils/Utils\";\n\n/**\n * 马达关节：用来限制两个刚体，使其相对位置和角度保持不变\n */\nexport class MotorJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_MotorJointDef;\n    /**[首次设置有效]关节的自身刚体*/\n    selfBody: RigidBody;\n    /**[首次设置有效]关节的连接刚体*/\n    otherBody: RigidBody;\n    /**[首次设置有效]两个刚体是否可以发生碰撞，默认为false*/\n    collideConnected: boolean = false;\n\n    /**基于otherBody坐标位置的偏移量，也是selfBody的目标位置*/\n    private _linearOffset: any[] = [0, 0];\n    /**基于otherBody的角度偏移量，也是selfBody的目标角度*/\n    private _angularOffset: number = 0;\n    /**当selfBody偏离目标位置时，为使其恢复到目标位置，马达关节所施加的最大作用力*/\n    private _maxForce: number = 1000;\n    /**当selfBody角度与目标角度不同时，为使其达到目标角度，马达关节施加的最大扭力*/\n    private _maxTorque: number = 1000;\n    /**selfBody向目标位置移动时的缓动因子，取值0~1，值越大速度越快*/\n    private _correctionFactor: number = 0.3;\n    /**\n     * @override\n     * \n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n            if (!this.otherBody) throw \"otherBody can not be empty\";\n            this.selfBody = this.selfBody || this.owner.getComponent(RigidBody);\n            if (!this.selfBody) throw \"selfBody can not be empty\";\n\n            var def: physics2D_MotorJointDef = MotorJoint._temp || (MotorJoint._temp = new physics2D_MotorJointDef());\n            def.bodyA = this.selfBody.getBody();\n            def.bodyB = this.otherBody.getBody();\n            def.linearOffset.setValue(this._linearOffset[0], this._linearOffset[1]);\n            def.angularOffset = Utils.toRadian(-this._angularOffset);\n            def.maxForce = this._maxForce;\n            def.maxTorque = this._maxTorque;\n            def.correctionFactor = this._correctionFactor;\n            def.collideConnected = this.collideConnected;\n            this._joint = this._factory.create_MotorJoint(def);\n        }\n    }\n\n    /**基于otherBody坐标位置的偏移量，也是selfBody的目标位置*/\n    get linearOffset(): any[] {\n        return this._linearOffset;\n    }\n\n    set linearOffset(value: any[]) {\n        this._linearOffset = value;\n        if (this._joint) {\n            this._factory.set_MotorJoint_linearOffset(this._joint, value[0], value[1]);\n        }\n    }\n\n    /**基于otherBody的角度偏移量，也是selfBody的目标角度*/\n    get angularOffset(): number {\n        return this._angularOffset;\n    }\n\n    set angularOffset(value: number) {\n        this._angularOffset = value;\n        if (this._joint) this._factory.set_MotorJoint_SetAngularOffset(this._joint, Utils.toRadian(-value));\n    }\n\n    /**当selfBody偏离目标位置时，为使其恢复到目标位置，马达关节所施加的最大作用力*/\n    get maxForce(): number {\n        return this._maxForce;\n    }\n\n    set maxForce(value: number) {\n        this._maxForce = value;\n        if (this._joint) this._factory.set_MotorJoint_SetMaxForce(this._joint, value)\n    }\n\n    /**当selfBody角度与目标角度不同时，为使其达到目标角度，马达关节施加的最大扭力*/\n    get maxTorque(): number {\n        return this._maxTorque;\n    }\n\n    set maxTorque(value: number) {\n        this._maxTorque = value;\n        if (this._joint) this._factory.set_MotorJoint_SetMaxTorque(this._joint, value)\n    }\n\n    /**selfBody向目标位置移动时的缓动因子，取值0~1，值越大速度越快*/\n    get correctionFactor(): number {\n        return this._correctionFactor;\n    }\n\n    set correctionFactor(value: number) {\n        this._correctionFactor = value;\n        if (this._joint) this._factory.set_MotorJoint_SetCorrectionFactor(this._joint, value)\n    }\n}","import { JointBase } from \"./JointBase\";\nimport { Sprite } from \"../../display/Sprite\"\nimport { Event } from \"../../events/Event\"\nimport { Point } from \"../../maths/Point\"\nimport { Physics2D } from \"../Physics2D\"\nimport { RigidBody } from \"../RigidBody\"\nimport { ILaya } from \"../../../ILaya\";\nimport { physics2D_MouseJointJointDef } from \"./JointDefStructInfo\";\n\n/**\n * 鼠标关节：鼠标关节用于通过鼠标来操控物体。它试图将物体拖向当前鼠标光标的位置。而在旋转方面就没有限制。\n */\nexport class MouseJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_MouseJointJointDef;\n    /**[首次设置有效]关节的自身刚体*/\n    selfBody: RigidBody;\n    /**[首次设置有效]关节的链接点，是相对于自身刚体的左上角位置偏移，如果不设置，则根据鼠标点击点作为连接点*/\n    anchor: any[];\n\n    /**鼠标关节在拖曳刚体bodyB时施加的最大作用力*/\n    private _maxForce: number = 1000;\n    /**弹簧系统的震动频率，可以视为弹簧的弹性系数，通常频率应该小于时间步长频率的一半*/\n    private _frequency: number = 5;\n    /**刚体在回归到节点过程中受到的阻尼比，建议取值0~1*/\n    private _dampingRatio: number = 0.7;\n\n    protected _onEnable(): void {\n        (<Sprite>this.owner).mouseEnabled = true;\n        this.owner.on(Event.MOUSE_DOWN, this, this.onMouseDown);\n    }\n    protected _onAwake(): void {\n\n    }\n\n    private onMouseDown(): void {\n        this._createJoint();\n        ILaya.stage.on(Event.MOUSE_MOVE, this, this.onMouseMove);\n        ILaya.stage.once(Event.MOUSE_UP, this, this.onStageMouseUp);\n        ILaya.stage.once(Event.MOUSE_OUT, this, this.onStageMouseUp);\n    }\n    /**\n     * @override\n     * \n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n            this.selfBody = this.selfBody || this.owner.getComponent(RigidBody);\n            if (!this.selfBody) throw \"selfBody can not be empty\";\n\n            var def: physics2D_MouseJointJointDef = MouseJoint._temp || (MouseJoint._temp = new physics2D_MouseJointJointDef());\n            if (this.anchor) {\n                var anchorPos: Point = (<Sprite>this.selfBody.owner).localToGlobal(Point.TEMP.setTo(this.anchor[0], this.anchor[1]), false, Physics2D.I.worldRoot);\n            } else {\n                anchorPos = Physics2D.I.worldRoot.globalToLocal(Point.TEMP.setTo(ILaya.stage.mouseX, ILaya.stage.mouseY));\n            }\n\n            def.bodyA = Physics2D.I._emptyBody;\n            def.bodyB = this.selfBody.getBody();\n            def.target.setValue(anchorPos.x, anchorPos.y);\n            def.maxForce = this._maxForce;\n            def.dampingRatio = this._dampingRatio;\n            def.frequency = this._frequency;\n            this._factory.set_rigidbody_Awake(def.bodyB, true);\n            this._joint = this._factory.create_MouseJoint(def);\n        }\n    }\n\n    private onStageMouseUp(): void {\n        ILaya.stage.off(Event.MOUSE_MOVE, this, this.onMouseMove);\n        ILaya.stage.off(Event.MOUSE_UP, this, this.onStageMouseUp);\n        ILaya.stage.off(Event.MOUSE_OUT, this, this.onStageMouseUp);\n        this._factory.removeJoint(this._joint);\n        this._joint = null;\n    }\n\n    private onMouseMove(): void {\n        if (this._joint) this._factory.set_MouseJoint_target(this._joint, Physics2D.I.worldRoot.mouseX, Physics2D.I.worldRoot.mouseY)\n    }\n\n    protected _onDisable(): void {\n        super._onDisable();\n        this.owner.off(Event.MOUSE_DOWN, this, this.onMouseDown);\n    }\n\n    /**鼠标关节在拖曳刚体bodyB时施加的最大作用力*/\n    get maxForce(): number {\n        return this._maxForce;\n    }\n\n    set maxForce(value: number) {\n        this._maxForce = value;\n        if (this._joint) this._factory.set_MotorJoint_SetMaxForce(this._joint, value);\n    }\n\n    /**弹簧系统的震动频率，可以视为弹簧的弹性系数，通常频率应该小于时间步长频率的一半*/\n    get frequency(): number {\n        return this._frequency;\n    }\n\n    set frequency(value: number) {\n        this._frequency = value;\n        if (this._joint) {\n            this._factory.set_MouseJoint_frequencyAndDampingRatio(this._joint, this._frequency, this._dampingRatio);\n        }\n    }\n\n    /**刚体在回归到节点过程中受到的阻尼比，建议取值0~1*/\n    get damping(): number {\n        return this._dampingRatio;\n    }\n\n    set damping(value: number) {\n        this._dampingRatio = value;\n        if (this._joint) {\n            this._factory.set_MouseJoint_frequencyAndDampingRatio(this._joint, this._frequency, this._dampingRatio);\n        }\n    }\n}\n","import { JointBase } from \"./JointBase\";\nimport { Physics2D } from \"../Physics2D\"\nimport { RigidBody } from \"../RigidBody\"\nimport { physics2D_PrismaticJointDef } from \"./JointDefStructInfo\";\nimport { Utils } from \"../../utils/Utils\";\n\n/**\n * 平移关节：移动关节允许两个物体沿指定轴相对移动，它会阻止相对旋转\n */\nexport class PrismaticJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_PrismaticJointDef;\n    /**[首次设置有效]关节的自身刚体*/\n    selfBody: RigidBody;\n    /**[首次设置有效]关节的连接刚体，可不设置，默认为左上角空刚体*/\n    otherBody: RigidBody;\n    /**[首次设置有效]关节的控制点，是相对于自身刚体的左上角位置偏移*/\n    anchor: any[] = [0, 0];\n    /**\n     * @deprecated\n     * [首次设置有效]一个向量值，描述运动方向，比如1,0是沿X轴向右*/\n    _axis: any[] = [1, 0];\n    /**[首次设置有效]一个角度，描述运动方向，比如0是沿X轴向右*/\n    angle: number = 0;\n    /**[首次设置有效]两个刚体是否可以发生碰撞，默认为false*/\n    collideConnected: boolean = false;\n\n    /**是否开启马达，开启马达可使目标刚体运动*/\n    private _enableMotor: boolean = false;\n    /**启用马达后，在axis坐标轴上移动可以达到的最大速度*/\n    private _motorSpeed: number = 0;\n    /**启用马达后，可以施加的最大作用力*/\n    private _maxMotorForce: number = 10000;\n\n    /**是否对刚体的移动范围加以约束*/\n    private _enableLimit: boolean = false;\n    /**启用约束后，刚体移动范围的下限，是距离anchor的偏移量*/\n    private _lowerTranslation: number = 0;\n    /**启用约束后，刚体移动范围的上限，是距离anchor的偏移量*/\n    private _upperTranslation: number = 0;\n    /**\n     * @override\n     * \n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n\n            this.selfBody = this.selfBody || this.owner.getComponent(RigidBody);\n            if (!this.selfBody) throw \"selfBody can not be empty\";\n\n            var def: physics2D_PrismaticJointDef = PrismaticJoint._temp || (PrismaticJoint._temp = new physics2D_PrismaticJointDef());\n            def.bodyB = this.selfBody.getBody();\n            def.bodyA = this.otherBody ? this.otherBody.getBody() : Physics2D.I._emptyBody;\n            let p = this.selfBody.GetWorldPoint(this.anchor[0], this.anchor[1]);\n            def.anchor.setValue(p.x, p.y);\n            let radian = Utils.toRadian(this.angle);\n            def.axis.setValue(Math.cos(radian), Math.sin(radian));\n            def.enableMotor = this._enableMotor;\n            def.motorSpeed = this._motorSpeed;\n            def.maxMotorForce = this._maxMotorForce;\n            def.enableLimit = this._enableLimit;\n            def.lowerTranslation = this._lowerTranslation;\n            def.upperTranslation = this._upperTranslation;\n            def.collideConnected = this.collideConnected;\n\n            this._joint = this._factory.create_PrismaticJoint(def);\n        }\n    }\n\n    /**是否开启马达，开启马达可使目标刚体运动*/\n    get enableMotor(): boolean {\n        return this._enableMotor;\n    }\n\n    set enableMotor(value: boolean) {\n        this._enableMotor = value;\n        if (this._joint) this._factory.set_Joint_EnableMotor(this._joint, value);\n    }\n\n    /**启用马达后，在axis坐标轴上移动可以达到的最大速度*/\n    get motorSpeed(): number {\n        return this._motorSpeed;\n    }\n\n    set motorSpeed(value: number) {\n        this._motorSpeed = value;\n        if (this._joint) this._factory.set_Joint_SetMotorSpeed(this._joint, value);\n    }\n\n    /**启用马达后，可以施加的最大作用力*/\n    get maxMotorForce(): number {\n        return this._maxMotorForce;\n    }\n\n    set maxMotorForce(value: number) {\n        this._maxMotorForce = value;\n        if (this._joint) this._factory.set_Joint_SetMaxMotorTorque(this._joint, value);\n    }\n\n    /**是否对刚体的移动范围加以约束*/\n    get enableLimit(): boolean {\n        return this._enableLimit;\n    }\n\n    set enableLimit(value: boolean) {\n        this._enableLimit = value;\n        if (this._joint) this._factory.set_Joint_EnableLimit(this._joint, value);\n    }\n\n    /**启用约束后，刚体移动范围的下限，是距离anchor的偏移量*/\n    get lowerTranslation(): number {\n        return this._lowerTranslation;\n    }\n\n    set lowerTranslation(value: number) {\n        this._lowerTranslation = value;\n        if (this._joint) this._factory.set_Joint_SetLimits(this._joint, value, this._upperTranslation);\n    }\n\n    /**启用约束后，刚体移动范围的上限，是距离anchor的偏移量*/\n    get upperTranslation(): number {\n        return this._upperTranslation;\n    }\n\n    set upperTranslation(value: number) {\n        this._upperTranslation = value;\n        if (this._joint) this._factory.set_Joint_SetLimits(this._joint, this._lowerTranslation, value);\n    }\n\n    /**\n     * @deprecated\n     * 启用约束后，刚体移动范围的上限，是距离anchor的偏移量*/\n    get axis(): any {\n        return this._axis;\n    }\n\n    set axis(value: any) {\n        this._axis = value;\n        this.angle = Utils.toAngle(Math.atan2(value[1], value[0]));\n    }\n}","import { JointBase } from \"./JointBase\";\nimport { Point } from \"../../maths/Point\"\nimport { Physics2D } from \"../Physics2D\"\nimport { RigidBody } from \"../RigidBody\"\nimport { physics2D_PulleyJointDef } from \"./JointDefStructInfo\";\n\n/**\n * 滑轮关节：它将两个物体接地(ground)并彼此连接，当一个物体上升，另一个物体就会下降\n */\nexport class PulleyJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_PulleyJointDef;\n    /**[首次设置有效]关节的自身刚体*/\n    selfBody: RigidBody;\n    /**[首次设置有效]关节的连接刚体*/\n    otherBody: RigidBody;\n    /**[首次设置有效]自身刚体链接点，是相对于自身刚体的左上角位置偏移*/\n    selfAnchor: any[] = [0, 0];\n    /**[首次设置有效]链接刚体链接点，是相对于otherBody的左上角位置偏移*/\n    otherAnchor: any[] = [0, 0];\n\n    /**[首次设置有效]滑轮上与节点selfAnchor相连接的节点，是相对于自身刚体的左上角位置偏移*/\n    selfGroundPoint: any[] = [0, -100];\n    /**[首次设置有效]滑轮上与节点otherAnchor相连接的节点，是相对于otherBody的左上角位置偏移*/\n    otherGroundPoint: any[] = [0, -100];\n    /**[首次设置有效]两刚体移动距离比率*/\n    ratio: number = 1;\n    /**[首次设置有效]两个刚体是否可以发生碰撞，默认为false*/\n    collideConnected: boolean = false;\n    /**\n     * @override\n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n            if (!this.otherBody) throw \"otherBody can not be empty\";\n            this.selfBody = this.selfBody || this.owner.getComponent(RigidBody);\n            if (!this.selfBody) throw \"selfBody can not be empty\";\n\n            var def: physics2D_PulleyJointDef = PulleyJoint._temp || (PulleyJoint._temp = new physics2D_PulleyJointDef);\n            def.bodyA = this.otherBody.getBody();\n            def.bodyB = this.selfBody.getBody();\n            var posA: Point = this.otherBody.GetWorldPoint(this.otherAnchor[0], this.otherAnchor[1]);\n            def.localAnchorA.setValue(posA.x, posA.y);\n            var posB: Point = this.selfBody.GetWorldPoint(this.selfAnchor[0], this.selfAnchor[1]);\n            def.localAnchorB.setValue(posB.x, posB.y);\n            var groundA: Point = this.otherBody.GetWorldPoint(this.otherGroundPoint[0], this.otherGroundPoint[1]);\n            def.groundAnchorA.setValue(groundA.x, groundA.y);\n            var groundB: Point = this.selfBody.GetWorldPoint(this.selfGroundPoint[0], this.selfGroundPoint[1]);\n            def.groundAnchorB.setValue(groundB.x, groundB.y);\n            def.ratio = this.ratio;\n            def.collideConnected = this.collideConnected;\n            this._joint = Physics2D.I._factory.create_PulleyJoint(def);\n        }\n    }\n}","import { JointBase } from \"./JointBase\";\nimport { Sprite } from \"../../display/Sprite\"\nimport { Physics2D } from \"../Physics2D\"\nimport { RigidBody } from \"../RigidBody\"\nimport { physics2D_RevoluteJointDef } from \"./JointDefStructInfo\";\nimport { Utils } from \"../../utils/Utils\";\n\n/**\n * 旋转关节强制两个物体共享一个锚点，两个物体相对旋转\n */\nexport class RevoluteJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_RevoluteJointDef;\n    /**[首次设置有效]关节的自身刚体*/\n    selfBody: RigidBody;\n    /**[首次设置有效]关节的连接刚体，可不设置*/\n    otherBody: RigidBody;\n    /**[首次设置有效]关节的链接点，是相对于自身刚体的左上角位置偏移*/\n    anchor: any[] = [0, 0];\n\n    /**[首次设置有效]两个刚体是否可以发生碰撞，默认为false*/\n    collideConnected: boolean = false;\n\n    /**是否开启马达，开启马达可使目标刚体运动*/\n    private _enableMotor: boolean = false;\n    /**启用马达后，可以达到的最大旋转速度*/\n    private _motorSpeed: number = 0;\n    /**启用马达后，可以施加的最大扭距，如果最大扭矩太小，会导致不旋转*/\n    private _maxMotorTorque: number = 10000;\n\n    /**是否对刚体的旋转范围加以约束*/\n    private _enableLimit: boolean = false;\n    /**启用约束后，刚体旋转范围的下限角度*/\n    private _lowerAngle: number = 0;\n    /**启用约束后，刚体旋转范围的上限角度*/\n    private _upperAngle: number = 0;\n    /**\n     * @override\n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n            this.selfBody = this.selfBody || this.owner.getComponent(RigidBody);\n            if (!this.selfBody) throw \"selfBody can not be empty\";\n            var def: physics2D_RevoluteJointDef = RevoluteJoint._temp || (RevoluteJoint._temp = new physics2D_RevoluteJointDef());\n            def.bodyB = this.selfBody.getBody();\n            def.bodyA = this.otherBody ? this.otherBody.getBody() : Physics2D.I._emptyBody;\n\n            let global = this.selfBody.GetWorldPoint(this.anchor[0], this.anchor[1]);\n            def.anchor.setValue(global.x, global.y)\n            def.enableMotor = this._enableMotor;\n            def.motorSpeed = this._motorSpeed;\n            def.maxMotorTorque = this._maxMotorTorque;\n            def.enableLimit = this._enableLimit;\n            def.lowerAngle = Utils.toRadian(this._lowerAngle);\n            def.upperAngle = Utils.toRadian(this._upperAngle);\n            def.collideConnected = this.collideConnected;\n\n            this._joint = this._factory.create_RevoluteJoint(def);\n        }\n    }\n\n    /**是否开启马达，开启马达可使目标刚体运动*/\n    get enableMotor(): boolean {\n        return this._enableMotor;\n    }\n\n    set enableMotor(value: boolean) {\n        this._enableMotor = value;\n        if (this._joint) this._factory.set_Joint_EnableMotor(this._joint, value);\n    }\n\n    /**启用马达后，可以达到的最大旋转速度*/\n    get motorSpeed(): number {\n        return this._motorSpeed;\n    }\n\n    set motorSpeed(value: number) {\n        this._motorSpeed = value;\n        if (this._joint) this._factory.set_Joint_SetMotorSpeed(this._joint, value);\n    }\n\n    /**启用马达后，可以施加的最大扭距，如果最大扭矩太小，会导致不旋转*/\n    get maxMotorTorque(): number {\n        return this._maxMotorTorque;\n    }\n\n    set maxMotorTorque(value: number) {\n        this._maxMotorTorque = value;\n        if (this._joint) this._factory.set_Joint_SetMaxMotorTorque(this._joint, value);\n    }\n\n    /**是否对刚体的旋转范围加以约束*/\n    get enableLimit(): boolean {\n        return this._enableLimit;\n    }\n\n    set enableLimit(value: boolean) {\n        this._enableLimit = value;\n        if (this._joint) this._factory.set_Joint_EnableLimit(this._joint, value);\n    }\n\n    /**启用约束后，刚体旋转范围的下限角度*/\n    get lowerAngle(): number {\n        return this._lowerAngle;\n    }\n\n    set lowerAngle(value: number) {\n        this._lowerAngle = value;\n        if (this._joint) this._factory.set_Joint_SetLimits(this._joint, Utils.toRadian(value), Utils.toRadian(this._upperAngle));\n    }\n\n    /**启用约束后，刚体旋转范围的上限角度*/\n    get upperAngle(): number {\n        return this._upperAngle;\n    }\n\n    set upperAngle(value: number) {\n        this._upperAngle = value;\n        if (this._joint) this._factory.set_Joint_SetLimits(this._joint, Utils.toRadian(this._lowerAngle), Utils.toRadian(value));\n    }\n}","import { JointBase } from \"./JointBase\";\nimport { Point } from \"../../maths/Point\"\nimport { RigidBody } from \"../RigidBody\"\nimport { physics2D_WeldJointDef } from \"./JointDefStructInfo\";\n\n/**\n * 焊接关节：焊接关节的用途是使两个物体不能相对运动，受到关节的限制，两个刚体的相对位置和角度都保持不变，看上去像一个整体\n */\nexport class WeldJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_WeldJointDef;\n    /**[首次设置有效]关节的自身刚体*/\n    selfBody: RigidBody;\n    /**[首次设置有效]关节的连接刚体*/\n    otherBody: RigidBody;\n    /**[首次设置有效]关节的链接点，是相对于自身刚体的左上角位置偏移*/\n    anchor: any[] = [0, 0];\n    /**[首次设置有效]两个刚体是否可以发生碰撞，默认为false*/\n    collideConnected: boolean = false;\n\n    /**弹簧系统的震动频率，可以视为弹簧的弹性系数，通常频率应该小于时间步长频率的一半*/\n    private _frequency: number = 5;\n    /**刚体在回归到节点过程中受到的阻尼比，建议取值0~1*/\n    private _dampingRatio: number = 0.7;\n    /**\n     * @override\n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n            if (!this.otherBody) throw \"otherBody can not be empty\";\n            this.selfBody = this.selfBody || this.owner.getComponent(RigidBody);\n            if (!this.selfBody) throw \"selfBody can not be empty\";\n\n            var def: physics2D_WeldJointDef = WeldJoint._temp || (WeldJoint._temp = new physics2D_WeldJointDef());\n            var anchorPos: Point = this.selfBody.GetWorldPoint(this.anchor[0], this.anchor[1]);\n            def.bodyA = this.otherBody.getBody();\n            def.bodyB = this.selfBody.getBody();\n            def.anchor.setValue(anchorPos.x, anchorPos.y);\n            def.frequency = this._frequency;\n            def.dampingRatio = this._dampingRatio;\n            def.collideConnected = this.collideConnected;\n            this._joint = this._factory.create_WeldJoint(def);\n        }\n    }\n\n    /**弹簧系统的震动频率，可以视为弹簧的弹性系数，通常频率应该小于时间步长频率的一半*/\n    get frequency(): number {\n        return this._frequency;\n    }\n\n    set frequency(value: number) {\n        this._frequency = value;\n        if (this._joint) {\n            this._factory.set_Joint_frequencyAndDampingRatio(this._joint, this._frequency, this._dampingRatio, false);\n        }\n    }\n\n    /**刚体在回归到节点过程中受到的阻尼比，建议取值0~1*/\n    get damping(): number {\n        return this._dampingRatio;\n    }\n\n    set damping(value: number) {\n        this._dampingRatio = value;\n        if (this._joint) {\n            this._factory.set_Joint_frequencyAndDampingRatio(this._joint, this._frequency, this._dampingRatio, true);\n        }\n    }\n}","import { JointBase } from \"./JointBase\";\nimport { Point } from \"../../maths/Point\"\nimport { RigidBody } from \"../RigidBody\"\nimport { physics2D_WheelJointDef } from \"./JointDefStructInfo\";\nimport { Utils } from \"../../utils/Utils\";\n\n/**\n * 轮子关节：围绕节点旋转，包含弹性属性，使得刚体在节点位置发生弹性偏移\n */\nexport class WheelJoint extends JointBase {\n    /**@private */\n    private static _temp: physics2D_WheelJointDef;\n    /**[首次设置有效]关节的自身刚体*/\n    selfBody: RigidBody;\n    /**[首次设置有效]关节的连接刚体*/\n    otherBody: RigidBody;\n    /**[首次设置有效]关节的链接点，是相对于自身刚体的左上角位置偏移*/\n    anchor: any[] = [0, 0];\n    /**[首次设置有效]两个刚体是否可以发生碰撞，默认为false*/\n    collideConnected: boolean = false;\n    /**\n     * @deprecated\n     * [首次设置有效]一个向量值，用于定义弹性运动方向，即轮子在哪个方向可以如弹簧一样压缩和伸展，比如1,0是沿X轴向右，0,1是沿Y轴向下*/\n    _axis: any[] = [0, 1];\n    /**[首次设置有效]一个角度值，用于定义弹性运动方向，即轮子在哪个方向可以如弹簧一样压缩和伸展，比如0是沿X轴向右, 90是沿Y轴向下*/\n    angle: number = 90;\n\n    /**弹簧系统的震动频率，可以视为弹簧的弹性系数，通常频率应该小于时间步长频率的一半*/\n    private _frequency: number = 1;\n    /**刚体在回归到节点过程中受到的阻尼比，建议取值0~1*/\n    private _dampingRatio: number = 0.7;\n\n    /**是否开启马达，开启马达可使目标刚体运动*/\n    private _enableMotor: boolean = false;\n    /**启用马达后，可以达到的最大旋转速度*/\n    private _motorSpeed: number = 0;\n    /**启用马达后，可以施加的最大扭距，如果最大扭矩太小，会导致不旋转*/\n    private _maxMotorTorque: number = 10000;\n\n    /**是否对刚体的移动范围加以约束*/\n    private _enableLimit: boolean = true;\n    /**启用约束后，刚体移动范围的下限，是距离anchor的偏移量*/\n    private _lowerTranslation: number = 0;\n    /**启用约束后，刚体移动范围的上限，是距离anchor的偏移量*/\n    private _upperTranslation: number = 0;\n\n\n    /**\n     * @override\n     */\n    protected _createJoint(): void {\n        if (!this._joint) {\n            if (!this.otherBody) throw \"otherBody can not be empty\";\n            this.selfBody = this.selfBody || this.owner.getComponent(RigidBody);\n            if (!this.selfBody) throw \"selfBody can not be empty\";\n\n            var def: physics2D_WheelJointDef = WheelJoint._temp || (WheelJoint._temp = new physics2D_WheelJointDef());\n            var anchorPos: Point = this.selfBody.GetWorldPoint(this.anchor[0], this.anchor[1]);\n            def.anchor.setValue(anchorPos.x, anchorPos.y);\n            let radian = Utils.toRadian(this.angle);\n            def.axis.setValue(Math.cos(radian), Math.sin(radian));\n            def.bodyA = this.otherBody.getBody();\n            def.bodyB = this.selfBody.getBody();;\n            def.enableMotor = this._enableMotor;\n            def.motorSpeed = this._motorSpeed;\n            def.maxMotorTorque = this._maxMotorTorque;\n            def.collideConnected = this.collideConnected;\n            def.enableLimit = this._enableLimit;\n            def.lowerTranslation = this._lowerTranslation;\n            def.upperTranslation = this._upperTranslation;\n            def.frequency = this._frequency;\n            def.dampingRatio = this._dampingRatio;\n            this._joint = this._factory.create_WheelJoint(def);\n        }\n    }\n\n    /**弹簧系统的震动频率，可以视为弹簧的弹性系数，通常频率应该小于时间步长频率的一半*/\n    get frequency(): number {\n        return this._frequency;\n    }\n\n    set frequency(value: number) {\n        this._frequency = value;\n        if (this._joint) {\n            this._factory.set_Joint_frequencyAndDampingRatio(this._joint, this._frequency, this._dampingRatio, false)\n        }\n    }\n\n    /**刚体在回归到节点过程中受到的阻尼比，建议取值0~1*/\n    get damping(): number {\n        return this._dampingRatio;\n    }\n\n    set damping(value: number) {\n        this._dampingRatio = value;\n        if (this._joint) {\n            this._factory.set_Joint_frequencyAndDampingRatio(this._joint, this._frequency, this._dampingRatio, true)\n        }\n    }\n\n    /**是否开启马达，开启马达可使目标刚体运动*/\n    get enableMotor(): boolean {\n        return this._enableMotor;\n    }\n\n    set enableMotor(value: boolean) {\n        this._enableMotor = value;\n        if (this._joint) this._factory.set_Joint_EnableMotor(this._joint, value);\n    }\n\n    /**启用马达后，可以达到的最大旋转速度*/\n    get motorSpeed(): number {\n        return this._motorSpeed;\n    }\n\n    set motorSpeed(value: number) {\n        this._motorSpeed = value;\n        if (this._joint) this._factory.set_Joint_SetMotorSpeed(this._joint, value);\n    }\n\n    /**启用马达后，可以施加的最大扭距，如果最大扭矩太小，会导致不旋转*/\n    get maxMotorTorque(): number {\n        return this._maxMotorTorque;\n    }\n\n    set maxMotorTorque(value: number) {\n        this._maxMotorTorque = value;\n        if (this._joint) this._factory.set_Joint_SetMaxMotorTorque(this._joint, value);\n    }\n\n    /**是否对刚体的移动范围加以约束*/\n    get enableLimit(): boolean {\n        return this._enableLimit;\n    }\n\n    set enableLimit(value: boolean) {\n        this._enableLimit = value;\n        if (this._joint) this._factory.set_Joint_EnableLimit(this._joint, value);\n    }\n\n    /**启用约束后，刚体移动范围的下限，是距离anchor的偏移量*/\n    get lowerTranslation(): number {\n        return this._lowerTranslation;\n    }\n\n    set lowerTranslation(value: number) {\n        this._lowerTranslation = value;\n        if (this._joint) this._factory.set_Joint_SetLimits(this._joint, value, this._upperTranslation);\n    }\n\n    /**启用约束后，刚体移动范围的上限，是距离anchor的偏移量*/\n    get upperTranslation(): number {\n        return this._upperTranslation;\n    }\n\n    set upperTranslation(value: number) {\n        this._upperTranslation = value;\n        if (this._joint) this._factory.set_Joint_SetLimits(this._joint, this._lowerTranslation, value);\n    }\n\n    /**\n     * @deprecated\n     * 启用约束后，刚体移动范围的上限，是距离anchor的偏移量*/\n    get axis(): any {\n        return this._axis;\n    }\n\n    set axis(value: any) {\n        this._axis = value;\n        this.angle = Utils.toAngle(Math.atan2(value[1], value[0]));\n    }\n}","\nimport { Graphics } from \"../display/Graphics\"\nimport { Sprite } from \"../display/Sprite\"\nimport { Vector2 } from \"../maths/Vector2\";\nimport { Context } from \"../resource/Context\"\nimport { IPhysiscs2DFactory } from \"./IPhysiscs2DFactory\";\n/**\n * 物理辅助线\n */\nexport class Physics2DDebugDraw extends Sprite {\n    DrawString_color: string;\n    Red: string;\n    Green: string;\n    /**@protected */\n    protected _camera: any;\n\n    /**@protected */\n    protected _mG: Graphics;\n    /**@private */\n    private _textSp: Sprite;\n    /**@protected */\n    protected _textG: Graphics;\n    /**@protected */\n    protected _factory: IPhysiscs2DFactory;\n\n    /**@protected */\n    protected _lineWidth: number;\n\n    constructor(factory: IPhysiscs2DFactory) {\n        super();\n        this._factory = factory;\n        this.DrawString_color = \"#E69999\";\n        this.Red = \"#ff0000\";\n        this.Green = \"#00ff00\"\n        this._camera = {};\n        this._camera.m_center = new Vector2(0, 0);\n        this._camera.m_extent = 25;\n        this._camera.m_zoom = 1;\n        this._camera.m_width = 1280;\n        this._camera.m_height = 800;\n\n        this._mG = new Graphics();\n        this.graphics = this._mG;\n\n        this._textSp = new Sprite();\n        this._textG = this._textSp.graphics;\n        this.addChild(this._textSp);\n    }\n\n    /**@private \n     * @override\n    */\n    render(ctx: Context, x: number, y: number): void {\n        this._renderToGraphic();\n        super.render(ctx, x, y);\n    }\n\n\n\n    /**@private */\n    private _renderToGraphic(): void {\n        if (this._factory.world) {\n            this._textG.clear();\n            this._mG.clear();\n            this._mG.save();\n            this._mG.scale(this._factory.PIXEL_RATIO, this._factory.PIXEL_RATIO);\n            this._lineWidth = this._factory.layaToPhyValue(1);\n            if (this._factory.world.DebugDraw) // ts源码版box2d\n                this._factory.world.DebugDraw();\n            else\n                this._factory.world.DrawDebugData();\n            this._mG.restore();\n        }\n    }\n\n\n    PushTransform(tx: number, ty: number, angle: number): void {\n        this._mG.save();\n        this._mG.translate(tx, ty);\n        this._mG.rotate(angle);\n    }\n\n    PopTransform(): void {\n        this._mG.restore();\n    }\n\n    get mG(): Graphics {\n        return this._mG;\n    }\n\n    get textG(): Graphics {\n        return this._textG;\n    }\n\n    get lineWidth(): number {\n        return this._lineWidth;\n    }\n\n\n    get camera(): any {\n        return this._camera;\n    }\n}\n","import { ClassUtils } from \"../utils/ClassUtils\";\nimport { BoxCollider } from \"./Collider2D/BoxCollider\";\nimport { ChainCollider } from \"./Collider2D/ChainCollider\";\nimport { CircleCollider } from \"./Collider2D/CircleCollider\";\nimport { ColliderBase } from \"./Collider2D/ColliderBase\";\nimport { EdgeCollider } from \"./Collider2D/EdgeCollider\";\nimport { DistanceJoint } from \"./joint/DistanceJoint\";\nimport { GearJoint } from \"./joint/GearJoint\";\nimport { JointBase } from \"./joint/JointBase\";\nimport { MotorJoint } from \"./joint/MotorJoint\";\nimport { MouseJoint } from \"./joint/MouseJoint\";\nimport { PrismaticJoint } from \"./joint/PrismaticJoint\";\nimport { PulleyJoint } from \"./joint/PulleyJoint\";\nimport { RevoluteJoint } from \"./joint/RevoluteJoint\";\nimport { WeldJoint } from \"./joint/WeldJoint\";\nimport { WheelJoint } from \"./joint/WheelJoint\";\nimport { Physics2D } from \"./Physics2D\";\nimport { Physics2DDebugDraw } from \"./Physics2DDebugDraw\";\nimport { PolygonCollider } from \"./Collider2D/PolygonCollider\";\nimport { RigidBody } from \"./RigidBody\";\n\nlet c = ClassUtils.regClass;\nc(\"Physics2D\", Physics2D);\nc(\"Physics2DDebugDraw\", Physics2DDebugDraw);\nc(\"ColliderBase\", ColliderBase);\nc(\"BoxCollider\", BoxCollider);\nc(\"ChainCollider\", ChainCollider);\nc(\"CircleCollider\", CircleCollider);\nc(\"EdgeCollider\", EdgeCollider);\nc(\"PolygonCollider\", PolygonCollider);\nc(\"RigidBody\", RigidBody);\nc(\"JointBase\", JointBase);\nc(\"DistanceJoint\", DistanceJoint);\nc(\"GearJoint\", GearJoint);\nc(\"MotorJoint\", MotorJoint);\nc(\"MouseJoint\", MouseJoint);\nc(\"PrismaticJoint\", PrismaticJoint);\nc(\"PulleyJoint\", PulleyJoint);\nc(\"RevoluteJoint\", RevoluteJoint);\nc(\"WeldJoint\", WeldJoint);\nc(\"WheelJoint\", WheelJoint);"],"mappings":"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"}