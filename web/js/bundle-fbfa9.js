"use strict";(()=>{var pD=Object.create;var Zc=Object.defineProperty;var QE=Object.getOwnPropertyDescriptor;var hD=Object.getOwnPropertyNames;var dD=Object.getPrototypeOf,fD=Object.prototype.hasOwnProperty;var ae=(a,t)=>()=>(a&&(t=a(a=0)),t);var yD=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),o0=(a,t)=>{for(var e in t)Zc(a,e,{get:t[e],enumerable:!0})},bD=(a,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of hD(t))!fD.call(a,n)&&n!==e&&Zc(a,n,{get:()=>t[n],enumerable:!(i=QE(t,n))||i.enumerable});return a};var gD=(a,t,e)=>(e=a!=null?pD(dD(a)):{},bD(t||!a||!a.__esModule?Zc(e,"default",{value:a,enumerable:!0}):e,a));var h=(a,t,e,i)=>{for(var n=i>1?void 0:i?QE(t,e):t,r=a.length-1,s;r>=0;r--)(s=a[r])&&(n=(i?s(t,e,n):s(n))||n);return i&&n&&Zc(t,e,n),n};var ZE,ew=ae(()=>{"use strict";ZE="1.0.6"});var Ut,zr=ae(()=>{"use strict";ew();Ut=class a extends Error{constructor(t,e={}){let i=e.cause instanceof a?e.cause.details:e.cause?.message?e.cause.message:e.details,n=e.cause instanceof a&&e.cause.docsPath||e.docsPath,r=[t||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...n?[`Docs: https://abitype.dev${n}`]:[],...i?[`Details: ${i}`]:[],`Version: abitype@${ZE}`].join(`
`);super(r),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),e.cause&&(this.cause=e.cause),this.details=i,this.docsPath=n,this.metaMessages=e.metaMessages,this.shortMessage=t}}});function Ai(a,t){return a.exec(t)?.groups}var u0,m0,qu,Co=ae(()=>{"use strict";u0=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,m0=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,qu=/^\(.+?\).*?$/});function Wu(a){let t=a.type;if(tw.test(a.type)&&"components"in a){t="(";let e=a.components.length;for(let n=0;n<e;n++){let r=a.components[n];t+=Wu(r),n<e-1&&(t+=", ")}let i=Ai(tw,a.type);return t+=`)${i?.array??""}`,Wu({...a,type:t})}return"indexed"in a&&a.indexed&&(t=`${t} indexed`),a.name?`${t} ${a.name}`:t}var tw,iw=ae(()=>{"use strict";Co();tw=/^tuple(?<array>(\[(\d*)\])*)$/});function jr(a){let t="",e=a.length;for(let i=0;i<e;i++){let n=a[i];t+=Wu(n),i!==e-1&&(t+=", ")}return t}var aw=ae(()=>{"use strict";iw()});function p0(a){return a.type==="function"?`function ${a.name}(${jr(a.inputs)})${a.stateMutability&&a.stateMutability!=="nonpayable"?` ${a.stateMutability}`:""}${a.outputs.length?` returns (${jr(a.outputs)})`:""}`:a.type==="event"?`event ${a.name}(${jr(a.inputs)})`:a.type==="error"?`error ${a.name}(${jr(a.inputs)})`:a.type==="constructor"?`constructor(${jr(a.inputs)})${a.stateMutability==="payable"?" payable":""}`:a.type==="fallback"?"fallback()":"receive() external payable"}var nw=ae(()=>{"use strict";aw()});function sw(a){return rw.test(a)}function ow(a){return Ai(rw,a)}function cw(a){return lw.test(a)}function uw(a){return Ai(lw,a)}function pw(a){return mw.test(a)}function hw(a){return Ai(mw,a)}function Yu(a){return dw.test(a)}function fw(a){return Ai(dw,a)}function bw(a){return yw.test(a)}function gw(a){return Ai(yw,a)}function Lw(a){return ED.test(a)}function _w(a){return wD.test(a)}var rw,lw,mw,dw,yw,ED,wD,vw,zu,ju=ae(()=>{"use strict";Co();rw=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;lw=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;mw=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;dw=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;yw=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;ED=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;wD=/^receive\(\) external payable$/;vw=new Set(["indexed"]),zu=new Set(["calldata","memory","storage"])});var $u,Xu,h0=ae(()=>{"use strict";zr();$u=class extends Ut{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}},Xu=class extends Ut{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}});var Qu,Ju,Zu,em,tm,d0=ae(()=>{"use strict";zr();Qu=class extends Ut{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}},Ju=class extends Ut{constructor({param:t,name:e}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${e}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}},Zu=class extends Ut{constructor({param:t,type:e,modifier:i}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${i}" not allowed${e?` in "${e}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}},em=class extends Ut{constructor({param:t,type:e,modifier:i}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${i}" not allowed${e?` in "${e}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}},tm=class extends Ut{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}});var Ka,im,am,f0=ae(()=>{"use strict";zr();Ka=class extends Ut{constructor({signature:t,type:e}){super(`Invalid ${e} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}},im=class extends Ut{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}},am=class extends Ut{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}});var nm,xw=ae(()=>{"use strict";zr();nm=class extends Ut{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}});var rm,Iw=ae(()=>{"use strict";zr();rm=class extends Ut{constructor({current:t,depth:e}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${e>0?"opening":"closing"} parentheses.`],details:`Depth "${e}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}});function Ew(a,t){return t?`${t}:${a}`:a}var sm,ww=ae(()=>{"use strict";sm=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]])});function Tw(a,t={}){if(pw(a)){let e=hw(a);if(!e)throw new Ka({signature:a,type:"function"});let i=ji(e.parameters),n=[],r=i.length;for(let o=0;o<r;o++)n.push(fn(i[o],{modifiers:zu,structs:t,type:"function"}));let s=[];if(e.returns){let o=ji(e.returns),l=o.length;for(let c=0;c<l;c++)s.push(fn(o[c],{modifiers:zu,structs:t,type:"function"}))}return{name:e.name,type:"function",stateMutability:e.stateMutability??"nonpayable",inputs:n,outputs:s}}if(cw(a)){let e=uw(a);if(!e)throw new Ka({signature:a,type:"event"});let i=ji(e.parameters),n=[],r=i.length;for(let s=0;s<r;s++)n.push(fn(i[s],{modifiers:vw,structs:t,type:"event"}));return{name:e.name,type:"event",inputs:n}}if(sw(a)){let e=ow(a);if(!e)throw new Ka({signature:a,type:"error"});let i=ji(e.parameters),n=[],r=i.length;for(let s=0;s<r;s++)n.push(fn(i[s],{structs:t,type:"error"}));return{name:e.name,type:"error",inputs:n}}if(bw(a)){let e=gw(a);if(!e)throw new Ka({signature:a,type:"constructor"});let i=ji(e.parameters),n=[],r=i.length;for(let s=0;s<r;s++)n.push(fn(i[s],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:e.stateMutability??"nonpayable",inputs:n}}if(Lw(a))return{type:"fallback"};if(_w(a))return{type:"receive",stateMutability:"payable"};throw new im({signature:a})}function fn(a,t){let e=Ew(a,t?.type);if(sm.has(e))return sm.get(e);let i=qu.test(a),n=Ai(i?CD:TD,a);if(!n)throw new Qu({param:a});if(n.name&&AD(n.name))throw new Ju({param:a,name:n.name});let r=n.name?{name:n.name}:{},s=n.modifier==="indexed"?{indexed:!0}:{},o=t?.structs??{},l,c={};if(i){l="tuple";let p=ji(n.type),d=[],L=p.length;for(let v=0;v<L;v++)d.push(fn(p[v],{structs:o}));c={components:d}}else if(n.type in o)l="tuple",c={components:o[n.type]};else if(SD.test(n.type))l=`${n.type}256`;else if(l=n.type,t?.type!=="struct"&&!y0(l))throw new Xu({type:l});if(n.modifier){if(!t?.modifiers?.has?.(n.modifier))throw new Zu({param:a,type:t?.type,modifier:n.modifier});if(zu.has(n.modifier)&&!kD(l,!!n.array))throw new em({param:a,type:t?.type,modifier:n.modifier})}let u={type:`${l}${n.array??""}`,...r,...s,...c};return sm.set(e,u),u}function ji(a,t=[],e="",i=0){let n=a.trim().length;for(let r=0;r<n;r++){let s=a[r],o=a.slice(r+1);switch(s){case",":return i===0?ji(o,[...t,e.trim()]):ji(o,t,`${e}${s}`,i);case"(":return ji(o,t,`${e}${s}`,i+1);case")":return ji(o,t,`${e}${s}`,i-1);default:return ji(o,t,`${e}${s}`,i)}}if(e==="")return t;if(i!==0)throw new rm({current:e,depth:i});return t.push(e.trim()),t}function y0(a){return a==="address"||a==="bool"||a==="function"||a==="string"||u0.test(a)||m0.test(a)}function AD(a){return a==="address"||a==="bool"||a==="function"||a==="string"||a==="tuple"||u0.test(a)||m0.test(a)||DD.test(a)}function kD(a,t){return t||a==="bytes"||a==="string"||a==="tuple"}var TD,CD,SD,DD,b0=ae(()=>{"use strict";Co();h0();d0();f0();Iw();ww();ju();TD=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,CD=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,SD=/^u?int$/;DD=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/});function Cw(a){let t={},e=a.length;for(let s=0;s<e;s++){let o=a[s];if(!Yu(o))continue;let l=fw(o);if(!l)throw new Ka({signature:o,type:"struct"});let c=l.properties.split(";"),u=[],p=c.length;for(let d=0;d<p;d++){let v=c[d].trim();if(!v)continue;let E=fn(v,{type:"struct"});u.push(E)}if(!u.length)throw new am({signature:o});t[l.name]=u}let i={},n=Object.entries(t),r=n.length;for(let s=0;s<r;s++){let[o,l]=n[s];i[o]=Sw(l,t)}return i}function Sw(a,t,e=new Set){let i=[],n=a.length;for(let r=0;r<n;r++){let s=a[r];if(qu.test(s.type))i.push(s);else{let l=Ai(BD,s.type);if(!l?.type)throw new tm({abiParameter:s});let{array:c,type:u}=l;if(u in t){if(e.has(u))throw new nm({type:u});i.push({...s,type:`tuple${c??""}`,components:Sw(t[u]??[],t,new Set([...e,u]))})}else if(y0(u))i.push(s);else throw new $u({type:u})}}return i}var BD,Dw=ae(()=>{"use strict";Co();h0();d0();f0();xw();ju();b0();BD=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/});function om(a){let t=Cw(a),e=[],i=a.length;for(let n=0;n<i;n++){let r=a[n];Yu(r)||e.push(Tw(r,t))}return e}var Aw=ae(()=>{"use strict";ju();Dw();b0()});var g0=ae(()=>{"use strict";nw();Aw()});function mi(a,{includeName:t=!1}={}){if(a.type!=="function"&&a.type!=="event"&&a.type!=="error")throw new lm(a.type);return`${a.name}(${So(a.inputs,{includeName:t})})`}function So(a,{includeName:t=!1}={}){return a?a.map(e=>MD(e,{includeName:t})).join(t?", ":","):""}function MD(a,{includeName:t}){return a.type.startsWith("tuple")?`(${So(a.components,{includeName:t})})${a.type.slice(5)}`:a.type+(t&&a.name?` ${a.name}`:"")}var ar=ae(()=>{"use strict";zt()});function At(a,{strict:t=!0}={}){return!a||typeof a!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(a):a.startsWith("0x")}var $i=ae(()=>{"use strict"});function st(a){return At(a,{strict:!1})?Math.ceil((a.length-2)/2):a.length}var Xi=ae(()=>{"use strict";$i()});var L0,kw=ae(()=>{"use strict";L0="2.21.49"});function Bw(a,t){return t?.(a)?a:a&&typeof a=="object"&&"cause"in a&&a.cause!==void 0?Bw(a.cause,t):t?null:a}var _0,G,Ye=ae(()=>{"use strict";kw();_0={getDocsUrl:({docsBaseUrl:a,docsPath:t="",docsSlug:e})=>t?`${a??"https://viem.sh"}${t}${e?`#${e}`:""}`:void 0,version:`viem@${L0}`},G=class a extends Error{constructor(t,e={}){let i=(()=>e.cause instanceof a?e.cause.details:e.cause?.message?e.cause.message:e.details)(),n=(()=>e.cause instanceof a&&e.cause.docsPath||e.docsPath)(),r=_0.getDocsUrl?.({...e,docsPath:n}),s=[t||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...i?[`Details: ${i}`]:[],..._0.version?[`Version: ${_0.version}`]:[]].join(`
`);super(s,e.cause?{cause:e.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=n,this.metaMessages=e.metaMessages,this.name=e.name??this.name,this.shortMessage=t,this.version=L0}walk(t){return Bw(this,t)}}});var cm,Do,$r,da,um,mm,pm,Xr,hm,Qr,Ao,yn,dm,fm,ym,Qi,fa,bm,gm,Lm,lm,zt=ae(()=>{"use strict";ar();Xi();Ye();cm=class extends G{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}},Do=class extends G{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}},$r=class extends G{constructor({data:t,params:e,size:i}){super([`Data size of ${i} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${So(e,{includeName:!0})})`,`Data:   ${t} (${i} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=e,this.size=i}},da=class extends G{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}},um=class extends G{constructor({expectedLength:t,givenLength:e,type:i}){super([`ABI encoding array length mismatch for type ${i}.`,`Expected length: ${t}`,`Given length: ${e}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}},mm=class extends G{constructor({expectedSize:t,value:e}){super(`Size of bytes "${e}" (bytes${st(e)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}},pm=class extends G{constructor({expectedLength:t,givenLength:e}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${e}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}},Xr=class extends G{constructor(t,{docsPath:e}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:e,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}},hm=class extends G{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}},Qr=class extends G{constructor(t,{docsPath:e}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:e,name:"AbiEventSignatureNotFoundError"})}},Ao=class extends G{constructor(t,{docsPath:e}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:e,name:"AbiEventNotFoundError"})}},yn=class extends G{constructor(t,{docsPath:e}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:e,name:"AbiFunctionNotFoundError"})}},dm=class extends G{constructor(t,{docsPath:e}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:e,name:"AbiFunctionOutputsNotFoundError"})}},fm=class extends G{constructor(t,e){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${mi(t.abiItem)}\`, and`,`\`${e.type}\` in \`${mi(e.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}},ym=class extends G{constructor({expectedSize:t,givenSize:e}){super(`Expected bytes${t}, got bytes${e}.`,{name:"BytesSizeMismatchError"})}},Qi=class extends G{constructor({abiItem:t,data:e,params:i,size:n}){super([`Data size of ${n} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${So(i,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=e,this.params=i,this.size=n}},fa=class extends G{constructor({abiItem:t,param:e}){super([`Expected a topic for indexed event parameter${e.name?` "${e.name}"`:""} on event "${mi(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}},bm=class extends G{constructor(t,{docsPath:e}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:e,name:"InvalidAbiEncodingType"})}},gm=class extends G{constructor(t,{docsPath:e}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:e,name:"InvalidAbiDecodingType"})}},Lm=class extends G{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}},lm=class extends G{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}});var ko,Bo,Mo,vm=ae(()=>{"use strict";Ye();ko=class extends G{constructor({offset:t,position:e,size:i}){super(`Slice ${e==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${i}).`,{name:"SliceOffsetOutOfBoundsError"})}},Bo=class extends G{constructor({size:t,targetSize:e,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${t}) exceeds padding size (${e}).`,{name:"SizeExceedsPaddingSizeError"})}},Mo=class extends G{constructor({size:t,targetSize:e,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} is expected to be ${e} ${i} long, but is ${t} ${i} long.`,{name:"InvalidBytesLengthError"})}}});function bn(a,{dir:t,size:e=32}={}){return typeof a=="string"?qa(a,{dir:t,size:e}):RD(a,{dir:t,size:e})}function qa(a,{dir:t,size:e=32}={}){if(e===null)return a;let i=a.replace("0x","");if(i.length>e*2)throw new Bo({size:Math.ceil(i.length/2),targetSize:e,type:"hex"});return`0x${i[t==="right"?"padEnd":"padStart"](e*2,"0")}`}function RD(a,{dir:t,size:e=32}={}){if(e===null)return a;if(a.length>e)throw new Bo({size:a.length,targetSize:e,type:"bytes"});let i=new Uint8Array(e);for(let n=0;n<e;n++){let r=t==="right";i[r?n:e-n-1]=a[r?n:a.length-n-1]}return i}var xm=ae(()=>{"use strict";vm()});var Im,Em,wm,Tm,Cm=ae(()=>{"use strict";Ye();Im=class extends G{constructor({max:t,min:e,signed:i,size:n,value:r}){super(`Number "${r}" is not in safe ${n?`${n*8}-bit ${i?"signed":"unsigned"} `:""}integer range ${t?`(${e} to ${t})`:`(above ${e})`}`,{name:"IntegerOutOfRangeError"})}},Em=class extends G{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}},wm=class extends G{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}},Tm=class extends G{constructor({givenSize:t,maxSize:e}){super(`Size cannot exceed ${e} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}});function ii(a,{dir:t="left"}={}){let e=typeof a=="string"?a.replace("0x",""):a,i=0;for(let n=0;n<e.length-1&&e[t==="left"?n:e.length-n-1].toString()==="0";n++)i++;return e=t==="left"?e.slice(i):e.slice(0,e.length-i),typeof a=="string"?(e.length===1&&t==="right"&&(e=`${e}0`),`0x${e.length%2===1?`0${e}`:e}`):e}var Jr=ae(()=>{"use strict"});function gi(a,{size:t}){if(st(a)>t)throw new Tm({givenSize:st(a),maxSize:t})}function Nt(a,t={}){let{signed:e}=t;t.size&&gi(a,{size:t.size});let i=BigInt(a);if(!e)return i;let n=(a.length-2)/2,r=(1n<<BigInt(n)*8n-1n)-1n;return i<=r?i:i-BigInt(`0x${"f".padStart(n*2,"f")}`)-1n}function v0(a,t={}){let e=a;if(t.size&&(gi(e,{size:t.size}),e=ii(e)),ii(e)==="0x00")return!1;if(ii(e)==="0x01")return!0;throw new wm(e)}function Ot(a,t={}){return Number(Nt(a,t))}var ai=ae(()=>{"use strict";Cm();Xi();Jr()});function Ce(a,t={}){return typeof a=="number"||typeof a=="bigint"?xe(a,t):typeof a=="string"?Ji(a,t):typeof a=="boolean"?Sm(a,t):et(a,t)}function Sm(a,t={}){let e=`0x${Number(a)}`;return typeof t.size=="number"?(gi(e,{size:t.size}),bn(e,{size:t.size})):e}function et(a,t={}){let e="";for(let n=0;n<a.length;n++)e+=PD[a[n]];let i=`0x${e}`;return typeof t.size=="number"?(gi(i,{size:t.size}),bn(i,{dir:"right",size:t.size})):i}function xe(a,t={}){let{signed:e,size:i}=t,n=BigInt(a),r;i?e?r=(1n<<BigInt(i)*8n-1n)-1n:r=2n**(BigInt(i)*8n)-1n:typeof a=="number"&&(r=BigInt(Number.MAX_SAFE_INTEGER));let s=typeof r=="bigint"&&e?-r-1n:0;if(r&&n>r||n<s){let l=typeof a=="bigint"?"n":"";throw new Im({max:r?`${r}${l}`:void 0,min:`${s}${l}`,signed:e,size:i,value:`${a}${l}`})}let o=`0x${(e&&n<0?(1n<<BigInt(i*8))+BigInt(n):n).toString(16)}`;return i?bn(o,{size:i}):o}function Ji(a,t={}){let e=ND.encode(a);return et(e,t)}var PD,ND,Ue=ae(()=>{"use strict";Cm();xm();ai();PD=Array.from({length:256},(a,t)=>t.toString(16).padStart(2,"0"));ND=new TextEncoder});function ki(a,t={}){return typeof a=="number"||typeof a=="bigint"?UD(a,t):typeof a=="boolean"?HD(a,t):At(a)?Vt(a,t):Zi(a,t)}function HD(a,t={}){let e=new Uint8Array(1);return e[0]=Number(a),typeof t.size=="number"?(gi(e,{size:t.size}),bn(e,{size:t.size})):e}function Mw(a){if(a>=Wa.zero&&a<=Wa.nine)return a-Wa.zero;if(a>=Wa.A&&a<=Wa.F)return a-(Wa.A-10);if(a>=Wa.a&&a<=Wa.f)return a-(Wa.a-10)}function Vt(a,t={}){let e=a;t.size&&(gi(e,{size:t.size}),e=bn(e,{dir:"right",size:t.size}));let i=e.slice(2);i.length%2&&(i=`0${i}`);let n=i.length/2,r=new Uint8Array(n);for(let s=0,o=0;s<n;s++){let l=Mw(i.charCodeAt(o++)),c=Mw(i.charCodeAt(o++));if(l===void 0||c===void 0)throw new G(`Invalid byte sequence ("${i[o-2]}${i[o-1]}" in "${i}").`);r[s]=l*16+c}return r}function UD(a,t){let e=xe(a,t);return Vt(e)}function Zi(a,t={}){let e=OD.encode(a);return typeof t.size=="number"?(gi(e,{size:t.size}),bn(e,{dir:"right",size:t.size})):e}var OD,Wa,jt=ae(()=>{"use strict";Ye();$i();xm();ai();Ue();OD=new TextEncoder;Wa={zero:48,nine:57,A:65,F:70,a:97,f:102}});function Ro(a){if(!Number.isSafeInteger(a)||a<0)throw new Error(`positive integer expected, not ${a}`)}function VD(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}function gn(a,...t){if(!VD(a))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(a.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${a.length}`)}function Rw(a){if(typeof a!="function"||typeof a.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ro(a.outputLen),Ro(a.blockLen)}function Ya(a,t=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(t&&a.finished)throw new Error("Hash#digest() has already been called")}function Dm(a,t){gn(a);let e=t.outputLen;if(a.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}var Po=ae(()=>{"use strict"});function FD(a,t=!1){return t?{h:Number(a&Am),l:Number(a>>Pw&Am)}:{h:Number(a>>Pw&Am)|0,l:Number(a&Am)|0}}function Nw(a,t=!1){let e=new Uint32Array(a.length),i=new Uint32Array(a.length);for(let n=0;n<a.length;n++){let{h:r,l:s}=FD(a[n],t);[e[n],i[n]]=[r,s]}return[e,i]}var Am,Pw,Ow,Hw,Uw,Vw,Fw=ae(()=>{"use strict";Am=BigInt(4294967295),Pw=BigInt(32);Ow=(a,t,e)=>a<<e|t>>>32-e,Hw=(a,t,e)=>t<<e|a>>>32-e,Uw=(a,t,e)=>t<<e-32|a>>>64-e,Vw=(a,t,e)=>a<<e-32|t>>>64-e});var nr,Gw=ae(()=>{"use strict";nr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});function I0(a){for(let t=0;t<a.length;t++)a[t]=GD(a[t])}function KD(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function _n(a){return typeof a=="string"&&(a=KD(a)),gn(a),a}function qw(...a){let t=0;for(let i=0;i<a.length;i++){let n=a[i];gn(n),t+=n.length}let e=new Uint8Array(t);for(let i=0,n=0;i<a.length;i++){let r=a[i];e.set(r,n),n+=r.length}return e}function Bm(a){let t=i=>a().update(_n(i)).digest(),e=a();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>a(),t}function Ww(a){let t=(i,n)=>a(n).update(_n(i)).digest(),e=a({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=i=>a(i),t}function Mm(a=32){if(nr&&typeof nr.getRandomValues=="function")return nr.getRandomValues(new Uint8Array(a));if(nr&&typeof nr.randomBytes=="function")return nr.randomBytes(a);throw new Error("crypto.getRandomValues must be defined")}var Kw,km,ea,x0,GD,Ln,BU,rr=ae(()=>{"use strict";Gw();Po();Kw=a=>new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)),km=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),ea=(a,t)=>a<<32-t|a>>>t,x0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,GD=a=>a<<24&4278190080|a<<8&16711680|a>>>8&65280|a>>>24&255;Ln=class{clone(){return this._cloneInto()}},BU={}.toString});function QD(a,t=24){let e=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let s=0;s<10;s++)e[s]=a[s]^a[s+10]^a[s+20]^a[s+30]^a[s+40];for(let s=0;s<10;s+=2){let o=(s+8)%10,l=(s+2)%10,c=e[l],u=e[l+1],p=Yw(c,u,1)^e[o],d=zw(c,u,1)^e[o+1];for(let L=0;L<50;L+=10)a[s+L]^=p,a[s+L+1]^=d}let n=a[2],r=a[3];for(let s=0;s<24;s++){let o=$w[s],l=Yw(n,r,o),c=zw(n,r,o),u=jw[s];n=a[u],r=a[u+1],a[u]=l,a[u+1]=c}for(let s=0;s<50;s+=10){for(let o=0;o<10;o++)e[o]=a[s+o];for(let o=0;o<10;o++)a[s+o]^=~e[(o+2)%10]&e[(o+4)%10]}a[0]^=$D[i],a[1]^=XD[i]}e.fill(0)}var jw,$w,Xw,qD,No,WD,YD,zD,jD,$D,XD,Yw,zw,Rm,vn,OU,HU,UU,VU,FU,Qw,GU,KU,Jw,qU,WU,Zw=ae(()=>{"use strict";Po();Fw();rr();jw=[],$w=[],Xw=[],qD=BigInt(0),No=BigInt(1),WD=BigInt(2),YD=BigInt(7),zD=BigInt(256),jD=BigInt(113);for(let a=0,t=No,e=1,i=0;a<24;a++){[e,i]=[i,(2*e+3*i)%5],jw.push(2*(5*i+e)),$w.push((a+1)*(a+2)/2%64);let n=qD;for(let r=0;r<7;r++)t=(t<<No^(t>>YD)*jD)%zD,t&WD&&(n^=No<<(No<<BigInt(r))-No);Xw.push(n)}[$D,XD]=Nw(Xw,!0),Yw=(a,t,e)=>e>32?Uw(a,t,e):Ow(a,t,e),zw=(a,t,e)=>e>32?Vw(a,t,e):Hw(a,t,e);Rm=class a extends Ln{constructor(t,e,i,n=!1,r=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=i,this.enableXOF=n,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ro(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Kw(this.state)}keccak(){x0||I0(this.state32),QD(this.state32,this.rounds),x0||I0(this.state32),this.posOut=0,this.pos=0}update(t){Ya(this);let{blockLen:e,state:i}=this;t=_n(t);let n=t.length;for(let r=0;r<n;){let s=Math.min(e-this.pos,n-r);for(let o=0;o<s;o++)i[this.pos++]^=t[r++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:i,blockLen:n}=this;t[i]^=e,e&128&&i===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){Ya(this,!1),gn(t),this.finish();let e=this.state,{blockLen:i}=this;for(let n=0,r=t.length;n<r;){this.posOut>=i&&this.keccak();let s=Math.min(i-this.posOut,r-n);t.set(e.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ro(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Dm(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:i,outputLen:n,rounds:r,enableXOF:s}=this;return t||(t=new a(e,i,n,s,r)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=r,t.suffix=i,t.outputLen=n,t.enableXOF=s,t.destroyed=this.destroyed,t}},vn=(a,t,e)=>Bm(()=>new Rm(t,a,e)),OU=vn(6,144,224/8),HU=vn(6,136,256/8),UU=vn(6,104,384/8),VU=vn(6,72,512/8),FU=vn(1,144,224/8),Qw=vn(1,136,256/8),GU=vn(1,104,384/8),KU=vn(1,72,512/8),Jw=(a,t,e)=>Ww((i={})=>new Rm(t,a,i.dkLen===void 0?e:i.dkLen,!0)),qU=Jw(31,168,128/8),WU=Jw(31,136,256/8)});function ht(a,t){let e=t||"hex",i=Qw(At(a,{strict:!1})?ki(a):a);return e==="bytes"?i:Ce(i)}var Bi=ae(()=>{"use strict";Zw();$i();jt();Ue()});function eT(a){return JD(a)}var JD,tT=ae(()=>{"use strict";jt();Bi();JD=a=>ht(ki(a))});function iT(a){let t=!0,e="",i=0,n="",r=!1;for(let s=0;s<a.length;s++){let o=a[s];if(["(",")",","].includes(o)&&(t=!0),o==="("&&i++,o===")"&&i--,!!t){if(i===0){if(o===" "&&["event","function",""].includes(n))n="";else if(n+=o,o===")"){r=!0;break}continue}if(o===" "){a[s-1]!==","&&e!==","&&e!==",("&&(e="",t=!1);continue}n+=o,e+=o}}if(!r)throw new G("Unable to normalize signature.");return n}var aT=ae(()=>{"use strict";Ye()});var nT,rT=ae(()=>{"use strict";g0();aT();nT=a=>{let t=(()=>typeof a=="string"?a:p0(a))();return iT(t)}});function Pm(a){return eT(nT(a))}var E0=ae(()=>{"use strict";tT();rT()});var xn,Oo=ae(()=>{"use strict";E0();xn=Pm});var Lt,ya=ae(()=>{"use strict";Ye();Lt=class extends G{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}});var ba,Ho=ae(()=>{"use strict";ba=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){let e=super.get(t);return super.has(t)&&e!==void 0&&(this.delete(t),super.set(t,e)),e}set(t,e){if(super.set(t,e),this.maxSize&&this.size>this.maxSize){let i=this.keys().next().value;i&&this.delete(i)}return this}}});function za(a,t){if(w0.has(`${a}.${t}`))return w0.get(`${a}.${t}`);let e=t?`${t}${a.toLowerCase()}`:a.substring(2).toLowerCase(),i=ht(Zi(e),"bytes"),n=(t?e.substring(`${t}0x`.length):e).split("");for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(i[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());let r=`0x${n.join("")}`;return w0.set(`${a}.${t}`,r),r}function Nm(a,t){if(!dt(a,{strict:!1}))throw new Lt({address:a});return za(a,t)}var w0,sr=ae(()=>{"use strict";ya();jt();Bi();Ho();ta();w0=new ba(8192)});function dt(a,t){let{strict:e=!0}=t??{},i=`${a}.${e}`;if(T0.has(i))return T0.get(i);let n=(()=>ZD.test(a)?a.toLowerCase()===a?!0:e?za(a)===a:!0:!1)();return T0.set(i,n),n}var ZD,T0,ta=ae(()=>{"use strict";Ho();sr();ZD=/^0x[a-fA-F0-9]{40}$/,T0=new ba(8192)});function pi(a){return typeof a[0]=="string"?ni(a):eA(a)}function eA(a){let t=0;for(let n of a)t+=n.length;let e=new Uint8Array(t),i=0;for(let n of a)e.set(n,i),i+=n.length;return e}function ni(a){return`0x${a.reduce((t,e)=>t+e.replace("0x",""),"")}`}var Mi=ae(()=>{"use strict"});function ja(a,t,e,{strict:i}={}){return At(a,{strict:!1})?S0(a,t,e,{strict:i}):C0(a,t,e,{strict:i})}function sT(a,t){if(typeof t=="number"&&t>0&&t>st(a)-1)throw new ko({offset:t,position:"start",size:st(a)})}function oT(a,t,e){if(typeof t=="number"&&typeof e=="number"&&st(a)!==e-t)throw new ko({offset:e,position:"end",size:st(a)})}function C0(a,t,e,{strict:i}={}){sT(a,t);let n=a.slice(t,e);return i&&oT(n,t,e),n}function S0(a,t,e,{strict:i}={}){sT(a,t);let n=`0x${a.replace("0x","").slice((t??0)*2,(e??a.length)*2)}`;return i&&oT(n,t,e),n}var or=ae(()=>{"use strict";vm();$i();Xi()});function Ci(a,t){if(a.length!==t.length)throw new pm({expectedLength:a.length,givenLength:t.length});let e=tA({params:a,values:t}),i=A0(e);return i.length===0?"0x":i}function tA({params:a,values:t}){let e=[];for(let i=0;i<a.length;i++)e.push(D0({param:a[i],value:t[i]}));return e}function D0({param:a,value:t}){let e=Om(a.type);if(e){let[i,n]=e;return aA(t,{length:i,param:{...a,type:n}})}if(a.type==="tuple")return lA(t,{param:a});if(a.type==="address")return iA(t);if(a.type==="bool")return rA(t);if(a.type.startsWith("uint")||a.type.startsWith("int")){let i=a.type.startsWith("int");return sA(t,{signed:i})}if(a.type.startsWith("bytes"))return nA(t,{param:a});if(a.type==="string")return oA(t);throw new bm(a.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function A0(a){let t=0;for(let r=0;r<a.length;r++){let{dynamic:s,encoded:o}=a[r];s?t+=32:t+=st(o)}let e=[],i=[],n=0;for(let r=0;r<a.length;r++){let{dynamic:s,encoded:o}=a[r];s?(e.push(xe(t+n,{size:32})),i.push(o),n+=st(o)):e.push(o)}return pi([...e,...i])}function iA(a){if(!dt(a))throw new Lt({address:a});return{dynamic:!1,encoded:qa(a.toLowerCase())}}function aA(a,{length:t,param:e}){let i=t===null;if(!Array.isArray(a))throw new Lm(a);if(!i&&a.length!==t)throw new um({expectedLength:t,givenLength:a.length,type:`${e.type}[${t}]`});let n=!1,r=[];for(let s=0;s<a.length;s++){let o=D0({param:e,value:a[s]});o.dynamic&&(n=!0),r.push(o)}if(i||n){let s=A0(r);if(i){let o=xe(r.length,{size:32});return{dynamic:!0,encoded:r.length>0?pi([o,s]):o}}if(n)return{dynamic:!0,encoded:s}}return{dynamic:!1,encoded:pi(r.map(({encoded:s})=>s))}}function nA(a,{param:t}){let[,e]=t.type.split("bytes"),i=st(a);if(!e){let n=a;return i%32!==0&&(n=qa(n,{dir:"right",size:Math.ceil((a.length-2)/2/32)*32})),{dynamic:!0,encoded:pi([qa(xe(i,{size:32})),n])}}if(i!==Number.parseInt(e))throw new mm({expectedSize:Number.parseInt(e),value:a});return{dynamic:!1,encoded:qa(a,{dir:"right"})}}function rA(a){if(typeof a!="boolean")throw new G(`Invalid boolean value: "${a}" (type: ${typeof a}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:qa(Sm(a))}}function sA(a,{signed:t}){return{dynamic:!1,encoded:xe(a,{size:32,signed:t})}}function oA(a){let t=Ji(a),e=Math.ceil(st(t)/32),i=[];for(let n=0;n<e;n++)i.push(qa(ja(t,n*32,(n+1)*32),{dir:"right"}));return{dynamic:!0,encoded:pi([qa(xe(st(t),{size:32})),...i])}}function lA(a,{param:t}){let e=!1,i=[];for(let n=0;n<t.components.length;n++){let r=t.components[n],s=Array.isArray(a)?n:r.name,o=D0({param:r,value:a[s]});i.push(o),o.dynamic&&(e=!0)}return{dynamic:e,encoded:e?A0(i):pi(i.map(({encoded:n})=>n))}}function Om(a){let t=a.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}var In=ae(()=>{"use strict";zt();ya();Ye();ta();Mi();xm();Xi();or();Ue()});var Zr,Hm=ae(()=>{"use strict";or();E0();Zr=a=>ja(Pm(a),0,4)});function ga(a){let{abi:t,args:e=[],name:i}=a,n=At(i,{strict:!1}),r=t.filter(o=>n?o.type==="function"?Zr(o)===i:o.type==="event"?xn(o)===i:!1:"name"in o&&o.name===i);if(r.length===0)return;if(r.length===1)return r[0];let s;for(let o of r){if(!("inputs"in o))continue;if(!e||e.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==e.length)continue;if(e.every((c,u)=>{let p="inputs"in o&&o.inputs[u];return p?k0(c,p):!1})){if(s&&"inputs"in s&&s.inputs){let c=lT(o.inputs,s.inputs,e);if(c)throw new fm({abiItem:o,type:c[0]},{abiItem:s,type:c[1]})}s=o}}return s||r[0]}function k0(a,t){let e=typeof a,i=t.type;switch(i){case"address":return dt(a,{strict:!1});case"bool":return e==="boolean";case"function":return e==="string";case"string":return e==="string";default:return i==="tuple"&&"components"in t?Object.values(t.components).every((n,r)=>k0(Object.values(a)[r],n)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i)?e==="number"||e==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i)?e==="string"||a instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i)?Array.isArray(a)&&a.every(n=>k0(n,{...t,type:i.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function lT(a,t,e){for(let i in a){let n=a[i],r=t[i];if(n.type==="tuple"&&r.type==="tuple"&&"components"in n&&"components"in r)return lT(n.components,r.components,e[i]);let s=[n.type,r.type];if((()=>s.includes("address")&&s.includes("bytes20")?!0:s.includes("address")&&s.includes("string")?dt(e[i],{strict:!1}):s.includes("address")&&s.includes("bytes")?dt(e[i],{strict:!1}):!1)())return s}}var es=ae(()=>{"use strict";zt();$i();ta();Oo();Hm()});function _t(a){return typeof a=="string"?{address:a,type:"json-rpc"}:a}var Li=ae(()=>{"use strict"});function pT(a){let{abi:t,args:e,functionName:i}=a,n=t[0];if(i){let r=ga({abi:t,args:e,name:i});if(!r)throw new yn(i,{docsPath:mT});n=r}if(n.type!=="function")throw new yn(void 0,{docsPath:mT});return{abi:[n],functionName:Zr(mi(n))}}var mT,hT=ae(()=>{"use strict";zt();Hm();ar();es();mT="/docs/contract/encodeFunctionData"});function Ft(a){let{args:t}=a,{abi:e,functionName:i}=(()=>a.abi.length===1&&a.functionName?.startsWith("0x")?a:pT(a))(),n=e[0],r=i,s="inputs"in n&&n.inputs?Ci(n.inputs,t??[]):void 0;return ni([r,s??"0x"])}var _a=ae(()=>{"use strict";Mi();In();hT()});var Vm,dT,fT,Fm=ae(()=>{"use strict";Vm={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},dT={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},fT={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"}});var Uo,ts,Gm,B0=ae(()=>{"use strict";Ye();Uo=class extends G{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},ts=class extends G{constructor({length:t,position:e}){super(`Position \`${e}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},Gm=class extends G{constructor({count:t,limit:e}){super(`Recursive read limit of \`${e}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}});function is(a,{recursiveReadLimit:t=8192}={}){let e=Object.create(cA);return e.bytes=a,e.dataView=new DataView(a.buffer,a.byteOffset,a.byteLength),e.positionReadCount=new Map,e.recursiveReadLimit=t,e}var cA,Km=ae(()=>{"use strict";B0();cA={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Gm({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(a){if(a<0||a>this.bytes.length-1)throw new ts({length:this.bytes.length,position:a})},decrementPosition(a){if(a<0)throw new Uo({offset:a});let t=this.position-a;this.assertPosition(t),this.position=t},getReadCount(a){return this.positionReadCount.get(a||this.position)||0},incrementPosition(a){if(a<0)throw new Uo({offset:a});let t=this.position+a;this.assertPosition(t),this.position=t},inspectByte(a){let t=a??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(a,t){let e=t??this.position;return this.assertPosition(e+a-1),this.bytes.subarray(e,e+a)},inspectUint8(a){let t=a??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(a){let t=a??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(a){let t=a??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(a){let t=a??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(a){this.assertPosition(this.position),this.bytes[this.position]=a,this.position++},pushBytes(a){this.assertPosition(this.position+a.length-1),this.bytes.set(a,this.position),this.position+=a.length},pushUint8(a){this.assertPosition(this.position),this.bytes[this.position]=a,this.position++},pushUint16(a){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,a),this.position+=2},pushUint24(a){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,a>>8),this.dataView.setUint8(this.position+2,a&255),this.position+=3},pushUint32(a){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,a),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let a=this.inspectByte();return this.position++,a},readBytes(a,t){this.assertReadLimit(),this._touch();let e=this.inspectBytes(a);return this.position+=t??a,e},readUint8(){this.assertReadLimit(),this._touch();let a=this.inspectUint8();return this.position+=1,a},readUint16(){this.assertReadLimit(),this._touch();let a=this.inspectUint16();return this.position+=2,a},readUint24(){this.assertReadLimit(),this._touch();let a=this.inspectUint24();return this.position+=3,a},readUint32(){this.assertReadLimit(),this._touch();let a=this.inspectUint32();return this.position+=4,a},get remaining(){return this.bytes.length-this.position},setPosition(a){let t=this.position;return this.assertPosition(a),this.position=a,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;let a=this.getReadCount();this.positionReadCount.set(this.position,a+1),a>0&&this.recursiveReadCount++}}});function yT(a,t={}){typeof t.size<"u"&&gi(a,{size:t.size});let e=et(a,t);return Nt(e,t)}function bT(a,t={}){let e=a;if(typeof t.size<"u"&&(gi(e,{size:t.size}),e=ii(e)),e.length>1||e[0]>1)throw new Em(e);return!!e[0]}function va(a,t={}){typeof t.size<"u"&&gi(a,{size:t.size});let e=et(a,t);return Ot(e,t)}function gT(a,t={}){let e=a;return typeof t.size<"u"&&(gi(e,{size:t.size}),e=ii(e,{dir:"right"})),new TextDecoder().decode(e)}var LT=ae(()=>{"use strict";Cm();Jr();ai();Ue()});function lr(a,t){let e=typeof t=="string"?Vt(t):t,i=is(e);if(st(e)===0&&a.length>0)throw new da;if(st(t)&&st(t)<32)throw new $r({data:typeof t=="string"?t:et(t),params:a,size:st(t)});let n=0,r=[];for(let s=0;s<a.length;++s){let o=a[s];i.setPosition(n);let[l,c]=as(i,o,{staticPosition:0});n+=c,r.push(l)}return r}function as(a,t,{staticPosition:e}){let i=Om(t.type);if(i){let[n,r]=i;return mA(a,{...t,type:r},{length:n,staticPosition:e})}if(t.type==="tuple")return fA(a,t,{staticPosition:e});if(t.type==="address")return uA(a);if(t.type==="bool")return pA(a);if(t.type.startsWith("bytes"))return hA(a,t,{staticPosition:e});if(t.type.startsWith("uint")||t.type.startsWith("int"))return dA(a,t);if(t.type==="string")return yA(a,{staticPosition:e});throw new gm(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}function uA(a){let t=a.readBytes(32);return[za(et(C0(t,-20))),32]}function mA(a,t,{length:e,staticPosition:i}){if(!e){let s=va(a.readBytes(M0)),o=i+s,l=o+_T;a.setPosition(o);let c=va(a.readBytes(_T)),u=Vo(t),p=0,d=[];for(let L=0;L<c;++L){a.setPosition(l+(u?L*32:p));let[v,E]=as(a,t,{staticPosition:l});p+=E,d.push(v)}return a.setPosition(i+32),[d,32]}if(Vo(t)){let s=va(a.readBytes(M0)),o=i+s,l=[];for(let c=0;c<e;++c){a.setPosition(o+c*32);let[u]=as(a,t,{staticPosition:o});l.push(u)}return a.setPosition(i+32),[l,32]}let n=0,r=[];for(let s=0;s<e;++s){let[o,l]=as(a,t,{staticPosition:i+n});n+=l,r.push(o)}return[r,n]}function pA(a){return[bT(a.readBytes(32),{size:32}),32]}function hA(a,t,{staticPosition:e}){let[i,n]=t.type.split("bytes");if(!n){let s=va(a.readBytes(32));a.setPosition(e+s);let o=va(a.readBytes(32));if(o===0)return a.setPosition(e+32),["0x",32];let l=a.readBytes(o);return a.setPosition(e+32),[et(l),32]}return[et(a.readBytes(Number.parseInt(n),32)),32]}function dA(a,t){let e=t.type.startsWith("int"),i=Number.parseInt(t.type.split("int")[1]||"256"),n=a.readBytes(32);return[i>48?yT(n,{signed:e}):va(n,{signed:e}),32]}function fA(a,t,{staticPosition:e}){let i=t.components.length===0||t.components.some(({name:s})=>!s),n=i?[]:{},r=0;if(Vo(t)){let s=va(a.readBytes(M0)),o=e+s;for(let l=0;l<t.components.length;++l){let c=t.components[l];a.setPosition(o+r);let[u,p]=as(a,c,{staticPosition:o});r+=p,n[i?l:c?.name]=u}return a.setPosition(e+32),[n,32]}for(let s=0;s<t.components.length;++s){let o=t.components[s],[l,c]=as(a,o,{staticPosition:e});n[i?s:o?.name]=l,r+=c}return[n,r]}function yA(a,{staticPosition:t}){let e=va(a.readBytes(32)),i=t+e;a.setPosition(i);let n=va(a.readBytes(32));if(n===0)return a.setPosition(t+32),["",32];let r=a.readBytes(n,32),s=gT(ii(r));return a.setPosition(t+32),[s,32]}function Vo(a){let{type:t}=a;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return a.components?.some(Vo);let e=Om(a.type);return!!(e&&Vo({...a,type:e[1]}))}var _T,M0,qm=ae(()=>{"use strict";zt();sr();Km();Xi();or();Jr();LT();jt();Ue();In();_T=32,M0=32});function Wm(a){let{abi:t,data:e}=a,i=ja(e,0,4);if(i==="0x")throw new da;let r=[...t||[],dT,fT].find(s=>s.type==="error"&&i===Zr(mi(s)));if(!r)throw new Xr(i,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:r,args:"inputs"in r&&r.inputs&&r.inputs.length>0?lr(r.inputs,ja(e,4)):void 0,errorName:r.name}}var R0=ae(()=>{"use strict";Fm();zt();or();Hm();qm();ar()});var tt,hi=ae(()=>{"use strict";tt=(a,t,e)=>JSON.stringify(a,(i,n)=>{let r=typeof n=="bigint"?n.toString():n;return typeof t=="function"?t(i,r):r},e)});function P0({abiItem:a,args:t,includeFunctionName:e=!0,includeName:i=!1}){if("name"in a&&"inputs"in a&&a.inputs)return`${e?a.name:""}(${a.inputs.map((n,r)=>`${i&&n.name?`${n.name}: `:""}${typeof t[r]=="object"?tt(t[r]):t[r]}`).join(", ")})`}var vT=ae(()=>{"use strict";hi()});var Ym,xT,zm=ae(()=>{"use strict";Ym={gwei:9,wei:18},xT={ether:-9,wei:9}});function ri(a,t){let e=a.toString(),i=e.startsWith("-");i&&(e=e.slice(1)),e=e.padStart(t,"0");let[n,r]=[e.slice(0,e.length-t),e.slice(e.length-t)];return r=r.replace(/(0+)$/,""),`${i?"-":""}${n||"0"}${r?`.${r}`:""}`}var jm=ae(()=>{"use strict"});function ns(a,t="wei"){return ri(a,Ym[t])}var $m=ae(()=>{"use strict";zm();jm()});function Gt(a,t="wei"){return ri(a,xT[t])}var rs=ae(()=>{"use strict";zm();jm()});function IT(a){return a.reduce((t,{slot:e,value:i})=>`${t}        ${e}: ${i}
`,"")}function ET(a){return a.reduce((t,{address:e,...i})=>{let n=`${t}    ${e}:
`;return i.nonce&&(n+=`      nonce: ${i.nonce}
`),i.balance&&(n+=`      balance: ${i.balance}
`),i.code&&(n+=`      code: ${i.code}
`),i.state&&(n+=`      state:
`,n+=IT(i.state)),i.stateDiff&&(n+=`      stateDiff:
`,n+=IT(i.stateDiff)),n},`  State Override:
`).slice(0,-1)}var Xm,Qm,N0=ae(()=>{"use strict";Ye();Xm=class extends G{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}},Qm=class extends G{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}});function cr(a){let t=Object.entries(a).map(([i,n])=>n===void 0||n===!1?null:[i,n]).filter(Boolean),e=t.reduce((i,[n])=>Math.max(i,n.length),0);return t.map(([i,n])=>`  ${`${i}:`.padEnd(e+1)}  ${n}`).join(`
`)}var Jm,Zm,ep,tp,ip,ss,os,ap,ia=ae(()=>{"use strict";$m();rs();Ye();Jm=class extends G{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}},Zm=class extends G{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}},ep=class extends G{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",cr(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}},tp=class extends G{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}},ip=class extends G{constructor(t,{account:e,docsPath:i,chain:n,data:r,gas:s,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:c,nonce:u,to:p,value:d}){let L=cr({chain:n&&`${n?.name} (id: ${n?.id})`,from:e?.address,to:p,value:typeof d<"u"&&`${ns(d)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:r,gas:s,gasPrice:typeof o<"u"&&`${Gt(o)} gwei`,maxFeePerGas:typeof l<"u"&&`${Gt(l)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${Gt(c)} gwei`,nonce:u});super(t.shortMessage,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",L].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},ss=class extends G{constructor({blockHash:t,blockNumber:e,blockTag:i,hash:n,index:r}){let s="Transaction";i&&r!==void 0&&(s=`Transaction at block time "${i}" at index "${r}"`),t&&r!==void 0&&(s=`Transaction at block hash "${t}" at index "${r}"`),e&&r!==void 0&&(s=`Transaction at block number "${e}" at index "${r}"`),n&&(s=`Transaction with hash "${n}"`),super(`${s} could not be found.`,{name:"TransactionNotFoundError"})}},os=class extends G{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}},ap=class extends G{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}});var wT,ur,np=ae(()=>{"use strict";wT=a=>a,ur=a=>a});var mr,Fo,Jt,Go,Ko,$a,wn=ae(()=>{"use strict";Li();Fm();R0();ar();vT();es();$m();rs();zt();Ye();N0();ia();np();mr=class extends G{constructor(t,{account:e,docsPath:i,chain:n,data:r,gas:s,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:c,nonce:u,to:p,value:d,stateOverride:L}){let v=e?_t(e):void 0,E=cr({from:v?.address,to:p,value:typeof d<"u"&&`${ns(d)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:r,gas:s,gasPrice:typeof o<"u"&&`${Gt(o)} gwei`,maxFeePerGas:typeof l<"u"&&`${Gt(l)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${Gt(c)} gwei`,nonce:u});L&&(E+=`
${ET(L)}`),super(t.shortMessage,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",E].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},Fo=class extends G{constructor(t,{abi:e,args:i,contractAddress:n,docsPath:r,functionName:s,sender:o}){let l=ga({abi:e,args:i,name:s}),c=l?P0({abiItem:l,args:i,includeFunctionName:!1,includeName:!1}):void 0,u=l?mi(l,{includeName:!0}):void 0,p=cr({address:n&&wT(n),function:u,args:c&&c!=="()"&&`${[...Array(s?.length??0).keys()].map(()=>" ").join("")}${c}`,sender:o});super(t.shortMessage||`An unknown error occurred while executing the contract function "${s}".`,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],p&&"Contract Call:",p].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=e,this.args=i,this.cause=t,this.contractAddress=n,this.functionName=s,this.sender=o}},Jt=class extends G{constructor({abi:t,data:e,functionName:i,message:n}){let r,s,o,l;if(e&&e!=="0x")try{s=Wm({abi:t,data:e});let{abiItem:u,errorName:p,args:d}=s;if(p==="Error")l=d[0];else if(p==="Panic"){let[L]=d;l=Vm[L]}else{let L=u?mi(u,{includeName:!0}):void 0,v=u&&d?P0({abiItem:u,args:d,includeFunctionName:!1,includeName:!1}):void 0;o=[L?`Error: ${L}`:"",v&&v!=="()"?`       ${[...Array(p?.length??0).keys()].map(()=>" ").join("")}${v}`:""]}}catch(u){r=u}else n&&(l=n);let c;r instanceof Xr&&(c=r.signature,o=[`Unable to decode signature "${c}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${c}.`]),super(l&&l!=="execution reverted"||c?[`The contract function "${i}" reverted with the following ${c?"signature":"reason"}:`,l||c].join(`
`):`The contract function "${i}" reverted.`,{cause:r,metaMessages:o,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=s,this.reason=l,this.signature=c}},Go=class extends G{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}},Ko=class extends G{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}},$a=class extends G{constructor({data:t,message:e}){super(e||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}});var Ri,ls,qo,cs=ae(()=>{"use strict";hi();Ye();np();Ri=class extends G{constructor({body:t,cause:e,details:i,headers:n,status:r,url:s}){super("HTTP request failed.",{cause:e,details:i,metaMessages:[r&&`Status: ${r}`,`URL: ${ur(s)}`,t&&`Request body: ${tt(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=n,this.status=r,this.url=s}},ls=class extends G{constructor({body:t,error:e,url:i}){super("RPC Request failed.",{cause:e,details:e.message,metaMessages:[`URL: ${ur(i)}`,`Request body: ${tt(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e.code}},qo=class extends G{constructor({body:t,url:e}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${ur(e)}`,`Request body: ${tt(t)}`],name:"TimeoutError"})}}});var bA,si,Tn,us,ms,ps,hs,Xa,xa,ds,fs,ys,bs,pr,gs,hr,Ls,_s,vs,xs,Is,rp,Wo=ae(()=>{"use strict";Ye();cs();bA=-1,si=class extends G{constructor(t,{code:e,docsPath:i,metaMessages:n,name:r,shortMessage:s}){super(s,{cause:t,docsPath:i,metaMessages:n||t?.metaMessages,name:r||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=r||t.name,this.code=t instanceof ls?t.code:e??bA}},Tn=class extends si{constructor(t,e){super(t,e),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e.data}},us=class a extends si{constructor(t){super(t,{code:a.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}};Object.defineProperty(us,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});ms=class a extends si{constructor(t){super(t,{code:a.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}};Object.defineProperty(ms,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});ps=class a extends si{constructor(t,{method:e}={}){super(t,{code:a.code,name:"MethodNotFoundRpcError",shortMessage:`The method${e?` "${e}"`:""} does not exist / is not available.`})}};Object.defineProperty(ps,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});hs=class a extends si{constructor(t){super(t,{code:a.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(hs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});Xa=class a extends si{constructor(t){super(t,{code:a.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}};Object.defineProperty(Xa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});xa=class a extends si{constructor(t){super(t,{code:a.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}};Object.defineProperty(xa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});ds=class a extends si{constructor(t){super(t,{code:a.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}};Object.defineProperty(ds,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});fs=class a extends si{constructor(t){super(t,{code:a.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}};Object.defineProperty(fs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});ys=class a extends si{constructor(t){super(t,{code:a.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}};Object.defineProperty(ys,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});bs=class a extends si{constructor(t,{method:e}={}){super(t,{code:a.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${e?` "${e}"`:""} is not implemented.`})}};Object.defineProperty(bs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});pr=class a extends si{constructor(t){super(t,{code:a.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}};Object.defineProperty(pr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});gs=class a extends si{constructor(t){super(t,{code:a.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}};Object.defineProperty(gs,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});hr=class a extends Tn{constructor(t){super(t,{code:a.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}};Object.defineProperty(hr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});Ls=class a extends Tn{constructor(t){super(t,{code:a.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}};Object.defineProperty(Ls,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});_s=class a extends Tn{constructor(t,{method:e}={}){super(t,{code:a.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${e?` " ${e}"`:""}.`})}};Object.defineProperty(_s,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});vs=class a extends Tn{constructor(t){super(t,{code:a.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}};Object.defineProperty(vs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});xs=class a extends Tn{constructor(t){super(t,{code:a.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}};Object.defineProperty(xs,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});Is=class a extends Tn{constructor(t){super(t,{code:a.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}};Object.defineProperty(Is,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});rp=class extends si{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}});function LA(a,t,e,i){if(typeof a.setBigUint64=="function")return a.setBigUint64(t,e,i);let n=BigInt(32),r=BigInt(4294967295),s=Number(e>>n&r),o=Number(e&r),l=i?4:0,c=i?0:4;a.setUint32(t+l,s,i),a.setUint32(t+c,o,i)}var CT,ST,sp,DT=ae(()=>{"use strict";Po();rr();CT=(a,t,e)=>a&t^~a&e,ST=(a,t,e)=>a&t^a&e^t&e,sp=class extends Ln{constructor(t,e,i,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=km(this.buffer)}update(t){Ya(this);let{view:e,buffer:i,blockLen:n}=this;t=_n(t);let r=t.length;for(let s=0;s<r;){let o=Math.min(n-this.pos,r-s);if(o===n){let l=km(t);for(;n<=r-s;s+=n)this.process(l,s);continue}i.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ya(this),Dm(t,this),this.finished=!0;let{buffer:e,view:i,blockLen:n,isLE:r}=this,{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(i,0),s=0);for(let p=s;p<n;p++)e[p]=0;LA(i,n-8,BigInt(this.length*8),r),this.process(i,0);let o=km(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<c;p++)o.setUint32(4*p,u[p],r)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:i,length:n,finished:r,destroyed:s,pos:o}=this;return t.length=n,t.pos=o,t.finished=r,t.destroyed=s,n%e&&t.buffer.set(i),t}}});var _A,Cn,Sn,O0,dr,H0=ae(()=>{"use strict";DT();rr();_A=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sn=new Uint32Array(64),O0=class extends sp{constructor(){super(64,32,8,!1),this.A=Cn[0]|0,this.B=Cn[1]|0,this.C=Cn[2]|0,this.D=Cn[3]|0,this.E=Cn[4]|0,this.F=Cn[5]|0,this.G=Cn[6]|0,this.H=Cn[7]|0}get(){let{A:t,B:e,C:i,D:n,E:r,F:s,G:o,H:l}=this;return[t,e,i,n,r,s,o,l]}set(t,e,i,n,r,s,o,l){this.A=t|0,this.B=e|0,this.C=i|0,this.D=n|0,this.E=r|0,this.F=s|0,this.G=o|0,this.H=l|0}process(t,e){for(let p=0;p<16;p++,e+=4)Sn[p]=t.getUint32(e,!1);for(let p=16;p<64;p++){let d=Sn[p-15],L=Sn[p-2],v=ea(d,7)^ea(d,18)^d>>>3,E=ea(L,17)^ea(L,19)^L>>>10;Sn[p]=E+Sn[p-7]+v+Sn[p-16]|0}let{A:i,B:n,C:r,D:s,E:o,F:l,G:c,H:u}=this;for(let p=0;p<64;p++){let d=ea(o,6)^ea(o,11)^ea(o,25),L=u+d+CT(o,l,c)+_A[p]+Sn[p]|0,E=(ea(i,2)^ea(i,13)^ea(i,22))+ST(i,n,r)|0;u=c,c=l,l=o,o=s+L|0,s=r,r=n,n=i,i=L+E|0}i=i+this.A|0,n=n+this.B|0,r=r+this.C|0,s=s+this.D|0,o=o+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(i,n,r,s,o,l,c,u)}roundClean(){Sn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},dr=Bm(()=>new O0)});var op,U0,AT=ae(()=>{"use strict";Po();rr();op=class extends Ln{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Rw(t);let i=_n(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,r=new Uint8Array(n);r.set(i.length>n?t.create().update(i).digest():i);for(let s=0;s<r.length;s++)r[s]^=54;this.iHash.update(r),this.oHash=t.create();for(let s=0;s<r.length;s++)r[s]^=106;this.oHash.update(r),r.fill(0)}update(t){return Ya(this),this.iHash.update(t),this}digestInto(t){Ya(this),gn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:i,finished:n,destroyed:r,blockLen:s,outputLen:o}=this;return t=t,t.finished=n,t.destroyed=r,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},U0=(a,t,e)=>new op(a,t).update(e).digest();U0.create=(a,t)=>new op(a,t)});var Y0={};o0(Y0,{aInRange:()=>Ia,abool:()=>fr,abytes:()=>Pi,bitGet:()=>wA,bitLen:()=>q0,bitMask:()=>zo,bitSet:()=>TA,bytesToHex:()=>yr,bytesToNumberBE:()=>_i,bytesToNumberLE:()=>cp,concatBytes:()=>oi,createHmacDrbg:()=>W0,ensureBytes:()=>Kt,equalBytes:()=>EA,hexToBytes:()=>gr,hexToNumber:()=>K0,inRange:()=>An,isBytes:()=>Dn,memoized:()=>mp,notImplemented:()=>SA,numberToBytesBE:()=>na,numberToBytesLE:()=>up,numberToHexUnpadded:()=>br,numberToVarBytesBE:()=>IA,utf8ToBytes:()=>Yo,validateObject:()=>Ea});function Dn(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}function Pi(a){if(!Dn(a))throw new Error("Uint8Array expected")}function fr(a,t){if(typeof t!="boolean")throw new Error(`${a} must be valid boolean, got "${t}".`)}function yr(a){Pi(a);let t="";for(let e=0;e<a.length;e++)t+=xA[a[e]];return t}function br(a){let t=a.toString(16);return t.length&1?`0${t}`:t}function K0(a){if(typeof a!="string")throw new Error("hex string expected, got "+typeof a);return BigInt(a===""?"0":`0x${a}`)}function kT(a){if(a>=Qa._0&&a<=Qa._9)return a-Qa._0;if(a>=Qa._A&&a<=Qa._F)return a-(Qa._A-10);if(a>=Qa._a&&a<=Qa._f)return a-(Qa._a-10)}function gr(a){if(typeof a!="string")throw new Error("hex string expected, got "+typeof a);let t=a.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(e);for(let n=0,r=0;n<e;n++,r+=2){let s=kT(a.charCodeAt(r)),o=kT(a.charCodeAt(r+1));if(s===void 0||o===void 0){let l=a[r]+a[r+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+r)}i[n]=s*16+o}return i}function _i(a){return K0(yr(a))}function cp(a){return Pi(a),K0(yr(Uint8Array.from(a).reverse()))}function na(a,t){return gr(a.toString(16).padStart(t*2,"0"))}function up(a,t){return na(a,t).reverse()}function IA(a){return gr(br(a))}function Kt(a,t,e){let i;if(typeof t=="string")try{i=gr(t)}catch(r){throw new Error(`${a} must be valid hex string, got "${t}". Cause: ${r}`)}else if(Dn(t))i=Uint8Array.from(t);else throw new Error(`${a} must be hex string or Uint8Array`);let n=i.length;if(typeof e=="number"&&n!==e)throw new Error(`${a} expected ${e} bytes, got ${n}`);return i}function oi(...a){let t=0;for(let i=0;i<a.length;i++){let n=a[i];Pi(n),t+=n.length}let e=new Uint8Array(t);for(let i=0,n=0;i<a.length;i++){let r=a[i];e.set(r,n),n+=r.length}return e}function EA(a,t){if(a.length!==t.length)return!1;let e=0;for(let i=0;i<a.length;i++)e|=a[i]^t[i];return e===0}function Yo(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function An(a,t,e){return V0(a)&&V0(t)&&V0(e)&&t<=a&&a<e}function Ia(a,t,e,i){if(!An(t,e,i))throw new Error(`expected valid ${a}: ${e} <= n < ${i}, got ${typeof t} ${t}`)}function q0(a){let t;for(t=0;a>G0;a>>=lp,t+=1);return t}function wA(a,t){return a>>BigInt(t)&lp}function TA(a,t,e){return a|(e?lp:G0)<<BigInt(t)}function W0(a,t,e){if(typeof a!="number"||a<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let i=F0(a),n=F0(a),r=0,s=()=>{i.fill(1),n.fill(0),r=0},o=(...p)=>e(n,i,...p),l=(p=F0())=>{n=o(BT([0]),p),i=o(),p.length!==0&&(n=o(BT([1]),p),i=o())},c=()=>{if(r++>=1e3)throw new Error("drbg: tried 1000 values");let p=0,d=[];for(;p<t;){i=o();let L=i.slice();d.push(L),p+=i.length}return oi(...d)};return(p,d)=>{s(),l(p);let L;for(;!(L=d(c()));)l();return s(),L}}function Ea(a,t,e={}){let i=(n,r,s)=>{let o=CA[r];if(typeof o!="function")throw new Error(`Invalid validator "${r}", expected function`);let l=a[n];if(!(s&&l===void 0)&&!o(l,a))throw new Error(`Invalid param ${String(n)}=${l} (${typeof l}), expected ${r}`)};for(let[n,r]of Object.entries(t))i(n,r,!1);for(let[n,r]of Object.entries(e))i(n,r,!0);return a}function mp(a){let t=new WeakMap;return(e,...i)=>{let n=t.get(e);if(n!==void 0)return n;let r=a(e,...i);return t.set(e,r),r}}var G0,lp,vA,xA,Qa,V0,zo,F0,BT,CA,SA,Lr=ae(()=>{"use strict";G0=BigInt(0),lp=BigInt(1),vA=BigInt(2);xA=Array.from({length:256},(a,t)=>t.toString(16).padStart(2,"0"));Qa={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};V0=a=>typeof a=="bigint"&&G0<=a;zo=a=>(vA<<BigInt(a-1))-lp,F0=a=>new Uint8Array(a),BT=a=>Uint8Array.from(a);CA={bigint:a=>typeof a=="bigint",function:a=>typeof a=="function",boolean:a=>typeof a=="boolean",string:a=>typeof a=="string",stringOrUint8Array:a=>typeof a=="string"||Dn(a),isSafeInteger:a=>Number.isSafeInteger(a),array:a=>Array.isArray(a),field:(a,t)=>t.Fp.isValid(a),hash:a=>typeof a=="function"&&Number.isSafeInteger(a.outputLen)};SA=()=>{throw new Error("not implemented")}});function kt(a,t){let e=a%t;return e>=qt?e:t+e}function BA(a,t,e){if(e<=qt||t<qt)throw new Error("Expected power/modulo > 0");if(e===Tt)return qt;let i=Tt;for(;t>qt;)t&Tt&&(i=i*a%e),a=a*a%e,t>>=Tt;return i}function Si(a,t,e){let i=a;for(;t-- >qt;)i*=i,i%=e;return i}function pp(a,t){if(a===qt||t<=qt)throw new Error(`invert: expected positive integers, got n=${a} mod=${t}`);let e=kt(a,t),i=t,n=qt,r=Tt,s=Tt,o=qt;for(;e!==qt;){let c=i/e,u=i%e,p=n-s*c,d=r-o*c;i=e,e=u,n=s,r=o,s=p,o=d}if(i!==Tt)throw new Error("invert: does not exist");return kt(n,t)}function MA(a){let t=(a-Tt)/_r,e,i,n;for(e=a-Tt,i=0;e%_r===qt;e/=_r,i++);for(n=_r;n<a&&BA(n,t,a)!==a-Tt;n++);if(i===1){let s=(a+Tt)/z0;return function(l,c){let u=l.pow(c,s);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}let r=(e+Tt)/_r;return function(o,l){if(o.pow(l,t)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=i,u=o.pow(o.mul(o.ONE,n),e),p=o.pow(l,r),d=o.pow(l,e);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let L=1;for(let E=o.sqr(d);L<c&&!o.eql(E,o.ONE);L++)E=o.sqr(E);let v=o.pow(u,Tt<<BigInt(c-L-1));u=o.sqr(v),p=o.mul(p,v),d=o.mul(d,u),c=L}return p}}function RA(a){if(a%z0===DA){let t=(a+Tt)/z0;return function(i,n){let r=i.pow(n,t);if(!i.eql(i.sqr(r),n))throw new Error("Cannot find square root");return r}}if(a%RT===MT){let t=(a-MT)/RT;return function(i,n){let r=i.mul(n,_r),s=i.pow(r,t),o=i.mul(n,s),l=i.mul(i.mul(o,_r),s),c=i.mul(o,i.sub(l,i.ONE));if(!i.eql(i.sqr(c),n))throw new Error("Cannot find square root");return c}}return a%kA,MA(a)}function hp(a){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=PA.reduce((i,n)=>(i[n]="function",i),t);return Ea(a,e)}function NA(a,t,e){if(e<qt)throw new Error("Expected power > 0");if(e===qt)return a.ONE;if(e===Tt)return t;let i=a.ONE,n=t;for(;e>qt;)e&Tt&&(i=a.mul(i,n)),n=a.sqr(n),e>>=Tt;return i}function OA(a,t){let e=new Array(t.length),i=t.reduce((r,s,o)=>a.is0(s)?r:(e[o]=r,a.mul(r,s)),a.ONE),n=a.inv(i);return t.reduceRight((r,s,o)=>a.is0(s)?r:(e[o]=a.mul(r,e[o]),a.mul(r,s)),n),e}function j0(a,t){let e=t!==void 0?t:a.toString(2).length,i=Math.ceil(e/8);return{nBitLength:e,nByteLength:i}}function dp(a,t,e=!1,i={}){if(a<=qt)throw new Error(`Expected Field ORDER > 0, got ${a}`);let{nBitLength:n,nByteLength:r}=j0(a,t);if(r>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=RA(a),o=Object.freeze({ORDER:a,BITS:n,BYTES:r,MASK:zo(n),ZERO:qt,ONE:Tt,create:l=>kt(l,a),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return qt<=l&&l<a},is0:l=>l===qt,isOdd:l=>(l&Tt)===Tt,neg:l=>kt(-l,a),eql:(l,c)=>l===c,sqr:l=>kt(l*l,a),add:(l,c)=>kt(l+c,a),sub:(l,c)=>kt(l-c,a),mul:(l,c)=>kt(l*c,a),pow:(l,c)=>NA(o,l,c),div:(l,c)=>kt(l*pp(c,a),a),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>pp(l,a),sqrt:i.sqrt||(l=>s(o,l)),invertBatch:l=>OA(o,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>e?up(l,r):na(l,r),fromBytes:l=>{if(l.length!==r)throw new Error(`Fp.fromBytes: expected ${r}, got ${l.length}`);return e?cp(l):_i(l)}});return Object.freeze(o)}function PT(a){if(typeof a!="bigint")throw new Error("field order must be bigint");let t=a.toString(2).length;return Math.ceil(t/8)}function $0(a){let t=PT(a);return t+Math.ceil(t/2)}function NT(a,t,e=!1){let i=a.length,n=PT(t),r=$0(t);if(i<16||i<r||i>1024)throw new Error(`expected ${r}-1024 bytes of input, got ${i}`);let s=e?_i(a):cp(a),o=kt(s,t-Tt)+Tt;return e?up(o,n):na(o,n)}var qt,Tt,_r,DA,z0,MT,RT,AA,kA,PA,jo=ae(()=>{"use strict";Lr();qt=BigInt(0),Tt=BigInt(1),_r=BigInt(2),DA=BigInt(3),z0=BigInt(4),MT=BigInt(5),RT=BigInt(8),AA=BigInt(9),kA=BigInt(16);PA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"]});function HT(a,t){let e=(r,s)=>{let o=s.negate();return r?o:s},i=r=>{if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error(`Wrong window size=${r}, should be [1..${t}]`)},n=r=>{i(r);let s=Math.ceil(t/r)+1,o=2**(r-1);return{windows:s,windowSize:o}};return{constTimeNegate:e,unsafeLadder(r,s){let o=a.ZERO,l=r;for(;s>UA;)s&X0&&(o=o.add(l)),l=l.double(),s>>=X0;return o},precomputeWindow(r,s){let{windows:o,windowSize:l}=n(s),c=[],u=r,p=u;for(let d=0;d<o;d++){p=u,c.push(p);for(let L=1;L<l;L++)p=p.add(u),c.push(p);u=p.double()}return c},wNAF(r,s,o){let{windows:l,windowSize:c}=n(r),u=a.ZERO,p=a.BASE,d=BigInt(2**r-1),L=2**r,v=BigInt(r);for(let E=0;E<l;E++){let w=E*c,R=Number(o&d);o>>=v,R>c&&(R-=L,o+=X0);let U=w,V=w+Math.abs(R)-1,q=E%2!==0,te=R<0;R===0?p=p.add(e(q,s[U])):u=u.add(e(te,s[V]))}return{p:u,f:p}},wNAFCached(r,s,o){let l=OT.get(r)||1,c=Q0.get(r);return c||(c=this.precomputeWindow(r,l),l!==1&&Q0.set(r,o(c))),this.wNAF(l,c,s)},setWindowSize(r,s){i(s),OT.set(r,s),Q0.delete(r)}}}function UT(a,t,e,i){if(!Array.isArray(e)||!Array.isArray(i)||i.length!==e.length)throw new Error("arrays of points and scalars must have equal length");i.forEach((u,p)=>{if(!t.isValid(u))throw new Error(`wrong scalar at index ${p}`)}),e.forEach((u,p)=>{if(!(u instanceof a))throw new Error(`wrong point at index ${p}`)});let n=q0(BigInt(e.length)),r=n>12?n-3:n>4?n-2:n?2:1,s=(1<<r)-1,o=new Array(s+1).fill(a.ZERO),l=Math.floor((t.BITS-1)/r)*r,c=a.ZERO;for(let u=l;u>=0;u-=r){o.fill(a.ZERO);for(let d=0;d<i.length;d++){let L=i[d],v=Number(L>>BigInt(u)&BigInt(s));o[v]=o[v].add(e[d])}let p=a.ZERO;for(let d=o.length-1,L=a.ZERO;d>0;d--)L=L.add(o[d]),p=p.add(L);if(c=c.add(p),u!==0)for(let d=0;d<r;d++)c=c.double()}return c}function J0(a){return hp(a.Fp),Ea(a,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...j0(a.n,a.nBitLength),...a,p:a.Fp.ORDER})}var UA,X0,Q0,OT,VT=ae(()=>{"use strict";jo();Lr();UA=BigInt(0),X0=BigInt(1),Q0=new WeakMap,OT=new WeakMap});function FT(a){a.lowS!==void 0&&fr("lowS",a.lowS),a.prehash!==void 0&&fr("prehash",a.prehash)}function VA(a){let t=J0(a);Ea(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:e,Fp:i,a:n}=t;if(e){if(!i.eql(n,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}function KA(a){let t=VA(a),{Fp:e}=t,i=dp(t.n,t.nBitLength),n=t.toBytes||((E,w,R)=>{let U=w.toAffine();return oi(Uint8Array.from([4]),e.toBytes(U.x),e.toBytes(U.y))}),r=t.fromBytes||(E=>{let w=E.subarray(1),R=e.fromBytes(w.subarray(0,e.BYTES)),U=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x:R,y:U}});function s(E){let{a:w,b:R}=t,U=e.sqr(E),V=e.mul(U,E);return e.add(e.add(V,e.mul(E,w)),R)}if(!e.eql(e.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(E){return An(E,ft,t.n)}function l(E){let{allowedPrivateKeyLengths:w,nByteLength:R,wrapPrivateKey:U,n:V}=t;if(w&&typeof E!="bigint"){if(Dn(E)&&(E=yr(E)),typeof E!="string"||!w.includes(E.length))throw new Error("Invalid key");E=E.padStart(R*2,"0")}let q;try{q=typeof E=="bigint"?E:_i(Kt("private key",E,R))}catch{throw new Error(`private key must be ${R} bytes, hex or bigint, not ${typeof E}`)}return U&&(q=kt(q,V)),Ia("private key",q,ft,V),q}function c(E){if(!(E instanceof d))throw new Error("ProjectivePoint expected")}let u=mp((E,w)=>{let{px:R,py:U,pz:V}=E;if(e.eql(V,e.ONE))return{x:R,y:U};let q=E.is0();w==null&&(w=q?e.ONE:e.inv(V));let te=e.mul(R,w),ee=e.mul(U,w),X=e.mul(V,w);if(q)return{x:e.ZERO,y:e.ZERO};if(!e.eql(X,e.ONE))throw new Error("invZ was invalid");return{x:te,y:ee}}),p=mp(E=>{if(E.is0()){if(t.allowInfinityPoint&&!e.is0(E.py))return;throw new Error("bad point: ZERO")}let{x:w,y:R}=E.toAffine();if(!e.isValid(w)||!e.isValid(R))throw new Error("bad point: x or y not FE");let U=e.sqr(R),V=s(w);if(!e.eql(U,V))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(w,R,U){if(this.px=w,this.py=R,this.pz=U,w==null||!e.isValid(w))throw new Error("x required");if(R==null||!e.isValid(R))throw new Error("y required");if(U==null||!e.isValid(U))throw new Error("z required");Object.freeze(this)}static fromAffine(w){let{x:R,y:U}=w||{};if(!w||!e.isValid(R)||!e.isValid(U))throw new Error("invalid affine point");if(w instanceof d)throw new Error("projective point not allowed");let V=q=>e.eql(q,e.ZERO);return V(R)&&V(U)?d.ZERO:new d(R,U,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){let R=e.invertBatch(w.map(U=>U.pz));return w.map((U,V)=>U.toAffine(R[V])).map(d.fromAffine)}static fromHex(w){let R=d.fromAffine(r(Kt("pointHex",w)));return R.assertValidity(),R}static fromPrivateKey(w){return d.BASE.multiply(l(w))}static msm(w,R){return UT(d,i,w,R)}_setWindowSize(w){v.setWindowSize(this,w)}assertValidity(){p(this)}hasEvenY(){let{y:w}=this.toAffine();if(e.isOdd)return!e.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){c(w);let{px:R,py:U,pz:V}=this,{px:q,py:te,pz:ee}=w,X=e.eql(e.mul(R,ee),e.mul(q,V)),re=e.eql(e.mul(U,ee),e.mul(te,V));return X&&re}negate(){return new d(this.px,e.neg(this.py),this.pz)}double(){let{a:w,b:R}=t,U=e.mul(R,fp),{px:V,py:q,pz:te}=this,ee=e.ZERO,X=e.ZERO,re=e.ZERO,oe=e.mul(V,V),Ve=e.mul(q,q),ke=e.mul(te,te),$=e.mul(V,q);return $=e.add($,$),re=e.mul(V,te),re=e.add(re,re),ee=e.mul(w,re),X=e.mul(U,ke),X=e.add(ee,X),ee=e.sub(Ve,X),X=e.add(Ve,X),X=e.mul(ee,X),ee=e.mul($,ee),re=e.mul(U,re),ke=e.mul(w,ke),$=e.sub(oe,ke),$=e.mul(w,$),$=e.add($,re),re=e.add(oe,oe),oe=e.add(re,oe),oe=e.add(oe,ke),oe=e.mul(oe,$),X=e.add(X,oe),ke=e.mul(q,te),ke=e.add(ke,ke),oe=e.mul(ke,$),ee=e.sub(ee,oe),re=e.mul(ke,Ve),re=e.add(re,re),re=e.add(re,re),new d(ee,X,re)}add(w){c(w);let{px:R,py:U,pz:V}=this,{px:q,py:te,pz:ee}=w,X=e.ZERO,re=e.ZERO,oe=e.ZERO,Ve=t.a,ke=e.mul(t.b,fp),$=e.mul(R,q),lt=e.mul(U,te),ye=e.mul(V,ee),Te=e.add(R,U),we=e.add(q,te);Te=e.mul(Te,we),we=e.add($,lt),Te=e.sub(Te,we),we=e.add(R,V);let O=e.add(q,ee);return we=e.mul(we,O),O=e.add($,ye),we=e.sub(we,O),O=e.add(U,V),X=e.add(te,ee),O=e.mul(O,X),X=e.add(lt,ye),O=e.sub(O,X),oe=e.mul(Ve,we),X=e.mul(ke,ye),oe=e.add(X,oe),X=e.sub(lt,oe),oe=e.add(lt,oe),re=e.mul(X,oe),lt=e.add($,$),lt=e.add(lt,$),ye=e.mul(Ve,ye),we=e.mul(ke,we),lt=e.add(lt,ye),ye=e.sub($,ye),ye=e.mul(Ve,ye),we=e.add(we,ye),$=e.mul(lt,we),re=e.add(re,$),$=e.mul(O,we),X=e.mul(Te,X),X=e.sub(X,$),$=e.mul(Te,lt),oe=e.mul(O,oe),oe=e.add(oe,$),new d(X,re,oe)}subtract(w){return this.add(w.negate())}is0(){return this.equals(d.ZERO)}wNAF(w){return v.wNAFCached(this,w,d.normalizeZ)}multiplyUnsafe(w){Ia("scalar",w,ra,t.n);let R=d.ZERO;if(w===ra)return R;if(w===ft)return this;let{endo:U}=t;if(!U)return v.unsafeLadder(this,w);let{k1neg:V,k1:q,k2neg:te,k2:ee}=U.splitScalar(w),X=R,re=R,oe=this;for(;q>ra||ee>ra;)q&ft&&(X=X.add(oe)),ee&ft&&(re=re.add(oe)),oe=oe.double(),q>>=ft,ee>>=ft;return V&&(X=X.negate()),te&&(re=re.negate()),re=new d(e.mul(re.px,U.beta),re.py,re.pz),X.add(re)}multiply(w){let{endo:R,n:U}=t;Ia("scalar",w,ft,U);let V,q;if(R){let{k1neg:te,k1:ee,k2neg:X,k2:re}=R.splitScalar(w),{p:oe,f:Ve}=this.wNAF(ee),{p:ke,f:$}=this.wNAF(re);oe=v.constTimeNegate(te,oe),ke=v.constTimeNegate(X,ke),ke=new d(e.mul(ke.px,R.beta),ke.py,ke.pz),V=oe.add(ke),q=Ve.add($)}else{let{p:te,f:ee}=this.wNAF(w);V=te,q=ee}return d.normalizeZ([V,q])[0]}multiplyAndAddUnsafe(w,R,U){let V=d.BASE,q=(ee,X)=>X===ra||X===ft||!ee.equals(V)?ee.multiplyUnsafe(X):ee.multiply(X),te=q(this,R).add(q(w,U));return te.is0()?void 0:te}toAffine(w){return u(this,w)}isTorsionFree(){let{h:w,isTorsionFree:R}=t;if(w===ft)return!0;if(R)return R(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:w,clearCofactor:R}=t;return w===ft?this:R?R(d,this):this.multiplyUnsafe(t.h)}toRawBytes(w=!0){return fr("isCompressed",w),this.assertValidity(),n(d,this,w)}toHex(w=!0){return fr("isCompressed",w),yr(this.toRawBytes(w))}}d.BASE=new d(t.Gx,t.Gy,e.ONE),d.ZERO=new d(e.ZERO,e.ONE,e.ZERO);let L=t.nBitLength,v=HT(d,t.endo?Math.ceil(L/2):L);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function qA(a){let t=J0(a);return Ea(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function KT(a){let t=qA(a),{Fp:e,n:i}=t,n=e.BYTES+1,r=2*e.BYTES+1;function s(ye){return kt(ye,i)}function o(ye){return pp(ye,i)}let{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:p}=KA({...t,toBytes(ye,Te,we){let O=Te.toAffine(),Xe=e.toBytes(O.x),mt=oi;return fr("isCompressed",we),we?mt(Uint8Array.from([Te.hasEvenY()?2:3]),Xe):mt(Uint8Array.from([4]),Xe,e.toBytes(O.y))},fromBytes(ye){let Te=ye.length,we=ye[0],O=ye.subarray(1);if(Te===n&&(we===2||we===3)){let Xe=_i(O);if(!An(Xe,ft,e.ORDER))throw new Error("Point is not on curve");let mt=u(Xe),Qt;try{Qt=e.sqrt(mt)}catch(Ei){let Rt=Ei instanceof Error?": "+Ei.message:"";throw new Error("Point is not on curve"+Rt)}let ti=(Qt&ft)===ft;return(we&1)===1!==ti&&(Qt=e.neg(Qt)),{x:Xe,y:Qt}}else if(Te===r&&we===4){let Xe=e.fromBytes(O.subarray(0,e.BYTES)),mt=e.fromBytes(O.subarray(e.BYTES,2*e.BYTES));return{x:Xe,y:mt}}else throw new Error(`Point of length ${Te} was invalid. Expected ${n} compressed bytes or ${r} uncompressed bytes`)}}),d=ye=>yr(na(ye,t.nByteLength));function L(ye){let Te=i>>ft;return ye>Te}function v(ye){return L(ye)?s(-ye):ye}let E=(ye,Te,we)=>_i(ye.slice(Te,we));class w{constructor(Te,we,O){this.r=Te,this.s=we,this.recovery=O,this.assertValidity()}static fromCompact(Te){let we=t.nByteLength;return Te=Kt("compactSignature",Te,we*2),new w(E(Te,0,we),E(Te,we,2*we))}static fromDER(Te){let{r:we,s:O}=Ja.toSig(Kt("DER",Te));return new w(we,O)}assertValidity(){Ia("r",this.r,ft,i),Ia("s",this.s,ft,i)}addRecoveryBit(Te){return new w(this.r,this.s,Te)}recoverPublicKey(Te){let{r:we,s:O,recovery:Xe}=this,mt=ee(Kt("msgHash",Te));if(Xe==null||![0,1,2,3].includes(Xe))throw new Error("recovery id invalid");let Qt=Xe===2||Xe===3?we+t.n:we;if(Qt>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");let ti=Xe&1?"03":"02",ma=l.fromHex(ti+d(Qt)),Ei=o(Qt),Rt=s(-mt*Ei),ir=s(O*Ei),pa=l.BASE.multiplyAndAddUnsafe(ma,Rt,ir);if(!pa)throw new Error("point at infinify");return pa.assertValidity(),pa}hasHighS(){return L(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return gr(this.toDERHex())}toDERHex(){return Ja.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gr(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let R={isValidPrivateKey(ye){try{return c(ye),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{let ye=$0(t.n);return NT(t.randomBytes(ye),t.n)},precompute(ye=8,Te=l.BASE){return Te._setWindowSize(ye),Te.multiply(BigInt(3)),Te}};function U(ye,Te=!0){return l.fromPrivateKey(ye).toRawBytes(Te)}function V(ye){let Te=Dn(ye),we=typeof ye=="string",O=(Te||we)&&ye.length;return Te?O===n||O===r:we?O===2*n||O===2*r:ye instanceof l}function q(ye,Te,we=!0){if(V(ye))throw new Error("first arg must be private key");if(!V(Te))throw new Error("second arg must be public key");return l.fromHex(Te).multiply(c(ye)).toRawBytes(we)}let te=t.bits2int||function(ye){let Te=_i(ye),we=ye.length*8-t.nBitLength;return we>0?Te>>BigInt(we):Te},ee=t.bits2int_modN||function(ye){return s(te(ye))},X=zo(t.nBitLength);function re(ye){return Ia(`num < 2^${t.nBitLength}`,ye,ra,X),na(ye,t.nByteLength)}function oe(ye,Te,we=Ve){if(["recovered","canonical"].some(Ha=>Ha in we))throw new Error("sign() legacy options not supported");let{hash:O,randomBytes:Xe}=t,{lowS:mt,prehash:Qt,extraEntropy:ti}=we;mt==null&&(mt=!0),ye=Kt("msgHash",ye),FT(we),Qt&&(ye=Kt("prehashed msgHash",O(ye)));let ma=ee(ye),Ei=c(Te),Rt=[re(Ei),re(ma)];if(ti!=null&&ti!==!1){let Ha=ti===!0?Xe(e.BYTES):ti;Rt.push(Kt("extraEntropy",Ha))}let ir=oi(...Rt),pa=ma;function Oa(Ha){let dn=te(Ha);if(!p(dn))return;let zc=o(dn),wi=l.BASE.multiply(dn).toAffine(),Ua=s(wi.x);if(Ua===ra)return;let Fr=s(zc*s(pa+Ua*Ei));if(Fr===ra)return;let jc=(wi.x===Ua?0:2)|Number(wi.y&ft),$c=Fr;return mt&&L(Fr)&&($c=v(Fr),jc^=1),new w(Ua,$c,jc)}return{seed:ir,k2sig:Oa}}let Ve={lowS:t.lowS,prehash:!1},ke={lowS:t.lowS,prehash:!1};function $(ye,Te,we=Ve){let{seed:O,k2sig:Xe}=oe(ye,Te,we),mt=t;return W0(mt.hash.outputLen,mt.nByteLength,mt.hmac)(O,Xe)}l.BASE._setWindowSize(8);function lt(ye,Te,we,O=ke){let Xe=ye;if(Te=Kt("msgHash",Te),we=Kt("publicKey",we),"strict"in O)throw new Error("options.strict was renamed to lowS");FT(O);let{lowS:mt,prehash:Qt}=O,ti,ma;try{if(typeof Xe=="string"||Dn(Xe))try{ti=w.fromDER(Xe)}catch(wi){if(!(wi instanceof Ja.Err))throw wi;ti=w.fromCompact(Xe)}else if(typeof Xe=="object"&&typeof Xe.r=="bigint"&&typeof Xe.s=="bigint"){let{r:wi,s:Ua}=Xe;ti=new w(wi,Ua)}else throw new Error("PARSE");ma=l.fromHex(we)}catch(wi){if(wi.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(mt&&ti.hasHighS())return!1;Qt&&(Te=t.hash(Te));let{r:Ei,s:Rt}=ti,ir=ee(Te),pa=o(Rt),Oa=s(ir*pa),Ha=s(Ei*pa),dn=l.BASE.multiplyAndAddUnsafe(ma,Oa,Ha)?.toAffine();return dn?s(dn.x)===Ei:!1}return{CURVE:t,getPublicKey:U,getSharedSecret:q,sign:$,verify:lt,ProjectivePoint:l,Signature:w,utils:R}}function WA(a,t){let e=a.ORDER,i=ra;for(let v=e-ft;v%kn===ra;v/=kn)i+=ft;let n=i,r=kn<<n-ft-ft,s=r*kn,o=(e-ft)/s,l=(o-ft)/kn,c=s-ft,u=r,p=a.pow(t,o),d=a.pow(t,(o+ft)/kn),L=(v,E)=>{let w=p,R=a.pow(E,c),U=a.sqr(R);U=a.mul(U,E);let V=a.mul(v,U);V=a.pow(V,l),V=a.mul(V,R),R=a.mul(V,E),U=a.mul(V,v);let q=a.mul(U,R);V=a.pow(q,u);let te=a.eql(V,a.ONE);R=a.mul(U,d),V=a.mul(q,w),U=a.cmov(R,U,te),q=a.cmov(V,q,te);for(let ee=n;ee>ft;ee--){let X=ee-kn;X=kn<<X-ft;let re=a.pow(q,X),oe=a.eql(re,a.ONE);R=a.mul(U,w),w=a.mul(w,w),re=a.mul(q,w),U=a.cmov(R,U,oe),q=a.cmov(re,q,oe)}return{isValid:te,value:U}};if(a.ORDER%GT===fp){let v=(a.ORDER-fp)/GT,E=a.sqrt(a.neg(t));L=(w,R)=>{let U=a.sqr(R),V=a.mul(w,R);U=a.mul(U,V);let q=a.pow(U,v);q=a.mul(q,V);let te=a.mul(q,E),ee=a.mul(a.sqr(q),R),X=a.eql(ee,w),re=a.cmov(te,q,X);return{isValid:X,value:re}}}return L}function qT(a,t){if(hp(a),!a.isValid(t.A)||!a.isValid(t.B)||!a.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let e=WA(a,t.Z);if(!a.isOdd)throw new Error("Fp.isOdd is not implemented!");return i=>{let n,r,s,o,l,c,u,p;n=a.sqr(i),n=a.mul(n,t.Z),r=a.sqr(n),r=a.add(r,n),s=a.add(r,a.ONE),s=a.mul(s,t.B),o=a.cmov(t.Z,a.neg(r),!a.eql(r,a.ZERO)),o=a.mul(o,t.A),r=a.sqr(s),c=a.sqr(o),l=a.mul(c,t.A),r=a.add(r,l),r=a.mul(r,s),c=a.mul(c,o),l=a.mul(c,t.B),r=a.add(r,l),u=a.mul(n,s);let{isValid:d,value:L}=e(r,c);p=a.mul(n,i),p=a.mul(p,L),u=a.cmov(u,s,d),p=a.cmov(p,L,d);let v=a.isOdd(i)===a.isOdd(p);return p=a.cmov(a.neg(p),p,v),u=a.div(u,o),{x:u,y:p}}}var FA,GA,Ja,ra,ft,kn,fp,GT,Z0=ae(()=>{"use strict";VT();jo();Lr();Lr();({bytesToNumberBE:FA,hexToBytes:GA}=Y0),Ja={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(a,t)=>{let{Err:e}=Ja;if(a<0||a>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");let i=t.length/2,n=br(i);if(n.length/2&128)throw new e("tlv.encode: long form length too big");let r=i>127?br(n.length/2|128):"";return`${br(a)}${r}${n}${t}`},decode(a,t){let{Err:e}=Ja,i=0;if(a<0||a>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[i++]!==a)throw new e("tlv.decode: wrong tlv");let n=t[i++],r=!!(n&128),s=0;if(!r)s=n;else{let l=n&127;if(!l)throw new e("tlv.decode(long): indefinite length not supported");if(l>4)throw new e("tlv.decode(long): byte length is too big");let c=t.subarray(i,i+l);if(c.length!==l)throw new e("tlv.decode: length bytes not complete");if(c[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(let u of c)s=s<<8|u;if(i+=l,s<128)throw new e("tlv.decode(long): not minimal encoding")}let o=t.subarray(i,i+s);if(o.length!==s)throw new e("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(a){let{Err:t}=Ja;if(a<ra)throw new t("integer: negative integers are not allowed");let e=br(a);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected assertion");return e},decode(a){let{Err:t}=Ja;if(a[0]&128)throw new t("Invalid signature integer: negative");if(a[0]===0&&!(a[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return FA(a)}},toSig(a){let{Err:t,_int:e,_tlv:i}=Ja,n=typeof a=="string"?GA(a):a;Pi(n);let{v:r,l:s}=i.decode(48,n);if(s.length)throw new t("Invalid signature: left bytes after parsing");let{v:o,l}=i.decode(2,r),{v:c,l:u}=i.decode(2,l);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:e.decode(o),s:e.decode(c)}},hexFromSig(a){let{_tlv:t,_int:e}=Ja,i=`${t.encode(2,e.encode(a.r))}${t.encode(2,e.encode(a.s))}`;return t.encode(48,i)}},ra=BigInt(0),ft=BigInt(1),kn=BigInt(2),fp=BigInt(3),GT=BigInt(4)});function YA(a){return{hash:a,hmac:(t,...e)=>U0(a,t,qw(...e)),randomBytes:Mm}}function WT(a,t){let e=i=>KT({...a,...YA(i)});return Object.freeze({...e(t),create:e})}var YT=ae(()=>{"use strict";AT();rr();Z0();});function Bn(a,t){if($o(a),$o(t),a<0||a>=1<<8*t)throw new Error(`bad I2OSP call: value=${a} length=${t}`);let e=Array.from({length:t}).fill(0);for(let i=t-1;i>=0;i--)e[i]=a&255,a>>>=8;return new Uint8Array(e)}function jA(a,t){let e=new Uint8Array(a.length);for(let i=0;i<a.length;i++)e[i]=a[i]^t[i];return e}function $o(a){if(!Number.isSafeInteger(a))throw new Error("number expected")}function $A(a,t,e,i){Pi(a),Pi(t),$o(e),t.length>255&&(t=i(oi(Yo("H2C-OVERSIZE-DST-"),t)));let{outputLen:n,blockLen:r}=i,s=Math.ceil(e/n);if(e>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");let o=oi(t,Bn(t.length,1)),l=Bn(0,r),c=Bn(e,2),u=new Array(s),p=i(oi(l,a,c,Bn(0,1),o));u[0]=i(oi(p,Bn(1,1),o));for(let L=1;L<=s;L++){let v=[jA(p,u[L-1]),Bn(L+1,1),o];u[L]=i(oi(...v))}return oi(...u).slice(0,e)}function XA(a,t,e,i,n){if(Pi(a),Pi(t),$o(e),t.length>255){let r=Math.ceil(2*i/8);t=n.create({dkLen:r}).update(Yo("H2C-OVERSIZE-DST-")).update(t).digest()}if(e>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return n.create({dkLen:e}).update(a).update(Bn(e,2)).update(t).update(Bn(t.length,1)).digest()}function zT(a,t,e){Ea(e,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:i,k:n,m:r,hash:s,expand:o,DST:l}=e;Pi(a),$o(t);let c=typeof l=="string"?Yo(l):l,u=i.toString(2).length,p=Math.ceil((u+n)/8),d=t*r*p,L;if(o==="xmd")L=$A(a,c,d,s);else if(o==="xof")L=XA(a,c,d,n,s);else if(o==="_internal_pass")L=a;else throw new Error('expand must be "xmd" or "xof"');let v=new Array(t);for(let E=0;E<t;E++){let w=new Array(r);for(let R=0;R<r;R++){let U=p*(R+E*r),V=L.subarray(U,U+p);w[R]=kt(zA(V),i)}v[E]=w}return v}function jT(a,t){let e=t.map(i=>Array.from(i).reverse());return(i,n)=>{let[r,s,o,l]=e.map(c=>c.reduce((u,p)=>a.add(a.mul(u,i),p)));return i=a.div(r,s),n=a.mul(n,a.div(o,l)),{x:i,y:n}}}function $T(a,t,e){if(typeof t!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(i,n){let r=zT(i,2,{...e,DST:e.DST,...n}),s=a.fromAffine(t(r[0])),o=a.fromAffine(t(r[1])),l=s.add(o).clearCofactor();return l.assertValidity(),l},encodeToCurve(i,n){let r=zT(i,1,{...e,DST:e.encodeDST,...n}),s=a.fromAffine(t(r[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(i){if(!Array.isArray(i))throw new Error("mapToCurve: expected array of bigints");for(let r of i)if(typeof r!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${r} in array`);let n=a.fromAffine(t(i)).clearCofactor();return n.assertValidity(),n}}}var zA,XT=ae(()=>{"use strict";jo();Lr();zA=_i});var rC={};o0(rC,{encodeToCurve:()=>nk,hashToCurve:()=>ak,schnorr:()=>ek,secp256k1:()=>Za});function ZT(a){let t=Jo,e=BigInt(3),i=BigInt(6),n=BigInt(11),r=BigInt(22),s=BigInt(23),o=BigInt(44),l=BigInt(88),c=a*a*a%t,u=c*c*a%t,p=Si(u,e,t)*u%t,d=Si(p,e,t)*u%t,L=Si(d,bp,t)*c%t,v=Si(L,n,t)*L%t,E=Si(v,r,t)*v%t,w=Si(E,o,t)*E%t,R=Si(w,l,t)*w%t,U=Si(R,o,t)*E%t,V=Si(U,e,t)*u%t,q=Si(V,s,t)*v%t,te=Si(q,i,t)*c%t,ee=Si(te,bp,t);if(!Mn.eql(Mn.sqr(ee),a))throw new Error("Cannot find square root");return ee}function gp(a,...t){let e=JT[a];if(e===void 0){let i=dr(Uint8Array.from(a,n=>n.charCodeAt(0)));e=oi(i,i),JT[a]=e}return dr(oi(e,...t))}function iI(a){let t=Za.utils.normPrivateKeyToScalar(a),e=nI.fromPrivateKey(t);return{scalar:e.hasEvenY()?t:Qo(-t),bytes:aI(e)}}function tC(a){Ia("x",a,Xo,Jo);let t=eI(a*a),e=eI(t*a+BigInt(7)),i=ZT(e);i%bp!==eC&&(i=eI(-i));let n=new nI(a,i,Xo);return n.assertValidity(),n}function iC(...a){return Qo(Es(gp("BIP0340/challenge",...a)))}function JA(a){return iI(a).bytes}function ZA(a,t,e=Mm(32)){let i=Kt("message",a),{bytes:n,scalar:r}=iI(t),s=Kt("auxRand",e,32),o=tI(r^Es(gp("BIP0340/aux",s))),l=gp("BIP0340/nonce",o,n,i),c=Qo(Es(l));if(c===eC)throw new Error("sign failed: k is zero");let{bytes:u,scalar:p}=iI(c),d=iC(u,n,i),L=new Uint8Array(64);if(L.set(u,0),L.set(tI(Qo(p+d*r)),32),!aC(L,i,n))throw new Error("sign: Invalid signature produced");return L}function aC(a,t,e){let i=Kt("signature",a,64),n=Kt("message",t),r=Kt("publicKey",e,32);try{let s=tC(Es(r)),o=Es(i.subarray(0,32));if(!An(o,Xo,Jo))return!1;let l=Es(i.subarray(32,64));if(!An(l,Xo,yp))return!1;let c=iC(tI(o),aI(s),n),u=QA(s,l,Qo(-c));return!(!u||!u.hasEvenY()||u.toAffine().x!==o)}catch{return!1}}var Jo,yp,Xo,bp,QT,Mn,Za,eC,JT,aI,tI,eI,Qo,nI,QA,Es,ek,tk,ik,nC,ak,nk,Lp=ae(()=>{"use strict";H0();rr();YT();XT();jo();Lr();Z0();Jo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),yp=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Xo=BigInt(1),bp=BigInt(2),QT=(a,t)=>(a+t/bp)/t;Mn=dp(Jo,void 0,void 0,{sqrt:ZT}),Za=WT({a:BigInt(0),b:BigInt(7),Fp:Mn,n:yp,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:a=>{let t=yp,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-Xo*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=e,s=BigInt("0x100000000000000000000000000000000"),o=QT(r*a,t),l=QT(-i*a,t),c=kt(a-o*e-l*n,t),u=kt(-o*i-l*r,t),p=c>s,d=u>s;if(p&&(c=t-c),d&&(u=t-u),c>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+a);return{k1neg:p,k1:c,k2neg:d,k2:u}}}},dr),eC=BigInt(0),JT={};aI=a=>a.toRawBytes(!0).slice(1),tI=a=>na(a,32),eI=a=>kt(a,Jo),Qo=a=>kt(a,yp),nI=Za.ProjectivePoint,QA=(a,t,e)=>nI.BASE.multiplyAndAddUnsafe(a,t,e);Es=_i;ek=(()=>({getPublicKey:JA,sign:ZA,verify:aC,utils:{randomPrivateKey:Za.utils.randomPrivateKey,lift_x:tC,pointToBytes:aI,numberToBytesBE:na,bytesToNumberBE:_i,taggedHash:gp,mod:kt}}))(),tk=(()=>jT(Mn,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(a=>a.map(t=>BigInt(t)))))(),ik=(()=>qT(Mn,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:Mn.create(BigInt("-11"))}))(),nC=(()=>$T(Za.ProjectivePoint,a=>{let{x:t,y:e}=ik(Mn.create(a[0]));return tk(t,e)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:Mn.ORDER,m:1,k:128,expand:"xmd",hash:dr}))(),ak=(()=>nC.hashToCurve)(),nk=(()=>nC.encodeToCurve)()});var en,Ni,ws,Ts,Cs,Ss,Ds,As,ks,Bs,wa,Ta,vr=ae(()=>{"use strict";rs();Ye();en=class extends G{constructor({cause:t,message:e}={}){let i=e?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${i?`with reason: ${i}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}};Object.defineProperty(en,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(en,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});Ni=class extends G{constructor({cause:t,maxFeePerGas:e}={}){super(`The fee cap (\`maxFeePerGas\`${e?` = ${Gt(e)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}};Object.defineProperty(Ni,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});ws=class extends G{constructor({cause:t,maxFeePerGas:e}={}){super(`The fee cap (\`maxFeePerGas\`${e?` = ${Gt(e)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}};Object.defineProperty(ws,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});Ts=class extends G{constructor({cause:t,nonce:e}={}){super(`Nonce provided for the transaction ${e?`(${e}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}};Object.defineProperty(Ts,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});Cs=class extends G{constructor({cause:t,nonce:e}={}){super([`Nonce provided for the transaction ${e?`(${e}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}};Object.defineProperty(Cs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});Ss=class extends G{constructor({cause:t,nonce:e}={}){super(`Nonce provided for the transaction ${e?`(${e}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}};Object.defineProperty(Ss,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});Ds=class extends G{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}};Object.defineProperty(Ds,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});As=class extends G{constructor({cause:t,gas:e}={}){super(`The amount of gas ${e?`(${e}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}};Object.defineProperty(As,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});ks=class extends G{constructor({cause:t,gas:e}={}){super(`The amount of gas ${e?`(${e}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}};Object.defineProperty(ks,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});Bs=class extends G{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}};Object.defineProperty(Bs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});wa=class extends G{constructor({cause:t,maxPriorityFeePerGas:e,maxFeePerGas:i}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${e?` = ${Gt(e)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${i?` = ${Gt(i)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}};Object.defineProperty(wa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});Ta=class extends G{constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}});function Ms(a,t){let e=(a.details||"").toLowerCase(),i=a instanceof G?a.walk(n=>n?.code===en.code):a;return i instanceof G?new en({cause:a,message:i.details}):en.nodeMessage.test(e)?new en({cause:a,message:a.details}):Ni.nodeMessage.test(e)?new Ni({cause:a,maxFeePerGas:t?.maxFeePerGas}):ws.nodeMessage.test(e)?new ws({cause:a,maxFeePerGas:t?.maxFeePerGas}):Ts.nodeMessage.test(e)?new Ts({cause:a,nonce:t?.nonce}):Cs.nodeMessage.test(e)?new Cs({cause:a,nonce:t?.nonce}):Ss.nodeMessage.test(e)?new Ss({cause:a,nonce:t?.nonce}):Ds.nodeMessage.test(e)?new Ds({cause:a}):As.nodeMessage.test(e)?new As({cause:a,gas:t?.gas}):ks.nodeMessage.test(e)?new ks({cause:a,gas:t?.gas}):Bs.nodeMessage.test(e)?new Bs({cause:a}):wa.nodeMessage.test(e)?new wa({cause:a,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new Ta({cause:a})}var Ip=ae(()=>{"use strict";Ye();vr()});function Rs(a,{format:t}){if(!t)return{};let e={};function i(r){let s=Object.keys(r);for(let o of s)o in a&&(e[o]=a[o]),r[o]&&typeof r[o]=="object"&&!Array.isArray(r[o])&&i(r[o])}let n=t(a||{});return i(n),e}var Ep=ae(()=>{"use strict"});function Ps(a,t){return({exclude:e,format:i})=>({exclude:e,format:n=>{let r=t(n);if(e)for(let s of e)delete r[s];return{...r,...i(n)}},type:a})}var wp=ae(()=>{"use strict"});function Rn(a){let t={};return typeof a.authorizationList<"u"&&(t.authorizationList=lk(a.authorizationList)),typeof a.accessList<"u"&&(t.accessList=a.accessList),typeof a.blobVersionedHashes<"u"&&(t.blobVersionedHashes=a.blobVersionedHashes),typeof a.blobs<"u"&&(typeof a.blobs[0]!="string"?t.blobs=a.blobs.map(e=>et(e)):t.blobs=a.blobs),typeof a.data<"u"&&(t.data=a.data),typeof a.from<"u"&&(t.from=a.from),typeof a.gas<"u"&&(t.gas=xe(a.gas)),typeof a.gasPrice<"u"&&(t.gasPrice=xe(a.gasPrice)),typeof a.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=xe(a.maxFeePerBlobGas)),typeof a.maxFeePerGas<"u"&&(t.maxFeePerGas=xe(a.maxFeePerGas)),typeof a.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=xe(a.maxPriorityFeePerGas)),typeof a.nonce<"u"&&(t.nonce=xe(a.nonce)),typeof a.to<"u"&&(t.to=a.to),typeof a.type<"u"&&(t.type=ok[a.type]),typeof a.value<"u"&&(t.value=xe(a.value)),t}function lk(a){return a.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:xe(t.chainId),nonce:xe(t.nonce),...typeof t.yParity<"u"?{yParity:xe(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:xe(t.v)}:{}}))}var ok,Zo=ae(()=>{"use strict";Ue();ok={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"}});function pC(a){if(!(!a||a.length===0))return a.reduce((t,{slot:e,value:i})=>{if(e.length!==66)throw new Mo({size:e.length,targetSize:66,type:"hex"});if(i.length!==66)throw new Mo({size:i.length,targetSize:66,type:"hex"});return t[e]=i,t},{})}function ck(a){let{balance:t,nonce:e,state:i,stateDiff:n,code:r}=a,s={};if(r!==void 0&&(s.code=r),t!==void 0&&(s.balance=xe(t)),e!==void 0&&(s.nonce=xe(e)),i!==void 0&&(s.state=pC(i)),n!==void 0){if(s.state)throw new Qm;s.stateDiff=pC(n)}return s}function Tp(a){if(!a)return;let t={};for(let{address:e,...i}of a){if(!dt(e,{strict:!1}))throw new Lt({address:e});if(t[e])throw new Xm({address:e});t[e]=ck(i)}return t}var rI=ae(()=>{"use strict";ya();vm();N0();ta();Ue()});var oG,lG,cG,uG,mG,pG,hG,dG,fG,yG,bG,gG,LG,_G,vG,xG,IG,EG,wG,TG,CG,SG,DG,AG,kG,BG,MG,RG,PG,NG,OG,HG,UG,VG,FG,GG,KG,qG,WG,YG,zG,jG,$G,XG,QG,JG,ZG,e7,t7,i7,a7,n7,r7,s7,o7,l7,c7,u7,m7,p7,h7,d7,f7,y7,b7,g7,L7,_7,v7,x7,I7,E7,w7,T7,C7,S7,D7,A7,k7,B7,M7,R7,P7,N7,O7,H7,U7,V7,F7,G7,K7,q7,W7,Y7,z7,Ns,sI=ae(()=>{"use strict";oG=2n**(8n-1n)-1n,lG=2n**(16n-1n)-1n,cG=2n**(24n-1n)-1n,uG=2n**(32n-1n)-1n,mG=2n**(40n-1n)-1n,pG=2n**(48n-1n)-1n,hG=2n**(56n-1n)-1n,dG=2n**(64n-1n)-1n,fG=2n**(72n-1n)-1n,yG=2n**(80n-1n)-1n,bG=2n**(88n-1n)-1n,gG=2n**(96n-1n)-1n,LG=2n**(104n-1n)-1n,_G=2n**(112n-1n)-1n,vG=2n**(120n-1n)-1n,xG=2n**(128n-1n)-1n,IG=2n**(136n-1n)-1n,EG=2n**(144n-1n)-1n,wG=2n**(152n-1n)-1n,TG=2n**(160n-1n)-1n,CG=2n**(168n-1n)-1n,SG=2n**(176n-1n)-1n,DG=2n**(184n-1n)-1n,AG=2n**(192n-1n)-1n,kG=2n**(200n-1n)-1n,BG=2n**(208n-1n)-1n,MG=2n**(216n-1n)-1n,RG=2n**(224n-1n)-1n,PG=2n**(232n-1n)-1n,NG=2n**(240n-1n)-1n,OG=2n**(248n-1n)-1n,HG=2n**(256n-1n)-1n,UG=-(2n**(8n-1n)),VG=-(2n**(16n-1n)),FG=-(2n**(24n-1n)),GG=-(2n**(32n-1n)),KG=-(2n**(40n-1n)),qG=-(2n**(48n-1n)),WG=-(2n**(56n-1n)),YG=-(2n**(64n-1n)),zG=-(2n**(72n-1n)),jG=-(2n**(80n-1n)),$G=-(2n**(88n-1n)),XG=-(2n**(96n-1n)),QG=-(2n**(104n-1n)),JG=-(2n**(112n-1n)),ZG=-(2n**(120n-1n)),e7=-(2n**(128n-1n)),t7=-(2n**(136n-1n)),i7=-(2n**(144n-1n)),a7=-(2n**(152n-1n)),n7=-(2n**(160n-1n)),r7=-(2n**(168n-1n)),s7=-(2n**(176n-1n)),o7=-(2n**(184n-1n)),l7=-(2n**(192n-1n)),c7=-(2n**(200n-1n)),u7=-(2n**(208n-1n)),m7=-(2n**(216n-1n)),p7=-(2n**(224n-1n)),h7=-(2n**(232n-1n)),d7=-(2n**(240n-1n)),f7=-(2n**(248n-1n)),y7=-(2n**(256n-1n)),b7=2n**8n-1n,g7=2n**16n-1n,L7=2n**24n-1n,_7=2n**32n-1n,v7=2n**40n-1n,x7=2n**48n-1n,I7=2n**56n-1n,E7=2n**64n-1n,w7=2n**72n-1n,T7=2n**80n-1n,C7=2n**88n-1n,S7=2n**96n-1n,D7=2n**104n-1n,A7=2n**112n-1n,k7=2n**120n-1n,B7=2n**128n-1n,M7=2n**136n-1n,R7=2n**144n-1n,P7=2n**152n-1n,N7=2n**160n-1n,O7=2n**168n-1n,H7=2n**176n-1n,U7=2n**184n-1n,V7=2n**192n-1n,F7=2n**200n-1n,G7=2n**208n-1n,K7=2n**216n-1n,q7=2n**224n-1n,W7=2n**232n-1n,Y7=2n**240n-1n,z7=2n**248n-1n,Ns=2n**256n-1n});function Ca(a){let{account:t,gasPrice:e,maxFeePerGas:i,maxPriorityFeePerGas:n,to:r}=a,s=t?_t(t):void 0;if(s&&!dt(s.address))throw new Lt({address:s.address});if(r&&!dt(r))throw new Lt({address:r});if(typeof e<"u"&&(typeof i<"u"||typeof n<"u"))throw new Jm;if(i&&i>Ns)throw new Ni({maxFeePerGas:i});if(n&&i&&n>i)throw new wa({maxFeePerGas:i,maxPriorityFeePerGas:n})}var Os=ae(()=>{"use strict";Li();sI();ya();vr();ia();ta()});function On(a,t){if(!dt(a,{strict:!1}))throw new Lt({address:a});if(!dt(t,{strict:!1}))throw new Lt({address:t});return a.toLowerCase()===t.toLowerCase()}var el=ae(()=>{"use strict";ya();ta()});function Oi(a){let{abi:t,args:e,functionName:i,data:n}=a,r=t[0];if(i){let o=ga({abi:t,args:e,name:i});if(!o)throw new yn(i,{docsPath:mI});r=o}if(r.type!=="function")throw new yn(void 0,{docsPath:mI});if(!r.outputs)throw new dm(r.name,{docsPath:mI});let s=lr(r.outputs,n);if(s&&s.length>1)return s;if(s&&s.length===1)return s[0]}var mI,Ir=ae(()=>{"use strict";zt();qm();es();mI="/docs/contract/decodeFunctionResult"});var tl,xC,Up,IC,pI,hI,dI,Er=ae(()=>{"use strict";tl=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],xC=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Up=[...xC,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],IC=[...xC,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],pI=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],hI=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],dI=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}]});var EC,wC=ae(()=>{"use strict";EC="0x82ad56cb"});var TC,CC,SC,fI=ae(()=>{"use strict";TC="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",CC="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",SC="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572"});var wr,Vp,Fp,il,Tr,al=ae(()=>{"use strict";Ye();wr=class extends G{constructor({blockNumber:t,chain:e,contract:i}){super(`Chain "${e.name}" does not support contract "${i.name}".`,{metaMessages:["This could be due to any of the following:",...t&&i.blockCreated&&i.blockCreated>t?[`- The contract "${i.name}" was not deployed until block ${i.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${i.name}" configured.`]],name:"ChainDoesNotSupportContract"})}},Vp=class extends G{constructor({chain:t,currentChainId:e}){super(`The current chain of the wallet (id: ${e}) does not match the target chain for the transaction (id: ${t.id} – ${t.name}).`,{metaMessages:[`Current Chain ID:  ${e}`,`Expected Chain ID: ${t.id} – ${t.name}`],name:"ChainMismatchError"})}},Fp=class extends G{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}},il=class extends G{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}},Tr=class extends G{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}});function Cr(a){let{abi:t,args:e,bytecode:i}=a;if(!e||e.length===0)return i;let n=t.find(s=>"type"in s&&s.type==="constructor");if(!n)throw new cm({docsPath:yI});if(!("inputs"in n))throw new Do({docsPath:yI});if(!n.inputs||n.inputs.length===0)throw new Do({docsPath:yI});let r=Ci(n.inputs,e);return ni([i,r])}var yI,Gp=ae(()=>{"use strict";zt();Mi();In();yI="/docs/contract/encodeDeployData"});function Hi({blockNumber:a,chain:t,contract:e}){let i=t?.contracts?.[e];if(!i)throw new wr({chain:t,contract:{name:e}});if(a&&i.blockCreated&&i.blockCreated>a)throw new wr({blockNumber:a,chain:t,contract:{name:e,blockCreated:i.blockCreated}});return i.address}var Sr=ae(()=>{"use strict";al()});function DC(a,{docsPath:t,...e}){let i=(()=>{let n=Ms(a,e);return n instanceof Ta?a:n})();return new mr(i,{docsPath:t,...e})}var AC=ae(()=>{"use strict";wn();vr();Ip()});function Kp(){let a=()=>{},t=()=>{};return{promise:new Promise((i,n)=>{a=i,t=n}),resolve:a,reject:t}}var bI=ae(()=>{"use strict"});function qp({fn:a,id:t,shouldSplitBatch:e,wait:i=0,sort:n}){let r=async()=>{let u=l();s();let p=u.map(({args:d})=>d);p.length!==0&&a(p).then(d=>{n&&Array.isArray(d)&&d.sort(n);for(let L=0;L<u.length;L++){let{resolve:v}=u[L];v?.([d[L],d])}}).catch(d=>{for(let L=0;L<u.length;L++){let{reject:v}=u[L];v?.(d)}})},s=()=>gI.delete(t),o=()=>l().map(({args:u})=>u),l=()=>gI.get(t)||[],c=u=>gI.set(t,[...l(),u]);return{flush:s,async schedule(u){let{promise:p,resolve:d,reject:L}=Kp();return e?.([...o(),u])&&r(),l().length>0?(c({args:u,resolve:d,reject:L}),p):(c({args:u,resolve:d,reject:L}),setTimeout(r,i),p)}}}var gI,LI=ae(()=>{"use strict";bI();gI=new Map});var Wp,Yp,zp,kC=ae(()=>{"use strict";hi();Ye();np();Wp=class extends G{constructor({callbackSelector:t,cause:e,data:i,extraData:n,sender:r,urls:s}){super(e.shortMessage||"An error occurred while fetching for an offchain result.",{cause:e,metaMessages:[...e.metaMessages||[],e.metaMessages?.length?"":[],"Offchain Gateway Call:",s&&["  Gateway URL(s):",...s.map(o=>`    ${ur(o)}`)],`  Sender: ${r}`,`  Data: ${i}`,`  Callback selector: ${t}`,`  Extra data: ${n}`].flat(),name:"OffchainLookupError"})}},Yp=class extends G{constructor({result:t,url:e}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${ur(e)}`,`Response: ${tt(t)}`],name:"OffchainLookupResponseMalformedError"})}},zp=class extends G{constructor({sender:t,to:e}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${e}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}});var RC={};o0(RC,{ccipRequest:()=>MC,offchainLookup:()=>yk,offchainLookupAbiItem:()=>BC,offchainLookupSignature:()=>fk});async function yk(a,{blockNumber:t,blockTag:e,data:i,to:n}){let{args:r}=Wm({data:i,abi:[BC]}),[s,o,l,c,u]=r,{ccipRead:p}=a,d=p&&typeof p?.request=="function"?p.request:MC;try{if(!On(n,s))throw new zp({sender:s,to:n});let L=await d({data:l,sender:s,urls:o}),{data:v}=await Da(a,{blockNumber:t,blockTag:e,data:pi([c,Ci([{type:"bytes"},{type:"bytes"}],[L,u])]),to:n});return v}catch(L){throw new Wp({callbackSelector:c,cause:L,data:i,extraData:u,sender:s,urls:o})}}async function MC({data:a,sender:t,urls:e}){let i=new Error("An unknown error occurred.");for(let n=0;n<e.length;n++){let r=e[n],s=r.includes("{data}")?"GET":"POST",o=s==="POST"?{data:a,sender:t}:void 0,l=s==="POST"?{"Content-Type":"application/json"}:{};try{let c=await fetch(r.replace("{sender}",t).replace("{data}",a),{body:JSON.stringify(o),headers:l,method:s}),u;if(c.headers.get("Content-Type")?.startsWith("application/json")?u=(await c.json()).data:u=await c.text(),!c.ok){i=new Ri({body:o,details:u?.error?tt(u.error):c.statusText,headers:c.headers,status:c.status,url:r});continue}if(!At(u)){i=new Yp({result:u,url:r});continue}return u}catch(c){i=new Ri({body:o,details:c.message,url:r})}}throw i}var fk,BC,PC=ae(()=>{"use strict";zs();kC();cs();R0();In();el();Mi();$i();hi();fk="0x556f1830",BC={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]}});async function Da(a,t){let{account:e=a.account,batch:i=!!a.batch?.multicall,blockNumber:n,blockTag:r="latest",accessList:s,blobs:o,code:l,data:c,factory:u,factoryData:p,gas:d,gasPrice:L,maxFeePerBlobGas:v,maxFeePerGas:E,maxPriorityFeePerGas:w,nonce:R,to:U,value:V,stateOverride:q,...te}=t,ee=e?_t(e):void 0;if(l&&(u||p))throw new G("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&U)throw new G("Cannot provide both `code` & `to` as parameters.");let X=l&&c,re=u&&p&&U&&c,oe=X||re,Ve=(()=>X?Lk({code:l,data:c}):re?_k({data:c,factory:u,factoryData:p,to:U}):c)();try{Ca(t);let $=(n?xe(n):void 0)||r,lt=Tp(q),ye=a.chain?.formatters?.transactionRequest?.format,we=(ye||Rn)({...Rs(te,{format:ye}),from:ee?.address,accessList:s,blobs:o,data:Ve,gas:d,gasPrice:L,maxFeePerBlobGas:v,maxFeePerGas:E,maxPriorityFeePerGas:w,nonce:R,to:oe?void 0:U,value:V});if(i&&bk({request:we})&&!lt)try{return await gk(a,{...we,blockNumber:n,blockTag:r})}catch(Xe){if(!(Xe instanceof il)&&!(Xe instanceof wr))throw Xe}let O=await a.request({method:"eth_call",params:lt?[we,$,lt]:[we,$]});return O==="0x"?{data:void 0}:{data:O}}catch(ke){let $=vk(ke),{offchainLookup:lt,offchainLookupSignature:ye}=await Promise.resolve().then(()=>(PC(),RC));if(a.ccipRead!==!1&&$?.slice(0,10)===ye&&U)return{data:await lt(a,{data:$,to:U})};throw oe&&$?.slice(0,10)==="0x101bb98d"?new Ko({factory:u}):DC(ke,{...t,account:ee,chain:a.chain})}}function bk({request:a}){let{data:t,to:e,...i}=a;return!(!t||t.startsWith(EC)||!e||Object.values(i).filter(n=>typeof n<"u").length>0)}async function gk(a,t){let{batchSize:e=1024,wait:i=0}=typeof a.batch?.multicall=="object"?a.batch.multicall:{},{blockNumber:n,blockTag:r="latest",data:s,multicallAddress:o,to:l}=t,c=o;if(!c){if(!a.chain)throw new il;c=Hi({blockNumber:n,chain:a.chain,contract:"multicall3"})}let p=(n?xe(n):void 0)||r,{schedule:d}=qp({id:`${a.uid}.${p}`,wait:i,shouldSplitBatch(E){return E.reduce((R,{data:U})=>R+(U.length-2),0)>e*2},fn:async E=>{let w=E.map(V=>({allowFailure:!0,callData:V.data,target:V.to})),R=Ft({abi:tl,args:[w],functionName:"aggregate3"}),U=await a.request({method:"eth_call",params:[{data:R,to:c},p]});return Oi({abi:tl,args:[w],functionName:"aggregate3",data:U||"0x"})}}),[{returnData:L,success:v}]=await d({data:s,to:l});if(!v)throw new $a({data:L});return L==="0x"?{data:void 0}:{data:L}}function Lk(a){let{code:t,data:e}=a;return Cr({abi:om(["constructor(bytes, bytes)"]),bytecode:TC,args:[t,e]})}function _k(a){let{data:t,factory:e,factoryData:i,to:n}=a;return Cr({abi:om(["constructor(address, bytes, address, bytes)"]),bytecode:CC,args:[n,t,e,i]})}function vk(a){if(!(a instanceof G))return;let t=a.walk();return typeof t?.data=="object"?t.data?.data:t.data}var zs=ae(()=>{"use strict";g0();Li();Er();wC();fI();Ye();al();wn();Ir();Gp();_a();Sr();Ue();AC();Ep();Zo();LI();rI();Os()});var qS=yD((ME,RE)=>{"use strict";(function(a,t){typeof ME=="object"&&typeof RE<"u"?RE.exports=t():typeof define=="function"&&define.amd?define(t):(a=typeof globalThis<"u"?globalThis:a||self).jsSHA=t()})(ME,function(){"use strict";var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function t(H,x,M,N){var F,S,J,ie=x||[0],ue=(M=M||0)>>>3,be=N===-1?3:0;for(F=0;F<H.length;F+=1)S=(J=F+ue)>>>2,ie.length<=S&&ie.push(0),ie[S]|=H[F]<<8*(be+N*(J%4));return{value:ie,binLen:8*H.length+M}}function e(H,x,M){switch(x){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(H){case"HEX":return function(N,F,S){return function(J,ie,ue,be){var Re,fe,Ie,qe;if(J.length%2!=0)throw new Error("String of HEX type must be in byte increments");var de=ie||[0],rt=(ue=ue||0)>>>3,Je=be===-1?3:0;for(Re=0;Re<J.length;Re+=2){if(fe=parseInt(J.substr(Re,2),16),isNaN(fe))throw new Error("String of HEX type contains invalid characters");for(Ie=(qe=(Re>>>1)+rt)>>>2;de.length<=Ie;)de.push(0);de[Ie]|=fe<<8*(Je+be*(qe%4))}return{value:de,binLen:4*J.length+ue}}(N,F,S,M)};case"TEXT":return function(N,F,S){return function(J,ie,ue,be,Re){var fe,Ie,qe,de,rt,Je,pt,xt,Va=0,Ti=ue||[0],zi=(be=be||0)>>>3;if(ie==="UTF8")for(pt=Re===-1?3:0,qe=0;qe<J.length;qe+=1)for(Ie=[],128>(fe=J.charCodeAt(qe))?Ie.push(fe):2048>fe?(Ie.push(192|fe>>>6),Ie.push(128|63&fe)):55296>fe||57344<=fe?Ie.push(224|fe>>>12,128|fe>>>6&63,128|63&fe):(qe+=1,fe=65536+((1023&fe)<<10|1023&J.charCodeAt(qe)),Ie.push(240|fe>>>18,128|fe>>>12&63,128|fe>>>6&63,128|63&fe)),de=0;de<Ie.length;de+=1){for(rt=(Je=Va+zi)>>>2;Ti.length<=rt;)Ti.push(0);Ti[rt]|=Ie[de]<<8*(pt+Re*(Je%4)),Va+=1}else for(pt=Re===-1?2:0,xt=ie==="UTF16LE"&&Re!==1||ie!=="UTF16LE"&&Re===1,qe=0;qe<J.length;qe+=1){for(fe=J.charCodeAt(qe),xt===!0&&(fe=(de=255&fe)<<8|fe>>>8),rt=(Je=Va+zi)>>>2;Ti.length<=rt;)Ti.push(0);Ti[rt]|=fe<<8*(pt+Re*(Je%4)),Va+=2}return{value:Ti,binLen:8*Va+be}}(N,x,F,S,M)};case"B64":return function(N,F,S){return function(J,ie,ue,be){var Re,fe,Ie,qe,de,rt,Je=0,pt=ie||[0],xt=(ue=ue||0)>>>3,Va=be===-1?3:0,Ti=J.indexOf("=");if(J.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(J=J.replace(/=/g,""),Ti!==-1&&Ti<J.length)throw new Error("Invalid '=' found in base-64 string");for(Re=0;Re<J.length;Re+=4){for(qe=J.substr(Re,4),Ie=0,fe=0;fe<qe.length;fe+=1)Ie|=a.indexOf(qe.charAt(fe))<<18-6*fe;for(fe=0;fe<qe.length-1;fe+=1){for(de=(rt=Je+xt)>>>2;pt.length<=de;)pt.push(0);pt[de]|=(Ie>>>16-8*fe&255)<<8*(Va+be*(rt%4)),Je+=1}}return{value:pt,binLen:8*Je+ue}}(N,F,S,M)};case"BYTES":return function(N,F,S){return function(J,ie,ue,be){var Re,fe,Ie,qe,de=ie||[0],rt=(ue=ue||0)>>>3,Je=be===-1?3:0;for(fe=0;fe<J.length;fe+=1)Re=J.charCodeAt(fe),Ie=(qe=fe+rt)>>>2,de.length<=Ie&&de.push(0),de[Ie]|=Re<<8*(Je+be*(qe%4));return{value:de,binLen:8*J.length+ue}}(N,F,S,M)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(N,F,S){return function(J,ie,ue,be){return t(new Uint8Array(J),ie,ue,be)}(N,F,S,M)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(N,F,S){return t(N,F,S,M)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function i(H,x,M,N){switch(H){case"HEX":return function(F){return function(S,J,ie,ue){var be,Re,fe="",Ie=J/8,qe=ie===-1?3:0;for(be=0;be<Ie;be+=1)Re=S[be>>>2]>>>8*(qe+ie*(be%4)),fe+="0123456789abcdef".charAt(Re>>>4&15)+"0123456789abcdef".charAt(15&Re);return ue.outputUpper?fe.toUpperCase():fe}(F,x,M,N)};case"B64":return function(F){return function(S,J,ie,ue){var be,Re,fe,Ie,qe,de="",rt=J/8,Je=ie===-1?3:0;for(be=0;be<rt;be+=3)for(Ie=be+1<rt?S[be+1>>>2]:0,qe=be+2<rt?S[be+2>>>2]:0,fe=(S[be>>>2]>>>8*(Je+ie*(be%4))&255)<<16|(Ie>>>8*(Je+ie*((be+1)%4))&255)<<8|qe>>>8*(Je+ie*((be+2)%4))&255,Re=0;Re<4;Re+=1)de+=8*be+6*Re<=J?a.charAt(fe>>>6*(3-Re)&63):ue.b64Pad;return de}(F,x,M,N)};case"BYTES":return function(F){return function(S,J,ie){var ue,be,Re="",fe=J/8,Ie=ie===-1?3:0;for(ue=0;ue<fe;ue+=1)be=S[ue>>>2]>>>8*(Ie+ie*(ue%4))&255,Re+=String.fromCharCode(be);return Re}(F,x,M)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(F){return function(S,J,ie){var ue,be=J/8,Re=new ArrayBuffer(be),fe=new Uint8Array(Re),Ie=ie===-1?3:0;for(ue=0;ue<be;ue+=1)fe[ue]=S[ue>>>2]>>>8*(Ie+ie*(ue%4))&255;return Re}(F,x,M)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(F){return function(S,J,ie){var ue,be=J/8,Re=ie===-1?3:0,fe=new Uint8Array(be);for(ue=0;ue<be;ue+=1)fe[ue]=S[ue>>>2]>>>8*(Re+ie*(ue%4))&255;return fe}(F,x,M)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],o="Chosen SHA variant is not supported";function l(H,x){var M,N,F=H.binLen>>>3,S=x.binLen>>>3,J=F<<3,ie=4-F<<3;if(F%4!=0){for(M=0;M<S;M+=4)N=F+M>>>2,H.value[N]|=x.value[M>>>2]<<J,H.value.push(0),H.value[N+1]|=x.value[M>>>2]>>>ie;return(H.value.length<<2)-4>=S+F&&H.value.pop(),{value:H.value,binLen:H.binLen+x.binLen}}return{value:H.value.concat(x.value),binLen:H.binLen+x.binLen}}function c(H){var x={outputUpper:!1,b64Pad:"=",outputLen:-1},M=H||{},N="Output length must be a multiple of 8";if(x.outputUpper=M.outputUpper||!1,M.b64Pad&&(x.b64Pad=M.b64Pad),M.outputLen){if(M.outputLen%8!=0)throw new Error(N);x.outputLen=M.outputLen}else if(M.shakeLen){if(M.shakeLen%8!=0)throw new Error(N);x.outputLen=M.shakeLen}if(typeof x.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof x.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return x}function u(H,x,M,N){var F=H+" must include a value and format";if(!x){if(!N)throw new Error(F);return N}if(x.value===void 0||!x.format)throw new Error(F);return e(x.format,x.encoding||"UTF8",M)(x.value)}var p=function(){function H(x,M,N){var F=N||{};if(this.t=M,this.i=F.encoding||"UTF8",this.numRounds=F.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=x,this.u=[],this.s=0,this.h=!1,this.v=0,this.A=!1,this.l=[],this.H=[]}return H.prototype.update=function(x){var M,N=0,F=this.S>>>5,S=this.p(x,this.u,this.s),J=S.binLen,ie=S.value,ue=J>>>5;for(M=0;M<ue;M+=F)N+this.S<=J&&(this.m=this.R(ie.slice(M,M+F),this.m),N+=this.S);this.v+=N,this.u=ie.slice(N>>>5),this.s=J%this.S,this.h=!0},H.prototype.getHash=function(x,M){var N,F,S=this.U,J=c(M);if(this.T){if(J.outputLen===-1)throw new Error("Output length must be specified in options");S=J.outputLen}var ie=i(x,S,this.C,J);if(this.A&&this.F)return ie(this.F(J));for(F=this.K(this.u.slice(),this.s,this.v,this.B(this.m),S),N=1;N<this.numRounds;N+=1)this.T&&S%32!=0&&(F[F.length-1]&=16777215>>>24-S%32),F=this.K(F,S,0,this.L(this.o),S);return ie(F)},H.prototype.setHMACKey=function(x,M,N){if(!this.g)throw new Error("Variant does not support HMAC");if(this.h)throw new Error("Cannot set MAC key after calling update");var F=e(M,(N||{}).encoding||"UTF8",this.C);this.k(F(x))},H.prototype.k=function(x){var M,N=this.S>>>3,F=N/4-1;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(N<x.binLen/8&&(x.value=this.K(x.value,x.binLen,0,this.L(this.o),this.U));x.value.length<=F;)x.value.push(0);for(M=0;M<=F;M+=1)this.l[M]=909522486^x.value[M],this.H[M]=1549556828^x.value[M];this.m=this.R(this.l,this.m),this.v=this.S,this.A=!0},H.prototype.getHMAC=function(x,M){var N=c(M);return i(x,this.U,this.C,N)(this.Y())},H.prototype.Y=function(){var x;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");var M=this.K(this.u.slice(),this.s,this.v,this.B(this.m),this.U);return x=this.R(this.H,this.L(this.o)),x=this.K(M,this.U,this.S,x,this.U)},H}(),d=function(H,x){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,N){M.__proto__=N}||function(M,N){for(var F in N)Object.prototype.hasOwnProperty.call(N,F)&&(M[F]=N[F])})(H,x)};function L(H,x){function M(){this.constructor=H}d(H,x),H.prototype=x===null?Object.create(x):(M.prototype=x.prototype,new M)}function v(H,x){return H<<x|H>>>32-x}function E(H,x){return H>>>x|H<<32-x}function w(H,x){return H>>>x}function R(H,x,M){return H^x^M}function U(H,x,M){return H&x^~H&M}function V(H,x,M){return H&x^H&M^x&M}function q(H){return E(H,2)^E(H,13)^E(H,22)}function te(H,x){var M=(65535&H)+(65535&x);return(65535&(H>>>16)+(x>>>16)+(M>>>16))<<16|65535&M}function ee(H,x,M,N){var F=(65535&H)+(65535&x)+(65535&M)+(65535&N);return(65535&(H>>>16)+(x>>>16)+(M>>>16)+(N>>>16)+(F>>>16))<<16|65535&F}function X(H,x,M,N,F){var S=(65535&H)+(65535&x)+(65535&M)+(65535&N)+(65535&F);return(65535&(H>>>16)+(x>>>16)+(M>>>16)+(N>>>16)+(F>>>16)+(S>>>16))<<16|65535&S}function re(H){return E(H,7)^E(H,18)^w(H,3)}function oe(H){return E(H,6)^E(H,11)^E(H,25)}function Ve(H){return[1732584193,4023233417,2562383102,271733878,3285377520]}function ke(H,x){var M,N,F,S,J,ie,ue,be=[];for(M=x[0],N=x[1],F=x[2],S=x[3],J=x[4],ue=0;ue<80;ue+=1)be[ue]=ue<16?H[ue]:v(be[ue-3]^be[ue-8]^be[ue-14]^be[ue-16],1),ie=ue<20?X(v(M,5),U(N,F,S),J,1518500249,be[ue]):ue<40?X(v(M,5),R(N,F,S),J,1859775393,be[ue]):ue<60?X(v(M,5),V(N,F,S),J,2400959708,be[ue]):X(v(M,5),R(N,F,S),J,3395469782,be[ue]),J=S,S=F,F=v(N,30),N=M,M=ie;return x[0]=te(M,x[0]),x[1]=te(N,x[1]),x[2]=te(F,x[2]),x[3]=te(S,x[3]),x[4]=te(J,x[4]),x}function $(H,x,M,N){for(var F,S=15+(x+65>>>9<<4),J=x+M;H.length<=S;)H.push(0);for(H[x>>>5]|=128<<24-x%32,H[S]=4294967295&J,H[S-1]=J/4294967296|0,F=0;F<H.length;F+=16)N=ke(H.slice(F,F+16),N);return N}var lt=function(H){function x(M,N,F){var S=this;if(M!=="SHA-1")throw new Error(o);var J=F||{};return(S=H.call(this,M,N,F)||this).g=!0,S.F=S.Y,S.C=-1,S.p=e(S.t,S.i,S.C),S.R=ke,S.B=function(ie){return ie.slice()},S.L=Ve,S.K=$,S.m=[1732584193,4023233417,2562383102,271733878,3285377520],S.S=512,S.U=160,S.T=!1,J.hmacKey&&S.k(u("hmacKey",J.hmacKey,S.C)),S}return L(x,H),x}(p);function ye(H){return H=="SHA-224"?r.slice():s.slice()}function Te(H,x){var M,N,F,S,J,ie,ue,be,Re,fe,Ie,qe,de=[];for(M=x[0],N=x[1],F=x[2],S=x[3],J=x[4],ie=x[5],ue=x[6],be=x[7],Ie=0;Ie<64;Ie+=1)de[Ie]=Ie<16?H[Ie]:ee(E(qe=de[Ie-2],17)^E(qe,19)^w(qe,10),de[Ie-7],re(de[Ie-15]),de[Ie-16]),Re=X(be,oe(J),U(J,ie,ue),n[Ie],de[Ie]),fe=te(q(M),V(M,N,F)),be=ue,ue=ie,ie=J,J=te(S,Re),S=F,F=N,N=M,M=te(Re,fe);return x[0]=te(M,x[0]),x[1]=te(N,x[1]),x[2]=te(F,x[2]),x[3]=te(S,x[3]),x[4]=te(J,x[4]),x[5]=te(ie,x[5]),x[6]=te(ue,x[6]),x[7]=te(be,x[7]),x}var we=function(H){function x(M,N,F){var S=this;if(M!=="SHA-224"&&M!=="SHA-256")throw new Error(o);var J=F||{};return(S=H.call(this,M,N,F)||this).F=S.Y,S.g=!0,S.C=-1,S.p=e(S.t,S.i,S.C),S.R=Te,S.B=function(ie){return ie.slice()},S.L=ye,S.K=function(ie,ue,be,Re){return function(fe,Ie,qe,de,rt){for(var Je,pt=15+(Ie+65>>>9<<4),xt=Ie+qe;fe.length<=pt;)fe.push(0);for(fe[Ie>>>5]|=128<<24-Ie%32,fe[pt]=4294967295&xt,fe[pt-1]=xt/4294967296|0,Je=0;Je<fe.length;Je+=16)de=Te(fe.slice(Je,Je+16),de);return rt==="SHA-224"?[de[0],de[1],de[2],de[3],de[4],de[5],de[6]]:de}(ie,ue,be,Re,M)},S.m=ye(M),S.S=512,S.U=M==="SHA-224"?224:256,S.T=!1,J.hmacKey&&S.k(u("hmacKey",J.hmacKey,S.C)),S}return L(x,H),x}(p),O=function(H,x){this.N=H,this.I=x};function Xe(H,x){var M;return x>32?(M=64-x,new O(H.I<<x|H.N>>>M,H.N<<x|H.I>>>M)):x!==0?(M=32-x,new O(H.N<<x|H.I>>>M,H.I<<x|H.N>>>M)):H}function mt(H,x){var M;return x<32?(M=32-x,new O(H.N>>>x|H.I<<M,H.I>>>x|H.N<<M)):(M=64-x,new O(H.I>>>x|H.N<<M,H.N>>>x|H.I<<M))}function Qt(H,x){return new O(H.N>>>x,H.I>>>x|H.N<<32-x)}function ti(H,x,M){return new O(H.N&x.N^~H.N&M.N,H.I&x.I^~H.I&M.I)}function ma(H,x,M){return new O(H.N&x.N^H.N&M.N^x.N&M.N,H.I&x.I^H.I&M.I^x.I&M.I)}function Ei(H){var x=mt(H,28),M=mt(H,34),N=mt(H,39);return new O(x.N^M.N^N.N,x.I^M.I^N.I)}function Rt(H,x){var M,N;M=(65535&H.I)+(65535&x.I);var F=(65535&(N=(H.I>>>16)+(x.I>>>16)+(M>>>16)))<<16|65535&M;return M=(65535&H.N)+(65535&x.N)+(N>>>16),N=(H.N>>>16)+(x.N>>>16)+(M>>>16),new O((65535&N)<<16|65535&M,F)}function ir(H,x,M,N){var F,S;F=(65535&H.I)+(65535&x.I)+(65535&M.I)+(65535&N.I);var J=(65535&(S=(H.I>>>16)+(x.I>>>16)+(M.I>>>16)+(N.I>>>16)+(F>>>16)))<<16|65535&F;return F=(65535&H.N)+(65535&x.N)+(65535&M.N)+(65535&N.N)+(S>>>16),S=(H.N>>>16)+(x.N>>>16)+(M.N>>>16)+(N.N>>>16)+(F>>>16),new O((65535&S)<<16|65535&F,J)}function pa(H,x,M,N,F){var S,J;S=(65535&H.I)+(65535&x.I)+(65535&M.I)+(65535&N.I)+(65535&F.I);var ie=(65535&(J=(H.I>>>16)+(x.I>>>16)+(M.I>>>16)+(N.I>>>16)+(F.I>>>16)+(S>>>16)))<<16|65535&S;return S=(65535&H.N)+(65535&x.N)+(65535&M.N)+(65535&N.N)+(65535&F.N)+(J>>>16),J=(H.N>>>16)+(x.N>>>16)+(M.N>>>16)+(N.N>>>16)+(F.N>>>16)+(S>>>16),new O((65535&J)<<16|65535&S,ie)}function Oa(H,x){return new O(H.N^x.N,H.I^x.I)}function Ha(H){var x=mt(H,1),M=mt(H,8),N=Qt(H,7);return new O(x.N^M.N^N.N,x.I^M.I^N.I)}function dn(H){var x=mt(H,14),M=mt(H,18),N=mt(H,41);return new O(x.N^M.N^N.N,x.I^M.I^N.I)}var zc=[new O(n[0],3609767458),new O(n[1],602891725),new O(n[2],3964484399),new O(n[3],2173295548),new O(n[4],4081628472),new O(n[5],3053834265),new O(n[6],2937671579),new O(n[7],3664609560),new O(n[8],2734883394),new O(n[9],1164996542),new O(n[10],1323610764),new O(n[11],3590304994),new O(n[12],4068182383),new O(n[13],991336113),new O(n[14],633803317),new O(n[15],3479774868),new O(n[16],2666613458),new O(n[17],944711139),new O(n[18],2341262773),new O(n[19],2007800933),new O(n[20],1495990901),new O(n[21],1856431235),new O(n[22],3175218132),new O(n[23],2198950837),new O(n[24],3999719339),new O(n[25],766784016),new O(n[26],2566594879),new O(n[27],3203337956),new O(n[28],1034457026),new O(n[29],2466948901),new O(n[30],3758326383),new O(n[31],168717936),new O(n[32],1188179964),new O(n[33],1546045734),new O(n[34],1522805485),new O(n[35],2643833823),new O(n[36],2343527390),new O(n[37],1014477480),new O(n[38],1206759142),new O(n[39],344077627),new O(n[40],1290863460),new O(n[41],3158454273),new O(n[42],3505952657),new O(n[43],106217008),new O(n[44],3606008344),new O(n[45],1432725776),new O(n[46],1467031594),new O(n[47],851169720),new O(n[48],3100823752),new O(n[49],1363258195),new O(n[50],3750685593),new O(n[51],3785050280),new O(n[52],3318307427),new O(n[53],3812723403),new O(n[54],2003034995),new O(n[55],3602036899),new O(n[56],1575990012),new O(n[57],1125592928),new O(n[58],2716904306),new O(n[59],442776044),new O(n[60],593698344),new O(n[61],3733110249),new O(n[62],2999351573),new O(n[63],3815920427),new O(3391569614,3928383900),new O(3515267271,566280711),new O(3940187606,3454069534),new O(4118630271,4000239992),new O(116418474,1914138554),new O(174292421,2731055270),new O(289380356,3203993006),new O(460393269,320620315),new O(685471733,587496836),new O(852142971,1086792851),new O(1017036298,365543100),new O(1126000580,2618297676),new O(1288033470,3409855158),new O(1501505948,4234509866),new O(1607167915,987167468),new O(1816402316,1246189591)];function wi(H){return H==="SHA-384"?[new O(3418070365,r[0]),new O(1654270250,r[1]),new O(2438529370,r[2]),new O(355462360,r[3]),new O(1731405415,r[4]),new O(41048885895,r[5]),new O(3675008525,r[6]),new O(1203062813,r[7])]:[new O(s[0],4089235720),new O(s[1],2227873595),new O(s[2],4271175723),new O(s[3],1595750129),new O(s[4],2917565137),new O(s[5],725511199),new O(s[6],4215389547),new O(s[7],327033209)]}function Ua(H,x){var M,N,F,S,J,ie,ue,be,Re,fe,Ie,qe,de,rt,Je,pt,xt=[];for(M=x[0],N=x[1],F=x[2],S=x[3],J=x[4],ie=x[5],ue=x[6],be=x[7],Ie=0;Ie<80;Ie+=1)Ie<16?(qe=2*Ie,xt[Ie]=new O(H[qe],H[qe+1])):xt[Ie]=ir((de=xt[Ie-2],rt=void 0,Je=void 0,pt=void 0,rt=mt(de,19),Je=mt(de,61),pt=Qt(de,6),new O(rt.N^Je.N^pt.N,rt.I^Je.I^pt.I)),xt[Ie-7],Ha(xt[Ie-15]),xt[Ie-16]),Re=pa(be,dn(J),ti(J,ie,ue),zc[Ie],xt[Ie]),fe=Rt(Ei(M),ma(M,N,F)),be=ue,ue=ie,ie=J,J=Rt(S,Re),S=F,F=N,N=M,M=Rt(Re,fe);return x[0]=Rt(M,x[0]),x[1]=Rt(N,x[1]),x[2]=Rt(F,x[2]),x[3]=Rt(S,x[3]),x[4]=Rt(J,x[4]),x[5]=Rt(ie,x[5]),x[6]=Rt(ue,x[6]),x[7]=Rt(be,x[7]),x}var Fr=function(H){function x(M,N,F){var S=this;if(M!=="SHA-384"&&M!=="SHA-512")throw new Error(o);var J=F||{};return(S=H.call(this,M,N,F)||this).F=S.Y,S.g=!0,S.C=-1,S.p=e(S.t,S.i,S.C),S.R=Ua,S.B=function(ie){return ie.slice()},S.L=wi,S.K=function(ie,ue,be,Re){return function(fe,Ie,qe,de,rt){for(var Je,pt=31+(Ie+129>>>10<<5),xt=Ie+qe;fe.length<=pt;)fe.push(0);for(fe[Ie>>>5]|=128<<24-Ie%32,fe[pt]=4294967295&xt,fe[pt-1]=xt/4294967296|0,Je=0;Je<fe.length;Je+=32)de=Ua(fe.slice(Je,Je+32),de);return rt==="SHA-384"?[(de=de)[0].N,de[0].I,de[1].N,de[1].I,de[2].N,de[2].I,de[3].N,de[3].I,de[4].N,de[4].I,de[5].N,de[5].I]:[de[0].N,de[0].I,de[1].N,de[1].I,de[2].N,de[2].I,de[3].N,de[3].I,de[4].N,de[4].I,de[5].N,de[5].I,de[6].N,de[6].I,de[7].N,de[7].I]}(ie,ue,be,Re,M)},S.m=wi(M),S.S=1024,S.U=M==="SHA-384"?384:512,S.T=!1,J.hmacKey&&S.k(u("hmacKey",J.hmacKey,S.C)),S}return L(x,H),x}(p),jc=[new O(0,1),new O(0,32898),new O(2147483648,32906),new O(2147483648,2147516416),new O(0,32907),new O(0,2147483649),new O(2147483648,2147516545),new O(2147483648,32777),new O(0,138),new O(0,136),new O(0,2147516425),new O(0,2147483658),new O(0,2147516555),new O(2147483648,139),new O(2147483648,32905),new O(2147483648,32771),new O(2147483648,32770),new O(2147483648,128),new O(0,32778),new O(2147483648,2147483658),new O(2147483648,2147516545),new O(2147483648,32896),new O(0,2147483649),new O(2147483648,2147516424)],$c=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function n0(H){var x,M=[];for(x=0;x<5;x+=1)M[x]=[new O(0,0),new O(0,0),new O(0,0),new O(0,0),new O(0,0)];return M}function cD(H){var x,M=[];for(x=0;x<5;x+=1)M[x]=H[x].slice();return M}function Xc(H,x){var M,N,F,S,J,ie,ue,be,Re,fe=[],Ie=[];if(H!==null)for(N=0;N<H.length;N+=2)x[(N>>>1)%5][(N>>>1)/5|0]=Oa(x[(N>>>1)%5][(N>>>1)/5|0],new O(H[N+1],H[N]));for(M=0;M<24;M+=1){for(S=n0(),N=0;N<5;N+=1)fe[N]=(J=x[N][0],ie=x[N][1],ue=x[N][2],be=x[N][3],Re=x[N][4],new O(J.N^ie.N^ue.N^be.N^Re.N,J.I^ie.I^ue.I^be.I^Re.I));for(N=0;N<5;N+=1)Ie[N]=Oa(fe[(N+4)%5],Xe(fe[(N+1)%5],1));for(N=0;N<5;N+=1)for(F=0;F<5;F+=1)x[N][F]=Oa(x[N][F],Ie[N]);for(N=0;N<5;N+=1)for(F=0;F<5;F+=1)S[F][(2*N+3*F)%5]=Xe(x[N][F],$c[N][F]);for(N=0;N<5;N+=1)for(F=0;F<5;F+=1)x[N][F]=Oa(S[N][F],new O(~S[(N+1)%5][F].N&S[(N+2)%5][F].N,~S[(N+1)%5][F].I&S[(N+2)%5][F].I));x[0][0]=Oa(x[0][0],jc[M])}return x}function $E(H){var x,M,N=0,F=[0,0],S=[4294967295&H,H/4294967296&2097151];for(x=6;x>=0;x--)(M=S[x>>2]>>>8*x&255)===0&&N===0||(F[N+1>>2]|=M<<8*(N+1),N+=1);return N=N!==0?N:1,F[0]|=N,{value:N+1>4?F:[F[0]],binLen:8+8*N}}function r0(H){return l($E(H.binLen),H)}function XE(H,x){var M,N=$E(x),F=x>>>2,S=(F-(N=l(N,H)).value.length%F)%F;for(M=0;M<S;M++)N.value.push(0);return N.value}var uD=function(H){function x(M,N,F){var S=this,J=6,ie=0,ue=F||{};if((S=H.call(this,M,N,F)||this).numRounds!==1){if(ue.kmacKey||ue.hmacKey)throw new Error("Cannot set numRounds with MAC");if(S.o==="CSHAKE128"||S.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(S.C=1,S.p=e(S.t,S.i,S.C),S.R=Xc,S.B=cD,S.L=n0,S.m=n0(),S.T=!1,M){case"SHA3-224":S.S=ie=1152,S.U=224,S.g=!0,S.F=S.Y;break;case"SHA3-256":S.S=ie=1088,S.U=256,S.g=!0,S.F=S.Y;break;case"SHA3-384":S.S=ie=832,S.U=384,S.g=!0,S.F=S.Y;break;case"SHA3-512":S.S=ie=576,S.U=512,S.g=!0,S.F=S.Y;break;case"SHAKE128":J=31,S.S=ie=1344,S.U=-1,S.T=!0,S.g=!1,S.F=null;break;case"SHAKE256":J=31,S.S=ie=1088,S.U=-1,S.T=!0,S.g=!1,S.F=null;break;case"KMAC128":J=4,S.S=ie=1344,S.M(F),S.U=-1,S.T=!0,S.g=!1,S.F=S.X;break;case"KMAC256":J=4,S.S=ie=1088,S.M(F),S.U=-1,S.T=!0,S.g=!1,S.F=S.X;break;case"CSHAKE128":S.S=ie=1344,J=S.O(F),S.U=-1,S.T=!0,S.g=!1,S.F=null;break;case"CSHAKE256":S.S=ie=1088,J=S.O(F),S.U=-1,S.T=!0,S.g=!1,S.F=null;break;default:throw new Error(o)}return S.K=function(be,Re,fe,Ie,qe){return function(de,rt,Je,pt,xt,Va,Ti){var zi,s0,Qc=0,vo=[],Jc=xt>>>5,mD=rt>>>5;for(zi=0;zi<mD&&rt>=xt;zi+=Jc)pt=Xc(de.slice(zi,zi+Jc),pt),rt-=xt;for(de=de.slice(zi),rt%=xt;de.length<Jc;)de.push(0);for(de[(zi=rt>>>3)>>2]^=Va<<zi%4*8,de[Jc-1]^=2147483648,pt=Xc(de,pt);32*vo.length<Ti&&(s0=pt[Qc%5][Qc/5|0],vo.push(s0.I),!(32*vo.length>=Ti));)vo.push(s0.N),64*(Qc+=1)%xt==0&&(Xc(null,pt),Qc=0);return vo}(be,Re,0,Ie,ie,J,qe)},ue.hmacKey&&S.k(u("hmacKey",ue.hmacKey,S.C)),S}return L(x,H),x.prototype.O=function(M,N){var F=function(ue){var be=ue||{};return{funcName:u("funcName",be.funcName,1,{value:[],binLen:0}),customization:u("Customization",be.customization,1,{value:[],binLen:0})}}(M||{});N&&(F.funcName=N);var S=l(r0(F.funcName),r0(F.customization));if(F.customization.binLen!==0||F.funcName.binLen!==0){for(var J=XE(S,this.S>>>3),ie=0;ie<J.length;ie+=this.S>>>5)this.m=this.R(J.slice(ie,ie+(this.S>>>5)),this.m),this.v+=this.S;return 4}return 31},x.prototype.M=function(M){var N=function(J){var ie=J||{};return{kmacKey:u("kmacKey",ie.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:u("Customization",ie.customization,1,{value:[],binLen:0})}}(M||{});this.O(M,N.funcName);for(var F=XE(r0(N.kmacKey),this.S>>>3),S=0;S<F.length;S+=this.S>>>5)this.m=this.R(F.slice(S,S+(this.S>>>5)),this.m),this.v+=this.S;this.A=!0},x.prototype.X=function(M){var N=l({value:this.u.slice(),binLen:this.s},function(F){var S,J,ie=0,ue=[0,0],be=[4294967295&F,F/4294967296&2097151];for(S=6;S>=0;S--)(J=be[S>>2]>>>8*S&255)==0&&ie===0||(ue[ie>>2]|=J<<8*ie,ie+=1);return ue[(ie=ie!==0?ie:1)>>2]|=ie<<8*ie,{value:ie+1>4?ue:[ue[0]],binLen:8+8*ie}}(M.outputLen));return this.K(N.value,N.binLen,this.v,this.B(this.m),M.outputLen)},x}(p);return function(){function H(x,M,N){if(x=="SHA-1")this.j=new lt(x,M,N);else if(x=="SHA-224"||x=="SHA-256")this.j=new we(x,M,N);else if(x=="SHA-384"||x=="SHA-512")this.j=new Fr(x,M,N);else{if(x!="SHA3-224"&&x!="SHA3-256"&&x!="SHA3-384"&&x!="SHA3-512"&&x!="SHAKE128"&&x!="SHAKE256"&&x!="CSHAKE128"&&x!="CSHAKE256"&&x!="KMAC128"&&x!="KMAC256")throw new Error(o);this.j=new uD(x,M,N)}}return H.prototype.update=function(x){this.j.update(x)},H.prototype.getHash=function(x,M){return this.j.getHash(x,M)},H.prototype.setHMACKey=function(x,M,N){this.j.setHMACKey(x,M,N)},H.prototype.getHMAC=function(x,M){return this.j.getHMAC(x,M)},H}()})});var eu=class extends Laya.Scene{};var{regClass:LD,property:wN}=Laya,xo=class extends eu{constructor(){super()}onEnable(){console.log("IndexRT onEnable"),this.uiBtn.on(Laya.Event.CLICK,this,()=>{console.log("uiBtn"),Laya.Scene.open("scenes/UiMain.ls")}),this.phyBtn.on(Laya.Event.CLICK,this,()=>{console.log("phyBtn"),Laya.Scene.open("scenes/PhysicsGameMain.ls")}),this.d3Btn.on(Laya.Event.CLICK,this,()=>{console.log("d3Btn"),Laya.Scene.open("scenes/D3Main.ls")})}onDestroy(){}};xo=h([LD("wtSVevJMRPCBIPp2HPhqpw")],xo);var tu=class extends Laya.Scene{};var{regClass:_D,property:vD}=Laya,Io=class extends tu{constructor(){super();this.text=""}get dataSource(){return super.dataSource}set dataSource(e){if(super.dataSource=e,!!e){if(e.avatar){let i=this.getChildByName("avatar").getChildByName("redHot");i.visible=e.avatar.redHot.visible}if(e.flag){let i=this.getChildByName("flag").getChildByName("flagText");i.text=e.flag.flagText.text}}}};h([vD({type:"string"})],Io.prototype,"text",2),Io=h([_D("c-3Sonu7RWOm5ETy2TrBcg")],Io);var iu=class extends Laya.Scene{};var pe=class{constructor(){this._keys=[];this.THIS_ID="id"}init(t){for(let e in t){this._keys.push(e);let i=t[e];t[e]instanceof String&&String(t[e]).indexOf("[[")>=0&&(i=JSON.parse(t[e])),this[e]=i}}checkItems(){}};var Eo=class extends pe{};var le=class{constructor(){this._values=[];this._keys=[];this.SERIALIZATION_NUM=new Date().getTime()}get values(){return this._values}get keys(){return this._keys}set(t,e){let i=this.indexOf(t);if(i>=0){this._values[i]=e;return}this._keys.push(t),this._values.push(e)}unshift(t,e){let i=this.indexOf(t);if(i>=0){this._values[i]=e;return}this._keys.unshift(t),this._values.unshift(e)}indexOf(t){let e=this._keys.indexOf(t);return e>=0?e:(t=t instanceof String?Number(t):t instanceof Number?t.toString():t,this._keys.indexOf(t))}get(t){let e=this.indexOf(t);return e<0?null:this._values[e]}remove(t){let e=this.indexOf(t);return e>=0?(this._keys.splice(e,1),this._values.splice(e,1),!0):!1}clear(){this._values.length=0,this._keys.length=0}};var Ae=class Ae{constructor(){}static get LoginType(){return Ae._LoginType}static set LoginType(t){Ae._LoginType=t,Ae._LoginType&&Ae._LoginType!=""&&Laya.LocalStorage.setItem(Ae.COOKIE_CF_LoginType,Ae._LoginType)}static get isWhiteList(){return!0}static get intance(){return Ae._instance||(Ae._instance=new Ae),Ae._instance}init(){}static get server(){return getServer()}static get vType(){return getVType()}static get requestTime(){return 0}static get loginTime(){return 0}static set m_iTimeFrame(t){if(t>1500){let e=function(){Ae._m_iTimeFrame=0};Ae._m_iTimeFrame=t,Laya.timer.clear(Laya.timer,e),Laya.timer.once(500,Laya.timer,e)}}static get m_iTimeFrame(){return Ae._m_iTimeFrame}};Ae.IsRelease=!1,Ae.m_bInstantGame=!1,Ae.useWebVersion=!1,Ae.m_strVersionEX="V003",Ae.m_bIsMobWeb=!1,Ae.m_strWebTag="",Ae.Js_Version="1",Ae.Game_Version="20231227_01",Ae.App_Version="1.0.0",Ae.SDK_Version="1.0.0",Ae.M_strCountry="1",Ae.M_bAppData=!1,Ae.bookingId=0,Ae.teamId=0,Ae.showHeartLog=!1,Ae.ignoreLang=!1,Ae.ignoreSheetNo=!1,Ae.m_bIsIphoneX=!1,Ae.Debug=0,Ae.Res=0,Ae.isTest=!0,Ae.Server_URL="",Ae.IP_User="",Ae.Plantform_APPID="17",Ae.ServerId=22310001,Ae.Login_UID="-1",Ae._LoginType="gamecenter",Ae.isInto=!1,Ae.isFull=!1,Ae.justFull=!1,Ae.Login_UDID="81BC19A8-B49B-47CC-BEFE-193E723B521A",Ae.Device_Info="",Ae.FCM_Token="",Ae.APP_IsRelease=!0,Ae.User_Lan="en",Ae.UserAgent="",Ae.Login_UserName="",Ae.isWhite=!1,Ae.APP_RES="",Ae.COOKIE_CF_LAN="COOKIE_GG_LAN",Ae.COOKIE_CF_LoginType="COOKIE_CF_LoginType",Ae.IPHONEX_SCARE=1.22,Ae.IPHONEX_TOP=44,Ae.IPHONEX_BUTTOM=34,Ae.DESIGN_WIDTH=1334,Ae.DESIGN_HEIGHT=750,Ae._m_iTimeFrame=0,Ae.isStopPhysics=!1,Ae.isDown=!1;var z=Ae;var he=class he{constructor(){this._touchEnabled=!0;if(he._instance)throw new Error("LayerManager是单例,不可new.");he._instance=this}get m_sprPanelLayer(){return this._m_sprPanelLayer}set m_sprPanelLayer(t){this._m_sprPanelLayer=t}get m_sprMainUILayer(){return this._m_sprMainUILayer}set m_sprMainUILayer(t){this._m_sprMainUILayer=t}get m_sprTipLayer(){return this._m_sprTipLayer}set m_sprTipLayer(t){this._m_sprTipLayer=t}static get instence(){return he._instance||(he._instance=new he),he._instance}init(){this.m_sprSceneLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprSceneLayer),this.m_sprMainUILayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprMainUILayer),this.m_sprPanelLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprPanelLayer),this.m_sprPopLayer=new Laya.Sprite,this.m_sprPopLayer.mouseThrough=!0,Laya.stage.addChild(this.m_sprPopLayer),this.m_sprTipLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTipLayer),this.m_sprGuideLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprGuideLayer),this.m_sprTopLayer=new Laya.Sprite,Laya.stage.addChild(this.m_sprTopLayer)}get touchEnabled(){return this._touchEnabled}set touchEnabled(t){this._touchEnabled!=t&&(this._touchEnabled=t,this.m_sprSceneLayer.mouseEnabled=this._touchEnabled,this.m_sprMainUILayer.mouseEnabled=this._touchEnabled,this.m_sprPanelLayer.mouseEnabled=this._touchEnabled,this.m_sprPopLayer.mouseEnabled=this._touchEnabled,this.m_sprTipLayer.mouseEnabled=this._touchEnabled,this.m_sprGuideLayer.mouseEnabled=this._touchEnabled,this.m_sprTopLayer.mouseEnabled=this._touchEnabled)}addToLayerAndSet(t,e=he.M_PANEL,i=he.CENTER){this.addToLayer(t,e),this.setPosition(t,i)}getLayerIndex(t,e=he.M_PANEL){let i;switch(e){case he.M_SCENE:i=this.m_sprSceneLayer.getChildIndex(t);break;case he.M_MAINUI:i=this.m_sprMainUILayer.getChildIndex(t);break;case he.M_PANEL:i=this.m_sprPanelLayer.getChildIndex(t);break;case he.M_POP:i=this.m_sprPopLayer.getChildIndex(t);break;case he.M_TIP:i=this.m_sprTipLayer.getChildIndex(t);break;case he.M_GUIDE:i=this.m_sprGuideLayer.getChildIndex(t);break;case he.M_TOP:i=this.m_sprTopLayer.getChildIndex(t);break}return i}addToLayerAt(t,e=he.M_PANEL,i=0){switch(e){case he.M_SCENE:this.m_sprSceneLayer.addChildAt(t,i);break;case he.M_MAINUI:this.m_sprMainUILayer.addChildAt(t,i);break;case he.M_PANEL:this.m_sprPanelLayer.addChildAt(t,i);break;case he.M_POP:this.m_sprPopLayer.addChildAt(t,i);break;case he.M_TIP:this.m_sprTipLayer.addChildAt(t,i);break;case he.M_GUIDE:this.m_sprGuideLayer.addChildAt(t,i);break;case he.M_TOP:this.m_sprTopLayer.addChildAt(t,i);break}}addToLayer(t,e=he.M_PANEL){switch(e){case he.M_SCENE:this.m_sprSceneLayer.addChild(t);break;case he.M_MAINUI:this.m_sprMainUILayer.addChild(t);break;case he.M_PANEL:this.m_sprPanelLayer.addChild(t);break;case he.M_POP:this.m_sprPopLayer.addChild(t);break;case he.M_TIP:this.m_sprTipLayer.addChild(t);break;case he.M_GUIDE:this.m_sprGuideLayer.addChild(t);break;case he.M_TOP:this.m_sprTopLayer.addChild(t);break}}removeFromLayer(t,e){switch(e){case he.M_SCENE:this.m_sprSceneLayer.removeChild(t);break;case he.M_MAINUI:this.m_sprMainUILayer.removeChild(t);break;case he.M_PANEL:this.m_sprPanelLayer.removeChild(t);break;case he.M_POP:this.m_sprPopLayer.removeChild(t);break;case he.M_GUIDE:this.m_sprGuideLayer.removeChild(t);break;case he.M_TOP:this.m_sprTopLayer.removeChild(t);break}}clearLayer(t){switch(t){case he.M_SCENE:this.m_sprSceneLayer.removeChildren();break;case he.M_MAINUI:this.m_sprSceneLayer.removeChildren();break;case he.M_PANEL:this.m_sprSceneLayer.removeChildren();break;case he.M_POP:this.m_sprSceneLayer.removeChildren();break;case he.M_TOP:this.m_sprSceneLayer.removeChildren();break}}get stageWidth(){let t;return t=Laya.stage.width,t}get stageHeight(){let t;return t=Laya.stage.height,t}setPosition(t,e,i=0,n=0,r=!1,s=!1){let o=Laya.stage.width,l=Laya.stage.height;switch(this.m_iStageWidth=o,this.m_iStageHeight=l,e){case he.UP:t.x=r?o/2:(o-t.width*t.scaleX)/2,t.y=0;break;case he.DOWN:t.x=r?o/2:(o-t.width*t.scaleX)/2,t.y=l-t.height*t.scaleY;break;case he.LEFT:t.x=0,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;case he.RIGHT:t.x=o-t.width*t.scaleX,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;case he.LEFTUP:t.x=0,t.y=0;break;case he.RIGHTUP:t.x=o-t.width*t.scaleX,t.y=0;break;case he.LEFTDOWN:t.x=0,t.y=l-t.height*t.scaleY;break;case he.RIGHTDOWN:t.x=o-t.width*t.scaleX,t.y=l-t.height*t.scaleY;break;case he.CENTERLEFT:t.x=o/2-t.width*t.scaleX,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;case he.CENTERRIGHT:t.x=o/2,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;case he.CENTER:t.x=r?o/2:(o-t.width*t.scaleX)/2,t.y=s?l/2:(l-t.height*t.scaleY)/2;break;default:break}t.x+=i,t.y+=n}setLayer(t,e,i){if(!t||!e||t.parent!=e.parent)return;let n=t.parent.getChildIndex(t),r=e.parent.getChildIndex(e);i?n>r&&(t.parent.setChildIndex(t,r),t.parent.setChildIndex(e,n)):n<r&&(t.parent.setChildIndex(t,r),t.parent.setChildIndex(e,n))}};he.M_SCENE=1,he.M_MAINUI=2,he.M_PANEL=3,he.M_POP=4,he.M_TIP=5,he.M_GUIDE=7,he.M_TOP=6,he.UP=1,he.DOWN=16,he.LEFT=256,he.RIGHT=4096,he.CENTER=65536,he.LEFTUP=he.LEFT|he.UP,he.RIGHTUP=he.RIGHT|he.UP,he.LEFTDOWN=he.LEFT|he.DOWN,he.RIGHTDOWN=he.RIGHT|he.DOWN,he.CENTERLEFT=he.CENTER|he.LEFT,he.CENTERRIGHT=he.CENTER|he.RIGHT,he.MOVE=-1;var C=he;var Fa=class extends pe{constructor(){super()}};var Gr=class{constructor(t,e){this._valuesObject={};this.sheetObject=t,this.BaseItemClass=e}get keys(){if(this._keys)return this._keys;this._keys=[];let t;for(let e in this.sheetObject)!e||e==""||this._keys.push(e);return this._keys}get values(){if(this._values)return this._values;this._values=[];let t;for(let e in this.sheetObject)this._valuesObject[e]?t=this._valuesObject[e]:(t=new this.BaseItemClass,t.init(this.sheetObject[e]),this._valuesObject[e]=t),this._values.push(t);return this._values}get(t){return this._valuesObject[t]?this._valuesObject[t]:this.sheetObject[t]}get1(t){if(this._valuesObject[t])return this._valuesObject[t];let e=this.sheetObject[t];if(e)return e;let i;this.BaseItemClass&&(i=new this.BaseItemClass,i.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig()  class : "+this.BaseItemClass),i.init(e)),this._valuesObject;let n=i||e;return this._valuesObject[t]=n,n}indexOf(t){let e=this._keys.indexOf(t);return e>=0?e:(t=t instanceof String?Number(t):t instanceof Number?t.toString():t,this._keys.indexOf(t))}clear(){this.sheetObject=null}};var Kr=class a{constructor(){}static get instance(){return a._instance||(a._instance=new a),a._instance}initSpotCfgData(){if(this.spotDic==null){let t=D.instance.getResByURL("config/spot.json");this.spotDic=new Gr(t.data,Fa)}}getSpotById(t){return this.initSpotCfgData(),this.spotDic.get(t)}get getSpotDic(){return this.initSpotCfgData(),this.spotDic}};var Ne=class a{constructor(){}registerCommCallBack(t=null){Laya.LayaEnv.isConch}static get instance(){return a._instance||(a._instance=new a),a._instance}sendCustumEvent(t,e=null,i=null){let n;if(i?n=i:n=Kr.instance.getSpotById(t),!n||!n.Event)return;let r,s=new Object;s.id=n.ID,s.eventKey=n.Event,s.type=n.type,this.sendWebEvent(s)}sendWebEvent(t){}dispose(){}reload(){Laya.Browser.window.location.reload()}testEvnt(){}};var _e=class a{constructor(){this._isLoading=!1}static get instance(){return a._instance||(a._instance=new a),a._instance}get isLoading(){return this._isLoading}init(){if(!this.txtLoadingView){var t=Laya.loader.getRes("scenes/notice/TxtLoadingView.lh");this.txtLoadingView=t.create()}}showLoading(t=!1){if(console.log("showLoading..."+t),this.txtLoadingView)t?(this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this._isLoading=!1):(this._isLoading=!0,this.showMaskLoading(),Laya.timer.once(3e3,this,this.showLazyLoading)),this.txtLoadingView.m_txtLabel&&(this.txtLoadingView.m_txtLabel.visible=!1);else return}showLoadingByInfo(t=""){console.log("showLoadingByInfo..."+t),this._isLoading=!0,this.showMaskLoading(),this.showLazyLoading(),this.txtLoadingView.m_txtLabel.text=t,this.txtLoadingView.m_txtLabel.visible=!0}showMaskLoading(){this._isLoading&&(this.txtLoadingView.backLayer.name="backLayer",this.txtLoadingView.backLayer.mouseEnabled=!0,this.txtLoadingView.backLayer.mouseThrough=!1,this.txtLoadingView.backLayer.visible=!0)}showLazyLoading(){this._isLoading&&(console.log("showLazyLoading..."),this.txtLoadingView.visible=!0,Laya.stage.addChild(this.txtLoadingView),this.txtLoadingView.x=(Laya.stage.width-this.txtLoadingView.width)/2,this.txtLoadingView.y=(Laya.stage.height-this.txtLoadingView.height)/2),Laya.timer.clear(this,this.showLazyLoading)}hideLoading(){if(console.log("hideLoading..."),this._isLoading=!1,this.txtLoadingView)this.txtLoadingView.removeSelf();else return}dispose(){this.txtLoadingView&&(this.txtLoadingView.destroy(),this.txtLoadingView.removeSelf(),this.txtLoadingView=null),this.txtLoadingView.backLayer&&(this.txtLoadingView.backLayer.destroy(),this.txtLoadingView.backLayer.removeSelf(),this.txtLoadingView.backLayer=null)}};var Fe=class Fe{constructor(){this._m_bPlayMusic=!0;this._m_bPlayeSound=!0}static get instance(){return Fe._instance||(Fe._instance=new Fe),Fe._instance}get m_bPlayMusic(){return this._m_bPlayMusic}set m_bPlayMusic(t){this._m_bPlayMusic=t,t?this.m_strMusicURL!=null&&this.playMusicByURL(this.m_strMusicURL):this.musicChannel&&this.musicChannel.stop()}init(){Laya.SoundManager.autoStopMusic=!1;let t=Laya.LocalStorage.getItem(Fe.COOKIE_CF_MUSIC);t!=null&&t!=""&&(Fe.instance.m_bPlayMusic=parseInt(t)==1);let e=Laya.LocalStorage.getItem(Fe.COOKIE_CF_SOUND);e!=null&&e!=""&&(Fe.instance.m_bPlayeSound=parseInt(e)==1)}get m_bPlayeSound(){return this._m_bPlayeSound}set m_bPlayeSound(t){this._m_bPlayeSound=t}playMusicByURL(t){this.m_bPlayMusic&&(this.m_strMusicURL,this.m_strMusicURL==t&&this.musicChannel,this.m_strMusicURL=t,Laya.SoundManager.stopMusic(),this.musicChannel=Laya.SoundManager.playMusic(t,0,new Laya.Handler(this,this.onComplete)))}playMusicByName(t,e=".ogg"){let i=D.instance.getSoundURL(t,e);this.playMusicByURL(i)}playSound(t,e=1){this.m_bPlayeSound&&Laya.SoundManager.playSound(t,e,new Laya.Handler(this,this.onComplete))}playSoundByName(t,e=1){let i=D.instance.getSoundURLogg(t);this.playSound(i,e)}stopSoundByName(t){let e=D.instance.getSoundURLogg(t);Laya.SoundManager.stopSound(e)}switchMusic(t){let e=t?1:0;Fe.instance.m_bPlayMusic=t,Laya.LocalStorage.setItem(Fe.COOKIE_CF_MUSIC,e.toString())}switchSound(t){let e=t?1:0;Fe.instance.m_bPlayeSound=t,Laya.LocalStorage.setItem(Fe.COOKIE_CF_SOUND,e.toString())}onComplete(){}};Fe.COOKIE_CF_MUSIC="COOKIE_CF_MUSIC",Fe.COOKIE_CF_SOUND="COOKIE_CF_SOUND",Fe.soundName_bg="bgm",Fe.soundName2="ui02.ogg",Fe.soundName3="ui03.ogg",Fe.soundName4="hit.wav",Fe.soundName30_1="ui30_1.ogg",Fe.soundName28_1_star="ui28_1_star.ogg",Fe.soundName28_2_star="ui28_2_stars.ogg",Fe.soundName28_3_star="ui28_3_stars.ogg",Fe.soundName28_bar="ui28_bar_rise.ogg",Fe.soundName32="ui32.ogg",Fe.soundName33="ui33.ogg",Fe.soundName34="ui34.ogg",Fe.soundName35="ui35.ogg",Fe.soundName36="ui36.ogg",Fe.soundName37="ui37.ogg",Fe.soundName38="ui38.ogg",Fe.soundName39="ui39.ogg",Fe.soundName41="ui41.ogg",Fe.soundName42="ui42.ogg",Fe.soundName43="ui43.ogg",Fe.soundName44="ui44.ogg",Fe.soundName45="ui45.ogg",Fe.soundNameUi40_1="ui40_1.ogg",Fe.soundNameUi40_2="ui40_2.ogg",Fe.soundNameUi40_3="ui40_3.ogg",Fe.soundNameDressing="dressing_score_sfx.ogg",Fe.soundNameAnswer="answer_bonus_points.ogg";var ze=Fe;var y=class{};y.FindView="FindView",y.FindEndView="FindEndView",y.FindAskDialog="FindAskDialog",y.FindRankUpDialog="FindRankUpDialog",y.QuickTipDialog="QuickTipDialog",y.QuickEndView="QuickEndView",y.QuickShareView="QuickShareView",y.QuickOperatorDialog="QuickOperatorDialog",y.MainView="MainView",y.RoleDialog="RoleDialog",y.RemGetDialog="RemGetDialog",y.QuickRechargeDialog="QuickRechargeDialog",y.CreateNameDialog="CreateNameDialog",y.DailyTaskDialog="DailyTaskDialog",y.ActivityTaskDialog="ActivityTaskDialog",y.ShareDialog="ShareDialog",y.InvitationCenterDialog="InvitationCenterDialog",y.DailyTaskDrawDialog="DailyTaskDrawDialog",y.GuideView="GuideView",y.GuideDialogView="GuideDialogView",y.ShareView="ShareView",y.MainTopView="MainTopView",y.GetMoreDialog="GetMoreDialog",y.ShopView="ShopView",y.ItemGetDialog="ItemGetDialog",y.EquipStarUpDialog="EquipStarUpDialog",y.RewardGetDialog="RewardGetDialog",y.GetTitleDialog="GetTitleDialog",y.NewFunUnLockDialog="NewFunUnLockDialog",y.DialogView="DialogView",y.MallView="MallView",y.MallCardView="MallCardView",y.MallBuyDialog="MallBuyDialog",y.FittingUiView="FittingUiView",y.TaskDialog="TaskDialog",y.CommentDialog="CommentDialog",y.PotraitChangDialog="PotraitChangDialog",y.ClothespressView="ClothespressView",y.ItemSellDialog="ItemSellDialog",y.ItemInfoDialog="ItemInfoDialog",y.OnlineAward="OnlineAward",y.MaillView="MailView",y.MailSendView="MailSendView",y.GameSettingDialog="GameSettingDialog",y.GamesettingSoundView="GamesettingSoundView",y.GameSettingLanguageDialog="GameSettingLanguageDialog",y.GameSettingVersionDialog="GameSettingVersionDialog",y.FriendMainView="FriendMainView",y.FriendSearchView="FriendSearchView",y.FriendGetRewardDialog="FriendGetRewardDialog",y.FriendRewardDialog="FriendRewardDialog",y.PreLoadingView="PreLoadingView",y.RechargeDialog="RechargeDialog",y.WalletChooseHeroDialog="WalletChooseHeroDialog",y.EmployInfoDialog="EmployInfoDialog",y.WalletChoosePropsDialog="WalletChoosePropsDialog",y.FirstRechargeDialog="FirstRechargeDialog",y.FirstWeekRechargeView="FirstWeekRechargeView",y.ClientErrView="ClientErrView",y.RoleUpgradeView="RoleUpgradeView",y.ActiveRechargeView="ActiveRechargeView",y.SmallSaleView="SmallSaleView",y.RechargeSelectDialog="RechargeSelectDialog",y.FBLikeView="FBLikeView",y.TurnSuitPreView="TurnSuitPreView",y.SlotMachineView="SlotMachineView",y.SlotMachineRewardPreDialog="SlotMachineRewardPreDialog",y.SlotMachineResultDialog="SlotMachineResultDialog",y.GashaponView="GashaponView",y.GashaponRewardView="GashaponRewardView",y.ActivityRankRewardView="ActivityRankRewardView",y.AddRechargeView="AddRechargeView",y.CupMatchStartDialog="CupMatchStartDialog",y.CupMatchEndDialog="CupMatchEndDialog",y.CreateLoginView="CreateLoginView",y.SelectHeadDialog="SelectHeadDialog",y.RoleInfoDialog="RoleInfoDialog",y.SelectHeroDialog="SelectHeroDialog",y.CreateSubWalletDialog="CreateSubWalletDialog",y.FriendMemberDialog="FriendMemberDialog",y.FriendMemberMoreDialog="FriendMemberMoreDialog",y.FriendAddDialog="FriendAddDialog",y.FriendApplyBackDialog="FriendApplyBackDialog",y.FriendApplyDialog="FriendApplyDialog",y.WalletDialog="WalletDialog",y.WalletTransferDialog="WalletTransferDialog",y.CardPayView="CardPayView",y.UnionApplyDialog="UnionApplyDialog",y.GuildEntranceView="GuildEntranceView",y.UnionApplyDialogView="UnionApplyDialogView",y.UnionApplyMemberDialog="UnionApplyMemberDialog",y.CreateNoticeDialog="CreateNoticeDialog",y.UnionNoticeView="UnionNoticeView",y.GuildInfoDialog="GuildInfoDialog",y.CreateUnionDialog="CreateUnionDialog",y.UnionInfoView="UnionInfoView",y.UnionEarningView="UnionEarningView",y.UnionRevenueDetailDialog="UnionRevenueDetailDialog",y.UnionSetRevenueDialog="UnionSetRevenueDialog",y.UnionBattleRecordDialog="UnionBattleRecordDialog",y.UnionRevenueRecordDialog="UnionRevenueRecordDialog",y.RankUnionView="RankUnionView",y.UnionWarView="UnionWarView",y.UnionWarTipDialog="UnionWarTipDialog",y.UnionWarSuccessDialog="UnionWarSuccessDialog",y.UnionWarFailDialog="UnionWarFailDialog",y.GamesettingView="GamesettingView",y.GameSettingGameAccountView="GameSettingGameAccountView",y.GuildMessageView="GuildMessageView",y.GuildMessageEditorView="GuildMessageEditorView",y.UnionMemberView="UnionMemberView",y.UnionListView="UnionListView",y.CreateSubUnionView="CreateSubUnionView",y.ChangeUnionIconDialog="ChangeUnionIconDialog",y.MySubUnionView="MySubUnionView",y.UnionMemberApplyView="UnionMemberApplyView",y.UnionReferralView="UnionReferralView",y.UnionTransferView="UnionTransferView",y.TicketTransferView="TicketTransferView",y.HeroTransferView="HeroTransferView",y.BanAccountView="BanAccountView",y.GuildChiefPrivilegeView="GuildChiefPrivilegeView",y.GuildDonationView="GuildDonationView",y.NoticeDialog="NoticeDialog",y.HelpDialog="HelpDialog",y.ImgDialog="ImgDialog",y.ChampDetailDialog="ChampDetailDialog",y.ChampRecordDialog="ChampRecordDialog",y.LoadDialog="LoadDialog",y.ChangeHeadDialog="ChangeHeadDialog",y.CreateRoomDialog="CreateRoomDialog",y.CreateRentalDialog="CreateRentalDialog",y.MyLeasedDialog="MyLeasedDialog",y.MyRentedDialog="MyRentedDialog",y.MyRentalBuyDialog="MyRentalBuyDialog",y.BuyTicketDialog="BuyTicketDialog",y.EnterRoomView="EnterRoomView",y.MatchEndRankView="MatchEndRankView",y.MatchEndTeamRankView="MatchEndTeamRankView",y.MatchReadyView="MatchReadyView",y.MatchEndView="MatchEndView",y.HeroGetDialog="HeroGetDialog",y.InputPwdDialog="InputPwdDialog",y.RoomInfoDialog="RoomInfoDialog",y.MailDialog="MailDialog",y.TeamCreateShareDialog="TeamCreateShareDialog",y.TeamShareDialog="TeamShareDialog",y.TeamJoinUsingDialog="TeamJoinUsingDialog",y.MyTeamDialog="MyTeamDialog",y.TeamInfoDialog="TeamInfoDialog",y.MyFriendDialog="MyFriendDialog",y.UnionAttrView="UnionAttrView",y.UnionAttrLvUpDialog="UnionAttrLvUpDialog",y.UnionAttributeDetailsDialog="UnionAttributeDetailsDialog",y.NoServerView="NoServerView",y.UnionMemberMoreDialog="UnionMemberMoreDialog",y.HeroUpgradeDialog="HeroUpgradeDialog",y.HeroDetailDialog="HeroDetailDialog",y.SkillTipDialog="SkillTipDialog",y.TransferRecordDialog="TransferRecordDialog",y.AFKView="AFKView",y.AFKBagDialog="AFKBagDialog",y.AFKDropDetailDialog="AFKDropDetailDialog",y.AFKMapView="AFKMapView",y.AFKSelectLevelDialog="AFKSelectLevelDialog",y.Knapsack="Knapsack",y.KnapsackTipDialog="KnapsackTipDialog",y.HeroFormationDialog="HeroFormationDialog",y.SignInDialog="SignInDialog",y.InviteRewardDialog="InviteRewardDialog",y.ChallengLoseDialog="ChallengLoseDialog",y.ChallengWinDialog="ChallengWinDialog",y.ChallengBossDialog="ChallengBossDialog",y.ThirbleDropDialog="ThirbleDropDialog",y.LevelDropDialog="LevelDropDialog",y.UseCardDialog="UseCardDialog",y.ArenaView="ArenaView",y.MyBookingView="MyBookingView",y.ArenaLoseDialog="ArenaLoseDialog",y.ArenaBattleDialog="ArenaBattleDialog",y.ArenaWinDialog="ArenaWinDialog",y.ArenaWarNotesView="ArenaWarNotesView",y.ArenaRuleDialog="ArenaRuleDialog",y.EquipSelectDialog="EquipSelectDialog",y.EquipDetailDialog="EquipDetailDialog",y.HireDetailDialog="HireDetailDialog",y.ProxyDetailDialog="ProxyDetailDialog",y.WithDrawRecordDialog="WithDrawRecordDialog",y.RentalRecordDialog="RentalRecordDialog",y.PrivateChatDialog="PrivateChatDialog",y.AirdropRecordDialog="AirdropRecordDialog",y.ActivityInfoDialog="ActivityInfoDialog",y.CharacterStarDialog="CharacterStarDialog",y.LastDrawDialog="LastDrawDialog",y.IgoPageView="IgoPageView",y.IgoJoinDialog="IgoJoinDialog",y.IgoRecordDialog="IgoRecordDialog",y.DailyTaskPropsDialog="DailyTaskPropsDialog",y.DailyTaskNoPropsDialog="DailyTaskNoPropsDialog",y.PveSponsorView="PveSponsorView",y.PveRecordView="PveRecordView",y.PveChoosePropsDialog="PveChoosePropsDialog",y.ReferralDialog="ReferralDialog",y.ReferralL2Dialog="ReferralL2Dialog",y.TotalBattlesDialog="TotalBattlesDialog";var f=class{};f.MOUSE_HOLDON="MOUSE_HOLDON",f.EVENT_OPEN_MODULE="EVENT_OPEN_MODULE",f.EVENT_MODULE_ADDED="EVENT_MODULE_ADDED",f.EVENT_CLOSE_MODULE="EVENT_CLOSE_MODULE",f.EVENT_CHECK_REMAIN="EVENT_CHECK_REMAIN",f.EVENT_LOADED_COMPLETE="EVENT_LOAD_COMPLETE",f.EVENT_LOADED_SCENE_BG_COM="EVENT_LOADED_SCENE_BG_COM",f.EVENT_LOAD_SKIN_COMPLETE="EVENT_LOAD_SKIN_COMPLETE",f.EVENT_LOAD_HEAD_SKIN_COMPLETE="EVENT_LOAD_HEAD_SKIN_COMPLETE",f.EVENT_LOADING_SUC="EVENT_LOADING_SUC",f.EVENT_BACK_TO_LOGIN="EVENT_BACK_TO_LOGIN",f.EVENT_LOGIN_GAME_END="EVENT_LOGIN_GAME_END",f.EVENT_ENTER_MAIN="EVENT_ENTER_MAIN",f.EVENT_CHANGE_HEAD="EVENT_CHANGE_HEAD",f.EVENT_MODIFY_HEAD="EVENT_MODIFY_HEAD",f.EVENT_ITEM_UPDATE="EVENT_ITEM_UPDATE",f.EVENT_ROLE_UPDATE="EVENT_ROLE_UPDATE",f.STAGE_ON_BLUR="STAGE_ON_BLUR",f.STAGE_ON_FOCUS="STAGE_ON_FOCUS",f.ACCOUNTVO_UPDATE="ACCOUNTVO_UPDATE",f.EVENT_WAIT_PLAYERINFO="EVENT_WAIT_PLAYERINFO",f.EVENT_END_HEROBUY="EVENT_END_HEROBUY",f.EVENT_END_HEROTRANSFER="EVENT_END_HEROTRANSFER",f.EVENT_REFRESH_HEROTRANSFER="EVENT_REFRESH_HEROTRANSFER",f.EVENT_REFRESH_QUAN_STATUS="EVENT_REFRESH_QUAN_STATUS",f.EVENT_REFRESH_UNIONMEMBER_TRANSFER="EVENT_REFRESH_UNIONMEMBER_TRANSFER",f.EVENT_REFRESH_KNAPSACK="EVENT_REFRESH_KNAPSACK",f.EVENT_ADD_UNIONMEMBER_ADDRESS="EVENT_ADD_UNIONMEMBER_ADDRESS",f.EVENT_ADD_TICKET_ADDRESS="EVENT_ADD_TICKET_ADDRESS",f.EVENT_EMOJI_ICON_SELECT="EVENT_EMOJI_ICON_SELECT",f.EVENT_COLOR_ICON_SELECT="EVENT_COLOR_ICON_SELECT",f.EVENT_CHECK_ICON_SELECT="EVENT_CHECK_ICON_SELECT",f.EVENT_CHECK_PLAYER_NUM_SELECT="EVENT_CHECK_PLAYER_NUM_SELECT",f.EVENT_CHECK_NODE_SELECT="EVENT_CHECK_NODE_SELECT",f.PACKAGE_UPDATE_ITEM="PACKAGE_UPDATE_ITEM",f.IMPROVE_SUCESS_EVENT="IMPROVE_SUCESS_EVENT",f.CHANG_POTRAIT="CHANG_POTRAIT",f.ROLE_INFO_CHANGE="ROLE_INFO_CHANGE",f.UPDATE_ASSETS="UPDATE_ASSETS",f.REFRESH_MAIN_TASK="REFRESH_MAIN_TASK",f.RECIVE_SUCESS_SERVICE="RECIVE_SUCESS_SERVICE",f.SCENE_ROLE_COMPELTE="SCENE_ROLE_COMPELTE",f.FITTING_CLOTH_BTN="FITTING_CLOTH_BTN",f.STORE_CLICKBG_EVENT="STORE_CLICKBG_EVENT",f.CLOSE_BG_VIEW="CLOSE_BG_VIEW",f.EVENT_UPDATE_ONLINE="EVENT_UPDATE_ONLINE",f.VIP_INFO_CHANGE="VIP_INFO_CHANGE",f.EVENT_FUNCTION_OPEN_UPDATE="EVENT_FUNCTION_OPEN_UPDATE",f.EVENT_ADD_ACTIVITY="EVENT_ADD_ACTIVITY",f.EVENT_REMOVE_ACTIVITY="EVENT_REMOVE_ACTIVITY",f.UPDATE_CHAO_PIAO="UPDATE_CHAO_PIAO",f.UPDATE_EXCHANGE_INFO="UPDATE_EXCHANGE_INFO",f.UPDATE_RED_STATE_EVENT="UPDATE_RED_STATE_EVENT",f.SYSTEM_OPEN_TIME_INITED="SYSTEM_OPEN_TIME_INITED",f.EVENT_OPEN_SHARE="EVENT_OPEN_SHARE",f.CHANGE_SCENE_BASE_ROLE_LAYER="CHANGE_SCENE_BASE_ROLE_LAYER",f.EVENT_CLICK_NUM="EVENT_CLICK_NUM",f.EVENT_HERO_DRAW_BACK="EVENT_HERO_DRAW_BACK",f.EVENT_Close_CreateRoom="EVENT_Close_CreateRoom",f.EVENT_ENTER_MATCH_ROOM="EVENT_ENTER_MATCH_ROOM",f.EVENT_UPDATE_MATCH_ROOM="EVENT_UPDATE_MATCH_ROOM",f.EVENT_CLICK_HERO="EVENT_CLICK_HERO",f.UPDATE_KILL_NUM="UPDATE_KILL_NUM",f.EVENT_RESTORE_DATA="EVENT_RESTORE_DATA",f.EVENT_FirstBlood="EVENT_FirstBlood",f.EVENT_MutiKill="EVENT_MutiKill",f.EVENT_GameScene_Gray="EVENT_GameScene_Gray",f.EVENT_Game_Delay="EVENT_Game_Delay",f.EVENT_UPDATE_ITEM_SKILL_COOL="UPDATE_SKILL_COOLTIME",f.EVENT_UPDATE_GLOBAL_COOL="EVENT_UPDATE_GLOBAL_COOL",f.EVENT_UPDATE_REDECE_COOL="EVENT_UPDATE_REDECE_COOL",f.EVENT_REFRESH_BAN_ACCOUNT="EVENT_REFRESH_BAN_ACCOUNT",f.EVENT_SUB_GUILD_UPDATE="EVENT_SUB_GUILD_UPDATE",f.EVENT_UNION_APPLY_MEMBER_UPDATE="EVENT_UNION_APPLY_MEMBER_UPDATE",f.EVENT_WELFARE_CLAIM="EVENT_WELFARE_CLAIM",f.EVENT_RECHARGE_GET="EVENT_RECHARGE_GET",f.CHANGE_WALLET_HERO="CHANGE_WALLET_HERO",f.CHANGE_ASSET_CHAIN="CHANGE_ASSET_CHAIN",f.CHANGE_WALLET_PROP="CHANGE_WALLET_PROP",f.CREATE_SUB_WALLET_SUCCESS="CREATE_SUB_WALLET_SUCCESS",f.REFRESH_ALL_WITHDRAW_DATA="REFRESH_ALL_WITHDRAW_DATA",f.CHANGE_FRIEND_APPLY_LIST="CHANGE_FRIEND_APPLY_LIST",f.CHANGE_FRIEND_LIST="CHANGE_FRIEND_LIST",f.REFRSH_RED="REFRSH_RED",f.REFRSH_APPLY_FRIEND_LIST="REFRSH_APPLY_FRIEND_LIST",f.ADD_AIR_WALLET_ITEM="ADD_AIR_WALLET_ITEM",f.ADD_AIR_SUB_WALLET_NAME="ADD_AIR_SUB_WALLET_NAME",f.AIR_SUB_WALLET_OPENHERO="AIR_SUB_WALLET_OPENHERO",f.CHANGE_WALLET_HERO_AIR="CHANGE_WALLET_HERO_AIR",f.UPDATE_UNION_MEMBER_LIST="UPDATE_UNION_MEMBER_LIST",f.EVENT_ADD_MONEY_ADDRESS="EVENT_ADD_MONEY_ADDRESS",f.REFRESH_MAINSCENE_HEAD_RED="REFRESH_MAINSCENE_HEAD_RED",f.REFRESH_ROLEINFO_RED="REFRESH_ROLEINFO_RED",f.REFRESH_ACTIVITY_RED="REFRESH_ACTIVITY_RED",f.SHOW_EQUIP_TIP="SHOW_EQUIP_TIP",f.REFRESH_RANK_DIALOG_RED="REFRESH_RANK_DIALOG_RED",f.REFRESH_MAIL_RED="REFRESH_MAIL_RED",f.SHOW_EQUIP_SHOP_TIP="SHOW_EQUIP_SHOP_TIP",f.REFRESH_IGO_RED="REFRESH_IGO_RED",f.SEND_WHEEL_RESULT="SEND_WHEEL_RESULT",f.REFRESH_WHEEL_RED="REFRESH_WHEEL_RED",f.EVENT_PVE_CHOOSE_PROP="EVENT_PVE_CHOOSE_PROP",f.EVENT_PVE_HAVE_PROP="EVENT_PVE_HAVE_PROP";var g=class a extends Laya.EventDispatcher{static get intance(){return a._instance||(a._instance=new a),a._instance}};var qr=class extends Laya.Script{constructor(){super();this.m_ioffsetX=0;this.m_ioffsetY=0}onAdded(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.CENTER,this.m_canTouch_all=!1,this.selfMaskAlpha=.8,this.m_arrMapEvent=[],this.canClickMask=!0,this.maskLayer=new Laya.Sprite,this.useShowAnimation=!0,this.useHideAnimation=!0,this.isAutoRealseRes=!0,this.m_strSound=ze.soundName3}onClickMask(e){this.canClickMask&&this.maskClose()}maskClose(){this.close()}onStageResize(){}onEnable(){this._view=this.owner,this._view.addChild(this.maskLayer),this.createUI(),this.createUIEnd(),this.initializeLater()}createUI(){}createUIEnd(){}initializeLater(){this._addEvent(),this.initData(),this.useShowAnimation?(this._view.visible=!1,this.showAnimationEnd=!1,Laya.timer.frameOnce(5,this,this.popTimeOut,[this._view])):this.showAnimationEnd=!0}popTimeOut(e){Laya.timer.clear(this,this.popTimeOut),e.scale(.5,.5),e.visible=!0,Laya.Tween.to(e,{scaleX:1,scaleY:1,ease:Laya.Ease.backOut},300,null,Laya.Handler.create(this,this.onShowAnimationEnd),2),ze.instance.playSoundByName(this.m_strSound),this._view.event(Laya.Event.OPEN)}onShowAnimationEnd(){this.showAnimationEnd=!0}_addEvent(){this.maskLayer.on(Laya.Event.CLICK,this,this.onClickMask),Laya.stage.on(Laya.Event.RESIZE,this,this.onStageResize),this.btn_com_back&&this.btn_com_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_com_help&&this.btn_com_help.on(Laya.Event.CLICK,this,this.onHelp),this.addEvent()}addEvent(){}initData(){}_removeEvent(){this.maskLayer.offAll(),Laya.stage.off(Laya.Event.RESIZE,this,this.onStageResize),this.removeEvent()}removeEvent(){}addMapEvent(e,i,n,r,s=null){e.on(i,n,r,s),this.m_arrMapEvent.push(e)}removeAllMapEvent(){if(this.m_arrMapEvent){for(let e=0;e<this.m_arrMapEvent.length;e++)this.m_arrMapEvent[e].offAll();this.m_arrMapEvent.splice(0,this.m_arrMapEvent.length)}}dispose(){if(this.newRoleSpr){for(;this.newRoleSpr.numChildren>0;)this.newRoleSpr.removeChildAt(0);this.newRoleSpr=null}this.isDispose=!0,A.intance.removeViewFromModuleManger(this),this.m_strName=null,this.m_strSound=null,this._removeEvent(),this.removeAllMapEvent(),Laya.Tween.clearAll(this._view),this.m_arrMapEvent=null,this.btn_com_back&&this.btn_com_back.offAll(),this.btn_com_help&&this.btn_com_help.offAll(),this.maskLayer&&(Laya.timer.clearAll(this.maskLayer),Laya.Tween.clearAll(this.maskLayer),this.maskLayer.offAll(),this.maskLayer.graphics.destroy(),this.maskLayer.removeSelf(),this.maskLayer.destroy(!0)),this.isAutoRealseRes&&D.instance.clearModuleUrl(this.m_strName),this._view&&(Laya.timer.clearAll(this._view),Laya.Tween.clearAll(this._view),this._view.offAll(),this._view.graphics.destroy(),this._view.removeSelf(),this._view.destroy(!0),this._view=null),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),g.intance.event(f.EVENT_CLOSE_MODULE)}sendData(e,i=null){i==null&&(i=[])}close(e=null){this.useHideAnimation&&this._view?Laya.Tween.to(this._view,{scaleX:.5,scaleY:.5,ease:Laya.Ease.backIn},200,null,Laya.Handler.create(this,this.dispose,null),2):this.dispose()}static closeAll(){A.intance.closeAll()}backToPreScene(){let e=se.intance.getPreSceneData();se.intance.setCurrentScene(e[0],e[1],e[2],e[3],!1)}get btn_com_back(){return this._view?this._view.getChildByName("btn_com_back"):null}get btn_com_help(){return this._view?this._view.getChildByName("btn_com_help"):null}onHelp(){this.m_helpId&&A.intance.openModule(y.HelpDialog,this.m_helpId)}onBack(){this.close()}};var A=class a extends Laya.DialogManager{constructor(){super();this.views=new le;this.m_arrLoadingArr=[];if(a._instance)throw new Error("LayerManager是单例,不可new.");a._instance=this,Laya.Dialog.manager=this}static get intance(){return a._instance||(a._instance=new a),a._instance}openModule(e,i=null){g.intance.event(f.EVENT_OPEN_MODULE,[e,i])}hasOpenView(e){return this.views.get(e)!=null}getOpenView(e){return this.views.get(e)}disposeView(e){if(this.getOpenView(e)){let i=this.getOpenView(e);if(i instanceof Array)for(let n=0;n<i.length;n++)i[n].close();else i.close()}}init(){g.intance.on(f.EVENT_OPEN_MODULE,this,this.onModulePanel),g.intance.on(f.EVENT_CLOSE_MODULE,this,this.disposeView)}initMainView(){}onModulePanel(e,i=null){console.log("ModuleManager.onModulePanel moudleName:"+e),this.m_arrLoadingArr.indexOf(e)==-1&&(this.getOpenView(e)||(_e.instance.showLoading(!1),this.m_arrLoadingArr.push(e),D.instance.loadModuleUrl(e,Laya.Handler.create(this,this.onLoaded,[e,i]))))}onLoaded(e,i=null){let n=this.m_arrLoadingArr.indexOf(e);n!=-1&&this.m_arrLoadingArr.splice(n,1);let r;var s=D.instance.m_objModuleViews[e];console.log("onLoaded: ",e,s),Laya.loader.load(s).then(o=>{if(r=o.create(),i&&r.setOpenData(i),r.m_strName=e,r instanceof Laya.Box)C.instence.addToLayer(r,r.m_iLayerType),C.instence.setPosition(r,r.m_iPositionType,r.m_ioffsetX,r.m_ioffsetY),this.addViewToModuleManger(r);else if(r instanceof Laya.Dialog){let l=r;l.m_iLayerType==C.M_POP?(l.isModal=!0,l.isShowEffect=!0,this.open(l,!1,!0)):(l.isShowEffect=!1,this.open(l)),this.addViewToModuleManger(l)}r&&g.intance.event(f.EVENT_MODULE_ADDED,r),r.hideLoadingBySelf||_e.instance.hideLoading()}).catch(o=>{console.error("onLoaded 加载失败",o)})}addViewToModuleManger(e){let i=e.m_strName;this.views.get(i)?this.views.get(i)instanceof Array?this.views.get(i).push(e):this.views.set(i,[this.views.get(i),e]):this.views.set(i,e),this.on(Laya.Event.CLOSE,this,this.removeViewFromModuleManger)}removeViewFromModuleManger(e){if(!e||!this.views)return;let i=e.m_strName;console.log("removeViewFromModuleManger viewName: "+i),e.off(Laya.Event.CLOSE,this,this.removeViewFromModuleManger);let n=this.views.get(i);if(n instanceof Array){let r=n.indexOf(e);r!=-1&&(n.splice(r,1),n.length==0&&this.views.remove(i))}else this.views.remove(i)}closeAll(){let e=[];for(let i of this.views.values)if(i instanceof Array)for(let n=0;n<i.length;n++){let r=i[n];r instanceof qr&&e.push(r)}else i instanceof qr&&e.push(i);for(let i=0;i<e.length;i++)e[i].dispose();e=[],super.closeAll()}doClose(e){super.doClose(e),this.event(Laya.Event.CLOSE,e)}};var wo=class a{constructor(){this._mapUrl="";this._mapWidth=0;this._mapHeight=0;this._gridWidth=0;this._gridHeight=0;this._xPics=0;this._yPics=0;this._fuzzyName=""}static get instance(){return a._instance||(a._instance=new a),a._instance}loadScene(t,e,i,n,r,s,o){this._fuzzyName!=""&&this._fuzzyName!=s&&this.dispose(),this._mapWidth=t,this._mapHeight=e,this._gridWidth=i,this._gridHeight=n,this._fuzzySprite=r,this._xPics=Math.floor(this._mapWidth/i),this._yPics=Math.floor(this._mapHeight/n),this._fuzzyName=s,this._fuzzyCallBack=o;let l=D.instance.setResURL("scene/subScene/test1/"+s+".json");Laya.loader.load([{url:l,type:Laya.Loader.ATLAS}],Laya.Handler.create(this,this.loadSceneComplete),Laya.Handler.create(this,this.loadProcess,null,!1),null,0,!0,null,!0)}loadProcess(){}loadSceneComplete(){let t=Laya.Loader.getAtlas(D.instance.setResURL("scene/subScene/test1/"+this._fuzzyName+".json"));if(this._fuzzySprite){this._fuzzySprite.graphics.clear();let e=0,i=new Laya.Sprite;i.name="mapSprite",this._fuzzySprite.addChildAt(i,0);for(let n=0;n<this._yPics;n++)for(let r=0;r<this._xPics;r++){let s=Laya.loader.getRes(t[e]),o=new Laya.Image;i.addChild(o),o.texture=s,o.size(s.width,s.height),o.pos(r*this._gridWidth,n*this._gridHeight),e++}}this._fuzzyCallBack!=null&&this._fuzzyCallBack.run()}dispose(){this._fuzzyCallBack=null,this._fuzzyName&&this._fuzzyName!=""&&Laya.loader.clearRes(D.instance.setResURL("atlas/"+this._fuzzyName+".json"))}};var Y=class{};Y.M_SCENE_MAIN="M_SCENE_MAIN",Y.M_SCENE_SHOP="M_SCENE_SHOP",Y.M_SCENE_AIRDROP="M_SCENE_AIRDROP",Y.M_SCENE_HERO="M_SCENE_HERO",Y.M_SCENE_PRE_LOAD="M_SCENE_PRE_LOAD",Y.M_SCENE_MATCH_READY="M_SCENE_MATCH_READY",Y.M_SCENE_MATCH="M_SCENE_MATCH",Y.M_SCENE_AFKBATTLE="M_SCENE_AFKBATTLE",Y.M_SCENE_GUILD="M_SCENE_GUILD",Y.M_SCENE_RANK="M_SCENE_RANK",Y.M_SCENE_SHOLARSHIP="M_SCENE_SHOLARSHIP",Y.M_SCENE_GET_MAT="M_SCENE_GET_MAT",Y.M_SCENE_OPEN_GAME="M_SCENE_OPEN_GAME",Y.M_SCENE_ASSET="M_SCENE_ASSET",Y.M_SCENE_DIG="M_SCENE_DIG",Y.M_SCENE_MAIL="M_SCENE_MAIL",Y.M_SCENE_KNAPSACK="M_SCENE_KNAPSACK",Y.M_SCENE_UNION="M_SCENE_UNION",Y.M_SCENE_MYUNION="M_SCENE_MYUNION",Y.M_SCENE_LCPOOL="M_SCENE_LCPOOL",Y.M_SCENE_ARENA="M_SCENE_ARENA",Y.M_SCENE_FRIEND="M_SCENE_FRIEND",Y.M_SCENE_IGO_PAGE="M_SCENE_IGO_PAGE",Y.M_SCENE_DAILY_TASK="M_SCENE_DAILY_TASK",Y.M_SCENE_PVE="M_SCENE_PVE";var au=class extends pe{constructor(){super()}};var nu=class{constructor(t,e,i){this._idKeyName="";this._jsonName="";this._sheetItemCls=null;this._isParse=!1;this._idKeyName=e,this._jsonName=t,this._sheetItemCls=i,this._idToValueMap=new le,this._items=[]}parseJson(){if(this._isParse)return;let t=D.instance.getResByURL("config/"+this._jsonName+".json");if(!t)throw new Error("无效的配置数据"+this._jsonName);for(let e of t){let i=new this._sheetItemCls;i.beFill(e),this._idToValueMap.set(e[this._idKeyName],i),this._items.push(i),this.addItemProcess(i)}this._isParse=!0}addItemProcess(t){}getItemById(t){return this.excuteIsParse()&&this._idToValueMap.get(t)?this._idToValueMap.get(t):null}getAllItems(){return this.excuteIsParse()?this._items:null}excuteIsParse(){return this._isParse,this._isParse}};var ru=class extends nu{constructor(){super("","","");this._itemsTypeMap=null;this._itemsTypeMap=new le}getCombineKey(e,i,n){return e+n.toString()+i}getItemsByChildType(e,i){let n=this.getCombineKey(e,i,"childType_itemType");if(this._itemsTypeMap.get(n))return this._itemsTypeMap.get(n);this._itemsTypeMap.set(n,[]);let r=_.intance.m_dicItems.values;for(let s of r)s.child_type==e&&s.itm_type==i&&this._itemsTypeMap.get(n).push(s);return this._itemsTypeMap.get(n)}};var su=class extends pe{realIcon(){return"https://cdn.bunnyswap.cc/images/items/"+this.icon}get starArr(){if(this._starArr)return this._starArr;if(this._starArr=[],this.max_quality==0)return this._starArr;let e=this.quality/this.max_quality*5;for(let i=1;i<=5;i++)e>=i?this._starArr.push(0):i-e<=.5?this._starArr.push(2):this._starArr.push(1);return this._starArr}};var ou=class extends pe{};var lu=class extends pe{constructor(){super()}};var cu=class extends pe{constructor(){super()}};var uu=class extends pe{};var mu=class extends pe{};var pu=class extends pe{};var hu=class extends pe{};var du=class extends pe{constructor(){super()}};var fu=class extends pe{};var yu=class extends pe{};var bu=class extends pe{};var gu=class extends pe{};var Lu=class extends pe{};var _u=class extends pe{};var To=class extends pe{};var vu=class extends pe{constructor(){super()}};var xu=class extends pe{};var Iu=class extends pe{constructor(){super(...arguments);this.dT=1e4}async testUrl(){this.getUrl()}getUrl(){var e=this.url;let i=new Date().getTime(),n=this,r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=function(){if(r.status>=200&&r.status<300)try{let o=r.responseText;var s=new Date().getTime()-i;n.dT=s}catch{console.log("Response is not valid JSON")}else console.error(`Error: ${r.status}`)},r.onerror=function(){console.error("Network error")},r.send()}};var Eu=class extends pe{};var wu=class extends pe{};var Tu=class extends pe{};var Cu=class extends pe{constructor(){super()}};var Su=class extends pe{constructor(){super()}};var Du=class extends pe{constructor(){super()}};var Au=class extends pe{};var ku=class extends pe{};var Bu=class extends pe{};var Mu=class extends pe{};var Ru=class extends pe{};var Pu=class extends pe{constructor(){super()}};var Nu=class extends pe{constructor(){super()}};var Ou=class extends pe{};var Wr=class extends pe{};var Hu=class extends pe{constructor(){super()}};var Uu=class extends pe{};var Vu=class extends pe{};var Fu=class extends pe{};var Gu=class extends pe{};var Ze=class Ze{constructor(){if(Ze._instance)throw new Error("SheetDataManager是单例,不可new.");Ze._instance=this,this._modelList=new le}static get intance(){return Ze._instance||(Ze._instance=new Ze),Ze._instance}init(){let t=Laya.Browser.now();b.instance.systemOpenModel.parseJson(),this.m_dicMail=this.initConfigObject("mailmessage",xu),this.m_dicItems=this.initConfigObject("item",su),this.m_dicLikeIt=this.initConfigObject("likeIt",Du),this.m_dicShops=new le,this.m_dicShopMulDic=this.initConfig("shop",["type","icon"],ou,!0,Laya.Handler.create(this,this.onSetShopItem,null,!1)),this.m_dicUnions=this.initConfig("union",["id"],fu),this.m_dicMonsters=this.initConfigObject("monster",Uu),this.m_dicPveLuckyDraws=this.initConfigObject("pveLuckyDraw",Fu),this.m_dicHeros=this.initConfigObject("hero",uu),this.m_dicSkills=this.initConfigObject("skill",pu),this.m_dicBuffs=this.initConfigObject("buff",hu),this.m_dicEffects=this.initConfigObject("effect",Ru),this.m_dicArenaDic=new le,this.m_dicArenaNumMulDic=new le,this.m_dicArenaMulDic=this.initConfig("arena",["type","lv","coinType"],mu,!0,Laya.Handler.create(this,this.onSetArena,null,!1)),this.m_dicArenaTypes=this.initConfig("arenaType",["id"],Eu),this.m_dicCharacterStars=this.initConfig("characterStar",["id"],Gu);var e=this.initConfig("node",["id"],Iu);this.m_dicNodes=this.initNodes(e),this.m_dicWelfareBags=this.initConfig("welfarebag",["id"],bu),this.m_dicMaps=this.initConfigObject("map",yu),console.log("-----------------------sheetdata-time1:"+(Laya.Browser.now()-t)),this.m_dicHead=this.initConfig("head",["id"],cu),this.m_dicIconBadge=this.initConfig("iconBadge",["id"],vu),this.m_dicCountry=this.initConfig("country",["id"],du),this.m_dicGroupWar=this.initConfig("groupWar",["id"],Pu),this.m_dicTeamName=this.initConfigObject("teamName",Nu),this.m_dicHeroRent=this.initConfig("heroRent",["id"],Hu),this.m_dicExpression=this.initConfig("expression",["id"],Cu),this.m_dicFontColor=this.initConfig("fontColor",["id"],Su),this.m_dicCurrencyAddress=this.initConfig("currencyAddress",["sn"],gu),this.m_dicCoinAddress=this.initConfig("coinAddress",["id"],_u),this.m_dicBuyHeroes=this.initConfig("buyHeroes",["id"],To),this.m_dicACoin=this.initConfigObject("aCoin",Lu),this.m_dicBuyHeroes=this.initConfig("buyHeroes",["id"],To),this.m_dicPuzzleExchange=this.initConfig("puzzleExchange",["id"],wu),this.m_dicDropCashAddresse=this.initConfig("DropCashAddress",["sn"],Tu),this.m_dicOtcTelegram=this.initConfig("otcTelegram",["id"],Au),this.m_dicTurntable=this.initConfig("turntable",["id"],Ou),this.m_dicWheel=this.initConfig("wheel",["id"],Wr),this.m_dicWheel1=this.initConfig("wheel1",["id"],Wr),this.m_dicWheel2=this.initConfig("wheelPC",["id"],Wr),this.m_dicEquip=this.initConfig("equip",["id"],ku),this.m_dicAttributes=this.initConfig("attributes",["id"],Bu),this.m_dicEquipSuit=this.initConfig("equipSuit",["id"],Mu),this.m_dicHeroStar=this.initConfig("heroStar",["id"],Vu),this.m_dicGenerate=this.initConfigObject("general",au),this.m_dicWorldMapChildTypeItem=new le,console.log("-----------------------sheetdata-time2:"+(Laya.Browser.now()-t))}getCharacterStars(t){t>4&&(t=4);for(let e of this.m_dicCharacterStars.values)if(e.starLv>t)return e;return null}getArenaTypesInSub(){var t=[];for(let e of this.m_dicArenaTypes.values)e.inSub==1&&t.push(e);return t}getArenaTypesInSubByType(t){var e=[];for(let i of this.m_dicArenaTypes.values)if(i.arenaType==t)return i;return[]}getArenaTypesInSubByItemId(t,e){for(let i of this.m_dicArenaDic.values)if(i.type==t&&i.item[0]==e)return i}onSetShopItem(t){var e=this.m_dicLikeIt.get(t.id);e&&(t.totalLike=e.likeN),this.m_dicShops.set(t.id,t)}onSetArena(t){this.m_dicArenaDic.set(t.id,t),this.m_dicArenaNumMulDic.set(this.getCompoundKey([t.type,t.lv,t.coinType]),t)}preInit(){this.m_dicScene=this.initConfig("scene",["name"],lu)}getItemModel(){return this.getDataModel(Ze.DataType_Items)}getGeneralValueById(t){return this.m_dicGenerate&&this.m_dicGenerate.get(t)?this.m_dicGenerate.get(t).value:0}getSocialShareValueById(t){return this.m_dicSocialShare&&this.m_dicSocialShare.get(t)?this.m_dicSocialShare.get(t).parameter:0}getDataModel(t){if(!this._modelList.get(t))switch(t){case Ze.DataType_Items:this._modelList.set(t,new ru);break}return this._modelList.get(t)}getWelfareBagId(t){var e=this.m_dicWelfareBags;for(let n=0;n<e.values.length;n++){var i=e.values[n];if(t>=i.rankingMin&&t<=i.rankingMax)return i.id}return 0}initNodes(t){var e=new le;for(let n=0;n<t.values.length;n++){var i=t.values[n];i.open==1&&(z.vType==2?i.type==2&&(e.set(i.id,i),i.testUrl()):i.type==1&&(e.set(i.id,i),i.testUrl()))}return e}testNodes(){var t=this.m_dicNodes;for(let i=0;i<t.values.length;i++){var e=t.values[i];e.testUrl()}}getNodeByAddr(t){var e=this.m_dicNodes;for(let n=0;n<e.values.length;n++){var i=e.values[n];if(i&&i.socketUrl==t)return i}return null}getCurrencyAddress(t){let i=Ze.intance.m_dicCurrencyAddress.values;for(let r=0;r<i.length;r++){var n=i[r];if(z.vType==n.isSN&&t==n.id)return n.token}}getCurrency(t,e){let n=Ze.intance.m_dicCurrencyAddress.values;for(let s=0;s<n.length;s++){var r=n[s];if(z.vType==r.isSN&&t==r.id&&e==r.chainId)return r}}getTokensByChainId(t,e){let n=Ze.intance.m_dicCurrencyAddress.values;var r=[];for(let o=0;o<n.length;o++){var s=n[o];e==1?z.vType==s.isSN&&s.openRecharge==1&&t==s.chainId&&r.push(s):e==2&&z.vType==s.isSN&&s.openExtract==1&&t==s.chainId&&r.push(s)}return r}getDropCashAddress(t,e){let n=Ze.intance.m_dicDropCashAddresse.values;for(let s=0;s<n.length;s++){var r=n[s];if(z.vType==r.isSN&&t==r.chainId&&e==r.name)return r}}getOtcTelegrams(t){let i=Ze.intance.m_dicOtcTelegram.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.id)return n}}getPuzzleExchange(t){let i=Ze.intance.m_dicPuzzleExchange.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.id)return n}}getPuzzleExchangeByName(t){let i=Ze.intance.m_dicPuzzleExchange.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.name)return n}}getNetAddress(t){let i=Ze.intance.m_dicCoinAddress.values;for(let r=0;r<i.length;r++){var n=i[r];if(z.vType==n.type&&t==n.tokenid)return n.tokenAddress}}getBuyHeroAddress(t){let i=Ze.intance.m_dicBuyHeroes.values;for(let r=0;r<i.length;r++){var n=i[r];if(z.vType==n.type&&t==n.tokenid)return n.tokenAddress}}getACoin(t,e){let n=Ze.intance.m_dicACoin.values;for(let s=0;s<n.length;s++){var r=n[s];if(t==r.token&&e==r.currency)return r}}static getArrFromDictionary(t,e,i){let n=[];for(let r=0;r<t.values.length;r++)t.values[r][e]+""==i+""&&n.push(t.values[r]);return n}getArrFromDicItemByKey(t,e){let i=[];for(let n=0;n<this.m_dicItems.values.length;n++)this.m_dicItems.values[n][t]+""==e+""&&i.push(this.m_dicItems.values[n]);return i}initConfigObject(t,e=null,i=null){let n="config/"+t+".json",r=D.instance.getResByURL(n).data;return new Gr(r,e)}initConfig(t,e,i=null,n=!1,r=null){let s="config/"+t+".json",o=D.instance.getResByURL(s).data,l=new le;if(!o)return console.log("ERROR : SheetDataManager -->initConfig()  url:"+s),l;let c;for(let u=0;u<o.length;u++){let p=this.compoundKey(o[u],e);i?(c=new i,c.init==null&&console.log("ERROR :BaseItem> SheetDataManager -->initConfig()  url:"+s),c.init(o[u]),l.set(p,c),r&&r.runWith(c)):(l.set(p,o[u]),r&&r.runWith(o[u]))}if(n){let u=D.instance.setResURL(s);Laya.Loader.clearRes(u)}return l}compoundKey(t,e){let i="",n=e.length;if(n>1)for(let r=0;r<n;r++)i+=t[e[r]],r!=n-1&&(i+="_");else i=t[e[0]];return i}getCompoundKey(t){let e="",i=t.length;if(i>1)for(let n=0;n<i;n++)e+=t[n],n!=i-1&&(e+="_");else e=t[0];return e}initConfig2(t,e,i,n=!0){let r="config/"+t+".json",s=D.instance.getResByURL(r).data,o=new le;if(!s)return console.log("ERROR : SheetDataManager -->initConfig2()  url:"+r),o;let l;for(let c=0;c<s.length;c++){let u=s[c][e],p;o.get(u)==null?(p=[],o.set(u,p)):p=o.get(u),l=new i,l.init==null&&console.log("ERROR :<BaseItem> SheetDataManager -->initConfig2()  url:"+r),l.init(s[c]),p.push(l)}if(n&&t!="items"){let c=D.instance.setResURL(r);Laya.Loader.clearRes(c)}return o}getItemsBy(t,e){let i=this.getArrFromDicItemByKey("itm_type",t),n=[];for(let r of i)r.child_type.toString()==e.toString()&&n.push(r);return n}getSheetDataByMultiKey(t,e){let i=this.getCompoundKey(e);return t.get(i)}getEquipDataById(t,e=null){let n=Ze.intance.m_dicEquip.values;for(let s=0;s<n.length;s++){var r=n[s];if(e){if(t==r.id&&e==r.quality)return r}else if(t==r.id)return r}}getAttributeDataById(t){let i=Ze.intance.m_dicAttributes.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.id)return n}}getEquipSuitDataById(t){let i=Ze.intance.m_dicEquipSuit.values;for(let r=0;r<i.length;r++){var n=i[r];if(n.parts.indexOf(t)>-1)return n}}getTurntableByid(t){let i=Ze.intance.m_dicTurntable.values;for(let r=0;r<i.length;r++){var n=i[r];if(t==n.id)return n}}getWheelByType(t){let i=Ze.intance.m_dicWheel.values,n=[];for(let s=0;s<i.length;s++){var r=i[s];t==r.type&&n.push(r)}return n}getWheel1ByType(t){let i=Ze.intance.m_dicWheel1.values,n=[];for(let s=0;s<i.length;s++){var r=i[s];t==r.type&&n.push(r)}return n}getWheel2ByType(t){let i=Ze.intance.m_dicWheel2.values,n=[];for(let s=0;s<i.length;s++){var r=i[s];t==r.type&&n.push(r)}return n}getConsumptionByLevel(t){let i=Ze.intance.m_dicHeroStar.values,n=[];for(let s=0;s<i.length;s++){var r=i[s];t==r.level&&n.push(r)}return n}};Ze.DataType_Items="SheetDataManager:items",Ze.DataType_CatagoryChildType="SheetDataManager:CatagoryChildType",Ze.DataType_BeautyPiece="SheetDataManager:beautypiece",Ze.DataType_BeautyExp="SheetDataManager:beautyexp",Ze.DataType_ClothStyleScore="SheetDataManager:clothStyleScore";var _=Ze;var P=class{constructor(){}};P.NO_ALL=-1,P.YES=1,P.NO=2,P.SURE=4,P.CANCEL=8,P.CLOSE=16,P.RETURN_YES=1,P.RETURN_NO=2,P.RETURN_NONE=3,P.BASEALERTVIEW="BaseAlertDialog",P.MatchConfimDialog="MatchConfimDialog",P.InviteConfimDialog="InviteConfimDialog",P.ApplyConfimDialog="ApplyConfimDialog",P.BUYCONFIRMVIEW="BuyConfirmView",P.GUILDQUITVIEW="GuildQuitView",P.BuyItemConfirmView="BuyItemConfirmView",P.DOWNLOADALERT="DownLoadAlert";var me=class a{constructor(){}static instance(){return a._instance||(a._instance=new a),a._instance}AlertByType(t,e=null,i=0,n=null,r=null,s=!1,o=null){i==0&&(i=P.YES|P.NO),this.onLoaded(i,t,e,n,r,s,o)}onLoaded(t,e,i,n=null,r=null,s=!1,o=null){A.intance.openModule(e,{flag:t,okHandler:n,cancelHandler:r,data:i,destroyDoCancel:s,initHandler:o})}};var ve=class{};ve.TYPE_EXP=3003,ve.TYPE_GOLD=3005,ve.TYPE_TOX=3001,ve.TYPE_USDT=3004,ve.TYPE_BTC=3006,ve.TYPE_ETH=3007,ve.TYPE_BTOX=3011,ve.TYPE_GALA=3010,ve.TYPE_BNB=3013,ve.TYPE_GGG=3017,ve.TYPE_KLAY=3015,ve.TYPE_BNRY=3016,ve.TYPE_LLE=3017,ve.TYPE_SOL=3023,ve.TYPE_MNT=3024,ve.TYPE_PAS=3025,ve.TYPE_QUAN_PVE=1980,ve.TYPE_QUAN_MNT=4001;var He=class He{static getColorText(t,e="#FFFF00"){return'<font color="'+e+'">'+t+"</font>"}static getChildByName(t,e,i="name"){if(t&&t.hasOwnProperty(i)&&t[i]==e)return t;let n=t;if(n){let r=n.numChildren,s;for(let o=0;o<r;++o)if(s=n.getChildAt(o),s instanceof Laya.Sprite&&(s=He.getChildByName(s,e,i)),s&&s.hasOwnProperty(i)&&s[i]==e)return s}return null}static getChildByAttri(t,e){if(t&&t.hasOwnProperty(e)&&t[e])return t[e];let i=t;if(i){let n=i.numChildren,r;for(let s=0;s<n;++s)if(r=i.getChildAt(s),r instanceof Laya.Sprite){if(r=He.getChildByAttri(r,e),r)return r}else if(r&&r.hasOwnProperty(e)&&r[e])return r[e]}return null}static logs(t,e=0,i=!0,n=16777215){if(t=He.GetLogTime+" "+t,i)switch(e){case 0:n=16777215;break;case 1:n=16777215;break;case 2:n=16711680;break;case 3:n=16777215;break;case 4:n=13434777;break;case 5:n=16742399;break}}static get GetLogTime(){let t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()}static get GRAY(){return He._GRAY||(He._GRAY=new Laya.ColorFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])),He._GRAY}static get GRAY1(){if(!He._GRAY1){let t=[.3086,.16094,.082,0,0,.2086,.26094,.082,0,0,.1086,.36094,.082,0,0,0,0,0,1,0];He._GRAY1=new Laya.ColorFilter(t)}return He._GRAY1}static get GLOW(){return He._GLOW||(He._GLOW=new Laya.GlowFilter("#ffffff",12,0,0)),He._GLOW}static get BLUR(){if(!He._BLUR){let t=new Laya.BlurFilter;t.strength=5,He._BLUR=[t]}return He._BLUR}static share(t=1001,e=2,i=null,n=null,r=0,s=0,o=null){}static get isParseWWhiteUser(){return He._isParseWWhiteUser}static get isWhiteName(){return z.isWhiteList}static itemListHandler(t,e){let i=t.dataSource,n=i[0],r=i[1],s=2,o=t.skin;o&&(o.indexOf("xinSmall")!=-1?s=1:o.indexOf("xinBig")!=-1&&(s=3));let l;s==1?l="common/common_clip/clip_xinSmall"+r+".png":s==3?l="common/common_clip/clip_xinBig"+r+".png":l="common/common_clip/clip_xinMiddle"+r+".png",t.skin=l,t.dataSource=n}static setStarList(t,e){t.renderHandler=new Laya.Handler(He,He.itemListHandler),t.dataSource=e}static get BLACK(){return He._BLACK||(He._BLACK=new Laya.ColorFilter,He._BLACK.setColor("#000000")),He._BLACK}static get YELLOW(){return He._YELLOW||(He._YELLOW=new Laya.ColorFilter,He._YELLOW.setColor("#ffe64b")),He._YELLOW}static get YELLOW1(){return He._YELLOW1||(He._YELLOW1=new Laya.ColorFilter,He._YELLOW1.setColor("#fee14e")),He._YELLOW1}static get RED1(){return He._RED1||(He._RED1=new Laya.ColorFilter,He._RED1.setColor("#ff4537")),He._RED1}static get BLUE(){return He._BLUE||(He._BLUE=new Laya.ColorFilter,He._BLUE.setColor("#2f72a7")),He._BLUE}static setColor(t="#13e2cf"){let e=new Laya.ColorFilter;return e.setColor(t),e}static heroNotEnought(t=1286){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(t),P.YES,null)}static popTip(t){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(t),P.YES,null)}static onGetHero(t=-1){se.intance.setCurrentScene(Y.M_SCENE_SHOP,[1,t])}static isFightHero(t){return b.instance.playerDto.fightHeroPk==t||t==b.instance.playerDto.newFightHeroPk}static titickNotEnought(t=-1){var e=2,i=_.intance.getSheetDataByMultiKey(_.intance.m_dicShopMulDic,[e,t]);if(i&&i.open==1)me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1060),P.CANCEL,Laya.Handler.create(this,this.onGetTitck,[t]));else{var n=_.intance.m_dicItems.get(t);n?T.instance.notice(m.instance.getLanguage(1282,m.instance.getLanguage(n.name))):Le.instance.showErrorWord(18)}}static RemError(){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1124),P.YES,null)}static NoHeroError(t){me.instance().AlertByType(P.BASEALERTVIEW,t,P.YES,null)}static TransactionErrorTip(){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1224),P.YES,null)}static alertNoAll(t){me.instance().AlertByType(P.BASEALERTVIEW,t,P.NO_ALL)}static onGetTitck(t=-1){se.intance.setCurrentScene(Y.M_SCENE_SHOP,[2,t])}static moneyNotEnought(t=ve.TYPE_TOX){var e=_.intance.m_dicItems.get(t),i=m.instance.getLanguage(e.name);T.instance.notice(m.instance.getLanguage(1170,i))}static onGetMoney(t){se.intance.setCurrentScene(Y.M_SCENE_ASSET,[1,t])}static openSquidGame(){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(6056),P.CANCEL,Laya.Handler.create(this,this.onOpenSquidGame))}static onOpenSquidGame(){window.location.href="https://squidgamefi.io/?invitationCode=2oi"}static otherLogin(){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(6054),P.YES,Laya.Handler.create(this,Ne.instance.reload))}static netError(){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1307),P.YES,Laya.Handler.create(this,Ne.instance.reload))}static commTipWithYes(t){me.instance().AlertByType(P.BASEALERTVIEW,t,P.YES)}static shakeSprs(t,e=2,i=4,n=32){if(He.isShake)return;He.isShake=!0;let r=t.length,s=[];for(let u=0;u<r;u++){let p=t[u];s.push([p.x,p.y])}let o=[0,0],l=0,c=function(){o[l%2]=l++%4<2?0:i,l>e*4+1&&(Laya.timer.clear(Laya.stage,c),l=0,He.isShake=!1);for(let u=0;u<r;u++){let p=t[u];p.x=o[0]+s[u][0],p.y=o[1]+s[u][1]}};Laya.timer.loop(n,Laya.stage,c)}static shake(t,e=2,i=4,n=32){if(He.isShake)return;He.isShake=!0;let r=new Laya.Point(t.x,t.y),s=[0,0],o=0,l=function(){s[o%2]=o++%4<2?0:i,o>e*4+1&&(Laya.timer.clear(Laya.stage,l),o=0,He.isShake=!1),t.x=s[0]+r.x,t.y=s[1]+r.y};Laya.timer.loop(n,Laya.stage,l)}static checkIsFull(){}static fullScreen(t){var e,i=Laya.Browser.window.location.href;t?(i+="&isFull=1",e={type:"openChildPage",data:{url:i,fullScreen:"1",close:"0"}}):e={type:"closePage",data:""};var n=JSON.stringify(e);Laya.Browser.onIOS?(console.log("onIOS"),typeof webkit<"u"&&(console.log("onIOS1"),webkit.messageHandlers._tw_.postMessage(n),console.log("onIOS2"))):Laya.Browser.onAndroid&&(console.log("onAndriod0"),window&&typeof window._tw_<"u"&&(console.log("onAndriod1 str: "+n),window._tw_.callInto(n),console.log("onAndriod2")))}};He._isParseWWhiteUser=!1,He.isWWhiteUser=!1,He.isShake=!1,He.isFullScreen=!1;var Ee=He;var ha=class ha{constructor(){this.mainSceneX=10086;this.isCloseAll=!0;this.enterMainSceneTimes=0;this.isTopOpening=!1;this.isBottomOpening=!1;g.intance.on(f.EVENT_MODULE_ADDED,this,this.onAdded)}static get intance(){return ha._instance||(ha._instance=new ha),ha._instance}init(){}setup(){}onAdded(t){}getPreSceneData(){if(this.m_arrFromScenes.length<1)return[Y.M_SCENE_MAIN,!0,1,null];{let t=this.m_arrFromScenes.pop();return console.log("pop-----------route："+this.m_arrFromScenes.join(" | ")),t}return[Y.M_SCENE_MAIN,!0,1,null]}removePreSceneData(){this.m_arrFromScenes=[]}setBackScene(){let t=this.getPreSceneData();this.setCurrentScene(t[0],t[1],!1)}setMainScene(t=1,e=null){this.setCurrentScene(Y.M_SCENE_MAIN,e)}async setCurrentScene(t,e=null,i=!1,n=!0){console.log("setCurrentScene: ",t,e),this.preSceneName=t;let r=!1;if(this.m_sceneCurrent&&this.m_sceneCurrent.name==t){console.log("currentScene："+this.m_sceneCurrent.name+"  openScene：："+t);return}this.isCloseAll?A.intance.closeAll():this.isCloseAll=!0,this.m_sceneCurrent&&(this.m_arrFromScenes||(this.m_arrFromScenes=[]),i&&this.m_sceneCurrent.m_arrOpenSceneData[3]&&this.m_arrFromScenes.push(this.m_sceneCurrent.m_arrOpenSceneData),console.log("open-----------scene："+this.m_arrFromScenes),this.fromScene=this.m_sceneCurrent.name,console.log("fromSceneName: "+this.fromScene),ha.m_arrSceneToDialog.indexOf(t)==-1?(this.m_sceneCurrent==this.m_preScene&&(this.m_preScene=null),this.m_sceneCurrent.toScene=t,this.m_sceneCurrent.removeSelf(),this.m_sceneCurrent=null,Laya.loader.clearUnLoaded(),wo.instance.dispose()):this.m_preScene=this.m_sceneCurrent,!i&&ha.m_arrSceneToDialog.indexOf(t)==-1&&this.m_preScene&&(this.m_sceneCurrent=this.m_preScene,this.m_sceneCurrent.toScene=t,this.m_sceneCurrent.removeSelf(),this.m_sceneCurrent=null,Laya.loader.clearUnLoaded(),wo.instance.dispose()));let s=_.intance.m_dicScene.get(t);switch(s&&s.music!=null&&s.music!="0"&&s.music!=""&&(console.log("SceneManager.setCurrentScene sceneItem.music: "+s.music),ze.instance.playMusicByName(s.music)),t){case Y.M_SCENE_MAIN:this.m_arrFromScenes=[],this.m_sceneCurrent=await Laya.Scene.open("scenes/mainView/MainScene.ls"),this.enterMainSceneTimes++;break;case Y.M_SCENE_AIRDROP:this.m_sceneCurrent=await Laya.Scene.open("scenes/airdrop/AirdropScene.ls",!0,e);break;case Y.M_SCENE_SHOP:this.m_sceneCurrent=await Laya.Scene.open("scenes/shop/ShopScene.ls",!0,e);break;case Y.M_SCENE_RANK:this.m_sceneCurrent=await Laya.Scene.open("scenes/rank/RankScene.ls");break;case Y.M_SCENE_SHOLARSHIP:this.m_sceneCurrent=await Laya.Scene.open("scenes/scholarship/ScholarshipScene.ls");break;case Y.M_SCENE_FRIEND:this.m_sceneCurrent=await Laya.Scene.open("scenes/friend/FriendScene.ls");break;case Y.M_SCENE_HERO:this.m_sceneCurrent=await Laya.Scene.open("scenes/hero/MyHeroScene.ls");break;case Y.M_SCENE_KNAPSACK:this.m_sceneCurrent=await Laya.Scene.open("scenes/item/KnapsackScene.ls",!0,e);break;case Y.M_SCENE_MAIL:this.m_sceneCurrent=await Laya.Scene.open("scenes/mail/MailScene.ls");break;case Y.M_SCENE_UNION:this.m_sceneCurrent=await Laya.Scene.open("scenes/union/UnionScene.ls");break;case Y.M_SCENE_MYUNION:this.m_sceneCurrent=await Laya.Scene.open("scenes/union/MyUnionScene.ls",!0,e);break;case Y.M_SCENE_LCPOOL:this.m_sceneCurrent=await Laya.Scene.open("scenes/lcPool/LcPoolScene.ls",!0,e);break;case Y.M_SCENE_MATCH_READY:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/MatchReady.ls");break;case Y.M_SCENE_MATCH:this.m_sceneCurrent=await Laya.Scene.open("scenes/match/Match.ls");break;case Y.M_SCENE_ASSET:this.m_sceneCurrent=await Laya.Scene.open("scenes/asset/AssetScene.ls",!0,e);break;case Y.M_SCENE_GET_MAT:this.m_sceneCurrent=await Laya.Scene.open("scenes/getMat/GetMatScene.ls",!1,e);break;case Y.M_SCENE_OPEN_GAME:this.m_sceneCurrent=await Laya.Scene.open("scenes/getMat/OpenGameScene.ls",!1,e);break;case Y.M_SCENE_IGO_PAGE:this.m_sceneCurrent=await Laya.Scene.open("scenes/igoPage/IgoPageScene.ls");break;case Y.M_SCENE_DAILY_TASK:this.m_sceneCurrent=await Laya.Scene.open("scenes/dailyTasks/GhostRaffleScene.ls",!1,e);break;case Y.M_SCENE_PVE:this.m_sceneCurrent=await Laya.Scene.open("scenes/pve/PveScene.ls",!1,e);break;default:break}Ee.logs("======================  打开Scene: "+t+"  ======================"),this.m_sceneCurrent.name=t,this.m_sceneCurrent.fromScene=this.fromScene,this.m_sceneCurrent.m_arrOpenSceneData=[t,e,i,n];let o=C.M_SCENE}initPreload(){let t=_.intance.m_dicScene.get(Y.M_SCENE_PRE_LOAD);t&&t.music!=null&&t.music!="0"&&t.music!=""&&(console.log("SceneManager.initPreload sceneItem.music: "+t.music),ze.instance.playMusicByName(t.music))}get currSceneName(){return this.m_sceneCurrent?this.m_sceneCurrent.name:""}};ha.m_arrSceneToDialog=[];var se=ha;var K=class{};K.ARENA_TYPE_PROFESSIONAL=1,K.ARENA_TYPE_AIRDROP=2,K.ARENA_TYPE_TRAINING=3,K.ARENA_TYPE_PVE=4,K.ARENA_TYPE_TEAM=5,K.ACTION_CREATE=1,K.ACTION_JOIN=2,K.ACTION_SIGNUP=3,K.ACTION_WATCH=4,K.ACTION_CREATE_BOOKING=5,K.ACTION_JOIN_BOOKING=6,K.STATE_WAIT=0,K.STATE_SIGNUP=2,K.STATE_GROUPED=3,K.STATE_START=10,K.CAMERA_IDLE=0,K.CAMERA_FOLLOW_ME=1,K.CAMERA_MAP_CLICK=2,K.CAMERA_DIRECT_OPERATE=3,K.CAMERA_FOLLOW_OTHER=4,K.MATCHEND_REWARD=1,K.MATCHEND_QUAN=2,K.MATCHEND_DIEJIA=3;var Pt=class{constructor(){this._color=1;this.isLvUp=!1;this.newAddCnt=0}get simgurl(){return D.instance.getHeroHeadRes(this.heroItem.serialId,this.color)}get sk(){return D.instance.getHeroSkRes(this.heroItem.serialId,this.color)}get id(){return this._id}set id(t){this._id=t,this.heroItem=_.intance.m_dicHeros.get(t+"")}get name(){return m.instance.getLanguage(this.heroItem.name)}set name(t){this._name=t}get color(){return this._color}set color(t){t&&(this._color=t)}get m_iNum(){return this._m_iNum}set m_iNum(t){this._m_iNum=t}};var Pe=class a{constructor(t=0){this._m_iLevel=0;this._m_arrDisc=[];this.newAddCnt=0;this.isScholarship=!1;this.isLvUp=!1;this.needTip=!0;this.m_bSalon=!1;this.m_bIsSetId=!1;t!=0&&(this.m_iId=t)}get m_sIcon(){return this._m_sIcon}set m_sIcon(t){this._m_sIcon=t}get m_iLevel(){return this._m_iLevel>0?this._m_iLevel:1}set m_iLevel(t){this._m_iLevel=t||0}get m_iNum(){return this._m_iNum}set m_iNum(t){this._m_iNum=t}get m_iPk(){return this._m_iPk}set m_iPk(t){this._m_iPk=t}copyItem(){let t=new a;return t.m_iId=this.m_iId,t.m_iOriginalId=this.m_iOriginalId,t}get m_bTry(){return this.m_iId==this.m_iOriginalId?this._m_bSet=!1:this._m_bSet=!0,this._m_bSet}get m_strName(){return m.instance.getLanguage(this.itemItem.name)}set m_bTry(t){this._m_bSet=t}get m_iId(){return this._m_iId}set m_iId(t){this._m_iId=t,this.m_bIsSetId||(this.m_bIsSetId=!0,this.m_iOriginalId=t),this.setConfigData()}setConfigData(){if(this.m_iId!=0){if(this.itemItem=_.intance.m_dicItems.get(this.m_iId.toString()),!this.itemItem){console.log("[          <items> find out id:"+this.m_iId+"             ]");return}if(this.subType=parseInt(this.itemItem.subType+""),this.backType=parseInt(this.itemItem.backPack+""),this.type=parseInt(this.itemItem.type+""),this.m_sIcon=this.itemItem.icon,this.itemItem.buy_price){this.m_iPrice=this.itemItem.buy_price[0][1];let t=this.itemItem.buy_price[0][0],e=_.intance.m_dicItems.get(t);e&&(this.m_strBuyIcon=D.instance.getItemIcon(e.icon))}this.itemItem.sell_price&&(this.m_iSellPrice=parseFloat(this.itemItem.sell_price[0][1])),this.m_iQuality=this.itemItem.quality,this.setQualityData()}}setQualityData(){this.m_arrQualityData=this.itemItem.starArr}get getIconURL(){return D.instance.getItemIcon(this.itemItem.icon)}copy(){let t=new a(this.m_iId);return t.m_iLevel=this.m_iLevel,t}compareName(){return m.instance.getLanguage(this.itemItem.name)}compareQuality(){return parseFloat(this.m_iQuality+"")}compareSellPrice(){return parseFloat(this.itemItem.sell_price[1]+"")}compareNum(){return parseFloat(this.m_iNum+"")}compareLevel(){return parseFloat(this.m_iLevel+"")}compareFragment(){let t=this.itemItem.id;return 0}compareTypeId(){return parseInt(this.m_iId+"")}};var yi=class a{constructor(){this._isPop=!1;g.intance.on(f.EVENT_CHECK_REMAIN,this,this.onCheckRemain)}static get instance(){return a._instance||(a._instance=new a),a._instance}get model(){return ct.instance}get isPop(){return this._isPop}startShow(){console.log("startShow");var t=this.model.hasRemain();!this._isPop&&t&&(this._isPop=!0,t instanceof Pt?g.intance.event(f.EVENT_OPEN_MODULE,y.HeroGetDialog):g.intance.event(f.EVENT_OPEN_MODULE,y.ItemGetDialog))}onCheckRemain(t){if(t==y.ItemGetDialog||t==y.HeroGetDialog){var e=this.model.hasRemain();e?e instanceof Pt?g.intance.event(f.EVENT_OPEN_MODULE,y.HeroGetDialog):g.intance.event(f.EVENT_OPEN_MODULE,y.ItemGetDialog):this._isPop=!1}}};var ct=class a{constructor(t){this._list=[];this.needPop=!0;this.autoPop=!0}static get instance(){return a._instance||(a._instance=new a(new l0)),a._instance}get service(){return yi.instance}addItem(t,e=!1){let i=new Pe;i.m_iId=t.m_iId,i.newAddCnt=t.newAddCnt,i.m_iLevel=t.m_iLevel,i.isLvUp=t.isLvUp,i.m_bNew=t.m_bNew,this._list.push(i),e&&this.service.startShow()}addHeroItem(t,e=!1){let i=new Pt;i.id=t.id,i.newAddCnt=t.newAddCnt,i.lv=t.lv,i.isLvUp=t.isLvUp,i.m_bNew=t.m_bNew,this._list.push(i),e&&this.service.startShow()}addItems(t,e=!1){this._list=this._list.concat(t),e&&this.service.startShow()}hasRemain(){return this._list.length>0?this._list[0]:null}get needListener(){return this._list.length>=2}addConsumeByServer(t){this._list.push(t)}addConsume(t,e){this._list.push([t,e])}getNextItem(){return this._list.length>0?this._list[0]:null}getOneItem(){return this._list.length>0?this._list.shift():null}},l0=class{};var Ht=class{constructor(){}};Ht.TYPE_NORMAL=0,Ht.TYPE_TRUST=1,Ht.TYPE_WEB3=2,Ht.type=0;async function xD({timeout:a}={timeout:3e3}){let t=JE();return t||ID({timeout:a})}async function ID({timeout:a}={timeout:3e3}){return new Promise(t=>{let e=()=>{t(JE())};window.addEventListener("trustwallet#initialized",e,{once:!0}),setTimeout(()=>{window.removeEventListener("trustwallet#initialized",e,{once:!0}),t(null)},a)})}function JE(){let a=e=>!!e.isTrust;return typeof window<"u"&&typeof window.ethereum<"u"?a(window.ethereum)?window.ethereum:window.ethereum?.providers?window.ethereum.providers.find(a)??null:window.trustwallet??null:null}async function c0(){if(console.log("initWeb3 -0"),console.log("initWeb3 -1"),typeof window<"u"&&typeof window.ethereum<"u"&&!!window.ethereum.isTrust){let t=await xD();console.log("initWeb3 -2"+t),Ht.trustProvider=t,Ht.type=Ht.TYPE_TRUST,console.log("initWeb3 -6")}else typeof web3<"u"&&(console.log("initWeb3 2"),web3=new Web3(web3.currentProvider),Ht.web3Provider=web3,Ht.type=Ht.TYPE_WEB3,console.log("initWeb3 3"))}var Ga=class a{constructor(){this.walletDic=new le}static get instance(){return a._instance||(a._instance=new a),a._instance}getEthValue(t){return a.instance.walletDic.get(t)?a.instance.walletDic.get(t).ethValue:0}getValue(t){return a.instance.walletDic.get(t)?a.instance.walletDic.get(t).value:0}};var bi=class{};bi.ASSETS_TOX=1e4,bi.ASSETS_ARCANITE=10001,bi.ASSETS_CRYSTAL=10002,bi.ASSETS_MITHRIL=10003,bi.ASSETS_REDSTONE=10004,bi.ASSETS_TRUEIRON=10005;var Z=class{static initConfig(t){this.configDic=new le;for(let e of t){let i=e.sstringvalue;e.sadditional==="JSON"&&(i=JSON.parse(i)),this.configDic.set(e.skey2,i),this[e.skey2]=i}}};Z.ADDRESS0="0x0000000000000000000000000000000000000000",Z.TOKEN_ERC20ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"miner",type:"address"}],name:"addMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"burn",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_delMinter",type:"address"}],name:"delMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"idx",type:"uint256"}],name:"getMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMinterLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isMinter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.PUZZLE_ABI=[{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"bytes",name:"signature",type:"bytes"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"TOX",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"WBNB",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"getAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address",name:"token",type:"address"}],name:"getTokenAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],Z.PUZZLE_ABI_ETH=[{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"deadline",type:"uint256"},{indexed:!1,internalType:"bytes",name:"signature",type:"bytes"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"GALA",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"USDT",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"getAmountsOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"router",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signAddress",type:"address"}],name:"setSigner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenAmount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.ACCOUNT_ADDRESS="0x5ff2123b0Aa4bD97eeF5F6388EFCB56cd29D6835",Z.ACCOUNT_ABI=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"nickName",type:"string"},{indexed:!1,internalType:"string",name:"avatar",type:"string"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"},{indexed:!1,internalType:"uint256",name:"birthHeight",type:"uint256"},{indexed:!1,internalType:"uint256",name:"birthPlace",type:"uint256"},{indexed:!1,internalType:"uint256",name:"gender",type:"uint256"},{indexed:!1,internalType:"uint256",name:"influence",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_avatar",type:"string"}],name:"changeAvatar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_gender",type:"uint256"}],name:"changeGender",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_influence",type:"uint256"}],name:"changeInfluence",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"}],name:"changeLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_nickname",type:"string"}],name:"changeNickName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"_nickname",type:"string"},{internalType:"string",name:"_avatar",type:"string"},{internalType:"uint256",name:"_level",type:"uint256"},{internalType:"uint256",name:"_birthHeight",type:"uint256"},{internalType:"uint256",name:"_birthPlace",type:"uint256"},{internalType:"uint256",name:"_gender",type:"uint256"},{internalType:"uint256",name:"_influence",type:"uint256"}],name:"createAccount",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getAccountInfo",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"string",name:"nickName",type:"string"},{internalType:"string",name:"avatar",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"birthHeight",type:"uint256"},{internalType:"uint256",name:"birthPlace",type:"uint256"},{internalType:"uint256",name:"gender",type:"uint256"},{internalType:"uint256",name:"influence",type:"uint256"}],internalType:"struct AccountInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newBaseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"newTokenURI",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.CREATE_ACCOUNT_ABI=[{inputs:[{internalType:"address",name:"AccountToken",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address[]",name:"accounts",type:"address[]"}],name:"BurnAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"string",name:"nickname",type:"string"},{indexed:!1,internalType:"uint256",name:"country",type:"uint256"},{indexed:!1,internalType:"uint256",name:"gender",type:"uint256"},{indexed:!1,internalType:"string",name:"icon",type:"string"}],name:"RegisterAccount",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MAX",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"}],name:"burnAccount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"currentId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"iAccount",outputs:[{internalType:"contract IAccount",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"isExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"nickname",type:"string"},{internalType:"uint256",name:"country",type:"uint256"},{internalType:"uint256",name:"gender",type:"uint256"},{internalType:"string",name:"icon",type:"string"}],name:"register",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"registerId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}],Z.BUY_HERO_ABI=[{inputs:[{internalType:"address",name:"_Phantom",type:"address"},{internalType:"address",name:"_TOX",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"Phantom",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOX",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOXPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNFTParams",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"series",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"}],internalType:"struct PhantomMall.Params[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNameIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"union",type:"address"}],name:"list",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxSeriesCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"tos",type:"address[]"}],name:"mintByOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintByTOX",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"mintCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"nameCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"random",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_toxPrice",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.HERO_LIST_ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_fromTokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"_toTokenId",type:"uint256"}],name:"BatchMetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"MetadataUpdate",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"},{indexed:!1,internalType:"uint256",name:"series",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"uri",type:"string"}],name:"TokenBaseURIUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"}],name:"UpdateLevel",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"UpdateName",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"series",type:"uint256"}],name:"UpdateSeries",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"endId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"exist",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getParams",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"series",type:"uint256"}],internalType:"struct PhantomHero.Params",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"list",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"safeMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"series",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_endId",type:"uint256"}],name:"setEndId",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"}],name:"updateLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"name",type:"string"}],name:"updateName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"series",type:"uint256"}],name:"updateSeries",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.TRANSFER_HERO_ABI=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"uids",type:"uint256[]"}],name:"BatchTransfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"uids",type:"uint256[]"}],name:"batchTransfer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"hero",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],Z.EDIT_ACCOUNT_ADDRESS="0xaa1B8FA74Ed295123a6336C2D3a88cB973160dfa",Z.EDIT_ACCOUNT_ABI=[{inputs:[{internalType:"address",name:"_accountContract",type:"address"},{internalType:"string",name:"_website",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPirce",outputs:[{components:[{internalType:"address",name:"exchangeToken",type:"address"},{internalType:"uint256",name:"rate",type:"uint256"}],internalType:"struct UpdateProfile.Price",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWebsite",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_exchangeToken",type:"address"},{internalType:"uint256",name:"_rate",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_website",type:"string"}],name:"setWebsite",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"nickName",type:"string"},{internalType:"string",name:"avatar",type:"string"}],name:"updateProfile",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.STAKING_POOL_ABI=[{inputs:[{internalType:"uint256",name:"_poolPlace",type:"uint256"},{internalType:"address",name:"_stakeToken",type:"address"},{internalType:"address",name:"_accountContract",type:"address"},{internalType:"address",name:"_rewardsContract",type:"address"},{internalType:"address",name:"_empowerContract",type:"address"},{internalType:"uint256",name:"_dailyRewards",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"rewards",type:"uint256"}],name:"RewardAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"rewards",type:"uint256"}],name:"RewardPaid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Staked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"calcCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"calcPerSecondsRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"capacityOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_dailyRewards",type:"uint256"}],name:"changeDailyRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"claimAllReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"claimReward",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"earned",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"earnedAll",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"estimatePerSecondsRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAccountCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAccountContractAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAccountTokens",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAccountTokensNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDailyRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getEmpowerContractAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLastUpdateTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLimitTokensNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPoolPlace",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRewardsContractAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRewardsPerUnitStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRewardsRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getStakeTokenAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenIdleStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenMiningStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"isAccountStakeToken",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_empowerContract",type:"address"}],name:"setEmpowerContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_limitTokensNumber",type:"uint256"}],name:"setLimitTokensNumber",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_idleStatus",type:"uint256"}],name:"setTokenIdleStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_miningStatus",type:"uint256"}],name:"setTokenMiningStatus",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawAllAndClaim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"withdrawAndClaim",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.STAKING_HERO_POWERCALC_ABI=[{inputs:[{internalType:"uint256",name:"_constantValue",type:"uint256"},{internalType:"uint256",name:"_linearCoefficient",type:"uint256"},{internalType:"uint256",name:"_quadraticCoefficient",type:"uint256"},{internalType:"uint256",name:"_percentage",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenLevel",type:"uint256"},{internalType:"bool",name:"isMatchProfession",type:"bool"}],name:"calcCapacity",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getFormulaParams",outputs:[{components:[{internalType:"uint256",name:"constantValue",type:"uint256"},{internalType:"uint256",name:"linearCoefficient",type:"uint256"},{internalType:"uint256",name:"quadraticCoefficient",type:"uint256"},{internalType:"uint256",name:"percentage",type:"uint256"}],internalType:"struct EmpowerCalcFormula.FormulaParams",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_constantValue",type:"uint256"},{internalType:"uint256",name:"_linearCoefficient",type:"uint256"},{internalType:"uint256",name:"_quadraticCoefficient",type:"uint256"},{internalType:"uint256",name:"_percentage",type:"uint256"}],name:"setFormulaParams",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.BLINDBOX_ADDRESS="0xaf8d3eb0f0e0a454Ec9B3Fb7207dD70Ba302d653",Z.BLINDBOX_ABI=[{inputs:[{internalType:"address",name:"_heroAddress",type:"address"},{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"},{internalType:"string",name:"_baseName",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"accountIsInWhiteList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_races",type:"uint256[]"}],name:"addRaces",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getBaseName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getBuyTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getIsOpen",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMaxBuyTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMaxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPirce",outputs:[{components:[{internalType:"address",name:"exchangeToken",type:"address"},{internalType:"uint256",name:"price",type:"uint256"}],internalType:"struct HeroMallV1.Price",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRaces",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReceiverAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhiteListContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"recruit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"}],name:"setBaseName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxBuyTimes",type:"uint256"}],name:"setMaxBuyTimes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_exchangeToken",type:"address"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiverAddress",type:"address"}],name:"setReceiverAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_whiteListContract",type:"address"}],name:"setWhiteListContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.BLINDBOX_ADDRESS_V2="0xaf8d3eb0f0e0a454Ec9B3Fb7207dD70Ba302d653",Z.BLINDBOX_ABI_V2=[{inputs:[{internalType:"address",name:"_heroAddress",type:"address"},{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"},{internalType:"string",name:"_baseName",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"accountIsInWhiteList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"_races",type:"uint256[]"}],name:"addRaces",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getBaseName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getBuyTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getIsOpen",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMaxBuyTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getMaxTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPirce",outputs:[{components:[{internalType:"address",name:"exchangeToken",type:"address"},{internalType:"uint256",name:"price",type:"uint256"}],internalType:"struct HeroMallV1.Price",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRaces",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReceiverAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWhiteListContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"recruit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_name",type:"string"}],name:"setBaseName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxBuyTimes",type:"uint256"}],name:"setMaxBuyTimes",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_maxTotalSupply",type:"uint256"}],name:"setMaxTotalSupply",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_isOpen",type:"bool"}],name:"setOpen",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_exchangeToken",type:"address"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"setPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiverAddress",type:"address"}],name:"setReceiverAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_whiteListContract",type:"address"}],name:"setWhiteListContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.HERO_ADDRESS="0xCC0A4E3Bd1D49D7Ef9C431C0aD87D36B0B342018",Z.HERO_ABI=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"uint256",name:"level",type:"uint256"},{indexed:!1,internalType:"uint256",name:"rarity",type:"uint256"},{indexed:!1,internalType:"uint256",name:"series",type:"uint256"},{indexed:!1,internalType:"uint256",name:"race",type:"uint256"},{indexed:!1,internalType:"uint256",name:"mineralLevel",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"level",type:"uint256"}],name:"UpdateLevel",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"mineralLevel",type:"uint256"}],name:"UpdateMineralLevel",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"string",name:"name",type:"string"}],name:"UpdateName",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"race",type:"uint256"}],name:"UpdateRace",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"rarity",type:"uint256"}],name:"UpdateRatity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"series",type:"uint256"}],name:"UpdateSeries",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"status",type:"uint256"}],name:"UpdateStatus",type:"event"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"addGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"government",type:"address"}],name:"deletedGovernment",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getGovernment",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGovernmentLength",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getNFTParams",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"rarity",type:"uint256"},{internalType:"uint256",name:"series",type:"uint256"},{internalType:"uint256",name:"race",type:"uint256"},{internalType:"uint256",name:"mineralLevel",type:"uint256"}],internalType:"struct Parmas",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"isGovernment",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"_name",type:"string"},{internalType:"uint256",name:"_level",type:"uint256"},{internalType:"uint256",name:"_rarity",type:"uint256"},{internalType:"uint256",name:"_series",type:"uint256"},{internalType:"uint256",name:"_race",type:"uint256"},{internalType:"uint256",name:"_mineralLevel",type:"uint256"}],name:"mint",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"newBaseURI",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"newTokenURI",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_level",type:"uint256"}],name:"updateLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_mineralLevel",type:"uint256"}],name:"updateMineralLevel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_name",type:"string"}],name:"updateName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"race",type:"uint256"}],name:"updateRace",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_rarity",type:"uint256"}],name:"updateRatity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"_series",type:"uint256"}],name:"updateSeries",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"status",type:"uint256"}],name:"updateStatus",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.CREATE_UNION_ADDRESS="0xcd62E6a07072Bed38F4126ba5C9361901c71846e",Z.CREATE_UNION_ABI="",Z.UNION_NUMBER_SYS_ADDRESS="0x45F0de10fA3982c4d18AbaE89a5F0663123f955c",Z.UNION_NUMBER_SYS_ABI="",Z.UPGRADE_UNION_ADDRESS="0x18320fD38F3806C0A9fb2B41202Ed0bD3f826894",Z.UPGRADE_UNION_ABI="",Z.UNION_DISTRIBUTE_ADDRESS="0x0f6b4bBa8b01B6ee2CC3232ea963ac702CaDCe04",Z.UNION_WAR_ADDRESS="0xF8489Bb617F9DCaBF33bEaeBdA4CCD029E9E247E",Z.UNION_DISTRIBUTE_ABI="",Z.UNION_WAR_ABI="",Z.HERO_TO_TOKEN_POOL_ADDRESS="",Z.HERO_TO_TOKEN_POOL_ABI="",Z.WITHDRAW_AND_RECHARGE_ADDRESS="",Z.WITHDRAW_AND_RECHARGE_ABI="",Z.SERIESHEROMALL_ADDRESS="",Z.SERIESHEROMALL_ABI="",Z.HEROFORMATION_ADDRESS="",Z.HEROFORMATION_ABI="",Z.HERO_MINT_ADDRESS="",Z.HERO_MINT_ABI="",Z.RECHANGE_ADDRESS_TOX="0x32926612d9399C1088045AEB821CCB5Ba904D697",Z.RECHANGE_ADDRESS="0x4952981D44cb95c52F0a62D4Fe8702081338D824",Z.RECHANGE_ABI_NEW=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"orderId",type:"uint256"}],name:"WithdrawToken",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MANAGER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"bank",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"depositETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"depositToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"hasUsed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"receiveAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_receiveAddress",type:"address"}],name:"setAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"orderId",type:"uint256"}],name:"withdrawToken",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.ADDLOG_ADDRESS_TEST="0xfE561eebd0240cFb9c85339258784715100B237A",Z.ADDLOG_ADDRESS="0xa5184fCf253E4df857d378bD94E2f1D425feE413",Z.ADDLOG_ABI=[{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"target",type:"string"},{indexed:!1,internalType:"uint256",name:"pid",type:"uint256"},{indexed:!1,internalType:"string",name:"tid",type:"string"},{indexed:!1,internalType:"uint256",name:"_type",type:"uint256"}],name:"AddTicketLog",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"target",type:"string"},{indexed:!1,internalType:"string",name:"data",type:"string"}],name:"log",type:"event"},{inputs:[{internalType:"string",name:"data",type:"string"}],name:"addLog",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"pid",type:"uint256"},{internalType:"string",name:"tid",type:"string"},{internalType:"uint256",name:"_type",type:"uint256"}],name:"addTicketLog",outputs:[],stateMutability:"nonpayable",type:"function"}],Z.IGO_ADDRESS_TEST="0x81bCa019f388207FDb0C14459f46960FF4E75C17",Z.IGO_ADDRESS="0x3ea5fde901b691d6175fd559e8f11dfdb7effb9a",Z.IGO_ABI=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"InvalidShortString",type:"error"},{inputs:[{internalType:"string",name:"str",type:"string"}],name:"StringTooLong",type:"error"},{anonymous:!1,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"Recharge",type:"event"},{inputs:[],name:"USD",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"deadline",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAmounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getParentAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getRecords",outputs:[{components:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"timestamp",type:"uint256"}],internalType:"struct FodcIGO.Record[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"",type:"bytes"}],name:"hashList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"inviterAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"inviter",type:"address"},{internalType:"uint256",name:"_deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"isSigner",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"minAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"inviter",type:"address"},{internalType:"uint256",name:"_deadline",type:"uint256"},{internalType:"bytes",name:"signature",type:"bytes"}],name:"recharge",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalQuota",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Z.SAT_ADDRESS="0x424CaA5beA9bDfeF9F49796D7C7005632fAbE2E8",Z.SAT_ABI=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getAuthStatus",outputs:[{internalType:"bool",name:"",type:"bool"}],type:"function"}];var Ku=class{constructor(){this.coins={};this.needTip=!0}};var Yr=class a{constructor(){this.create_contract=null;this.edit_account=null;this.account_contract=null;this.tokenId=0}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){typeof window.ethereum>"u"}async getAccountVoFromServer(){let t=await I.requestPost("cybertron-sys-api/api/v1/account/find",{address:W.instance.walletAddress},!1,!1);if(t){let e=new Ku;return Object.assign(e,t),console.log("info========"+JSON.stringify(e)),e}return t}async updateProfile(t,e,i){var n=b.instance.playerDto.sex,r=b.instance.playerDto;let s=await I.requestPost("wxgame/player/changeInfo",{name:t,sex:n,icon:e,country:i});return s?(r.icon=s.icon,r.country=s.country,r.name=s.name,r.sex=s.sex,r):null}async getTokenId(){return this.tokenId?this.tokenId:(this.tokenId=await this.account_contract.methods.tokenOfOwnerByIndex(W.instance.walletAddress,0).call(),this.tokenId=parseInt(this.tokenId+""),this.tokenId)}};function ge(a,t,e){let i=a[t.name];if(typeof i=="function")return i;let n=a[e];return typeof n=="function"?n:r=>t(a,r)}zt();Ye();var _m=class extends G{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}};jt();Bi();Oo();In();ar();es();var cT="/docs/contract/encodeEventTopics";function La(a){let{abi:t,eventName:e,args:i}=a,n=t[0];if(e){let l=ga({abi:t,name:e});if(!l)throw new Ao(e,{docsPath:cT});n=l}if(n.type!=="event")throw new Ao(void 0,{docsPath:cT});let r=mi(n),s=xn(r),o=[];if(i&&"inputs"in n){let l=n.inputs?.filter(u=>"indexed"in u&&u.indexed),c=Array.isArray(i)?i:Object.values(i).length>0?l?.map(u=>i[u.name])??[]:[];c.length>0&&(o=l?.map((u,p)=>Array.isArray(c[p])?c[p].map((d,L)=>uT({param:u,value:c[p][L]})):c[p]?uT({param:u,value:c[p]}):null)??[])}return[s,...o]}function uT({param:a,value:t}){if(a.type==="string"||a.type==="bytes")return ht(ki(t));if(a.type==="tuple"||a.type.match(/^(.*)\[(\d+)?\]$/))throw new _m(a.type);return Ci([a],[t])}Ue();function En(a,{method:t}){let e={};return a.transport.type==="fallback"&&a.transport.onResponse?.(({method:i,response:n,status:r,transport:s})=>{r==="success"&&t===i&&(e[n]=s.request)}),i=>e[i]||a.request}async function Um(a,t){let{address:e,abi:i,args:n,eventName:r,fromBlock:s,strict:o,toBlock:l}=t,c=En(a,{method:"eth_newFilter"}),u=r?La({abi:i,args:n,eventName:r}):void 0,p=await a.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof s=="bigint"?xe(s):s,toBlock:typeof l=="bigint"?xe(l):l,topics:u}]});return{abi:i,args:n,eventName:r,id:p,request:c(p),strict:!!o,type:"event"}}Li();_a();zt();Ye();wn();Wo();var gA=3;function aa(a,{abi:t,address:e,args:i,docsPath:n,functionName:r,sender:s}){let{code:o,data:l,message:c,shortMessage:u}=a instanceof $a?a:a instanceof G?a.walk(d=>"data"in d)||a.walk():{},p=(()=>a instanceof da?new Go({functionName:r}):[gA,Xa.code].includes(o)&&(l||c||u)?new Jt({abi:t,data:typeof l=="object"?l.data:l,functionName:r,message:u??c}):a)();return new Fo(p,{abi:t,args:i,contractAddress:e,docsPath:n,functionName:r,sender:s})}Li();Ye();sr();Bi();function TT(a){let t=ht(`0x${a.substring(4)}`).substring(26);return za(`0x${t}`)}$i();ai();Ue();async function oC({hash:a,signature:t}){let e=At(a)?a:Ce(a),{secp256k1:i}=await Promise.resolve().then(()=>(Lp(),rC));return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){let{r:c,s:u,v:p,yParity:d}=t,L=Number(d??p),v=sC(L);return new i.Signature(Nt(c),Nt(u)).addRecoveryBit(v)}let s=At(t)?t:Ce(t),o=Ot(`0x${s.slice(130)}`),l=sC(o);return i.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(l)})().recoverPublicKey(e.substring(2)).toHex(!1)}`}function sC(a){if(a===0||a===1)return a;if(a===27)return 0;if(a===28)return 1;throw new Error("Invalid yParityOrV value")}async function _p({hash:a,signature:t}){return TT(await oC({hash:a,signature:t}))}Mi();jt();Ue();Ye();Km();jt();Ue();function sa(a,t="hex"){let e=lC(a),i=is(new Uint8Array(e.length));return e.encode(i),t==="hex"?et(i.bytes):i.bytes}function lC(a){return Array.isArray(a)?rk(a.map(t=>lC(t))):sk(a)}function rk(a){let t=a.reduce((n,r)=>n+r.length,0),e=cC(t);return{length:(()=>t<=55?1+t:1+e+t)(),encode(n){t<=55?n.pushByte(192+t):(n.pushByte(192+55+e),e===1?n.pushUint8(t):e===2?n.pushUint16(t):e===3?n.pushUint24(t):n.pushUint32(t));for(let{encode:r}of a)r(n)}}}function sk(a){let t=typeof a=="string"?Vt(a):a,e=cC(t.length);return{length:(()=>t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+e+t.length)(),encode(n){t.length===1&&t[0]<128?n.pushBytes(t):t.length<=55?(n.pushByte(128+t.length),n.pushBytes(t)):(n.pushByte(128+55+e),e===1?n.pushUint8(t.length):e===2?n.pushUint16(t.length):e===3?n.pushUint24(t.length):n.pushUint32(t.length),n.pushBytes(t))}}}function cC(a){if(a<2**8)return 1;if(a<2**16)return 2;if(a<2**24)return 3;if(a<2**32)return 4;throw new G("Length is too large.")}Bi();function uC(a){let{chainId:t,contractAddress:e,nonce:i,to:n}=a,r=ht(ni(["0x05",sa([t?xe(t):"0x",e,i?xe(i):"0x"])]));return n==="bytes"?Vt(r):r}async function vp(a){let{authorization:t,signature:e}=a;return _p({hash:uC(t),signature:e??t})}Ue();$m();rs();Ye();ia();var xp=class extends G{constructor(t,{account:e,docsPath:i,chain:n,data:r,gas:s,gasPrice:o,maxFeePerGas:l,maxPriorityFeePerGas:c,nonce:u,to:p,value:d}){let L=cr({from:e?.address,to:p,value:typeof d<"u"&&`${ns(d)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:r,gas:s,gasPrice:typeof o<"u"&&`${Gt(o)} gwei`,maxFeePerGas:typeof l<"u"&&`${Gt(l)} gwei`,maxPriorityFeePerGas:typeof c<"u"&&`${Gt(c)} gwei`,nonce:u});super(t.shortMessage,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",L].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}};vr();Ip();function mC(a,{docsPath:t,...e}){let i=(()=>{let n=Ms(a,e);return n instanceof Ta?a:n})();return new xp(i,{docsPath:t,...e})}Ep();Zo();rI();Os();Li();rs();Ye();var Cp=class extends G{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}},Pn=class extends G{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}},Sp=class extends G{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Gt(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}};ai();Ye();var Hs=class extends G{constructor({blockHash:t,blockNumber:e}){let i="Block";t&&(i=`Block at hash "${t}"`),e&&(i=`Block at number "${e}"`),super(`${i} could not be found.`,{name:"BlockNotFoundError"})}};Ue();wp();ai();wp();var oI={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function xr(a){let t={...a,blockHash:a.blockHash?a.blockHash:null,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,chainId:a.chainId?Ot(a.chainId):void 0,gas:a.gas?BigInt(a.gas):void 0,gasPrice:a.gasPrice?BigInt(a.gasPrice):void 0,maxFeePerBlobGas:a.maxFeePerBlobGas?BigInt(a.maxFeePerBlobGas):void 0,maxFeePerGas:a.maxFeePerGas?BigInt(a.maxFeePerGas):void 0,maxPriorityFeePerGas:a.maxPriorityFeePerGas?BigInt(a.maxPriorityFeePerGas):void 0,nonce:a.nonce?Ot(a.nonce):void 0,to:a.to?a.to:null,transactionIndex:a.transactionIndex?Number(a.transactionIndex):null,type:a.type?oI[a.type]:void 0,typeHex:a.type?a.type:void 0,value:a.value?BigInt(a.value):void 0,v:a.v?BigInt(a.v):void 0};return a.authorizationList&&(t.authorizationList=uk(a.authorizationList)),t.yParity=(()=>{if(a.yParity)return Number(a.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}var hC=Ps("transaction",xr);function uk(a){return a.map(t=>({contractAddress:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function lI(a){let t=(a.transactions??[]).map(e=>typeof e=="string"?e:xr(e));return{...a,baseFeePerGas:a.baseFeePerGas?BigInt(a.baseFeePerGas):null,blobGasUsed:a.blobGasUsed?BigInt(a.blobGasUsed):void 0,difficulty:a.difficulty?BigInt(a.difficulty):void 0,excessBlobGas:a.excessBlobGas?BigInt(a.excessBlobGas):void 0,gasLimit:a.gasLimit?BigInt(a.gasLimit):void 0,gasUsed:a.gasUsed?BigInt(a.gasUsed):void 0,hash:a.hash?a.hash:null,logsBloom:a.logsBloom?a.logsBloom:null,nonce:a.nonce?a.nonce:null,number:a.number?BigInt(a.number):null,size:a.size?BigInt(a.size):void 0,timestamp:a.timestamp?BigInt(a.timestamp):void 0,transactions:t,totalDifficulty:a.totalDifficulty?BigInt(a.totalDifficulty):null}}var dC=Ps("block",lI);async function li(a,{blockHash:t,blockNumber:e,blockTag:i,includeTransactions:n}={}){let r=i??"latest",s=n??!1,o=e!==void 0?xe(e):void 0,l=null;if(t?l=await a.request({method:"eth_getBlockByHash",params:[t,s]},{dedupe:!0}):l=await a.request({method:"eth_getBlockByNumber",params:[o||r,s]},{dedupe:!!o}),!l)throw new Hs({blockHash:t,blockNumber:e});return(a.chain?.formatters?.block?.format||lI)(l)}async function Us(a){let t=await a.request({method:"eth_gasPrice"});return BigInt(t)}async function fC(a,t){return cI(a,t)}async function cI(a,t){let{block:e,chain:i=a.chain,request:n}=t||{};try{let r=i?.fees?.maxPriorityFeePerGas??i?.fees?.defaultPriorityFee;if(typeof r=="function"){let o=e||await ge(a,li,"getBlock")({}),l=await r({block:o,client:a,request:n});if(l===null)throw new Error;return l}if(typeof r<"u")return r;let s=await a.request({method:"eth_maxPriorityFeePerGas"});return Nt(s)}catch{let[r,s]=await Promise.all([e?Promise.resolve(e):ge(a,li,"getBlock")({}),ge(a,Us,"getGasPrice")({})]);if(typeof r.baseFeePerGas!="bigint")throw new Pn;let o=s-r.baseFeePerGas;return o<0n?0n:o}}async function yC(a,t){return Dp(a,t)}async function Dp(a,t){let{block:e,chain:i=a.chain,request:n,type:r="eip1559"}=t||{},s=await(async()=>typeof i?.fees?.baseFeeMultiplier=="function"?i.fees.baseFeeMultiplier({block:e,client:a,request:n}):i?.fees?.baseFeeMultiplier??1.2)();if(s<1)throw new Cp;let l=10**(s.toString().split(".")[1]?.length??0),c=d=>d*BigInt(Math.ceil(s*l))/BigInt(l),u=e||await ge(a,li,"getBlock")({});if(typeof i?.fees?.estimateFeesPerGas=="function"){let d=await i.fees.estimateFeesPerGas({block:e,client:a,multiply:c,request:n,type:r});if(d!==null)return d}if(r==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new Pn;let d=typeof n?.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:await cI(a,{block:u,chain:i,request:n}),L=c(u.baseFeePerGas);return{maxFeePerGas:n?.maxFeePerGas??L+d,maxPriorityFeePerGas:d}}return{gasPrice:n?.gasPrice??c(await ge(a,Us,"getGasPrice")({}))}}ai();Ue();async function Ap(a,{address:t,blockTag:e="latest",blockNumber:i}){let n=await a.request({method:"eth_getTransactionCount",params:[t,i?xe(i):e]},{dedupe:!!i});return Ot(n)}jt();Ue();function Vs(a){let{kzg:t}=a,e=a.to??(typeof a.blobs[0]=="string"?"hex":"bytes"),i=typeof a.blobs[0]=="string"?a.blobs.map(r=>Vt(r)):a.blobs,n=[];for(let r of i)n.push(Uint8Array.from(t.blobToKzgCommitment(r)));return e==="bytes"?n:n.map(r=>et(r))}jt();Ue();function Fs(a){let{kzg:t}=a,e=a.to??(typeof a.blobs[0]=="string"?"hex":"bytes"),i=typeof a.blobs[0]=="string"?a.blobs.map(s=>Vt(s)):a.blobs,n=typeof a.commitments[0]=="string"?a.commitments.map(s=>Vt(s)):a.commitments,r=[];for(let s=0;s<i.length;s++){let o=i[s],l=n[s];r.push(Uint8Array.from(t.computeBlobKzgProof(o,l)))}return e==="bytes"?r:r.map(s=>et(s))}Ue();H0();$i();jt();Ue();function bC(a,t){let e=t||"hex",i=dr(At(a,{strict:!1})?ki(a):a);return e==="bytes"?i:Ce(i)}function gC(a){let{commitment:t,version:e=1}=a,i=a.to??(typeof t=="string"?"hex":"bytes"),n=bC(t,"bytes");return n.set([e],0),i==="bytes"?n:et(n)}function kp(a){let{commitments:t,version:e}=a,i=a.to??(typeof t[0]=="string"?"hex":"bytes"),n=[];for(let r of t)n.push(gC({commitment:r,to:i,version:e}));return n}Ye();var Bp=class extends G{constructor({maxSize:t,size:e}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${e} bytes`],name:"BlobSizeTooLargeError"})}},Gs=class extends G{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}},Mp=class extends G{constructor({hash:t,size:e}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${e}`],name:"InvalidVersionedHashSizeError"})}},Rp=class extends G{constructor({hash:t,version:e}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${1}`,`Received: ${e}`],name:"InvalidVersionedHashVersionError"})}};Km();Xi();jt();Ue();function LC(a){let t=a.to??(typeof a.data=="string"?"hex":"bytes"),e=typeof a.data=="string"?Vt(a.data):a.data,i=st(e);if(!i)throw new Gs;if(i>761855)throw new Bp({maxSize:761855,size:i});let n=[],r=!0,s=0;for(;r;){let o=is(new Uint8Array(131072)),l=0;for(;l<4096;){let c=e.slice(s,s+(32-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),r=!1;break}l++,s+=31}n.push(o)}return t==="bytes"?n.map(o=>o.bytes):n.map(o=>et(o.bytes))}function Pp(a){let{data:t,kzg:e,to:i}=a,n=a.blobs??LC({data:t,to:i}),r=a.commitments??Vs({blobs:n,kzg:e,to:i}),s=a.proofs??Fs({blobs:n,commitments:r,kzg:e,to:i}),o=[];for(let l=0;l<n.length;l++)o.push({blob:n[l],commitment:r[l],proof:s[l]});return o}Os();ia();function Np(a){if(a.type)return a.type;if(typeof a.authorizationList<"u")return"eip7702";if(typeof a.blobs<"u"||typeof a.blobVersionedHashes<"u"||typeof a.maxFeePerBlobGas<"u"||typeof a.sidecars<"u")return"eip4844";if(typeof a.maxFeePerGas<"u"||typeof a.maxPriorityFeePerGas<"u")return"eip1559";if(typeof a.gasPrice<"u")return typeof a.accessList<"u"?"eip2930":"legacy";throw new ep({transaction:a})}ai();async function Sa(a){let t=await a.request({method:"eth_chainId"},{dedupe:!0});return Ot(t)}var uI=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function Nn(a,t){let{account:e=a.account,blobs:i,chain:n,gas:r,kzg:s,nonce:o,nonceManager:l,parameters:c=uI,type:u}=t,p=e&&_t(e),d={...t,...p?{from:p?.address}:{}},L;async function v(){return L||(L=await ge(a,li,"getBlock")({blockTag:"latest"}),L)}let E;async function w(){return E||(n?n.id:typeof t.chainId<"u"?t.chainId:(E=await ge(a,Sa,"getChainId")({}),E))}if((c.includes("blobVersionedHashes")||c.includes("sidecars"))&&i&&s){let R=Vs({blobs:i,kzg:s});if(c.includes("blobVersionedHashes")){let U=kp({commitments:R,to:"hex"});d.blobVersionedHashes=U}if(c.includes("sidecars")){let U=Fs({blobs:i,commitments:R,kzg:s}),V=Pp({blobs:i,commitments:R,proofs:U,to:"hex"});d.sidecars=V}}if(c.includes("chainId")&&(d.chainId=await w()),c.includes("nonce")&&typeof o>"u"&&p)if(l){let R=await w();d.nonce=await l.consume({address:p.address,chainId:R,client:a})}else d.nonce=await ge(a,Ap,"getTransactionCount")({address:p.address,blockTag:"pending"});if((c.includes("fees")||c.includes("type"))&&typeof u>"u")try{d.type=Np(d)}catch{let R=await v();d.type=typeof R?.baseFeePerGas=="bigint"?"eip1559":"legacy"}if(c.includes("fees"))if(d.type!=="legacy"&&d.type!=="eip2930"){if(typeof d.maxFeePerGas>"u"||typeof d.maxPriorityFeePerGas>"u"){let R=await v(),{maxFeePerGas:U,maxPriorityFeePerGas:V}=await Dp(a,{block:R,chain:n,request:d});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<V)throw new Sp({maxPriorityFeePerGas:V});d.maxPriorityFeePerGas=V,d.maxFeePerGas=U}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Pn;let R=await v(),{gasPrice:U}=await Dp(a,{block:R,chain:n,request:d,type:"legacy"});d.gasPrice=U}return c.includes("gas")&&typeof r>"u"&&(d.gas=await ge(a,Ks,"estimateGas")({...d,account:p&&{address:p.address,type:"json-rpc"}})),Ca(d),delete d.parameters,d}Ue();async function Op(a,{address:t,blockNumber:e,blockTag:i="latest"}){let n=e?xe(e):void 0,r=await a.request({method:"eth_getBalance",params:[t,n||i]});return BigInt(r)}async function Ks(a,t){let{account:e=a.account}=t,i=e?_t(e):void 0;try{let $=function(ye){let{block:Te,request:we,rpcStateOverride:O}=ye;return a.request({method:"eth_estimateGas",params:O?[we,Te??"latest",O]:Te?[we,Te]:[we]})};var n=$;let{accessList:r,authorizationList:s,blobs:o,blobVersionedHashes:l,blockNumber:c,blockTag:u,data:p,gas:d,gasPrice:L,maxFeePerBlobGas:v,maxFeePerGas:E,maxPriorityFeePerGas:w,nonce:R,value:U,stateOverride:V,...q}=await Nn(a,{...t,parameters:i?.type==="local"?void 0:["blobVersionedHashes"]}),ee=(c?xe(c):void 0)||u,X=Tp(V),re=await(async()=>{if(q.to)return q.to;if(s&&s.length>0)return await vp({authorization:s[0]}).catch(()=>{throw new G("`to` is required. Could not infer from `authorizationList`")})})();Ca(t);let oe=a.chain?.formatters?.transactionRequest?.format,ke=(oe||Rn)({...Rs(q,{format:oe}),from:i?.address,accessList:r,authorizationList:s,blobs:o,blobVersionedHashes:l,data:p,gas:d,gasPrice:L,maxFeePerBlobGas:v,maxFeePerGas:E,maxPriorityFeePerGas:w,nonce:R,to:re,value:U}),lt=BigInt(await $({block:ee,request:ke,rpcStateOverride:X}));if(s){let ye=await Op(a,{address:ke.from}),Te=await Promise.all(s.map(async we=>{let{contractAddress:O}=we,Xe=await $({block:ee,request:{authorizationList:void 0,data:p,from:i?.address,to:O,value:xe(ye)},rpcStateOverride:X}).catch(()=>100000n);return 2n*BigInt(Xe)}));lt+=Te.reduce((we,O)=>we+O,0n)}return lt}catch(r){throw mC(r,{...t,account:i,chain:a.chain})}}async function _C(a,t){let{abi:e,address:i,args:n,functionName:r,...s}=t,o=Ft({abi:e,args:n,functionName:r});try{return await ge(a,Ks,"estimateGas")({data:o,to:i,...s})}catch(l){let c=s.account?_t(s.account):void 0;throw aa(l,{abi:e,address:i,args:n,docsPath:"/docs/contract/estimateContractGas",functionName:r,sender:c?.address})}}es();zt();el();jt();Bi();Oo();zt();Xi();Oo();B0();qm();ar();var vC="/docs/contract/decodeEventLog";function qs(a){let{abi:t,data:e,strict:i,topics:n}=a,r=i??!0,[s,...o]=n;if(!s)throw new hm({docsPath:vC});let l=(()=>t.length===1?t[0]:t.find(E=>E.type==="event"&&s===xn(mi(E))))();if(!(l&&"name"in l)||l.type!=="event")throw new Qr(s,{docsPath:vC});let{name:c,inputs:u}=l,p=u?.some(E=>!("name"in E&&E.name)),d=p?[]:{},L=u.filter(E=>"indexed"in E&&E.indexed);for(let E=0;E<L.length;E++){let w=L[E],R=o[E];if(!R)throw new fa({abiItem:l,param:w});d[p?E:w.name||E]=hk({param:w,value:R})}let v=u.filter(E=>!("indexed"in E&&E.indexed));if(v.length>0){if(e&&e!=="0x")try{let E=lr(v,e);if(E)if(p)d=[...d,...E];else for(let w=0;w<v.length;w++)d[v[w].name]=E[w]}catch(E){if(r)throw E instanceof $r||E instanceof ts?new Qi({abiItem:l,data:e,params:v,size:st(e)}):E}else if(r)throw new Qi({abiItem:l,data:"0x",params:v,size:0})}return{eventName:c,args:Object.values(d).length>0?d:void 0}}function hk({param:a,value:t}){return a.type==="string"||a.type==="bytes"||a.type==="tuple"||a.type.match(/^(.*)\[(\d+)?\]$/)?t:(lr([a],t)||[])[0]}function Ws(a){let{abi:t,args:e,logs:i,strict:n=!0}=a,r=(()=>{if(a.eventName)return Array.isArray(a.eventName)?a.eventName:[a.eventName]})();return i.map(s=>{try{let o=t.find(c=>c.type==="event"&&s.topics[0]===xn(c));if(!o)return null;let l=qs({...s,abi:[o],strict:n});return r&&!r.includes(l.eventName)||!dk({args:l.args,inputs:o.inputs,matchArgs:e})?null:{...l,...s}}catch(o){let l,c;if(o instanceof Qr)return null;if(o instanceof Qi||o instanceof fa){if(n)return null;l=o.abiItem.name,c=o.abiItem.inputs?.some(u=>!("name"in u&&u.name))}return{...s,args:c?[]:{},eventName:l}}}).filter(Boolean)}function dk(a){let{args:t,inputs:e,matchArgs:i}=a;if(!i)return!0;if(!t)return!1;function n(r,s,o){try{return r.type==="address"?On(s,o):r.type==="string"||r.type==="bytes"?ht(ki(s))===o:s===o}catch{return!1}}return Array.isArray(t)&&Array.isArray(i)?i.every((r,s)=>{if(r==null)return!0;let o=e[s];return o?(Array.isArray(r)?r:[r]).some(c=>n(o,c,t[s])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof i=="object"&&!Array.isArray(i)?Object.entries(i).every(([r,s])=>{if(s==null)return!0;let o=e.find(c=>c.name===r);return o?(Array.isArray(s)?s:[s]).some(c=>n(o,c,t[r])):!1}):!1}Ue();function vi(a,{args:t,eventName:e}={}){return{...a,blockHash:a.blockHash?a.blockHash:null,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,logIndex:a.logIndex?Number(a.logIndex):null,transactionHash:a.transactionHash?a.transactionHash:null,transactionIndex:a.transactionIndex?Number(a.transactionIndex):null,...e?{args:t,eventName:e}:{}}}async function Ys(a,{address:t,blockHash:e,fromBlock:i,toBlock:n,event:r,events:s,args:o,strict:l}={}){let c=l??!1,u=s??(r?[r]:void 0),p=[];u&&(p=[u.flatMap(E=>La({abi:[E],eventName:E.name,args:s?void 0:o}))],r&&(p=p[0]));let d;e?d=await a.request({method:"eth_getLogs",params:[{address:t,topics:p,blockHash:e}]}):d=await a.request({method:"eth_getLogs",params:[{address:t,topics:p,fromBlock:typeof i=="bigint"?xe(i):i,toBlock:typeof n=="bigint"?xe(n):n}]});let L=d.map(v=>vi(v));return u?Ws({abi:u,args:o,logs:L,strict:c}):L}async function Hp(a,t){let{abi:e,address:i,args:n,blockHash:r,eventName:s,fromBlock:o,toBlock:l,strict:c}=t,u=s?ga({abi:e,name:s}):void 0,p=u?void 0:e.filter(d=>d.type==="event");return ge(a,Ys,"getLogs")({address:i,args:n,blockHash:r,event:u,events:p,fromBlock:o,toBlock:l,strict:c})}Ir();_a();zs();async function Zt(a,t){let{abi:e,address:i,args:n,functionName:r,...s}=t,o=Ft({abi:e,args:n,functionName:r});try{let{data:l}=await ge(a,Da,"call")({...s,data:o,to:i});return Oi({abi:e,args:n,functionName:r,data:l||"0x"})}catch(l){throw aa(l,{abi:e,address:i,args:n,docsPath:"/docs/contract/readContract",functionName:r})}}Li();Ir();_a();zs();async function NC(a,t){let{abi:e,address:i,args:n,dataSuffix:r,functionName:s,...o}=t,l=o.account?_t(o.account):a.account,c=Ft({abi:e,args:n,functionName:s});try{let{data:u}=await ge(a,Da,"call")({batch:!1,data:`${c}${r?r.replace("0x",""):""}`,to:i,...o,account:l}),p=Oi({abi:e,args:n,functionName:s,data:u||"0x"}),d=e.filter(L=>"name"in L&&L.name===t.functionName);return{result:p,request:{abi:d,address:i,args:n,dataSuffix:r,functionName:s,...o,account:l}}}catch(u){throw aa(u,{abi:e,address:i,args:n,docsPath:"/docs/contract/simulateContract",functionName:s,sender:l?.address})}}zt();Wo();var _I=new Map,OC=new Map,xk=0;function xi(a,t,e){let i=++xk,n=()=>_I.get(a)||[],r=()=>{let u=n();_I.set(a,u.filter(p=>p.id!==i))},s=()=>{let u=OC.get(a);n().length===1&&u&&u(),r()},o=n();if(_I.set(a,[...o,{id:i,fns:t}]),o&&o.length>0)return s;let l={};for(let u in t)l[u]=(...p)=>{let d=n();if(d.length!==0)for(let L of d)L.fns[u]?.(...p)};let c=e(l);return typeof c=="function"&&OC.set(a,c),s}async function nl(a){return new Promise(t=>setTimeout(t,a))}function Aa(a,{emitOnBegin:t,initialWaitTime:e,interval:i}){let n=!0,r=()=>n=!1;return(async()=>{let o;t&&(o=await a({unpoll:r}));let l=await e?.(o)??i;await nl(l);let c=async()=>{n&&(await a({unpoll:r}),await nl(i),c())};c()})(),r}hi();var Ik=new Map,Ek=new Map;function HC(a){let t=(n,r)=>({clear:()=>r.delete(n),get:()=>r.get(n),set:s=>r.set(n,s)}),e=t(a,Ik),i=t(a,Ek);return{clear:()=>{e.clear(),i.clear()},promise:e,response:i}}async function UC(a,{cacheKey:t,cacheTime:e=Number.POSITIVE_INFINITY}){let i=HC(t),n=i.response.get();if(n&&e>0&&new Date().getTime()-n.created.getTime()<e)return n.data;let r=i.promise.get();r||(r=a(),i.promise.set(r));try{let s=await r;return i.response.set({created:new Date,data:s}),s}finally{i.promise.clear()}}var wk=a=>`blockNumber.${a}`;async function ka(a,{cacheTime:t=a.cacheTime}={}){let e=await UC(()=>a.request({method:"eth_blockNumber"}),{cacheKey:wk(a.uid),cacheTime:t});return BigInt(e)}async function Hn(a,{filter:t}){let e="strict"in t&&t.strict,i=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof i[0]=="string")return i;let n=i.map(r=>vi(r));return!("abi"in t)||!t.abi?n:Ws({abi:t.abi,logs:n,strict:e})}async function Un(a,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function VC(a,t){let{abi:e,address:i,args:n,batch:r=!0,eventName:s,fromBlock:o,onError:l,onLogs:c,poll:u,pollingInterval:p=a.pollingInterval,strict:d}=t;return(()=>typeof u<"u"?u:typeof o=="bigint"?!0:!(a.transport.type==="webSocket"||a.transport.type==="fallback"&&a.transport.transports[0].config.type==="webSocket"))()?(()=>{let w=d??!1,R=tt(["watchContractEvent",i,n,r,a.uid,s,p,w,o]);return xi(R,{onLogs:c,onError:l},U=>{let V;o!==void 0&&(V=o-1n);let q,te=!1,ee=Aa(async()=>{if(!te){try{q=await ge(a,Um,"createContractEventFilter")({abi:e,address:i,args:n,eventName:s,strict:w,fromBlock:o})}catch{}te=!0;return}try{let X;if(q)X=await ge(a,Hn,"getFilterChanges")({filter:q});else{let re=await ge(a,ka,"getBlockNumber")({});V&&V<re?X=await ge(a,Hp,"getContractEvents")({abi:e,address:i,args:n,eventName:s,fromBlock:V+1n,toBlock:re,strict:w}):X=[],V=re}if(X.length===0)return;if(r)U.onLogs(X);else for(let re of X)U.onLogs([re])}catch(X){q&&X instanceof xa&&(te=!1),U.onError?.(X)}},{emitOnBegin:!0,interval:p});return async()=>{q&&await ge(a,Un,"uninstallFilter")({filter:q}),ee()}})})():(()=>{let w=d??!1,R=tt(["watchContractEvent",i,n,r,a.uid,s,p,w]),U=!0,V=()=>U=!1;return xi(R,{onLogs:c,onError:l},q=>((async()=>{try{let te=(()=>{if(a.transport.type==="fallback"){let re=a.transport.transports.find(oe=>oe.config.type==="webSocket");return re?re.value:a.transport}return a.transport})(),ee=s?La({abi:e,eventName:s,args:n}):[],{unsubscribe:X}=await te.subscribe({params:["logs",{address:i,topics:ee}],onData(re){if(!U)return;let oe=re.result;try{let{eventName:Ve,args:ke}=qs({abi:e,data:oe.data,topics:oe.topics,strict:d}),$=vi(oe,{args:ke,eventName:Ve});q.onLogs([$])}catch(Ve){let ke,$;if(Ve instanceof Qi||Ve instanceof fa){if(d)return;ke=Ve.abiItem.name,$=Ve.abiItem.inputs?.some(ye=>!("name"in ye&&ye.name))}let lt=vi(oe,{args:$?[]:{},eventName:ke});q.onLogs([lt])}},onError(re){q.onError?.(re)}});V=X,U||V()}catch(te){l?.(te)}})(),()=>V()))})()}Li();Ye();var Ui=class extends G{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}},js=class extends G{constructor({docsPath:t,metaMessages:e,type:i}){super(`Account type "${i}" is not supported.`,{docsPath:t,metaMessages:e,name:"AccountTypeNotSupportedError"})}};_a();Li();Ye();al();function jp({chain:a,currentChainId:t}){if(!a)throw new Fp;if(t!==a.id)throw new Vp({chain:a,currentChainId:t})}vr();ia();Ip();function FC(a,{docsPath:t,...e}){let i=(()=>{let n=Ms(a,e);return n instanceof Ta?a:n})();return new ip(i,{docsPath:t,...e})}Ep();Zo();Ho();Os();async function $s(a,{serializedTransaction:t}){return a.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}var vI=new ba(128);async function Xs(a,t){let{account:e=a.account,chain:i=a.chain,accessList:n,authorizationList:r,blobs:s,data:o,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:p,maxPriorityFeePerGas:d,nonce:L,value:v,...E}=t;if(typeof e>"u")throw new Ui({docsPath:"/docs/actions/wallet/sendTransaction"});let w=e?_t(e):null;try{Ca(t);let R=await(async()=>{if(t.to)return t.to;if(r&&r.length>0)return await vp({authorization:r[0]}).catch(()=>{throw new G("`to` is required. Could not infer from `authorizationList`.")})})();if(w?.type==="json-rpc"||w===null){let U;i!==null&&(U=await ge(a,Sa,"getChainId")({}),jp({currentChainId:U,chain:i}));let V=a.chain?.formatters?.transactionRequest?.format,te=(V||Rn)({...Rs(E,{format:V}),accessList:n,authorizationList:r,blobs:s,chainId:U,data:o,from:w?.address,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:p,maxPriorityFeePerGas:d,nonce:L,to:R,value:v}),ee=vI.get(a.uid),X=ee?"wallet_sendTransaction":"eth_sendTransaction";try{return await a.request({method:X,params:[te]},{retryCount:0})}catch(re){if(ee===!1)throw re;let oe=re;if(oe.name==="InvalidInputRpcError"||oe.name==="InvalidParamsRpcError"||oe.name==="MethodNotFoundRpcError"||oe.name==="MethodNotSupportedRpcError")return await a.request({method:"wallet_sendTransaction",params:[te]},{retryCount:0}).then(Ve=>(vI.set(a.uid,!0),Ve)).catch(Ve=>{let ke=Ve;throw ke.name==="MethodNotFoundRpcError"||ke.name==="MethodNotSupportedRpcError"?(vI.set(a.uid,!1),oe):ke});throw oe}}if(w?.type==="local"){let U=await ge(a,Nn,"prepareTransactionRequest")({account:w,accessList:n,authorizationList:r,blobs:s,chain:i,data:o,gas:l,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:p,maxPriorityFeePerGas:d,nonce:L,nonceManager:w.nonceManager,parameters:[...uI,"sidecars"],value:v,...E,to:R}),V=i?.serializers?.transaction,q=await w.signTransaction(U,{serializer:V});return await ge(a,$s,"sendRawTransaction")({serializedTransaction:q})}throw w?.type==="smart"?new js({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new js({docsPath:"/docs/actions/wallet/sendTransaction",type:w?.type})}catch(R){throw R instanceof js?R:FC(R,{...t,account:w,chain:t.chain||void 0})}}async function GC(a,t){let{abi:e,account:i=a.account,address:n,args:r,dataSuffix:s,functionName:o,...l}=t;if(typeof i>"u")throw new Ui({docsPath:"/docs/contract/writeContract"});let c=i?_t(i):null,u=Ft({abi:e,args:r,functionName:o});try{return await ge(a,Xs,"sendTransaction")({data:`${u}${s?s.replace("0x",""):""}`,to:n,account:c,...l})}catch(p){throw aa(p,{abi:e,address:n,args:r,docsPath:"/docs/contract/writeContract",functionName:o,sender:c?.address})}}Ye();var $p=class extends G{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}};async function KC(a,t){let{address:e,factory:i,factoryData:n}=t;try{let[r,s,o,l,c,u,p]=await ge(a,Zt,"readContract")({abi:Tk,address:e,functionName:"eip712Domain",factory:i,factoryData:n});return{domain:{name:s,version:o,chainId:Number(l),verifyingContract:c,salt:u},extensions:p,fields:r}}catch(r){let s=r;throw s.name==="ContractFunctionExecutionError"&&s.cause.name==="ContractFunctionZeroDataError"?new $p({address:e}):s}}var Tk=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];Ue();async function qC(a,{chain:t}){let{id:e,name:i,nativeCurrency:n,rpcUrls:r,blockExplorers:s}=t;await a.request({method:"wallet_addEthereumChain",params:[{chainId:xe(e),chainName:i,nativeCurrency:n,rpcUrls:r.default.http,blockExplorerUrls:s?Object.values(s).map(({url:o})=>o):void 0}]},{dedupe:!0,retryCount:0})}Li();var Xp=256,Qp;function Jp(a=11){if(!Qp||Xp+a>256*2){Qp="",Xp=0;for(let t=0;t<256;t++)Qp+=(256+Math.random()*256|0).toString(16).substring(1)}return Qp.substring(Xp,Xp+++a)}function Zp(a){let{batch:t,cacheTime:e=a.pollingInterval??4e3,ccipRead:i,key:n="base",name:r="Base Client",pollingInterval:s=4e3,type:o="base"}=a,l=a.chain,c=a.account?_t(a.account):void 0,{config:u,request:p,value:d}=a.transport({chain:l,pollingInterval:s}),L={...u,...d},v={account:c,batch:t,cacheTime:e,ccipRead:i,chain:l,key:n,name:r,pollingInterval:s,request:p,transport:L,type:o,uid:Jp()};function E(w){return R=>{let U=R(w);for(let q in v)delete U[q];let V={...w,...U};return Object.assign(V,{extend:E(V)})}}return Object.assign(v,{extend:E(v)})}Ye();cs();Wo();Ue();Bi();Ho();var eh=new ba(8192);function WC(a,{enabled:t=!0,id:e}){if(!t||!e)return a();if(eh.get(e))return eh.get(e);let i=a().finally(()=>eh.delete(e));return eh.set(e,i),i}function rl(a,{delay:t=100,retryCount:e=2,shouldRetry:i=()=>!0}={}){return new Promise((n,r)=>{let s=async({count:o=0}={})=>{let l=async({error:c})=>{let u=typeof t=="function"?t({count:o,error:c}):t;u&&await nl(u),s({count:o+1})};try{let c=await a();n(c)}catch(c){if(o<e&&await i({count:o,error:c}))return l({error:c});r(c)}};s()})}hi();function YC(a,t={}){return async(e,i={})=>{let{dedupe:n=!1,retryDelay:r=150,retryCount:s=3,uid:o}={...t,...i},l=n?ht(Ji(`${o}.${tt(e)}`)):void 0;return WC(()=>rl(async()=>{try{return await a(e)}catch(c){let u=c;switch(u.code){case us.code:throw new us(u);case ms.code:throw new ms(u);case ps.code:throw new ps(u,{method:e.method});case hs.code:throw new hs(u);case Xa.code:throw new Xa(u);case xa.code:throw new xa(u);case ds.code:throw new ds(u);case fs.code:throw new fs(u);case ys.code:throw new ys(u);case bs.code:throw new bs(u,{method:e.method});case pr.code:throw new pr(u);case gs.code:throw new gs(u);case hr.code:throw new hr(u);case Ls.code:throw new Ls(u);case _s.code:throw new _s(u);case vs.code:throw new vs(u);case xs.code:throw new xs(u);case Is.code:throw new Is(u);case 5e3:throw new hr(u);default:throw c instanceof G?c:new rp(u)}}},{delay:({count:c,error:u})=>{if(u&&u instanceof Ri){let p=u?.headers?.get("Retry-After");if(p?.match(/\d/))return Number.parseInt(p)*1e3}return~~(1<<c)*r},retryCount:s,shouldRetry:({error:c})=>Ck(c)}),{enabled:n,id:l})}}function Ck(a){return"code"in a&&typeof a.code=="number"?a.code===-1||a.code===pr.code||a.code===Xa.code:a instanceof Ri&&a.status?a.status===403||a.status===408||a.status===413||a.status===429||a.status===500||a.status===502||a.status===503||a.status===504:!0}function th({key:a,name:t,request:e,retryCount:i=3,retryDelay:n=150,timeout:r,type:s},o){let l=Jp();return{config:{key:a,name:t,request:e,retryCount:i,retryDelay:n,timeout:r,type:s},request:YC(e,{retryCount:i,retryDelay:n,uid:l}),value:o}}function Qs(a,t={}){let{key:e="custom",name:i="Custom Provider",retryDelay:n}=t;return({retryCount:r})=>th({key:e,name:i,request:a.request.bind(a),retryCount:t.retryCount??r,retryDelay:n,type:"custom"})}cs();Ye();var ih=class extends G{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}};LI();cs();function zC(a,{errorInstance:t=new Error("timed out"),timeout:e,signal:i}){return new Promise((n,r)=>{(async()=>{let s;try{let o=new AbortController;e>0&&(s=setTimeout(()=>{i?o.abort():r(t)},e)),n(await a({signal:o?.signal||null}))}catch(o){o?.name==="AbortError"&&r(t),r(o)}finally{clearTimeout(s)}})()})}hi();function Sk(){return{current:0,take(){return this.current++},reset(){this.current=0}}}var xI=Sk();function jC(a,t={}){return{async request(e){let{body:i,onRequest:n=t.onRequest,onResponse:r=t.onResponse,timeout:s=t.timeout??1e4}=e,o={...t.fetchOptions??{},...e.fetchOptions??{}},{headers:l,method:c,signal:u}=o;try{let p=await zC(async({signal:L})=>{let v={...o,body:Array.isArray(i)?tt(i.map(U=>({jsonrpc:"2.0",id:U.id??xI.take(),...U}))):tt({jsonrpc:"2.0",id:i.id??xI.take(),...i}),headers:{"Content-Type":"application/json",...l},method:c||"POST",signal:u||(s>0?L:null)},E=new Request(a,v),w=await n?.(E,v)??{...v,url:a};return await fetch(w.url??a,w)},{errorInstance:new qo({body:i,url:a}),timeout:s,signal:!0});r&&await r(p);let d;if(p.headers.get("Content-Type")?.startsWith("application/json"))d=await p.json();else{d=await p.text();try{d=JSON.parse(d||"{}")}catch(L){if(p.ok)throw L;d={error:d}}}if(!p.ok)throw new Ri({body:i,details:tt(d.error)||p.statusText,headers:p.headers,status:p.status,url:a});return d}catch(p){throw p instanceof Ri||p instanceof qo?p:new Ri({body:i,cause:p,url:a})}}}}function sl(a,t={}){let{batch:e,fetchOptions:i,key:n="http",name:r="HTTP JSON-RPC",onFetchRequest:s,onFetchResponse:o,retryDelay:l}=t;return({chain:c,retryCount:u,timeout:p})=>{let{batchSize:d=1e3,wait:L=0}=typeof e=="object"?e:{},v=t.retryCount??u,E=p??t.timeout??1e4,w=a||c?.rpcUrls.default.http[0];if(!w)throw new ih;let R=jC(w,{fetchOptions:i,onRequest:s,onResponse:o,timeout:E});return th({key:n,name:r,async request({method:U,params:V}){let q={method:U,params:V},{schedule:te}=qp({id:w,wait:L,shouldSplitBatch(oe){return oe.length>d},fn:oe=>R.request({body:oe}),sort:(oe,Ve)=>oe.id-Ve.id}),ee=async oe=>e?te(oe):[await R.request({body:oe})],[{error:X,result:re}]=await ee(q);if(X)throw new ls({body:q,error:X,url:w});return re},retryCount:v,retryDelay:l,timeout:E,type:"http"},{fetchOptions:i,url:w})}}Er();Ir();_a();Sr();Jr();Ue();Fm();Ye();wn();function Js(a,t){if(!(a instanceof G))return!1;let e=a.walk(i=>i instanceof Jt);return e instanceof Jt?!!(e.data?.errorName==="ResolverNotFound"||e.data?.errorName==="ResolverWildcardNotSupported"||e.data?.errorName==="ResolverNotContract"||e.data?.errorName==="ResolverError"||e.data?.errorName==="HttpError"||e.reason?.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&e.reason===Vm[50]):!1}Mi();jt();Ue();Bi();$i();function ah(a){if(a.length!==66||a.indexOf("[")!==0||a.indexOf("]")!==65)return null;let t=`0x${a.slice(1,65)}`;return At(t)?t:null}function Zs(a){let t=new Uint8Array(32).fill(0);if(!a)return et(t);let e=a.split(".");for(let i=e.length-1;i>=0;i-=1){let n=ah(e[i]),r=n?ki(n):ht(Zi(e[i]),"bytes");t=ht(pi([t,r]),"bytes")}return et(t)}jt();function $C(a){return`[${a.slice(2)}]`}jt();Ue();Bi();function XC(a){let t=new Uint8Array(32).fill(0);return a?ah(a)||ht(Zi(a)):et(t)}function Vn(a){let t=a.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);let e=new Uint8Array(Zi(t).byteLength+2),i=0,n=t.split(".");for(let r=0;r<n.length;r++){let s=Zi(n[r]);s.byteLength>255&&(s=Zi($C(XC(n[r])))),e[i]=s.length,e.set(s,i+1),i+=s.length+1}return e.byteLength!==i+1?e.slice(0,i+1):e}async function QC(a,{blockNumber:t,blockTag:e,coinType:i,name:n,gatewayUrls:r,strict:s,universalResolverAddress:o}){let l=o;if(!l){if(!a.chain)throw new Error("client chain not configured. universalResolverAddress is required.");l=Hi({blockNumber:t,chain:a.chain,contract:"ensUniversalResolver"})}try{let c=Ft({abi:hI,functionName:"addr",...i!=null?{args:[Zs(n),BigInt(i)]}:{args:[Zs(n)]}}),u={address:l,abi:Up,functionName:"resolve",args:[Ce(Vn(n)),c],blockNumber:t,blockTag:e},p=ge(a,Zt,"readContract"),d=r?await p({...u,args:[...u.args,r]}):await p(u);if(d[0]==="0x")return null;let L=Oi({abi:hI,args:i!=null?[Zs(n),BigInt(i)]:void 0,functionName:"addr",data:d[0]});return L==="0x"||ii(L)==="0x00"?null:L}catch(c){if(s)throw c;if(Js(c,"resolve"))return null;throw c}}Ye();var nh=class extends G{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}},Fn=class extends G{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}},eo=class extends G{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}},rh=class extends G{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}};var Dk=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Ak=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,kk=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Bk=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Mk(a){try{let t=await fetch(a,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(e=>{let i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=a})}}function JC(a,t){return a?a.endsWith("/")?a.slice(0,-1):a:t}function II({uri:a,gatewayUrls:t}){let e=kk.test(a);if(e)return{uri:a,isOnChain:!0,isEncoded:e};let i=JC(t?.ipfs,"https://ipfs.io"),n=JC(t?.arweave,"https://arweave.net"),r=a.match(Dk),{protocol:s,subpath:o,target:l,subtarget:c=""}=r?.groups||{},u=s==="ipns:/"||o==="ipns/",p=s==="ipfs:/"||o==="ipfs/"||Ak.test(a);if(a.startsWith("http")&&!u&&!p){let L=a;return t?.arweave&&(L=a.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:L,isOnChain:!1,isEncoded:!1}}if((u||p)&&l)return{uri:`${i}/${u?"ipns":"ipfs"}/${l}${c}`,isOnChain:!1,isEncoded:!1};if(s==="ar:/"&&l)return{uri:`${n}/${l}${c||""}`,isOnChain:!1,isEncoded:!1};let d=a.replace(Bk,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new eo({uri:a})}function EI(a){if(typeof a!="object"||!("image"in a)&&!("image_url"in a)&&!("image_data"in a))throw new nh({data:a});return a.image||a.image_url||a.image_data}async function ZC({gatewayUrls:a,uri:t}){try{let e=await fetch(t).then(n=>n.json());return await sh({gatewayUrls:a,uri:EI(e)})}catch{throw new eo({uri:t})}}async function sh({gatewayUrls:a,uri:t}){let{uri:e,isOnChain:i}=II({uri:t,gatewayUrls:a});if(i||await Mk(e))return e;throw new eo({uri:t})}function e1(a){let t=a;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[e,i,n]=t.split("/"),[r,s]=e.split(":"),[o,l]=i.split(":");if(!r||r.toLowerCase()!=="eip155")throw new Fn({reason:"Only EIP-155 supported"});if(!s)throw new Fn({reason:"Chain ID not found"});if(!l)throw new Fn({reason:"Contract address not found"});if(!n)throw new Fn({reason:"Token ID not found"});if(!o)throw new Fn({reason:"ERC namespace not found"});return{chainID:Number.parseInt(s),namespace:o.toLowerCase(),contractAddress:l,tokenID:n}}async function t1(a,{nft:t}){if(t.namespace==="erc721")return Zt(a,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Zt(a,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new rh({namespace:t.namespace})}async function i1(a,{gatewayUrls:t,record:e}){return/eip155:/i.test(e)?Rk(a,{gatewayUrls:t,record:e}):sh({uri:e,gatewayUrls:t})}async function Rk(a,{gatewayUrls:t,record:e}){let i=e1(e),n=await t1(a,{nft:i}),{uri:r,isOnChain:s,isEncoded:o}=II({uri:n,gatewayUrls:t});if(s&&(r.includes("data:application/json;base64,")||r.startsWith("{"))){let c=o?atob(r.replace("data:application/json;base64,","")):r,u=JSON.parse(c);return sh({uri:EI(u),gatewayUrls:t})}let l=i.tokenID;return i.namespace==="erc1155"&&(l=l.replace("0x","").padStart(64,"0")),ZC({gatewayUrls:t,uri:r.replace(/(?:0x)?{id}/,l)})}Er();Ir();_a();Sr();Ue();async function oh(a,{blockNumber:t,blockTag:e,name:i,key:n,gatewayUrls:r,strict:s,universalResolverAddress:o}){let l=o;if(!l){if(!a.chain)throw new Error("client chain not configured. universalResolverAddress is required.");l=Hi({blockNumber:t,chain:a.chain,contract:"ensUniversalResolver"})}try{let c={address:l,abi:Up,functionName:"resolve",args:[Ce(Vn(i)),Ft({abi:pI,functionName:"text",args:[Zs(i),n]})],blockNumber:t,blockTag:e},u=ge(a,Zt,"readContract"),p=r?await u({...c,args:[...c.args,r]}):await u(c);if(p[0]==="0x")return null;let d=Oi({abi:pI,functionName:"text",data:p[0]});return d===""?null:d}catch(c){if(s)throw c;if(Js(c,"resolve"))return null;throw c}}async function a1(a,{blockNumber:t,blockTag:e,assetGatewayUrls:i,name:n,gatewayUrls:r,strict:s,universalResolverAddress:o}){let l=await ge(a,oh,"getEnsText")({blockNumber:t,blockTag:e,key:"avatar",name:n,universalResolverAddress:o,gatewayUrls:r,strict:s});if(!l)return null;try{return await i1(a,{record:l,gatewayUrls:i})}catch{return null}}Er();Sr();Ue();async function n1(a,{address:t,blockNumber:e,blockTag:i,gatewayUrls:n,strict:r,universalResolverAddress:s}){let o=s;if(!o){if(!a.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Hi({blockNumber:e,chain:a.chain,contract:"ensUniversalResolver"})}let l=`${t.toLowerCase().substring(2)}.addr.reverse`;try{let c={address:o,abi:IC,functionName:"reverse",args:[Ce(Vn(l))],blockNumber:e,blockTag:i},u=ge(a,Zt,"readContract"),[p,d]=n?await u({...c,args:[...c.args,n]}):await u(c);return t.toLowerCase()!==d.toLowerCase()?null:p}catch(c){if(r)throw c;if(Js(c,"reverse"))return null;throw c}}Sr();Ue();async function r1(a,{blockNumber:t,blockTag:e,name:i,universalResolverAddress:n}){let r=n;if(!r){if(!a.chain)throw new Error("client chain not configured. universalResolverAddress is required.");r=Hi({blockNumber:t,chain:a.chain,contract:"ensUniversalResolver"})}let[s]=await ge(a,Zt,"readContract")({address:r,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ce(Vn(i))],blockNumber:t,blockTag:e});return s}zs();async function s1(a){let t=En(a,{method:"eth_newBlockFilter"}),e=await a.request({method:"eth_newBlockFilter"});return{id:e,request:t(e),type:"block"}}Ue();async function lh(a,{address:t,args:e,event:i,events:n,fromBlock:r,strict:s,toBlock:o}={}){let l=n??(i?[i]:void 0),c=En(a,{method:"eth_newFilter"}),u=[];l&&(u=[l.flatMap(L=>La({abi:[L],eventName:L.name,args:e}))],i&&(u=u[0]));let p=await a.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof r=="bigint"?xe(r):r,toBlock:typeof o=="bigint"?xe(o):o,...u.length?{topics:u}:{}}]});return{abi:l,args:e,eventName:i?i.name:void 0,fromBlock:r,id:p,request:c(p),strict:!!s,toBlock:o,type:"event"}}async function ch(a){let t=En(a,{method:"eth_newPendingTransactionFilter"}),e=await a.request({method:"eth_newPendingTransactionFilter"});return{id:e,request:t(e),type:"transaction"}}async function o1(a){let t=await a.request({method:"eth_blobBaseFee"});return BigInt(t)}ai();Ue();async function l1(a,{blockHash:t,blockNumber:e,blockTag:i="latest"}={}){let n=e!==void 0?xe(e):void 0,r;return t?r=await a.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):r=await a.request({method:"eth_getBlockTransactionCountByNumber",params:[n||i]},{dedupe:!!n}),Ot(r)}Ue();async function wI(a,{address:t,blockNumber:e,blockTag:i="latest"}){let n=e!==void 0?xe(e):void 0,r=await a.request({method:"eth_getCode",params:[t,n||i]},{dedupe:!!n});if(r!=="0x")return r}Ue();function c1(a){return{baseFeePerGas:a.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:a.gasUsedRatio,oldestBlock:BigInt(a.oldestBlock),reward:a.reward?.map(t=>t.map(e=>BigInt(e)))}}async function u1(a,{blockCount:t,blockNumber:e,blockTag:i="latest",rewardPercentiles:n}){let r=e?xe(e):void 0,s=await a.request({method:"eth_feeHistory",params:[xe(t),r||i,n]},{dedupe:!!r});return c1(s)}async function m1(a,{filter:t}){let e=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(r=>vi(r));return t.abi?Ws({abi:t.abi,logs:n,strict:e}):n}Ue();function Ct(a){return{formatters:void 0,fees:void 0,serializers:void 0,...a}}var p1=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,h1=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;zt();ya();hi();Ye();var uh=class extends G{constructor({domain:t}){super(`Invalid domain "${tt(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},mh=class extends G{constructor({primaryType:t,types:e}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(e))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},ph=class extends G{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}};ta();Xi();Ue();In();Mi();Ue();Bi();function d1(a){let{domain:t={},message:e,primaryType:i}=a,n={EIP712Domain:dh({domain:t}),...a.types};hh({domain:t,message:e,primaryType:i,types:n});let r=["0x1901"];return t&&r.push(Pk({domain:t,types:n})),i!=="EIP712Domain"&&r.push(f1({data:e,primaryType:i,types:n})),ht(pi(r))}function Pk({domain:a,types:t}){return f1({data:a,primaryType:"EIP712Domain",types:t})}function f1({data:a,primaryType:t,types:e}){let i=y1({data:a,primaryType:t,types:e});return ht(i)}function y1({data:a,primaryType:t,types:e}){let i=[{type:"bytes32"}],n=[Nk({primaryType:t,types:e})];for(let r of e[t]){let[s,o]=g1({types:e,name:r.name,type:r.type,value:a[r.name]});i.push(s),n.push(o)}return Ci(i,n)}function Nk({primaryType:a,types:t}){let e=Ce(Ok({primaryType:a,types:t}));return ht(e)}function Ok({primaryType:a,types:t}){let e="",i=b1({primaryType:a,types:t});i.delete(a);let n=[a,...Array.from(i).sort()];for(let r of n)e+=`${r}(${t[r].map(({name:s,type:o})=>`${o} ${s}`).join(",")})`;return e}function b1({primaryType:a,types:t},e=new Set){let n=a.match(/^\w*/u)?.[0];if(e.has(n)||t[n]===void 0)return e;e.add(n);for(let r of t[n])b1({primaryType:r.type,types:t},e);return e}function g1({types:a,name:t,type:e,value:i}){if(a[e]!==void 0)return[{type:"bytes32"},ht(y1({data:i,primaryType:e,types:a}))];if(e==="bytes")return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},ht(i)];if(e==="string")return[{type:"bytes32"},ht(Ce(i))];if(e.lastIndexOf("]")===e.length-1){let n=e.slice(0,e.lastIndexOf("[")),r=i.map(s=>g1({name:t,type:n,types:a,value:s}));return[{type:"bytes32"},ht(Ci(r.map(([s])=>s),r.map(([,s])=>s)))]}return[{type:e},i]}hi();function L1(a){let{domain:t,message:e,primaryType:i,types:n}=a,r=(l,c)=>{let u={...c};for(let p of l){let{name:d,type:L}=p;L==="address"&&(u[d]=u[d].toLowerCase())}return u},s=(()=>n.EIP712Domain?t?r(n.EIP712Domain,t):{}:{})(),o=(()=>{if(i!=="EIP712Domain")return r(n[i],e)})();return tt({domain:s,message:o,primaryType:i,types:n})}function hh(a){let{domain:t,message:e,primaryType:i,types:n}=a,r=(s,o)=>{for(let l of s){let{name:c,type:u}=l,p=o[c],d=u.match(h1);if(d&&(typeof p=="number"||typeof p=="bigint")){let[E,w,R]=d;xe(p,{signed:w==="int",size:Number.parseInt(R)/8})}if(u==="address"&&typeof p=="string"&&!dt(p))throw new Lt({address:p});let L=u.match(p1);if(L){let[E,w]=L;if(w&&st(p)!==Number.parseInt(w))throw new ym({expectedSize:Number.parseInt(w),givenSize:st(p)})}let v=n[u];v&&(Hk(u),r(v,p))}};if(n.EIP712Domain&&t){if(typeof t!="object")throw new uh({domain:t});r(n.EIP712Domain,t)}if(i!=="EIP712Domain")if(n[i])r(n[i],e);else throw new mh({primaryType:i,types:n})}function dh({domain:a}){return[typeof a?.name=="string"&&{name:"name",type:"string"},a?.version&&{name:"version",type:"string"},typeof a?.chainId=="number"&&{name:"chainId",type:"uint256"},a?.verifyingContract&&{name:"verifyingContract",type:"address"},a?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Hk(a){if(a==="address"||a==="bool"||a==="string"||a.startsWith("bytes")||a.startsWith("uint")||a.startsWith("int"))throw new ph({type:a})}_a();ai();wp();var Uk={"0x0":"reverted","0x1":"success"};function TI(a){let t={...a,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,contractAddress:a.contractAddress?a.contractAddress:null,cumulativeGasUsed:a.cumulativeGasUsed?BigInt(a.cumulativeGasUsed):null,effectiveGasPrice:a.effectiveGasPrice?BigInt(a.effectiveGasPrice):null,gasUsed:a.gasUsed?BigInt(a.gasUsed):null,logs:a.logs?a.logs.map(e=>vi(e)):null,to:a.to?a.to:null,transactionIndex:a.transactionIndex?Ot(a.transactionIndex):null,status:a.status?Uk[a.status]:null,type:a.type?oI[a.type]||a.type:null};return a.blobGasPrice&&(t.blobGasPrice=BigInt(a.blobGasPrice)),a.blobGasUsed&&(t.blobGasUsed=BigInt(a.blobGasUsed)),t}var _1=Ps("transactionReceipt",TI);ai();Bi();var v1=`Ethereum Signed Message:
`;Mi();Xi();Ue();function x1(a){let t=(()=>typeof a=="string"?Ji(a):typeof a.raw=="string"?a.raw:et(a.raw))(),e=Ji(`${v1}${st(t)}`);return pi([e,t])}function fh(a,t){return ht(x1(a),t)}var yh="0x6492649264926492649264926492649264926492649264926492649264926492";or();function I1(a){return S0(a,-32)===yh}In();Mi();jt();function E1(a){let{address:t,data:e,signature:i,to:n="hex"}=a,r=ni([Ci([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,e,i]),yh]);return n==="hex"?r:Vt(r)}sI();ya();Ye();al();vr();ta();Xi();or();ai();function w1(a){let{authorizationList:t}=a;if(t)for(let e of t){let{contractAddress:i,chainId:n}=e;if(!dt(i))throw new Lt({address:i});if(n<0)throw new Tr({chainId:n})}bh(a)}function T1(a){let{blobVersionedHashes:t}=a;if(t){if(t.length===0)throw new Gs;for(let e of t){let i=st(e),n=Ot(ja(e,0,1));if(i!==32)throw new Mp({hash:e,size:i});if(n!==1)throw new Rp({hash:e,version:n})}}bh(a)}function bh(a){let{chainId:t,maxPriorityFeePerGas:e,maxFeePerGas:i,to:n}=a;if(t<=0)throw new Tr({chainId:t});if(n&&!dt(n))throw new Lt({address:n});if(i&&i>Ns)throw new Ni({maxFeePerGas:i});if(e&&i&&e>i)throw new wa({maxFeePerGas:i,maxPriorityFeePerGas:e})}function C1(a){let{chainId:t,maxPriorityFeePerGas:e,gasPrice:i,maxFeePerGas:n,to:r}=a;if(t<=0)throw new Tr({chainId:t});if(r&&!dt(r))throw new Lt({address:r});if(e||n)throw new G("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(i&&i>Ns)throw new Ni({maxFeePerGas:i})}function S1(a){let{chainId:t,maxPriorityFeePerGas:e,gasPrice:i,maxFeePerGas:n,to:r}=a;if(r&&!dt(r))throw new Lt({address:r});if(typeof t<"u"&&t<=0)throw new Tr({chainId:t});if(e||n)throw new G("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(i&&i>Ns)throw new Ni({maxFeePerGas:i})}ia();Mi();Jr();Ue();Ue();function D1(a){if(!a||a.length===0)return[];let t=[];for(let e of a){let{contractAddress:i,chainId:n,nonce:r,...s}=e;t.push([n?Ce(n):"0x",i,r?Ce(r):"0x",...to({},s)])}return t}ya();ia();ta();function ol(a){if(!a||a.length===0)return[];let t=[];for(let e=0;e<a.length;e++){let{address:i,storageKeys:n}=a[e];for(let r=0;r<n.length;r++)if(n[r].length-2!==64)throw new tp({storageKey:n[r]});if(!dt(i,{strict:!1}))throw new Lt({address:i});t.push([i,n])}return t}function A1(a,t){let e=Np(a);return e==="eip1559"?Gk(a,t):e==="eip2930"?Kk(a,t):e==="eip4844"?Fk(a,t):e==="eip7702"?Vk(a,t):qk(a,t)}function Vk(a,t){let{authorizationList:e,chainId:i,gas:n,nonce:r,to:s,value:o,maxFeePerGas:l,maxPriorityFeePerGas:c,accessList:u,data:p}=a;w1(a);let d=ol(u),L=D1(e);return ni(["0x04",sa([Ce(i),r?Ce(r):"0x",c?Ce(c):"0x",l?Ce(l):"0x",n?Ce(n):"0x",s??"0x",o?Ce(o):"0x",p??"0x",d,L,...to(a,t)])])}function Fk(a,t){let{chainId:e,gas:i,nonce:n,to:r,value:s,maxFeePerBlobGas:o,maxFeePerGas:l,maxPriorityFeePerGas:c,accessList:u,data:p}=a;T1(a);let d=a.blobVersionedHashes,L=a.sidecars;if(a.blobs&&(typeof d>"u"||typeof L>"u")){let V=typeof a.blobs[0]=="string"?a.blobs:a.blobs.map(ee=>et(ee)),q=a.kzg,te=Vs({blobs:V,kzg:q});if(typeof d>"u"&&(d=kp({commitments:te})),typeof L>"u"){let ee=Fs({blobs:V,commitments:te,kzg:q});L=Pp({blobs:V,commitments:te,proofs:ee})}}let v=ol(u),E=[Ce(e),n?Ce(n):"0x",c?Ce(c):"0x",l?Ce(l):"0x",i?Ce(i):"0x",r??"0x",s?Ce(s):"0x",p??"0x",v,o?Ce(o):"0x",d??[],...to(a,t)],w=[],R=[],U=[];if(L)for(let V=0;V<L.length;V++){let{blob:q,commitment:te,proof:ee}=L[V];w.push(q),R.push(te),U.push(ee)}return ni(["0x03",L?sa([E,w,R,U]):sa(E)])}function Gk(a,t){let{chainId:e,gas:i,nonce:n,to:r,value:s,maxFeePerGas:o,maxPriorityFeePerGas:l,accessList:c,data:u}=a;bh(a);let p=ol(c),d=[Ce(e),n?Ce(n):"0x",l?Ce(l):"0x",o?Ce(o):"0x",i?Ce(i):"0x",r??"0x",s?Ce(s):"0x",u??"0x",p,...to(a,t)];return ni(["0x02",sa(d)])}function Kk(a,t){let{chainId:e,gas:i,data:n,nonce:r,to:s,value:o,accessList:l,gasPrice:c}=a;C1(a);let u=ol(l),p=[Ce(e),r?Ce(r):"0x",c?Ce(c):"0x",i?Ce(i):"0x",s??"0x",o?Ce(o):"0x",n??"0x",u,...to(a,t)];return ni(["0x01",sa(p)])}function qk(a,t){let{chainId:e=0,gas:i,data:n,nonce:r,to:s,value:o,gasPrice:l}=a;S1(a);let c=[r?Ce(r):"0x",l?Ce(l):"0x",i?Ce(i):"0x",s??"0x",o?Ce(o):"0x",n??"0x"];if(t){let u=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(e>0)return BigInt(e*2)+BigInt(35n+t.v-27n);let L=27n+(t.v===27n?0n:1n);if(t.v!==L)throw new Zm({v:t.v});return L})(),p=ii(t.r),d=ii(t.s);c=[...c,Ce(u),p==="0x00"?"0x":p,d==="0x00"?"0x":d]}else e>0&&(c=[...c,Ce(e),"0x","0x"]);return sa(c)}function to(a,t){let e=t??a,{v:i,yParity:n}=e;if(typeof e.r>"u")return[];if(typeof e.s>"u")return[];if(typeof i>"u"&&typeof n>"u")return[];let r=ii(e.r),s=ii(e.s);return[(()=>typeof n=="number"?n?Ce(1):"0x":i===0n?"0x":i===1n?Ce(1):i===27n?"0x":Ce(1))(),r==="0x00"?"0x":r,s==="0x00"?"0x":s]}Ye();var gh=class extends G{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}};function Dr(a,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(a))throw new gh({value:a});let[e,i="0"]=a.split("."),n=e.startsWith("-");if(n&&(e=e.slice(1)),i=i.replace(/(0+)$/,""),t===0)Math.round(+`.${i}`)===1&&(e=`${BigInt(e)+1n}`),i="";else if(i.length>t){let[r,s,o]=[i.slice(0,t-1),i.slice(t-1,t),i.slice(t)],l=Math.round(+`${s}.${o}`);l>9?i=`${BigInt(r)+BigInt(1)}0`.padStart(r.length+1,"0"):i=`${r}${l}`,i.length>t&&(i=i.slice(1),e=`${BigInt(e)+1n}`),i=i.slice(0,t)}else i=i.padEnd(t,"0");return BigInt(`${n?"-":""}${e}${i}`)}zm();function io(a,t="wei"){return Dr(a,Ym[t])}function Wk(a){return a.map(t=>({...t,value:BigInt(t.value)}))}function k1(a){return{...a,balance:a.balance?BigInt(a.balance):void 0,nonce:a.nonce?Ot(a.nonce):void 0,storageProof:a.storageProof?Wk(a.storageProof):void 0}}async function B1(a,{address:t,blockNumber:e,blockTag:i,storageKeys:n}){let r=i??"latest",s=e!==void 0?xe(e):void 0,o=await a.request({method:"eth_getProof",params:[t,n,s||r]});return k1(o)}Ue();async function M1(a,{address:t,blockNumber:e,blockTag:i="latest",slot:n}){let r=e!==void 0?xe(e):void 0;return await a.request({method:"eth_getStorageAt",params:[t,n,r||i]})}ia();Ue();async function ao(a,{blockHash:t,blockNumber:e,blockTag:i,hash:n,index:r}){let s=i||"latest",o=e!==void 0?xe(e):void 0,l=null;if(n?l=await a.request({method:"eth_getTransactionByHash",params:[n]},{dedupe:!0}):t?l=await a.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,xe(r)]},{dedupe:!0}):(o||s)&&(l=await a.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||s,xe(r)]},{dedupe:!!o})),!l)throw new ss({blockHash:t,blockNumber:e,blockTag:s,hash:n,index:r});return(a.chain?.formatters?.transaction?.format||xr)(l)}async function R1(a,{hash:t,transactionReceipt:e}){let[i,n]=await Promise.all([ge(a,ka,"getBlockNumber")({}),t?ge(a,ao,"getTransaction")({hash:t}):void 0]),r=e?.blockNumber||n?.blockNumber;return r?i-r+1n:0n}ia();async function ll(a,{hash:t}){let e=await a.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!e)throw new os({hash:t});return(a.chain?.formatters?.transactionReceipt?.format||TI)(e)}Er();zt();Ye();wn();Ir();_a();Sr();async function P1(a,t){let{allowFailure:e=!0,batchSize:i,blockNumber:n,blockTag:r,multicallAddress:s,stateOverride:o}=t,l=t.contracts,c=i??(typeof a.batch?.multicall=="object"&&a.batch.multicall.batchSize||1024),u=s;if(!u){if(!a.chain)throw new Error("client chain not configured. multicallAddress is required.");u=Hi({blockNumber:n,chain:a.chain,contract:"multicall3"})}let p=[[]],d=0,L=0;for(let w=0;w<l.length;w++){let{abi:R,address:U,args:V,functionName:q}=l[w];try{let te=Ft({abi:R,args:V,functionName:q});L+=(te.length-2)/2,c>0&&L>c&&p[d].length>0&&(d++,L=(te.length-2)/2,p[d]=[]),p[d]=[...p[d],{allowFailure:!0,callData:te,target:U}]}catch(te){let ee=aa(te,{abi:R,address:U,args:V,docsPath:"/docs/contract/multicall",functionName:q});if(!e)throw ee;p[d]=[...p[d],{allowFailure:!0,callData:"0x",target:U}]}}let v=await Promise.allSettled(p.map(w=>ge(a,Zt,"readContract")({abi:tl,address:u,args:[w],blockNumber:n,blockTag:r,functionName:"aggregate3",stateOverride:o}))),E=[];for(let w=0;w<v.length;w++){let R=v[w];if(R.status==="rejected"){if(!e)throw R.reason;for(let V=0;V<p[w].length;V++)E.push({status:"failure",error:R.reason,result:void 0});continue}let U=R.value;for(let V=0;V<U.length;V++){let{returnData:q,success:te}=U[V],{callData:ee}=p[w][V],{abi:X,address:re,functionName:oe,args:Ve}=l[E.length];try{if(ee==="0x")throw new da;if(!te)throw new $a({data:q});let ke=Oi({abi:X,args:Ve,data:q,functionName:oe});E.push(e?{result:ke,status:"success"}:ke)}catch(ke){let $=aa(ke,{abi:X,address:re,args:Ve,docsPath:"/docs/contract/multicall",functionName:oe});if(!e)throw $;E.push({error:$,result:void 0,status:"failure"})}}}if(E.length!==l.length)throw new G("multicall results mismatch");return E}Er();fI();wn();Gp();sr();el();$i();Ue();Lp();ai();jt();function N1({r:a,s:t,to:e="hex",v:i,yParity:n}){let r=(()=>{if(n===0||n===1)return n;if(i&&(i===27n||i===28n||i>=35n))return i%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),s=`0x${new Za.Signature(Nt(a),Nt(t)).toCompactHex()}${r===0?"1b":"1c"}`;return e==="hex"?s:Vt(s)}zs();async function no(a,t){let{address:e,factory:i,factoryData:n,hash:r,signature:s,universalSignatureVerifierAddress:o=a.chain?.contracts?.universalSignatureVerifier?.address,...l}=t,c=(()=>At(s)?s:typeof s=="object"&&"r"in s&&"s"in s?N1(s):et(s))(),u=await(async()=>!i&&!n||I1(c)?c:E1({address:i,data:n,signature:c}))();try{let p=o?{to:o,data:Ft({abi:dI,functionName:"isValidSig",args:[e,r,u]}),...l}:{data:Cr({abi:dI,args:[e,r,u],bytecode:SC}),...l},{data:d}=await ge(a,Da,"call")(p);return v0(d??"0x0")}catch(p){try{if(On(Nm(e),await _p({hash:r,signature:s})))return!0}catch{}if(p instanceof mr)return!1;throw p}}async function O1(a,{address:t,message:e,factory:i,factoryData:n,signature:r,...s}){let o=fh(e);return no(a,{address:t,factory:i,factoryData:n,hash:o,signature:r,...s})}async function H1(a,t){let{address:e,factory:i,factoryData:n,signature:r,message:s,primaryType:o,types:l,domain:c,...u}=t,p=d1({message:s,primaryType:o,types:l,domain:c});return no(a,{address:e,factory:i,factoryData:n,hash:p,signature:r,...u})}ia();bI();hi();ai();hi();function Lh(a,{emitOnBegin:t=!1,emitMissed:e=!1,onBlockNumber:i,onError:n,poll:r,pollingInterval:s=a.pollingInterval}){let o=(()=>typeof r<"u"?r:!(a.transport.type==="webSocket"||a.transport.type==="fallback"&&a.transport.transports[0].config.type==="webSocket"))(),l;return o?(()=>{let p=tt(["watchBlockNumber",a.uid,t,e,s]);return xi(p,{onBlockNumber:i,onError:n},d=>Aa(async()=>{try{let L=await ge(a,ka,"getBlockNumber")({cacheTime:0});if(l){if(L===l)return;if(L-l>1&&e)for(let v=l+1n;v<L;v++)d.onBlockNumber(v,l),l=v}(!l||L>l)&&(d.onBlockNumber(L,l),l=L)}catch(L){d.onError?.(L)}},{emitOnBegin:t,interval:s}))})():(()=>{let p=tt(["watchBlockNumber",a.uid,t,e]);return xi(p,{onBlockNumber:i,onError:n},d=>{let L=!0,v=()=>L=!1;return(async()=>{try{let E=(()=>{if(a.transport.type==="fallback"){let R=a.transport.transports.find(U=>U.config.type==="webSocket");return R?R.value:a.transport}return a.transport})(),{unsubscribe:w}=await E.subscribe({params:["newHeads"],onData(R){if(!L)return;let U=Nt(R.result?.number);d.onBlockNumber(U,l),l=U},onError(R){d.onError?.(R)}});v=w,L||v()}catch(E){n?.(E)}})(),()=>v()})})()}async function U1(a,{confirmations:t=1,hash:e,onReplaced:i,pollingInterval:n=a.pollingInterval,retryCount:r=6,retryDelay:s=({count:l})=>~~(1<<l)*200,timeout:o=18e4}){let l=tt(["waitForTransactionReceipt",a.uid,e]),c,u,p,d=!1,{promise:L,resolve:v,reject:E}=Kp(),w=o?setTimeout(()=>E(new ap({hash:e})),o):void 0,R=xi(l,{onReplaced:i,resolve:v,reject:E},U=>{let V=ge(a,Lh,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:n,async onBlockNumber(q){let te=X=>{clearTimeout(w),V(),X(),R()},ee=q;if(!d)try{if(p){if(t>1&&(!p.blockNumber||ee-p.blockNumber+1n<t))return;te(()=>U.resolve(p));return}if(c||(d=!0,await rl(async()=>{c=await ge(a,ao,"getTransaction")({hash:e}),c.blockNumber&&(ee=c.blockNumber)},{delay:s,retryCount:r}),d=!1),p=await ge(a,ll,"getTransactionReceipt")({hash:e}),t>1&&(!p.blockNumber||ee-p.blockNumber+1n<t))return;te(()=>U.resolve(p))}catch(X){if(X instanceof ss||X instanceof os){if(!c){d=!1;return}try{u=c,d=!0;let re=await rl(()=>ge(a,li,"getBlock")({blockNumber:ee,includeTransactions:!0}),{delay:s,retryCount:r,shouldRetry:({error:ke})=>ke instanceof Hs});d=!1;let oe=re.transactions.find(({from:ke,nonce:$})=>ke===u.from&&$===u.nonce);if(!oe||(p=await ge(a,ll,"getTransactionReceipt")({hash:oe.hash}),t>1&&(!p.blockNumber||ee-p.blockNumber+1n<t)))return;let Ve="replaced";oe.to===u.to&&oe.value===u.value?Ve="repriced":oe.from===oe.to&&oe.value===0n&&(Ve="cancelled"),te(()=>{U.onReplaced?.({reason:Ve,replacedTransaction:u,transaction:oe,transactionReceipt:p}),U.resolve(p)})}catch(re){te(()=>U.reject(re))}}else te(()=>U.reject(X))}}})});return L}hi();function V1(a,{blockTag:t="latest",emitMissed:e=!1,emitOnBegin:i=!1,onBlock:n,onError:r,includeTransactions:s,poll:o,pollingInterval:l=a.pollingInterval}){let c=(()=>typeof o<"u"?o:!(a.transport.type==="webSocket"||a.transport.type==="fallback"&&a.transport.transports[0].config.type==="webSocket"))(),u=s??!1,p;return c?(()=>{let v=tt(["watchBlocks",a.uid,t,e,i,u,l]);return xi(v,{onBlock:n,onError:r},E=>Aa(async()=>{try{let w=await ge(a,li,"getBlock")({blockTag:t,includeTransactions:u});if(w.number&&p?.number){if(w.number===p.number)return;if(w.number-p.number>1&&e)for(let R=p?.number+1n;R<w.number;R++){let U=await ge(a,li,"getBlock")({blockNumber:R,includeTransactions:u});E.onBlock(U,p),p=U}}(!p?.number||t==="pending"&&!w?.number||w.number&&w.number>p.number)&&(E.onBlock(w,p),p=w)}catch(w){E.onError?.(w)}},{emitOnBegin:i,interval:l}))})():(()=>{let v=!0,E=!0,w=()=>v=!1;return(async()=>{try{i&&ge(a,li,"getBlock")({blockTag:t,includeTransactions:u}).then(V=>{v&&E&&(n(V,void 0),E=!1)});let R=(()=>{if(a.transport.type==="fallback"){let V=a.transport.transports.find(q=>q.config.type==="webSocket");return V?V.value:a.transport}return a.transport})(),{unsubscribe:U}=await R.subscribe({params:["newHeads"],async onData(V){if(!v)return;let q=await ge(a,li,"getBlock")({blockNumber:V.blockNumber,includeTransactions:u}).catch(()=>{});v&&(n(q,p),E=!1,p=q)},onError(V){r?.(V)}});w=U,v||w()}catch(R){r?.(R)}})(),()=>w()})()}hi();zt();Wo();function F1(a,{address:t,args:e,batch:i=!0,event:n,events:r,fromBlock:s,onError:o,onLogs:l,poll:c,pollingInterval:u=a.pollingInterval,strict:p}){let d=(()=>typeof c<"u"?c:typeof s=="bigint"?!0:!(a.transport.type==="webSocket"||a.transport.type==="fallback"&&a.transport.transports[0].config.type==="webSocket"))(),L=p??!1;return d?(()=>{let w=tt(["watchEvent",t,e,i,a.uid,n,u,s]);return xi(w,{onLogs:l,onError:o},R=>{let U;s!==void 0&&(U=s-1n);let V,q=!1,te=Aa(async()=>{if(!q){try{V=await ge(a,lh,"createEventFilter")({address:t,args:e,event:n,events:r,strict:L,fromBlock:s})}catch{}q=!0;return}try{let ee;if(V)ee=await ge(a,Hn,"getFilterChanges")({filter:V});else{let X=await ge(a,ka,"getBlockNumber")({});U&&U!==X?ee=await ge(a,Ys,"getLogs")({address:t,args:e,event:n,events:r,fromBlock:U+1n,toBlock:X}):ee=[],U=X}if(ee.length===0)return;if(i)R.onLogs(ee);else for(let X of ee)R.onLogs([X])}catch(ee){V&&ee instanceof xa&&(q=!1),R.onError?.(ee)}},{emitOnBegin:!0,interval:u});return async()=>{V&&await ge(a,Un,"uninstallFilter")({filter:V}),te()}})})():(()=>{let w=!0,R=()=>w=!1;return(async()=>{try{let U=(()=>{if(a.transport.type==="fallback"){let ee=a.transport.transports.find(X=>X.config.type==="webSocket");return ee?ee.value:a.transport}return a.transport})(),V=r??(n?[n]:void 0),q=[];V&&(q=[V.flatMap(X=>La({abi:[X],eventName:X.name,args:e}))],n&&(q=q[0]));let{unsubscribe:te}=await U.subscribe({params:["logs",{address:t,topics:q}],onData(ee){if(!w)return;let X=ee.result;try{let{eventName:re,args:oe}=qs({abi:V??[],data:X.data,topics:X.topics,strict:L}),Ve=vi(X,{args:oe,eventName:re});l([Ve])}catch(re){let oe,Ve;if(re instanceof Qi||re instanceof fa){if(p)return;oe=re.abiItem.name,Ve=re.abiItem.inputs?.some($=>!("name"in $&&$.name))}let ke=vi(X,{args:Ve?[]:{},eventName:oe});l([ke])}},onError(ee){o?.(ee)}});R=te,w||R()}catch(U){o?.(U)}})(),()=>R()})()}hi();function G1(a,{batch:t=!0,onError:e,onTransactions:i,poll:n,pollingInterval:r=a.pollingInterval}){return(typeof n<"u"?n:a.transport.type!=="webSocket")?(()=>{let c=tt(["watchPendingTransactions",a.uid,t,r]);return xi(c,{onTransactions:i,onError:e},u=>{let p,d=Aa(async()=>{try{if(!p)try{p=await ge(a,ch,"createPendingTransactionFilter")({});return}catch(v){throw d(),v}let L=await ge(a,Hn,"getFilterChanges")({filter:p});if(L.length===0)return;if(t)u.onTransactions(L);else for(let v of L)u.onTransactions([v])}catch(L){u.onError?.(L)}},{emitOnBegin:!0,interval:r});return async()=>{p&&await ge(a,Un,"uninstallFilter")({filter:p}),d()}})})():(()=>{let c=!0,u=()=>c=!1;return(async()=>{try{let{unsubscribe:p}=await a.transport.subscribe({params:["newPendingTransactions"],onData(d){if(!c)return;let L=d.result;i([L])},onError(d){e?.(d)}});u=p,c||u()}catch(p){e?.(p)}})(),()=>u()})()}function K1(a){let{scheme:t,statement:e,...i}=a.match(Yk)?.groups??{},{chainId:n,expirationTime:r,issuedAt:s,notBefore:o,requestId:l,...c}=a.match(zk)?.groups??{},u=a.split("Resources:")[1]?.split(`
- `).slice(1);return{...i,...c,...n?{chainId:Number(n)}:{},...r?{expirationTime:new Date(r)}:{},...s?{issuedAt:new Date(s)}:{},...o?{notBefore:new Date(o)}:{},...l?{requestId:l}:{},...u?{resources:u}:{},...t?{scheme:t}:{},...e?{statement:e}:{}}}var Yk=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,zk=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;el();function q1(a){let{address:t,domain:e,message:i,nonce:n,scheme:r,time:s=new Date}=a;if(e&&i.domain!==e||n&&i.nonce!==n||r&&i.scheme!==r||i.expirationTime&&s>=i.expirationTime||i.notBefore&&s<i.notBefore)return!1;try{if(!i.address||t&&!On(i.address,t))return!1}catch{return!1}return!0}async function W1(a,t){let{address:e,domain:i,message:n,nonce:r,scheme:s,signature:o,time:l=new Date,...c}=t,u=K1(n);if(!u.address||!q1({address:e,domain:i,message:u,nonce:r,scheme:s,time:l}))return!1;let d=fh(n);return no(a,{address:u.address,hash:d,signature:o,...c})}function Y1(a){return{call:t=>Da(a,t),createBlockFilter:()=>s1(a),createContractEventFilter:t=>Um(a,t),createEventFilter:t=>lh(a,t),createPendingTransactionFilter:()=>ch(a),estimateContractGas:t=>_C(a,t),estimateGas:t=>Ks(a,t),getBalance:t=>Op(a,t),getBlobBaseFee:()=>o1(a),getBlock:t=>li(a,t),getBlockNumber:t=>ka(a,t),getBlockTransactionCount:t=>l1(a,t),getBytecode:t=>wI(a,t),getChainId:()=>Sa(a),getCode:t=>wI(a,t),getContractEvents:t=>Hp(a,t),getEip712Domain:t=>KC(a,t),getEnsAddress:t=>QC(a,t),getEnsAvatar:t=>a1(a,t),getEnsName:t=>n1(a,t),getEnsResolver:t=>r1(a,t),getEnsText:t=>oh(a,t),getFeeHistory:t=>u1(a,t),estimateFeesPerGas:t=>yC(a,t),getFilterChanges:t=>Hn(a,t),getFilterLogs:t=>m1(a,t),getGasPrice:()=>Us(a),getLogs:t=>Ys(a,t),getProof:t=>B1(a,t),estimateMaxPriorityFeePerGas:t=>fC(a,t),getStorageAt:t=>M1(a,t),getTransaction:t=>ao(a,t),getTransactionConfirmations:t=>R1(a,t),getTransactionCount:t=>Ap(a,t),getTransactionReceipt:t=>ll(a,t),multicall:t=>P1(a,t),prepareTransactionRequest:t=>Nn(a,t),readContract:t=>Zt(a,t),sendRawTransaction:t=>$s(a,t),simulateContract:t=>NC(a,t),verifyMessage:t=>O1(a,t),verifySiweMessage:t=>W1(a,t),verifyTypedData:t=>H1(a,t),uninstallFilter:t=>Un(a,t),waitForTransactionReceipt:t=>U1(a,t),watchBlocks:t=>V1(a,t),watchBlockNumber:t=>Lh(a,t),watchContractEvent:t=>VC(a,t),watchEvent:t=>F1(a,t),watchPendingTransactions:t=>G1(a,t)}}function cl(a){let{key:t="public",name:e="Public Client"}=a;return Zp({...a,key:t,name:e,type:"publicClient"}).extend(Y1)}Gp();function z1(a,t){let{abi:e,args:i,bytecode:n,...r}=t,s=Cr({abi:e,args:i,bytecode:n});return Xs(a,{...r,data:s})}sr();async function j1(a){return a.account?.type==="local"?[a.account.address]:(await a.request({method:"eth_accounts"},{dedupe:!0})).map(e=>za(e))}async function $1(a){return await a.request({method:"wallet_getPermissions"},{dedupe:!0})}sr();async function X1(a){return(await a.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(e=>Nm(e))}async function Q1(a,t){return a.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}Li();Ue();async function J1(a,{account:t=a.account,message:e}){if(!t)throw new Ui({docsPath:"/docs/actions/wallet/signMessage"});let i=_t(t);if(i.signMessage)return i.signMessage({message:e});let n=(()=>typeof e=="string"?Ji(e):e.raw instanceof Uint8Array?Ce(e.raw):e.raw)();return a.request({method:"personal_sign",params:[n,i.address]},{retryCount:0})}Li();Ue();Zo();Os();async function Z1(a,t){let{account:e=a.account,chain:i=a.chain,...n}=t;if(!e)throw new Ui({docsPath:"/docs/actions/wallet/signTransaction"});let r=_t(e);Ca({account:r,...t});let s=await ge(a,Sa,"getChainId")({});i!==null&&jp({currentChainId:s,chain:i});let l=(i?.formatters||a.chain?.formatters)?.transactionRequest?.format||Rn;return r.signTransaction?r.signTransaction({...n,chainId:s},{serializer:a.chain?.serializers?.transaction}):await a.request({method:"eth_signTransaction",params:[{...l(n),chainId:xe(s),from:r.address}]},{retryCount:0})}Li();async function eS(a,t){let{account:e=a.account,domain:i,message:n,primaryType:r}=t;if(!e)throw new Ui({docsPath:"/docs/actions/wallet/signTypedData"});let s=_t(e),o={EIP712Domain:dh({domain:i}),...t.types};if(hh({domain:i,message:n,primaryType:r,types:o}),s.signTypedData)return s.signTypedData({domain:i,message:n,primaryType:r,types:o});let l=L1({domain:i,message:n,primaryType:r,types:o});return a.request({method:"eth_signTypedData_v4",params:[s.address,l]},{retryCount:0})}Ue();async function tS(a,{id:t}){await a.request({method:"wallet_switchEthereumChain",params:[{chainId:xe(t)}]},{retryCount:0})}async function iS(a,t){return await a.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function aS(a){return{addChain:t=>qC(a,t),deployContract:t=>z1(a,t),getAddresses:()=>j1(a),getChainId:()=>Sa(a),getPermissions:()=>$1(a),prepareTransactionRequest:t=>Nn(a,t),requestAddresses:()=>X1(a),requestPermissions:t=>Q1(a,t),sendRawTransaction:t=>$s(a,t),sendTransaction:t=>Xs(a,t),signMessage:t=>J1(a,t),signTransaction:t=>Z1(a,t),signTypedData:t=>eS(a,t),switchChain:t=>tS(a,t),watchAsset:t=>iS(a,t),writeContract:t=>GC(a,t)}}function ro(a){let{key:t="wallet",name:e="Wallet Client",transport:i}=a;return Zp({...a,key:t,name:e,transport:i,type:"walletClient"}).extend(aS)}Ye();wn();Ue();jm();var $t=class{constructor(){}};$t.UPDATE_LOCAL_WALLET_LIST_EVENT="WalletEvent:UPDATE_LOCAL_WALLET_LIST_EVENT",$t.TRANSFER_LOCAL_WALLET_EVENT="WalletEvent:TRANSFER_LOCAL_WALLET_EVENT";var _h=class{};var vt=class{constructor(){this.extra={}}};var so=class{constructor(){this.connectAddr="ws://175.27.154.72:10001";this.groupApplyList=[];this.groupData=[];this.watch=[]}};var vh=class{};var De=class a{constructor(){this.inMinWaiting=!1;this.needGetRoomInfo=!1}openMinView(){this.enterRoomSpr||(this.enterRoomSpr=this.enterRoomPrefab.create()),this.enterRoomSpr.x=Laya.stage.width>>1,this.enterRoomSpr.y=0,this.enterRoomSpr.zOrder=1e3,Laya.stage.addChild(this.enterRoomSpr),this.inMinWaiting=!0}closeMinView(){this.enterRoomSpr&&this.enterRoomSpr.removeSelf(),this.inMinWaiting=!1}openMaxView(){this.closeMinView();var t=!0;A.intance.openModule(y.EnterRoomView,t)}openEnterView(){if(this.inMinWaiting==!0){this.closeMinView();var t=!0;A.intance.openModule(y.EnterRoomView,t)}else A.intance.openModule(y.EnterRoomView)}static get instance(){return a._instance==null&&(a._instance=new a),a._instance}init(){this.closeMinView(),this.initRoomData(),this.needGetRoomInfo=!0,Laya.timer.loop(1500,this,this.onRefreshRoom)}onRefreshRoomImditely(){Laya.timer.clear(this,this.onRefreshRoom),this.needGetRoomInfo=!0,this.onRefreshRoom(),Laya.timer.loop(1500,this,this.onRefreshRoom)}updateBattleCD(){B.instance.coolDownTime=Math.round(B.instance.roomDto.joinCd/1e3),g.intance.event(f.EVENT_UPDATE_MATCH_ROOM),B.instance.coolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):this.onGoMatch()}onSetCoolTime(){B.instance.coolDownTime>=0?B.instance.coolDownTime--:this.onGoMatch()}async onGoMatch(){Laya.timer.clear(this,this.onSetCoolTime),Laya.timer.clear(this,this.onRefreshRoom);let t=await I.requestPost("wxgame/room/info",{roomId:B.instance.roomDto.roomId});if(!this.needGetRoomInfo){console.log("界面已经关掉了，不能再继续了。。。");return}var e=t.roomDto;e.joinCd==0?t.roomDto.enterGame==1?(Laya.timer.clearAll(this),ot.instance.initSocket(),this.closeMinView()):(this.close(),g.intance.event(f.EVENT_ENTER_MATCH_ROOM,!0),Ee.commTipWithYes(Le.instance.get(25))):(B.instance.roomDto=e,this.updateBattleCD())}initRoomData(){var t=B.instance.roomDto.members.length,e=B.instance.roomDto.maxCount;if(B.instance.roomDto.state==K.STATE_START&&t>=e){this.onGoMatch();return}this.updateBattleCD()}async onRefreshRoom(){console.log("onRefreshRoom");let t=await I.requestPost("wxgame/room/info",{roomId:B.instance.roomDto.roomId});if(!this.needGetRoomInfo){console.log("界面已经关掉了，不能再继续了!");return}B.instance.roomDto=t.roomDto,this.initRoomData(),B.instance.setMatchRes()}close(){this.needGetRoomInfo=!1,Laya.timer.clearAll(this),g.intance.event(f.EVENT_CLOSE_MODULE,y.EnterRoomView),this.closeMinView()}async onCreateAndJoinWithPwd(t,e,i){var n=e.isBookingMust;if(t!=K.ACTION_SIGNUP&&t!=K.ACTION_CREATE_BOOKING){var r=_.intance.m_dicNodes.get(e.nodeId);if(r&&r.dT>800&&z.Debug<2){T.instance.notice(m.instance.getLanguage(1306));return}}var s=!1;if(t==K.ACTION_WATCH||t==K.ACTION_JOIN&&n?s=!1:s=!0,s){let Ve=!1;var o=_.intance.m_dicArenaDic.get(e.arenaId),l=o.item[0];let ke=b.instance.playerDto;if(o.type==3){if(!ke.newFightHeroPk){Ee.heroNotEnought(1353);return}}else if(ke.fightHeroPk){let $=b.instance.m_heroData.heroVoDic.get(ke.fightHeroPk);if($){if(Ve=$.state==2,t!=K.ACTION_SIGNUP&&$.state==1){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1176),P.YES,null);return}}else if(t!=K.ACTION_SIGNUP){Ee.heroNotEnought();return}}else if(t!=K.ACTION_SIGNUP){Ee.heroNotEnought();return}if(o.item&&o.item.length>1){var l=o.item[0],c=o.item[1];t==K.ACTION_SIGNUP&&!e.preContract&&(c=c*2);var u=b.instance.m_packageData.getCountById(l);let lt=_.intance.getArenaTypesInSubByType(o.type).heroType;var p=k.instance.arenaType;if(Ve){var d=await I.requestPost("wxgame/lease/heroInfo",{heroPk:ke.fightHeroPk});if(d.info.leaseType==1){if(d.info.remainTicketCount<=0&&p==1){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1175),P.YES,null);return}if(lt.indexOf(d.info.leaseType)<0){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(127),P.YES,null);return}if(l!==d.info.ticketId){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1178),P.YES,null);return}}else if(d.info.leaseType==2&&lt.indexOf(d.info.leaseType)<0){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1299),P.YES,null);return}}if(console.log("currNum: "+u,"needNum: "+c,"itemId: "+l),t!=K.ACTION_SIGNUP&&u<c&&(!Ve||d.info.leaseType==2)){Ee.titickNotEnought(l);return}}}let L=!1,v;if(t==K.ACTION_CREATE)v=await I.requestPost("wxgame/room/create",{numIndex:e.numIndex,nodeId:e.nodeId,password:i,arenaId:e.arenaId,roomName:e.roomName,customName:e.customName,anonymous:e.anonymous,closeLive:e.closeLive});else if(t==K.ACTION_JOIN)v=await I.requestPost("wxgame/room/join",{roomId:e.roomId,pass:i});else if(t==K.ACTION_CREATE_BOOKING)e.groupId&&(L=!0),v=await I.requestPost("wxgame/roomPreContract/create",{numIndex:e.numIndex,groupId:e.groupId,nodeId:e.nodeId,password:i,arenaId:e.arenaId,roomName:e.roomName,customName:e.customName,startTime:e.startTime,anonymous:e.anonymous,closeLive:e.closeLive});else if(t==K.ACTION_JOIN_BOOKING){var E=0;e.teamDto&&(E=e.teamDto.teamId),e.groupId&&E==0&&(L=!0),v=await I.requestPost("wxgame/roomPreContract/apply",{teamId:E,roomId:e.roomId,password:i})}else if(t==K.ACTION_WATCH)v=await I.requestPost("wxgame/room/joinWatch",{roomId:e.roomId});else if(t==K.ACTION_SIGNUP&&(v=await I.requestPost("wxgame/room/joinGroup",{roomId:e.roomId}),v)){T.instance.notice(m.instance.getLanguage(1373)),this.onRefreshRoomImditely();return}if(v.roomDto&&(B.instance.roomDto=v.roomDto),v.roomDto||v.dto){if(g.intance.event(f.EVENT_Close_CreateRoom),t==K.ACTION_CREATE_BOOKING||t==K.ACTION_JOIN_BOOKING)if(L){var w=v.dto,R=w.roomId,E=w.teamDto.teamId,U=w.teamDto.leaderPlayer.name;A.intance.openModule(y.TeamCreateShareDialog,[R,E,U])}else T.instance.notice(m.instance.getLanguage(2e3));else t==K.ACTION_WATCH&&v.roomDto&&v.roomDto.state==10?ot.instance.initSocket():a.instance.openEnterView();if(t==K.ACTION_CREATE||t==K.ACTION_CREATE_BOOKING){var V=o.type,q="";V==1?q="Professional Arena":V==2?q="Airdrop Arena":V==3&&(q="Training Arena");var te=o.lv,ee="";te==1?ee="Novice":te==2?ee="Elite":te==3&&(ee="Master");var X=o.coinType,re=_.intance.m_dicItems.get(X),oe=m.instance.getEnglishLanguage(re.name);gtag("event","new_arena",{event_category:q,arena_type:q,coin_type:oe,arena_lv:ee})}}else T.instance.notice(m.instance.getLanguage(135))}async goBookingCreateRoomDialog(t,e=0){var i=await I.requestPost("wxgame/roomPreContract/info",{roomId:t,teamId:e});i.dto&&(g.intance.event(f.EVENT_CLOSE_MODULE,y.CreateRoomDialog),A.intance.openModule(y.CreateRoomDialog,[K.ACTION_JOIN_BOOKING,!1,!0,[i.dto,i.inApply]]))}async goMatchCreateRoomDialog(t){var e=await I.requestPost("wxgame/room/info2",{roomId:t});e.roomDto&&(g.intance.event(f.EVENT_CLOSE_MODULE,y.CreateRoomDialog),A.intance.openModule(y.CreateRoomDialog,[K.ACTION_JOIN,!1,!1,e.roomDto,!0]))}goBookingInviteConfimDialog(t){me.instance().AlertByType(P.InviteConfimDialog,t,P.CANCEL,Laya.Handler.create(this,this.onAcceptInvite,[t]))}onAcceptInvite(t){console.log("onAcceptInvitation");var e=new so;e.roomId=t.roomId,e.arenaId=t.arenaId;var i=new vh;i.teamId=t.teamId,e.teamDto=i,a.instance.onCreateAndJoinWithPwd(K.ACTION_JOIN_BOOKING,e,"")}goBookingApplyConfimDialog(t){me.instance().AlertByType(P.ApplyConfimDialog,t,P.CANCEL,Laya.Handler.create(this,this.onAcceptApply,[t,1]),Laya.Handler.create(this,this.onAcceptApply,[t,2]))}async onAcceptApply(t,e){console.log("onAcceptInvitation");var i=t.roomId,n=t.teamId,r=t.applicant.id,s=await I.requestPost("wxgame/roomPreContract/groupJoinApply",{roomId:i,teamId:n,targetPid:r,type:e});T.instance.notice(m.instance.getLanguage(2e3))}onGetBookingId(t){var e,i;let n=/\[([^\]]+)\]/g,r,s=[];for(;(r=n.exec(t))!==null&&(s.push(r[1]),s.length!==2););if(s.length>0)e=s[0],s.length>1&&(i=s[1]),console.log("中括号内容:",e,i);else{console.log("未找到中括号内容，检查链接中的 bookingId...");let l=/https?:\/\/[^\s]+/g.exec(t);if(l){let c=new URL(l[0]),u=c.searchParams.get("bookingId");if(u){e=u,console.log("链接中的 bookingId:",u);let p=c.searchParams.get("teamId");p&&(i=p,console.log("链接中的 teamId:",p))}else console.log("链接中未包含 bookingId 参数")}else console.log("文本中未找到链接")}return[e,i]}onGetNewUrl(t,e){let i=new URL(window.location.href),n=i.searchParams;n.get("bookingId")&&n.delete("bookingId"),n.has("debug")&&n.delete("debug"),n.has("address")&&n.delete("address");let s=t;return n.append("bookingId",s+""),e&&n.append("teamId",e+""),i.search=n.toString(),i.toString()}goPveMatch(){var t={arenaId:4001,coinType:0,roomId:4563,members:[{id:1000000026,x:1706,y:1350,dire:0,speed:320,heroId:15000020003,heroColor:1e3,name:"1000000026",icon:"10015",leader:0,kill:0,hp:899,maxHp:899,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1000000027,x:952,y:1735,dire:0,speed:320,heroId:15000030003,heroColor:1e3,name:"1000000027",icon:"10015",leader:0,kill:0,hp:919,maxHp:919,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1000000007,x:952,y:965,dire:0,speed:320,heroId:12000010003,heroColor:1e3,name:"1000000007",icon:"10015",leader:0,kill:0,hp:1018,maxHp:1018,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:0,nodeId:0,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!0,startTime:1727683479461},{id:1003,x:2083,y:2120,dire:0,speed:0,heroId:15000010006,heroColor:434,name:"h1",icon:"10005",leader:1,kill:0,hp:1828,maxHp:1828,atk:0,score:1e4,skillCd:{},commonCd:0,area:0,country:1017,nodeId:1,lease:0,equips:{},cardCd:{},buffDtoList:[],no:0,npc:!1,startTime:1727683479461}],remainderCd:604799998,startTime:1727683478029,nowTime:1727683479462,arenaType:4,watch:[],anonymous:0},e=t.members.length,i=t.members[e-1];i&&(i.id=b.instance.playerDto.pid),B.instance.matchDto=t,se.intance.setCurrentScene(Y.M_SCENE_MATCH)}};var tn=class tn{constructor(t,e){this._lineIndex=0;this._isShow=!1;this._alpha=.6;this.isInit=!1;this._isRelease=!0;this._count=0;this.maxCount=1e3;this.prevX=0;this.prevY=0;this._stage=t,this._isRelease=e,this._actionLineList=[],this._time=new Date().getTime();let i,n,r,s,o=function(u){i=u.stageX,n=u.stageY,r=i,s=n},l=function(u){r=u.stageX,s=u.stageY},c=function(u){let p=Laya.stage.width-(r-i)<160,d=Laya.stage.height-(s-n)<160;p&&d&&Wt.debugger&&(Laya.Browser.window.console.log=Wt.addConsoleLog,Wt.debugger.showOrHide())};Laya.stage.on(Laya.Event.MOUSE_DOWN,this,o),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,l),Laya.stage.on(Laya.Event.MOUSE_UP,this,c)}initDebugView(){if(!this.isInit){this.totalW=Laya.stage.width,this.totalH=Laya.stage.height/2,this.bigContainer=new Laya.Sprite,this.bigContainer.zOrder=2e3,this.bigContainer.name="bigContainerDebug",this.bgContainer=new Laya.Sprite,this._bgSp=new Laya.Sprite,this._bgSp.alpha=this._alpha,this._bgSp.graphics.drawRect(0,0,this.totalW,this.totalH,"#000000"),this._bgSp.mouseEnabled=!1,this._debugInfoTf=new Laya.Text,this._debugInfoTf.color="#ffffff",this._debugInfoTf.width=this.totalW-10,this._debugInfoTf.height=this.totalH-10,this._debugInfoTf.overflow="scroll",this._debugInfoTf.wordWrap=!0;let t="[LOADINFO - DEBUGGER]";this.appendText("加载调试信息 "+t,0,!1),this._closeTf=new Laya.Label,this._closeTf.color="#ff0000",this._closeTf.valign="middle",this._closeTf.width=55,this._closeTf.height=55,this._closeTf.borderColor=tn.DEFAULT_COLOR,this._closeTf.text="关闭",this._autoScrollTf=new Laya.Label,this._autoScrollTf.color="#ff0000",this._autoScrollTf.valign="middle",this._autoScrollTf.width=55,this._autoScrollTf.height=55,this._autoScrollTf.borderColor=tn.DEFAULT_COLOR,this._autoScrollTf.text="自动卷屏",this._bgAlpha0=new Laya.Label,this._bgAlpha0.color="#ff0000",this._bgAlpha0.valign="middle",this._bgAlpha0.width=55,this._bgAlpha0.height=55,this._bgAlpha0.borderColor=tn.DEFAULT_COLOR,this._bgAlpha0.text="背景-",this._bgAlpha1=new Laya.Label,this._bgAlpha1.color="#ff0000",this._bgAlpha1.valign="middle",this._bgAlpha1.width=55,this._bgAlpha1.height=55,this._bgAlpha1.borderColor=tn.DEFAULT_COLOR,this._bgAlpha1.text="背景+",this._clearTf=new Laya.Label,this._clearTf.color="#ff0000",this._clearTf.valign="middle",this._clearTf.width=55,this._clearTf.height=55,this._clearTf.borderColor=tn.DEFAULT_COLOR,this._clearTf.text="清理",this._testTf=new Laya.Label,this._testTf.color="#ff0000",this._testTf.width=55,this._testTf.height=55,this._testTf.borderColor=tn.DEFAULT_COLOR,this._testTf.text="点穿",this.bgContainer.x=5,this.bgContainer.y=5,this._debugInfoTf.x=5,this._debugInfoTf.y=5,this.bgContainer.addChild(this._bgSp),this.bgContainer.addChild(this._debugInfoTf),this._closeTf.x=this.totalW-60,this._closeTf.y=5,this.bgContainer.addChild(this._closeTf),this._autoScrollTf.x=this.totalW-60,this._autoScrollTf.y=105,this.bgContainer.addChild(this._autoScrollTf),this._bgAlpha0.x=this.totalW-60,this._bgAlpha0.y=205,this.bgContainer.addChild(this._bgAlpha0),this._bgAlpha1.x=this.totalW-60,this._bgAlpha1.y=305,this.bgContainer.addChild(this._bgAlpha1),this._clearTf.x=this.totalW-60,this._clearTf.y=405,this.bgContainer.addChild(this._clearTf),this._testTf.x=this.totalW-60,this._testTf.y=505,this.bigContainer.addChild(this.bgContainer),this.bigContainer.addChild(this._testTf),this._autoScroll=!0,this._hide=!0,this._debugInfoTf.on(Laya.Event.MOUSE_DOWN,this,this.startScrollText),this._closeTf.on(Laya.Event.CLICK,this,this.onCloseTfClick),this._autoScrollTf.on(Laya.Event.CLICK,this,this.onAutoScrollTfClick),this._bgAlpha0.on(Laya.Event.CLICK,this,this.onBgAlpha0),this._bgAlpha1.on(Laya.Event.CLICK,this,this.onBgAlpha1),this._clearTf.on(Laya.Event.CLICK,this,this.onClearTfClick),this._testTf.on(Laya.Event.CLICK,this,this.onTestTfClick),this.isInit=!0}}show(){this.initDebugView(),this._stage.addChild(this.bigContainer),this._isShow=!0,this.updateView()}hide(){this.initDebugView(),this.bigContainer.parent&&this.bigContainer.parent.removeChild(this.bigContainer),this._isShow=!1,this.updateView()}showOrHide(){this._isShow=!this._isShow,this._isShow?this.show():this.hide()}appendText(t,e=0,i=!0){if(i){let n=new Date().getTime()-this._time;t+="  ["+(n/1e3).toFixed(3)+"]"}this._actionLineList.push([t+`
`,e]),this._lineIndex>=200&&(this._actionLineList.splice(0,20),this._lineIndex-=20),this._count++,this._count>this.maxCount&&(this._count=0,this._debugInfoTf&&(this._debugInfoTf.text="")),this._isShow&&(this._currentLine=this._actionLineList[this._lineIndex++],this._debugInfoTf&&(this._debugInfoTf.text+=this._currentLine[0]),this._autoScroll&&this._debugInfoTf&&(this._debugInfoTf.scrollY=this._debugInfoTf.maxScrollY))}updateView(){if(this._isShow){this._count=0,this._debugInfoTf.text="";let t=this._actionLineList.length;for(this._lineIndex=0;this._lineIndex<t;++this._lineIndex)this._currentLine=this._actionLineList[this._lineIndex],this._debugInfoTf.text+=this._currentLine[0],this._count++,this._count>this.maxCount&&(this._count=0,this._debugInfoTf.text="");this._autoScroll&&(this._debugInfoTf.scrollY=this._debugInfoTf.maxScrollY)}else this._debugInfoTf.text=""}onCloseTfClick(t){this.hide()}onAutoScrollTfClick(t){this._autoScroll=!this._autoScroll,this._autoScroll?this._autoScrollTf.text="自动卷屏":this._autoScrollTf.text="手动卷屏"}onBgAlpha0(t){this._alpha-=.1,this._alpha<=0&&(this._alpha=0),this._bgSp.alpha=this._alpha}onBgAlpha1(t){this._alpha+=.1,this._alpha>=1&&(this._alpha=1),this._bgSp.alpha=this._alpha}onClearTfClick(t){this._debugInfoTf.text="",this._actionLineList.length=0,this._lineIndex=0}onTestTfClick(t){this.bgContainer.mouseEnabled=!this.bgContainer.mouseEnabled}set testFun(t){this._testFun=t}get bgSp(){return this._bgSp}startScrollText(t){this.prevX=this._debugInfoTf.mouseX,this.prevY=this._debugInfoTf.mouseY,Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.finishScrollText)}finishScrollText(t){Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.finishScrollText)}scrollText(t){let e=this._debugInfoTf.mouseX,i=this._debugInfoTf.mouseY;this._debugInfoTf.scrollX+=this.prevX-e,this._debugInfoTf.scrollY+=this.prevY-i,this.prevX=e,this.prevY=i}};tn.DEFAULT_COLOR="#ffffff";var xh=tn;var Wt=class a{static Initialize(t,e){a.isRelease=e,this.debugger==null&&(this.debugger=new xh(t,e))}static log(t,e=0,i=0){var n=Ee.GetLogTime+" "+t;e&&a.addLog(n,e,i)}static addLog(t,e=0,i=0){this.debugger&&this.debugger.appendText(t,i),console.log(t)}static addConsoleLog(...t){a.debugger&&a.debugger.appendText(t,0)}};var ul=class ul{constructor(){this.module=0;this.errorCode=0;this.errorMessage=""}protocolId(){return ul.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.errorCode),t.writeString(e.errorMessage),t.writeInt(e.module))}static read(t){if(!t.readBoolean())return null;let e=new ul,i=t.readInt();e.errorCode=i;let n=t.readString();e.errorMessage=n;let r=t.readInt();return e.module=r,e}};ul.PROTOCOL_ID=101;var CI=ul,ml=CI;var pl=class pl{protocolId(){return pl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null}static read(t){return t.readBoolean()?new pl:null}};pl.PROTOCOL_ID=103;var SI=pl,Ih=SI;var hl=class hl{constructor(){this.time=0}protocolId(){return hl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeLong(e.time)}static read(t){if(!t.readBoolean())return null;let e=new hl,i=t.readLong();return e.time=i,e}};hl.PROTOCOL_ID=104;var DI=hl,nS=DI;var dl=class dl{constructor(){this.pid=0;this.roomId=0;this.loginToken="";this.watch=0}protocolId(){return dl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeString(e.loginToken),t.writeLong(e.pid),t.writeLong(e.roomId),t.writeInt(e.watch))}static read(t){if(!t.readBoolean())return null;let e=new dl,i=t.readString();e.loginToken=i;let n=t.readLong();e.pid=n;let r=t.readLong();if(e.roomId=r,!t.isReadable())return e;let s=t.readInt();return e.watch=s,e}};dl.PROTOCOL_ID=1001;var AI=dl,Eh=AI;var fl=class fl{constructor(){this.errorCode=0;this.pid=0;this.matchDto=null;this.socketToken=""}protocolId(){return fl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.errorCode),t.writePacket(e.matchDto,25010),t.writeLong(e.pid),t.writeString(e.socketToken))}static read(t){if(!t.readBoolean())return null;let e=new fl,i=t.readInt();e.errorCode=i;let n=t.readPacket(25010);e.matchDto=n;let r=t.readLong();e.pid=r;let s=t.readString();return e.socketToken=s,e}};fl.PROTOCOL_ID=1002;var kI=fl,wh=kI;var yl=class yl{protocolId(){return yl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null}static read(t){return t.readBoolean()?new yl:null}};yl.PROTOCOL_ID=1004;var BI=yl,Th=BI;var bl=class bl{constructor(){this.sequence=0;this.param=""}protocolId(){return bl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.sequence),t.writeString(e.param))}static read(t){if(!t.readBoolean())return null;let e=new bl;if(!t.isReadable())return e;let i=t.readInt();if(e.sequence=i,!t.isReadable())return e;let n=t.readString();return e.param=n,e}};bl.PROTOCOL_ID=1005;var MI=bl,rS=MI;var gl=class gl{constructor(){this.sequence=0;this.code=0}protocolId(){return gl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.sequence),t.writeInt(e.code))}static read(t){if(!t.readBoolean())return null;let e=new gl;if(!t.isReadable())return e;let i=t.readInt();if(e.sequence=i,!t.isReadable())return e;let n=t.readInt();return e.code=n,e}};gl.PROTOCOL_ID=1006;var RI=gl,sS=RI;var Ll=class Ll{constructor(){this.token=""}protocolId(){return Ll.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeString(e.token)}static read(t){if(!t.readBoolean())return null;let e=new Ll,i=t.readString();return e.token=i,e}};Ll.PROTOCOL_ID=1007;var PI=Ll,Ch=PI;var _l=class _l{constructor(){this.errorCode=0}protocolId(){return _l.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeInt(e.errorCode)}static read(t){if(!t.readBoolean())return null;let e=new _l,i=t.readInt();return e.errorCode=i,e}};_l.PROTOCOL_ID=1008;var NI=_l,Sh=NI;var vl=class vl{protocolId(){return vl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null}static read(t){return t.readBoolean()?new vl:null}};vl.PROTOCOL_ID=1010;var OI=vl,oS=OI;var xl=class xl{constructor(){this.type=0;this.id=0;this.count=0}protocolId(){return xl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.type),t.writeInt(e.id),t.writeLong(e.count))}static read(t){if(!t.readBoolean())return null;let e=new xl;if(!t.isReadable())return e;let i=t.readInt();if(e.type=i,!t.isReadable())return e;let n=t.readInt();if(e.id=n,!t.isReadable())return e;let r=t.readLong();return e.count=r,e}};xl.PROTOCOL_ID=1012;var HI=xl,lS=HI;var Il=class Il{constructor(){this.x=0;this.y=0;this.speed=0;this.dire=0;this.time=0;this.area=0}protocolId(){return Il.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.area),t.writeInt(e.dire),t.writeInt(e.speed),t.writeLong(e.time),t.writeInt(e.x),t.writeInt(e.y))}static read(t){if(!t.readBoolean())return null;let e=new Il,i=t.readInt();e.area=i;let n=t.readInt();e.dire=n;let r=t.readInt();e.speed=r;let s=t.readLong();e.time=s;let o=t.readInt();e.x=o;let l=t.readInt();return e.y=l,e}};Il.PROTOCOL_ID=1013;var UI=Il,Dh=UI;var El=class El{constructor(){this.x=0;this.y=0;this.speed=0;this.dire=0;this.errorCode=0;this.time=0}protocolId(){return El.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.dire),t.writeInt(e.errorCode),t.writeInt(e.speed),t.writeLong(e.time),t.writeInt(e.x),t.writeInt(e.y))}static read(t){if(!t.readBoolean())return null;let e=new El,i=t.readInt();e.dire=i;let n=t.readInt();e.errorCode=n;let r=t.readInt();e.speed=r;let s=t.readLong();e.time=s;let o=t.readInt();e.x=o;let l=t.readInt();return e.y=l,e}};El.PROTOCOL_ID=1014;var VI=El,cS=VI;var wl=class wl{constructor(){this.type=0;this.member=null}protocolId(){return wl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writePacket(e.member,25011),t.writeInt(e.type))}static read(t){if(!t.readBoolean())return null;let e=new wl,i=t.readPacket(25011);e.member=i;let n=t.readInt();return e.type=n,e}};wl.PROTOCOL_ID=1016;var FI=wl,Ah=FI;var Tl=class Tl{constructor(){this.pid=0;this.x=0;this.y=0;this.speed=0;this.dire=0;this.time=0;this.area=0;this.npc=!1}protocolId(){return Tl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.area),t.writeInt(e.dire),t.writeBoolean(e.npc),t.writeLong(e.pid),t.writeInt(e.speed),t.writeLong(e.time),t.writeInt(e.x),t.writeInt(e.y))}static read(t){if(!t.readBoolean())return null;let e=new Tl,i=t.readInt();e.area=i;let n=t.readInt();e.dire=n;let r=t.readBoolean();e.npc=r;let s=t.readLong();e.pid=s;let o=t.readInt();e.speed=o;let l=t.readLong();e.time=l;let c=t.readInt();e.x=c;let u=t.readInt();return e.y=u,e}};Tl.PROTOCOL_ID=1018;var GI=Tl,kh=GI;var Cl=class Cl{constructor(){this.roomId=0;this.rankList=[];this.reward=[];this.arenaType=0;this.groupData=[];this.teamData=[];this.groupFightScore=new Map;this.groupId=0;this.battleTime=0;this.personalRank=0;this.totalRank=0;this.loserTid=""}protocolId(){return Cl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.arenaType),t.writeLong(e.battleTime),e.groupData===null?t.writeInt(0):(t.writeInt(e.groupData.length),e.groupData.forEach(i=>{t.writePacketList(i,25013)})),t.writeStringLongMap(e.groupFightScore),t.writeInt(e.groupId),t.writeString(e.loserTid),t.writeLong(e.personalRank),t.writePacketList(e.rankList,25012),t.writePacketList(e.reward,25008),t.writeLong(e.roomId),t.writePacketList(e.teamData,25017),t.writeLong(e.totalRank))}static read(t){if(!t.readBoolean())return null;let e=new Cl,i=t.readInt();e.arenaType=i;let n=t.readLong();e.battleTime=n;let r=new Array,s=t.readInt();if(s>0)for(let w=0;w<s;w++){let R=t.readPacketList(25013);r.push(R)}e.groupData=r;let o=t.readStringLongMap();e.groupFightScore=o;let l=t.readInt();e.groupId=l;let c=t.readString();e.loserTid=c;let u=t.readLong();e.personalRank=u;let p=t.readPacketList(25012);e.rankList=p;let d=t.readPacketList(25008);e.reward=d;let L=t.readLong();e.roomId=L;let v=t.readPacketList(25017);e.teamData=v;let E=t.readLong();return e.totalRank=E,e}};Cl.PROTOCOL_ID=1020;var KI=Cl,Bh=KI;var Sl=class Sl{constructor(){this.targetId=0;this.attackType=0;this.skillId=0}protocolId(){return Sl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.attackType),t.writeInt(e.skillId),t.writeLong(e.targetId))}static read(t){if(!t.readBoolean())return null;let e=new Sl,i=t.readInt();e.attackType=i;let n=t.readInt();e.skillId=n;let r=t.readLong();return e.targetId=r,e}};Sl.PROTOCOL_ID=1021;var qI=Sl,Mh=qI;var Dl=class Dl{constructor(){this.errorCode=0;this.cd=0;this.attackType=0;this.skillId=0;this.commonCd=0}protocolId(){return Dl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.attackType),t.writeLong(e.cd),t.writeLong(e.commonCd),t.writeInt(e.errorCode),t.writeInt(e.skillId))}static read(t){if(!t.readBoolean())return null;let e=new Dl,i=t.readInt();e.attackType=i;let n=t.readLong();e.cd=n;let r=t.readLong();e.commonCd=r;let s=t.readInt();e.errorCode=s;let o=t.readInt();return e.skillId=o,e}};Dl.PROTOCOL_ID=1022;var WI=Dl,uS=WI;var Al=class Al{constructor(){this.attPid=0;this.defPid=0;this.attackValue=[];this.allAtkValue=0;this.bj=!1;this.sb=!1;this.skill=0;this.defHp=0;this.attScore=0;this.defScore=0;this.buffEffects=[];this.attHp=0;this.npc=!1}protocolId(){return Al.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLong(e.allAtkValue),t.writeLong(e.attHp),t.writeLong(e.attPid),t.writeLong(e.attScore),t.writeLongList(e.attackValue),t.writeBoolean(e.bj),t.writePacketList(e.buffEffects,25016),t.writeLong(e.defHp),t.writeLong(e.defPid),t.writeLong(e.defScore),t.writeBoolean(e.npc),t.writeBoolean(e.sb),t.writeInt(e.skill))}static read(t){if(!t.readBoolean())return null;let e=new Al,i=t.readLong();e.allAtkValue=i;let n=t.readLong();e.attHp=n;let r=t.readLong();e.attPid=r;let s=t.readLong();e.attScore=s;let o=t.readLongList();e.attackValue=o;let l=t.readBoolean();e.bj=l;let c=t.readPacketList(25016);e.buffEffects=c;let u=t.readLong();e.defHp=u;let p=t.readLong();e.defPid=p;let d=t.readLong();e.defScore=d;let L=t.readBoolean();e.npc=L;let v=t.readBoolean();e.sb=v;let E=t.readInt();return e.skill=E,e}};Al.PROTOCOL_ID=1024;var YI=Al,Rh=YI;var kl=class kl{constructor(){this.roomId=0}protocolId(){return kl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeLong(e.roomId)}static read(t){if(!t.readBoolean())return null;let e=new kl,i=t.readLong();return e.roomId=i,e}};kl.PROTOCOL_ID=1025;var zI=kl,Ph=zI;var Bl=class Bl{constructor(){this.errorCode=0;this.matchDto=null}protocolId(){return Bl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.errorCode),t.writePacket(e.matchDto,25010))}static read(t){if(!t.readBoolean())return null;let e=new Bl,i=t.readInt();e.errorCode=i;let n=t.readPacket(25010);return e.matchDto=n,e}};Bl.PROTOCOL_ID=1026;var jI=Bl,Nh=jI;var Ml=class Ml{constructor(){this.pid=0}protocolId(){return Ml.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeLong(e.pid)}static read(t){if(!t.readBoolean())return null;let e=new Ml,i=t.readLong();return e.pid=i,e}};Ml.PROTOCOL_ID=1028;var $I=Ml,Oh=$I;var Rl=class Rl{constructor(){this.pid=0;this.kill=0}protocolId(){return Rl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.kill),t.writeLong(e.pid))}static read(t){if(!t.readBoolean())return null;let e=new Rl,i=t.readInt();e.kill=i;let n=t.readLong();return e.pid=n,e}};Rl.PROTOCOL_ID=1030;var XI=Rl,Hh=XI;var Pl=class Pl{constructor(){this.targetId=0;this.type=0;this.skillId=0;this.param=new Map;this.monsterId=0}protocolId(){return Pl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLong(e.monsterId),t.writeStringStringMap(e.param),t.writeInt(e.skillId),t.writeLong(e.targetId),t.writeInt(e.type))}static read(t){if(!t.readBoolean())return null;let e=new Pl,i=t.readLong();e.monsterId=i;let n=t.readStringStringMap();e.param=n;let r=t.readInt();e.skillId=r;let s=t.readLong();e.targetId=s;let o=t.readInt();return e.type=o,e}};Pl.PROTOCOL_ID=1031;var QI=Pl,Nl=QI;var Ol=class Ol{constructor(){this.errorCode=0}protocolId(){return Ol.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeInt(e.errorCode)}static read(t){if(!t.readBoolean())return null;let e=new Ol,i=t.readInt();return e.errorCode=i,e}};Ol.PROTOCOL_ID=1032;var JI=Ol,mS=JI;var Hl=class Hl{constructor(){this.attId=0;this.defId=0;this.type=0;this.skillId=0;this.param=new Map}protocolId(){return Hl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLong(e.attId),t.writeLong(e.defId),t.writeStringStringMap(e.param),t.writeInt(e.skillId),t.writeInt(e.type))}static read(t){if(!t.readBoolean())return null;let e=new Hl,i=t.readLong();e.attId=i;let n=t.readLong();e.defId=n;let r=t.readStringStringMap();e.param=r;let s=t.readInt();e.skillId=s;let o=t.readInt();return e.type=o,e}};Hl.PROTOCOL_ID=1034;var ZI=Hl,Uh=ZI;var Ul=class Ul{constructor(){this.targetId=0;this.targetX=0;this.targetY=0;this.skillId=0;this.sourceId=0;this.time=0}protocolId(){return Ul.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.skillId),t.writeLong(e.sourceId),t.writeLong(e.targetId),t.writeInt(e.targetX),t.writeInt(e.targetY),t.writeLong(e.time))}static read(t){if(!t.readBoolean())return null;let e=new Ul,i=t.readInt();e.skillId=i;let n=t.readLong();e.sourceId=n;let r=t.readLong();e.targetId=r;let s=t.readInt();e.targetX=s;let o=t.readInt();e.targetY=o;let l=t.readLong();return e.time=l,e}};Ul.PROTOCOL_ID=1035;var eE=Ul,Vh=eE;var Vl=class Vl{constructor(){this.errorCode=0;this.time=0}protocolId(){return Vl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.errorCode),t.writeLong(e.time))}static read(t){if(!t.readBoolean())return null;let e=new Vl,i=t.readInt();e.errorCode=i;let n=t.readLong();return e.time=n,e}};Vl.PROTOCOL_ID=1036;var tE=Vl,pS=tE;var Fl=class Fl{constructor(){this.targetId=0;this.targetX=0;this.targetY=0;this.sourceId=0;this.skillId=0;this.time=0}protocolId(){return Fl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.skillId),t.writeLong(e.sourceId),t.writeLong(e.targetId),t.writeInt(e.targetX),t.writeInt(e.targetY),t.writeLong(e.time))}static read(t){if(!t.readBoolean())return null;let e=new Fl,i=t.readInt();e.skillId=i;let n=t.readLong();e.sourceId=n;let r=t.readLong();e.targetId=r;let s=t.readInt();e.targetX=s;let o=t.readInt();e.targetY=o;let l=t.readLong();return e.time=l,e}};Fl.PROTOCOL_ID=1038;var iE=Fl,Fh=iE;var Gl=class Gl{constructor(){this.time=0}protocolId(){return Gl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeLong(e.time)}static read(t){if(!t.readBoolean())return null;let e=new Gl,i=t.readLong();return e.time=i,e}};Gl.PROTOCOL_ID=1040;var aE=Gl,Gh=aE;var Kl=class Kl{constructor(){this.moveList=[]}protocolId(){return Kl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writePacketList(e.moveList,1018)}static read(t){if(!t.readBoolean())return null;let e=new Kl,i=t.readPacketList(1018);return e.moveList=i,e}};Kl.PROTOCOL_ID=1042;var nE=Kl,Kh=nE;var ql=class ql{constructor(){this.pos=0}protocolId(){return ql.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeInt(e.pos)}static read(t){if(!t.readBoolean())return null;let e=new ql,i=t.readInt();return e.pos=i,e}};ql.PROTOCOL_ID=1043;var rE=ql,qh=rE;var Wl=class Wl{constructor(){this.errorCode=0;this.skillId=0;this.pos=0;this.remainCount=0}protocolId(){return Wl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.errorCode),t.writeInt(e.pos),t.writeInt(e.remainCount),t.writeInt(e.skillId))}static read(t){if(!t.readBoolean())return null;let e=new Wl,i=t.readInt();e.errorCode=i;let n=t.readInt();e.pos=n;let r=t.readInt();e.remainCount=r;let s=t.readInt();return e.skillId=s,e}};Wl.PROTOCOL_ID=1044;var sE=Wl,Wh=sE;var Yl=class Yl{constructor(){this.buffList=[];this.buffEffects=[]}protocolId(){return Yl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writePacketList(e.buffEffects,25016),t.writePacketList(e.buffList,25015))}static read(t){if(!t.readBoolean())return null;let e=new Yl,i=t.readPacketList(25016);e.buffEffects=i;let n=t.readPacketList(25015);return e.buffList=n,e}};Yl.PROTOCOL_ID=1046;var oE=Yl,Yh=oE;var zl=class zl{constructor(){this.pos=0;this.targetList=[]}protocolId(){return zl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.pos),t.writeLongList(e.targetList))}static read(t){if(!t.readBoolean())return null;let e=new zl,i=t.readInt();e.pos=i;let n=t.readLongList();return e.targetList=n,e}};zl.PROTOCOL_ID=1047;var lE=zl,zh=lE;var jl=class jl{constructor(){this.errorCode=0;this.skillId=0;this.pos=0}protocolId(){return jl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.errorCode),t.writeInt(e.pos),t.writeInt(e.skillId))}static read(t){if(!t.readBoolean())return null;let e=new jl,i=t.readInt();e.errorCode=i;let n=t.readInt();e.pos=n;let r=t.readInt();return e.skillId=r,e}};jl.PROTOCOL_ID=1048;var cE=jl,hS=cE;var $l=class $l{constructor(){this.pos=0;this.targetList=[]}protocolId(){return $l.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.pos),t.writeLongList(e.targetList))}static read(t){if(!t.readBoolean())return null;let e=new $l,i=t.readInt();e.pos=i;let n=t.readLongList();return e.targetList=n,e}};$l.PROTOCOL_ID=1049;var uE=$l,jh=uE;var Xl=class Xl{constructor(){this.errorCode=0;this.skillId=0;this.pos=0;this.remainCount=0}protocolId(){return Xl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.errorCode),t.writeInt(e.pos),t.writeInt(e.remainCount),t.writeInt(e.skillId))}static read(t){if(!t.readBoolean())return null;let e=new Xl,i=t.readInt();e.errorCode=i;let n=t.readInt();e.pos=n;let r=t.readInt();e.remainCount=r;let s=t.readInt();return e.skillId=s,e}};Xl.PROTOCOL_ID=1050;var mE=Xl,$h=mE;var Ql=class Ql{constructor(){this.monsterId=0;this.hp=0;this.maxHp=0;this.x=0;this.y=0}protocolId(){return Ql.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLong(e.hp),t.writeLong(e.maxHp),t.writeLong(e.monsterId),t.writeInt(e.x),t.writeInt(e.y))}static read(t){if(!t.readBoolean())return null;let e=new Ql,i=t.readLong();e.hp=i;let n=t.readLong();e.maxHp=n;let r=t.readLong();e.monsterId=r;let s=t.readInt();e.x=s;let o=t.readInt();return e.y=o,e}};Ql.PROTOCOL_ID=1052;var pE=Ql,Xh=pE;var Jl=class Jl{constructor(){this.x=0;this.y=0;this.speed=0;this.dire=0;this.time=0;this.area=0;this.monsterId=0}protocolId(){return Jl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.area),t.writeInt(e.dire),t.writeLong(e.monsterId),t.writeInt(e.speed),t.writeLong(e.time),t.writeInt(e.x),t.writeInt(e.y))}static read(t){if(!t.readBoolean())return null;let e=new Jl,i=t.readInt();e.area=i;let n=t.readInt();e.dire=n;let r=t.readLong();e.monsterId=r;let s=t.readInt();e.speed=s;let o=t.readLong();e.time=o;let l=t.readInt();e.x=l;let c=t.readInt();return e.y=c,e}};Jl.PROTOCOL_ID=1053;var hE=Jl,Qh=hE;var Zl=class Zl{constructor(){this.x=0;this.y=0;this.speed=0;this.dire=0;this.errorCode=0;this.time=0;this.monsterId=0}protocolId(){return Zl.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.dire),t.writeInt(e.errorCode),t.writeLong(e.monsterId),t.writeInt(e.speed),t.writeLong(e.time),t.writeInt(e.x),t.writeInt(e.y))}static read(t){if(!t.readBoolean())return null;let e=new Zl,i=t.readInt();e.dire=i;let n=t.readInt();e.errorCode=n;let r=t.readLong();e.monsterId=r;let s=t.readInt();e.speed=s;let o=t.readLong();e.time=o;let l=t.readInt();e.x=l;let c=t.readInt();return e.y=c,e}};Zl.PROTOCOL_ID=1054;var dE=Zl,dS=dE;var ec=class ec{constructor(){this.targetId=0;this.attackType=0;this.skillId=0;this.monsterId=0}protocolId(){return ec.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.attackType),t.writeLong(e.monsterId),t.writeInt(e.skillId),t.writeLong(e.targetId))}static read(t){if(!t.readBoolean())return null;let e=new ec,i=t.readInt();e.attackType=i;let n=t.readLong();e.monsterId=n;let r=t.readInt();e.skillId=r;let s=t.readLong();return e.targetId=s,e}};ec.PROTOCOL_ID=1055;var fE=ec,Jh=fE;var tc=class tc{constructor(){this.errorCode=0;this.cd=0;this.attackType=0;this.skillId=0;this.commonCd=0;this.monsterId=0}protocolId(){return tc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.attackType),t.writeLong(e.cd),t.writeLong(e.commonCd),t.writeInt(e.errorCode),t.writeLong(e.monsterId),t.writeInt(e.skillId))}static read(t){if(!t.readBoolean())return null;let e=new tc,i=t.readInt();e.attackType=i;let n=t.readLong();e.cd=n;let r=t.readLong();e.commonCd=r;let s=t.readInt();e.errorCode=s;let o=t.readLong();e.monsterId=o;let l=t.readInt();return e.skillId=l,e}};tc.PROTOCOL_ID=1056;var yE=tc,fS=yE;var ic=class ic{constructor(){this.killPidList=[]}protocolId(){return ic.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeLongList(e.killPidList)}static read(t){if(!t.readBoolean())return null;let e=new ic,i=t.readLongList();return e.killPidList=i,e}};ic.PROTOCOL_ID=1057;var bE=ic,yS=bE;var ac=class ac{constructor(){this.killPidList=[]}protocolId(){return ac.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||t.writeLongList(e.killPidList)}static read(t){if(!t.readBoolean())return null;let e=new ac,i=t.readLongList();return e.killPidList=i,e}};ac.PROTOCOL_ID=1058;var gE=ac,bS=gE;var nc=class nc{constructor(){this.id=0;this.value=!1}protocolId(){return nc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.id),t.writeBoolean(e.value))}static read(t){if(!t.readBoolean())return null;let e=new nc,i=t.readInt();e.id=i;let n=t.readBoolean();return e.value=n,e}};nc.PROTOCOL_ID=25007;var LE=nc,gS=LE;var rc=class rc{constructor(){this.type=0;this.id=0;this.count=0}protocolId(){return rc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeDouble(e.count),t.writeLong(e.id),t.writeInt(e.type))}static read(t){if(!t.readBoolean())return null;let e=new rc,i=t.readDouble();e.count=i;let n=t.readLong();e.id=n;let r=t.readInt();return e.type=r,e}};rc.PROTOCOL_ID=25008;var _E=rc,LS=_E;var sc=class sc{constructor(){this.id=0;this.map=0;this.maxX=0;this.maxY=0;this.players=[];this.groupId=0}protocolId(){return sc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.groupId),t.writeLong(e.id),t.writeInt(e.map),t.writeInt(e.maxX),t.writeInt(e.maxY),t.writePacketList(e.players,25011))}static read(t){if(!t.readBoolean())return null;let e=new sc,i=t.readInt();e.groupId=i;let n=t.readLong();e.id=n;let r=t.readInt();e.map=r;let s=t.readInt();e.maxX=s;let o=t.readInt();e.maxY=o;let l=t.readPacketList(25011);return e.players=l,e}};sc.PROTOCOL_ID=25009;var vE=sc,_S=vE;var oc=class oc{constructor(){this.arenaId=0;this.coinType=0;this.roomId=0;this.members=[];this.remainderCd=0;this.startTime=0;this.nowTime=0;this.arenaType=0;this.watch=[];this.anonymous=0}protocolId(){return oc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.anonymous),t.writeInt(e.arenaId),t.writeInt(e.arenaType),t.writeInt(e.coinType),t.writePacketList(e.members,25011),t.writeLong(e.nowTime),t.writeLong(e.remainderCd),t.writeLong(e.roomId),t.writeLong(e.startTime),t.writeLongList(e.watch))}static read(t){if(!t.readBoolean())return null;let e=new oc,i=t.readInt();e.anonymous=i;let n=t.readInt();e.arenaId=n;let r=t.readInt();e.arenaType=r;let s=t.readInt();e.coinType=s;let o=t.readPacketList(25011);e.members=o;let l=t.readLong();e.nowTime=l;let c=t.readLong();e.remainderCd=c;let u=t.readLong();e.roomId=u;let p=t.readLong();e.startTime=p;let d=t.readLongList();return e.watch=d,e}};oc.PROTOCOL_ID=25010;var xE=oc,vS=xE;var lc=class lc{constructor(){this.id=0;this.x=0;this.y=0;this.dire=0;this.speed=0;this.heroId=0;this.heroColor=0;this.name="";this.icon="";this.leader=0;this.kill=0;this.hp=0;this.maxHp=0;this.atk=0;this.score=0;this.skillCd=new Map;this.commonCd=0;this.area=0;this.country=0;this.nodeId=0;this.lease=0;this.equips=new Map;this.cardCd=new Map;this.buffDtoList=[];this.no=0;this.npc=!1;this.startTime=0;this.status=0;this.killStatus=0}protocolId(){return lc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.area),t.writeLong(e.atk),t.writePacketList(e.buffDtoList,25015),t.writeIntLongMap(e.cardCd),t.writeLong(e.commonCd),t.writeInt(e.country),t.writeInt(e.dire),t.writeStringPacketMap(e.equips,25014),t.writeInt(e.heroColor),t.writeLong(e.heroId),t.writeLong(e.hp),t.writeString(e.icon),t.writeLong(e.id),t.writeInt(e.kill),t.writeInt(e.killStatus),t.writeInt(e.leader),t.writeInt(e.lease),t.writeLong(e.maxHp),t.writeString(e.name),t.writeInt(e.no),t.writeInt(e.nodeId),t.writeBoolean(e.npc),t.writeLong(e.score),t.writeIntLongMap(e.skillCd),t.writeInt(e.speed),t.writeLong(e.startTime),t.writeInt(e.status),t.writeInt(e.x),t.writeInt(e.y))}static read(t){if(!t.readBoolean())return null;let e=new lc,i=t.readInt();e.area=i;let n=t.readLong();e.atk=n;let r=t.readPacketList(25015);e.buffDtoList=r;let s=t.readIntLongMap();e.cardCd=s;let o=t.readLong();e.commonCd=o;let l=t.readInt();e.country=l;let c=t.readInt();e.dire=c;let u=t.readStringPacketMap(25014);e.equips=u;let p=t.readInt();e.heroColor=p;let d=t.readLong();e.heroId=d;let L=t.readLong();e.hp=L;let v=t.readString();e.icon=v;let E=t.readLong();e.id=E;let w=t.readInt();e.kill=w;let R=t.readInt();e.killStatus=R;let U=t.readInt();e.leader=U;let V=t.readInt();e.lease=V;let q=t.readLong();e.maxHp=q;let te=t.readString();e.name=te;let ee=t.readInt();e.no=ee;let X=t.readInt();e.nodeId=X;let re=t.readBoolean();e.npc=re;let oe=t.readLong();e.score=oe;let Ve=t.readIntLongMap();e.skillCd=Ve;let ke=t.readInt();e.speed=ke;let $=t.readLong();e.startTime=$;let lt=t.readInt();e.status=lt;let ye=t.readInt();e.x=ye;let Te=t.readInt();return e.y=Te,e}};lc.PROTOCOL_ID=25011;var IE=lc,xS=IE;var cc=class cc{constructor(){this.id=0;this.heroId=0;this.heroColor=0;this.name="";this.icon="";this.leader=0;this.rankNum=0;this.kill=0;this.atk=0;this.score=0;this.die=!1;this.country=0;this.heroPk="";this.nodeId=0;this.lease=0;this.no=0;this.startTime=0}protocolId(){return cc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLong(e.atk),t.writeInt(e.country),t.writeBoolean(e.die),t.writeInt(e.heroColor),t.writeLong(e.heroId),t.writeString(e.heroPk),t.writeString(e.icon),t.writeLong(e.id),t.writeInt(e.kill),t.writeInt(e.leader),t.writeInt(e.lease),t.writeString(e.name),t.writeInt(e.no),t.writeInt(e.nodeId),t.writeInt(e.rankNum),t.writeLong(e.score),t.writeLong(e.startTime))}static read(t){if(!t.readBoolean())return null;let e=new cc,i=t.readLong();e.atk=i;let n=t.readInt();e.country=n;let r=t.readBoolean();e.die=r;let s=t.readInt();e.heroColor=s;let o=t.readLong();e.heroId=o;let l=t.readString();e.heroPk=l;let c=t.readString();e.icon=c;let u=t.readLong();e.id=u;let p=t.readInt();e.kill=p;let d=t.readInt();e.leader=d;let L=t.readInt();e.lease=L;let v=t.readString();e.name=v;let E=t.readInt();e.no=E;let w=t.readInt();e.nodeId=w;let R=t.readInt();e.rankNum=R;let U=t.readLong();e.score=U;let V=t.readLong();return e.startTime=V,e}};cc.PROTOCOL_ID=25012;var EE=cc,IS=EE;var uc=class uc{constructor(){this.pid=0;this.rank=0;this.reward=[]}protocolId(){return uc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLong(e.pid),t.writeInt(e.rank),t.writePacketList(e.reward,25008))}static read(t){if(!t.readBoolean())return null;let e=new uc,i=t.readLong();e.pid=i;let n=t.readInt();e.rank=n;let r=t.readPacketList(25008);return e.reward=r,e}};uc.PROTOCOL_ID=25013;var wE=uc,ES=wE;var mc=class mc{constructor(){this.pk="";this.type=0;this.id=0;this.count=0}protocolId(){return mc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeDouble(e.count),t.writeLong(e.id),t.writeString(e.pk),t.writeInt(e.type))}static read(t){if(!t.readBoolean())return null;let e=new mc,i=t.readDouble();e.count=i;let n=t.readLong();e.id=n;let r=t.readString();e.pk=r;let s=t.readInt();return e.type=s,e}};mc.PROTOCOL_ID=25014;var TE=mc,wS=TE;var pc=class pc{constructor(){this.buffId=0;this.expireTime=0;this.skillId=0;this.pid=0}protocolId(){return pc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeInt(e.buffId),t.writeLong(e.expireTime),t.writeLong(e.pid),t.writeInt(e.skillId))}static read(t){if(!t.readBoolean())return null;let e=new pc,i=t.readInt();e.buffId=i;let n=t.readLong();e.expireTime=n;let r=t.readLong();e.pid=r;let s=t.readInt();return e.skillId=s,e}};pc.PROTOCOL_ID=25015;var CE=pc,TS=CE;var hc=class hc{constructor(){this.atk=0;this.buffId=0;this.effectType=0;this.targetPid=0}protocolId(){return hc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLong(e.atk),t.writeLong(e.buffId),t.writeInt(e.effectType),t.writeLong(e.targetPid))}static read(t){if(!t.readBoolean())return null;let e=new hc,i=t.readLong();e.atk=i;let n=t.readLong();e.buffId=n;let r=t.readInt();e.effectType=r;let s=t.readLong();return e.targetPid=s,e}};hc.PROTOCOL_ID=25016;var SE=hc,CS=SE;var dc=class dc{constructor(){this.rank=0;this.no=0;this.score=0;this.members=[]}protocolId(){return dc.PROTOCOL_ID}static write(t,e){t.writePacketFlag(e)||e==null||(t.writeLongList(e.members),t.writeInt(e.no),t.writeInt(e.rank),t.writeLong(e.score))}static read(t){if(!t.readBoolean())return null;let e=new dc,i=t.readLongList();e.members=i;let n=t.readInt();e.no=n;let r=t.readInt();e.rank=r;let s=t.readLong();return e.score=s,e}};dc.PROTOCOL_ID=25017;var DE=dc,SS=DE;var Me=new Map;Me.set(101,ml);Me.set(103,Ih);Me.set(104,nS);Me.set(1001,Eh);Me.set(1002,wh);Me.set(1004,Th);Me.set(1005,rS);Me.set(1006,sS);Me.set(1007,Ch);Me.set(1008,Sh);Me.set(1010,oS);Me.set(1012,lS);Me.set(1013,Dh);Me.set(1014,cS);Me.set(1016,Ah);Me.set(1018,kh);Me.set(1020,Bh);Me.set(1021,Mh);Me.set(1022,uS);Me.set(1024,Rh);Me.set(1025,Ph);Me.set(1026,Nh);Me.set(1028,Oh);Me.set(1030,Hh);Me.set(1031,Nl);Me.set(1032,mS);Me.set(1034,Uh);Me.set(1035,Vh);Me.set(1036,pS);Me.set(1038,Fh);Me.set(1040,Gh);Me.set(1042,Kh);Me.set(1043,qh);Me.set(1044,Wh);Me.set(1046,Yh);Me.set(1047,zh);Me.set(1048,hS);Me.set(1049,jh);Me.set(1050,$h);Me.set(1052,Xh);Me.set(1053,Qh);Me.set(1054,dS);Me.set(1055,Jh);Me.set(1056,fS);Me.set(1057,yS);Me.set(1058,bS);Me.set(25007,gS);Me.set(25008,LS);Me.set(25009,_S);Me.set(25010,vS);Me.set(25011,xS);Me.set(25012,IS);Me.set(25013,ES);Me.set(25014,wS);Me.set(25015,TS);Me.set(25016,CS);Me.set(25017,SS);var AE=class a{static getProtocol(t){let e=Me.get(t);if(e===null)throw"[protocolId:"+t+"]协议不存在";return e}static write(t,e){let i=e.protocolId();t.writeInt(i),a.getProtocol(i).write(t,e)}static read(t){let e=t.readInt();return a.getProtocol(e).read(t)}},di=AE;var DS={},AS={},Vi;try{Vi=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var j=class j{constructor(t,e,i=!1){this.low=t|0,this.high=e|0,this.unsigned=i}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*oo+(this.low>>>0):this.high*oo+(this.low>>>0)}toString(t=10){if(t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.equals(j.MIN_VALUE)){let r=j.fromNumber(t),s=this.divide(r),o=s.multiply(r).subtract(this);return s.toString(t)+o.toInt().toString(t)}else return"-"+this.negate().toString(t);let e=j.fromNumber(Math.pow(t,6),this.unsigned),i="",n=this;for(;;){let r=n.divide(e),o=(n.subtract(r.multiply(e)).toInt()>>>0).toString(t);if(n=r,n.isZero())return o+i;for(;o.length<6;)o="0"+o;i=""+o+i}}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.equals(j.MIN_VALUE)?64:this.negate().getNumBitsAbs();let t=this.high!=0?this.high:this.low,e;for(e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1}isZero(){return this.high===0&&this.low===0}isNegative(){return!this.unsigned&&this.high<0}isPositive(){return this.unsigned||this.high>=0}isOdd(){return(this.low&1)===1}isEven(){return(this.low&1)===0}equals(t){return t instanceof j||(t=j.fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low}notEquals(t){return!this.equals(t)}lessThan(t){return this.compare(t)<0}lessThanOrEqual(t){return this.compare(t)<=0}greaterThan(t){return this.compare(t)>0}greaterThanOrEqual(t){return this.compare(t)>=0}compare(t){if(t instanceof j||(t=j.fromValue(t)),this.equals(t))return 0;let e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1}negate(){return!this.unsigned&&this.equals(j.MIN_VALUE)?j.MIN_VALUE:this.not().add(j.ONE)}add(t){t instanceof j||(t=j.fromValue(t));let e=this.high>>>16,i=this.high&65535,n=this.low>>>16,r=this.low&65535,s=t.high>>>16,o=t.high&65535,l=t.low>>>16,c=t.low&65535,u=0,p=0,d=0,L=0;return L+=r+c,d+=L>>>16,L&=65535,d+=n+l,p+=d>>>16,d&=65535,p+=i+o,u+=p>>>16,p&=65535,u+=e+s,u&=65535,j.fromBits(d<<16|L,u<<16|p,this.unsigned)}subtract(t){return t instanceof j||(t=j.fromValue(t)),this.add(t.negate())}multiply(t){if(this.isZero())return j.ZERO;if(t instanceof j||(t=j.fromValue(t)),Vi){let v=Vi.mul(this.low,this.high,t.low,t.high);return j.fromBits(v,Vi.get_high(),this.unsigned)}if(t.isZero())return j.ZERO;if(this.equals(j.MIN_VALUE))return t.isOdd()?j.MIN_VALUE:j.ZERO;if(t.equals(j.MIN_VALUE))return this.isOdd()?j.MIN_VALUE:j.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(MS)&&t.lessThan(MS))return j.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);let e=this.high>>>16,i=this.high&65535,n=this.low>>>16,r=this.low&65535,s=t.high>>>16,o=t.high&65535,l=t.low>>>16,c=t.low&65535,u=0,p=0,d=0,L=0;return L+=r*c,d+=L>>>16,L&=65535,d+=n*c,p+=d>>>16,d&=65535,d+=r*l,p+=d>>>16,d&=65535,p+=i*c,u+=p>>>16,p&=65535,p+=n*l,u+=p>>>16,p&=65535,p+=r*o,u+=p>>>16,p&=65535,u+=e*c+i*l+n*o+r*s,u&=65535,j.fromBits(d<<16|L,u<<16|p,this.unsigned)}divide(t){if(t instanceof j||(t=j.fromValue(t)),t.isZero())throw Error("division by zero");if(Vi){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;let r=(this.unsigned?Vi.div_u:Vi.div_s)(this.low,this.high,t.low,t.high);return j.fromBits(r,Vi.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?j.UZERO:j.ZERO;let e,i,n;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.greaterThan(this))return j.UZERO;if(t.greaterThan(this.shiftRightUnsigned(1)))return j.UONE;n=j.UZERO}else{if(this.equals(j.MIN_VALUE))return t.equals(j.ONE)||t.equals(j.NEG_ONE)?j.MIN_VALUE:t.equals(j.MIN_VALUE)?j.ONE:(e=this.shiftRight(1).divide(t).shiftLeft(1),e.equals(j.ZERO)?t.isNegative()?j.ONE:j.NEG_ONE:(i=this.subtract(t.multiply(e)),n=e.add(i.divide(t)),n));if(t.equals(j.MIN_VALUE))return this.unsigned?j.UZERO:j.ZERO;if(this.isNegative())return t.isNegative()?this.negate().divide(t.negate()):this.negate().divide(t).negate();if(t.isNegative())return this.divide(t.negate()).negate();n=j.ZERO}for(i=this;i.greaterThanOrEqual(t);){e=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));let r=Math.ceil(Math.log(e)/Math.LN2),s=r<=48?1:Math.pow(2,r-48),o=j.fromNumber(e),l=o.multiply(t);for(;l.isNegative()||l.greaterThan(i);)e-=s,o=j.fromNumber(e,this.unsigned),l=o.multiply(t);o.isZero()&&(o=j.ONE),n=n.add(o),i=i.subtract(l)}return n}modulo(t){if(t instanceof j||(t=j.fromValue(t)),Vi){let e=(this.unsigned?Vi.rem_u:Vi.rem_s)(this.low,this.high,t.low,t.high);return j.fromBits(e,Vi.get_high(),this.unsigned)}return this.subtract(this.divide(t).multiply(t))}not(){return j.fromBits(~this.low,~this.high,this.unsigned)}and(t){return t instanceof j||(t=j.fromValue(t)),j.fromBits(this.low&t.low,this.high&t.high,this.unsigned)}or(t){return t instanceof j||(t=j.fromValue(t)),j.fromBits(this.low|t.low,this.high|t.high,this.unsigned)}xor(t){return t instanceof j||(t=j.fromValue(t)),j.fromBits(this.low^t.low,this.high^t.high,this.unsigned)}shiftLeft(t){if(t instanceof j&&(t=t.toInt()),(t&=63)===0)return this;if(t<32){let e=this.low<<t;return j.fromBits(e,this.high<<t|this.low>>>32-t,this.unsigned)}else return j.fromBits(0,this.low<<t-32,this.unsigned)}shiftRight(t){return t instanceof j&&(t=t.toInt()),(t&=63)===0?this:t<32?j.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):j.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)}shiftRightUnsigned(t){return t instanceof j&&(t=t.toInt()),(t&=63)===0?this:t<32?j.fromBits(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?j.fromBits(this.high,0,this.unsigned):j.fromBits(this.high>>>t-32,0,this.unsigned)}rotateLeft(t){let e;return t instanceof j&&(t=t.toInt()),(t&=63)===0?this:t===32?j.fromBits(this.high,this.low,this.unsigned):t<32?(e=32-t,j.fromBits(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,j.fromBits(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))}rotateRight(t){let e;return t instanceof j&&(t=t.toInt()),(t&=63)===0?this:t===32?j.fromBits(this.high,this.low,this.unsigned):t<32?(e=32-t,j.fromBits(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,j.fromBits(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))}toSigned(){return this.unsigned?j.fromBits(this.low,this.high,!1):this}toUnsigned(){return this.unsigned?this:j.fromBits(this.low,this.high,!0)}toBytes(t){return t?this.toBytesLE():this.toBytesBE()}toBytesLE(){let t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]}toBytesBE(){let t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]}static fromBytes(t,e,i){return i?j.fromBytesLE(t,e):j.fromBytesBE(t,e)}static fromBytesLE(t,e){return new j(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)}static fromBytesBE(t,e){return new j(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}static fromInt(t,e){let i;if(e){if(t>>>=0,i=0<=t&&t<256){let r=AS[t];if(r)return r}let n=j.fromBits(t,(t|0)<0?-1:0,!0);return i&&(AS[t]=n),n}else{if(t|=0,i=-128<=t&&t<128){let r=DS[t];if(r)return r}let n=j.fromBits(t,t<0?-1:0,!1);return i&&(DS[t]=n),n}}static fromNumber(t,e){if(isNaN(t))return e?j.UZERO:j.ZERO;if(e){if(t<0)return j.UZERO;if(t>=RS)return j.MAX_UNSIGNED_VALUE}else{if(t<=-BS)return j.MIN_VALUE;if(t+1>=BS)return j.MAX_VALUE}return t<0?j.fromNumber(-t,e).negate():j.fromBits(t%oo|0,t/oo|0,e)}static fromBits(t,e,i){return new j(t,e,i)}static fromString(t,e,i){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return j.ZERO;if(typeof e=="number"?(i=e,e=!1):e=!!e,i=i||10,i<2||36<i)throw RangeError("radix");let n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return j.fromString(t.substring(1),e,i).negate();let r=j.fromNumber(Math.pow(i,8)),s=j.ZERO;for(let o=0;o<t.length;o+=8){let l=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+l),i);if(l<8){let u=j.fromNumber(Math.pow(i,l));s=s.multiply(u).add(j.fromNumber(c))}else s=s.multiply(r),s=s.add(j.fromNumber(c))}return s.unsigned=e,s}static fromValue(t,e){return typeof t=="number"?j.fromNumber(t,e):typeof t=="string"?j.fromString(t,e):j.fromBits(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}};j.ZERO=j.fromInt(0),j.UZERO=j.fromInt(0,!0),j.ONE=j.fromInt(1),j.UONE=j.fromInt(1,!0),j.NEG_ONE=j.fromInt(-1),j.MAX_VALUE=j.fromBits(-1,2147483647,!1),j.MAX_UNSIGNED_VALUE=j.fromBits(-1,-1,!0),j.MIN_VALUE=j.fromBits(0,-2147483648,!1);var lo=j,kS=65536,jk=1<<24,oo=kS*kS,RS=oo*oo,BS=RS/2,MS=lo.fromInt(jk);var fc=class a{constructor(t,e){this.lo=t>>>0,this.hi=e>>>0}zzEncode(){let t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){let t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}toLong(t){return new lo(this.lo|0,this.hi|0,!!t)}static from(t){return typeof t=="number"?a.fromNumber(t):((typeof t=="string"||t instanceof String)&&(t=lo.fromString(t)),t.low||t.high?new a(t.low>>>0,t.high>>>0):PS)}static fromNumber(t){if(t===0)return PS;let e=t<0;e&&(t=-t);let i=t>>>0,n=(t-i)/4294967296>>>0;return e&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new a(i,n)}},PS=new fc(0,0);function $k(a,t){let e=0;for(;t.hi;)a.writeByte(t.lo&127|128),t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7,e=e+7;for(;t.lo>127;){if(e>=56){a.writeByte(t.lo);return}a.writeByte(t.lo&127|128),t.lo=t.lo>>>7,e=e+7}a.writeByte(t.lo)}function Xk(a){let t=new fc(0,0),e=0,i=a.length,n=0;if(i-n>4){for(;e<4;++e)if(t.lo=(t.lo|(a[n]&127)<<e*7)>>>0,a[n++]<128)return t;if(t.lo=(t.lo|(a[n]&127)<<28)>>>0,t.hi=(t.hi|(a[n]&127)>>4)>>>0,a[n++]<128)return t;e=0}else{for(;e<3;++e)if(t.lo=(t.lo|(a[n]&127)<<e*7)>>>0,a[n++]<128)return t;return t.lo=(t.lo|(a[n++]&127)<<e*7)>>>0,t}for(;e<4;++e){if(n===8)return t.hi=(t.hi|a[n]<<e*7+3)>>>0,t;if(t.hi=(t.hi|(a[n]&127)<<e*7+3)>>>0,a[n++]<128)return t}return t}function NS(a,t){let e=fc.from(t).zzEncode();$k(a,e)}function OS(a){return Xk(a).zzDecode().toLong(!1)}var HS="",Qk=128,Jk=655537,Zk=32767,eB=-32768,US=2147483647,VS=-2147483648,tB=new TextEncoder,iB=new TextDecoder;function aB(a,t){if(a.byteLength>t)throw new Error("newLength is too small");let e=new ArrayBuffer(t);return new Uint8Array(e).set(new Uint8Array(a)),e}function nB(a){return a<<1^a>>31}function rB(a){return a>>>1^-(a&1)}var kE=class{constructor(){this.writeOffset=0,this.readOffset=0,this.buffer=new ArrayBuffer(Qk),this.bufferView=new DataView(this.buffer,0,this.buffer.byteLength)}setWriteOffset(t){if(t>this.buffer.byteLength)throw new Error("index out of bounds exception:readerIndex:"+this.readOffset+", writerIndex:"+this.writeOffset+"(expected:0 <= readerIndex <= writerIndex <= capacity:"+this.buffer.byteLength);this.writeOffset=t}setReadOffset(t){if(t>this.writeOffset)throw new Error("index out of bounds exception:readerIndex:"+this.readOffset+", writerIndex:"+this.writeOffset+"(expected:0 <= readerIndex <= writerIndex <= capacity:"+this.buffer.byteLength);this.readOffset=t}getCapacity(){return this.buffer.byteLength-this.writeOffset}ensureCapacity(t){for(;t-this.getCapacity()>0;){let e=this.buffer.byteLength*2;if(e>Jk)throw new Error("out of memory error");this.buffer=aB(this.buffer,e),this.bufferView=new DataView(this.buffer,0,this.buffer.byteLength)}}isReadable(){return this.writeOffset>this.readOffset}writeBytes(t){let e=t.byteLength;this.ensureCapacity(e),new Uint8Array(this.buffer).set(new Uint8Array(t),this.writeOffset),this.writeOffset+=e}toBytes(){let t=new ArrayBuffer(this.writeOffset);return new Uint8Array(t).set(new Uint8Array(this.buffer.slice(0,this.writeOffset))),t}writeBoolean(t){if(!(t===!0||t===!1))throw new Error("value must be true of false");this.ensureCapacity(1),t===!0?this.bufferView.setInt8(this.writeOffset,1):this.bufferView.setInt8(this.writeOffset,0),this.writeOffset++}readBoolean(){let t=this.bufferView.getInt8(this.readOffset);return this.readOffset++,t===1}writeByte(t){this.ensureCapacity(1),this.bufferView.setInt8(this.writeOffset,t),this.writeOffset++}readByte(){let t=this.bufferView.getInt8(this.readOffset);return this.readOffset++,t}writeShort(t){if(!(eB<=t&&t<=Zk))throw new Error("value must range between minShort:-32768 and maxShort:32767");this.ensureCapacity(2),this.bufferView.setInt16(this.writeOffset,t),this.writeOffset+=2}readShort(){let t=this.bufferView.getInt16(this.readOffset);return this.readOffset+=2,t}writeRawInt(t){if(!(VS<=t&&t<=US))throw new Error("value must range between minInt:-2147483648 and maxInt:2147483647");this.ensureCapacity(4),this.bufferView.setInt32(this.writeOffset,t),this.writeOffset+=4}readRawInt(){let t=this.bufferView.getInt32(this.readOffset);return this.readOffset+=4,t}writeInt(t){if(!(VS<=t&&t<=US))throw new Error("value must range between minInt:-2147483648 and maxInt:2147483647");if(this.ensureCapacity(5),t=nB(t),!(t>>>7)){this.writeByte(t);return}if(!(t>>>14)){this.writeByte(t&127|128),this.writeByte(t>>>7);return}if(!(t>>>21)){this.writeByte(t&127|128),this.writeByte(t>>>7|128),this.writeByte(t>>>14);return}if(!(t>>>28)){this.writeByte(t&127|128),this.writeByte(t>>>7|128),this.writeByte(t>>>14|128),this.writeByte(t>>>21);return}this.writeByte(t&127|128),this.writeByte(t>>>7|128),this.writeByte(t>>>14|128),this.writeByte(t>>>21|128),this.writeByte(t>>>28)}readInt(){let t=this.readByte(),e=t&127;return t&128&&(t=this.readByte(),e|=(t&127)<<7,t&128&&(t=this.readByte(),e|=(t&127)<<14,t&128&&(t=this.readByte(),e|=(t&127)<<21,t&128&&(t=this.readByte(),e|=(t&127)<<28)))),rB(e)}writeLong(t){if(t==null)throw new Error("value must not be null");this.ensureCapacity(9),NS(this,t)}readLong(){let t=new ArrayBuffer(9),e=new DataView(t,0,t.byteLength),i=0,n=this.readByte();return e.setUint8(i++,n),n&128&&(n=this.readByte(),e.setUint8(i++,n),n&128&&(n=this.readByte(),e.setUint8(i++,n),n&128&&(n=this.readByte(),e.setUint8(i++,n),n&128&&(n=this.readByte(),e.setUint8(i++,n),n&128&&(n=this.readByte(),e.setUint8(i++,n),n&128&&(n=this.readByte(),e.setUint8(i++,n),n&128&&(n=this.readByte(),e.setUint8(i++,n),n&128&&(n=this.readByte(),e.setUint8(i++,n))))))))),OS(new Uint8Array(t.slice(0,i))).toNumber()}writeFloat(t){if(t==null)throw new Error("value must not be null");this.ensureCapacity(4),this.bufferView.setFloat32(this.writeOffset,t),this.writeOffset+=4}readFloat(){let t=this.bufferView.getFloat32(this.readOffset);return this.readOffset+=4,t}writeDouble(t){if(t==null)throw new Error("value must not be null");this.ensureCapacity(8),this.bufferView.setFloat64(this.writeOffset,t),this.writeOffset+=8}readDouble(){let t=this.bufferView.getFloat64(this.readOffset);return this.readOffset+=8,t}writeChar(t){if(t==null||t.length===0){this.writeString(HS);return}this.writeString(t.charAt(0))}readChar(){return this.readString()}writeString(t){if(t==null||t.trim().length===0){this.writeInt(0);return}let e=tB.encode(t);this.ensureCapacity(5+e.length),this.writeInt(e.length),e.forEach(i=>this.writeByte(i))}readString(){let t=this.readInt();if(t<=0)return HS;let e=new Uint8Array(this.buffer.slice(this.readOffset,this.readOffset+t)),i=iB.decode(e);return this.readOffset+=t,i}writePacketFlag(t){let e=t==null;return this.writeBoolean(!e),e}writePacket(t,e){di.getProtocol(e).write(this,t)}readPacket(t){return di.getProtocol(t).read(this)}writeBooleanArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeBoolean(e)}))}readBooleanArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readBoolean());return t}writeByteArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeByte(e)}))}readByteArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readByte());return t}writeShortArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeShort(e)}))}readShortArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readShort());return t}writeIntArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeInt(e)}))}readIntArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readInt());return t}writeLongArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeLong(e)}))}readLongArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readLong());return t}writeFloatArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeFloat(e)}))}readFloatArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readFloat());return t}writeDoubleArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeDouble(e)}))}readDoubleArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readDouble());return t}writeStringArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeString(e)}))}readStringArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readString());return t}writeCharArray(t){t===null?this.writeInt(0):(this.writeInt(t.length),t.forEach(e=>{this.writeChar(e)}))}readCharArray(){let t=[],e=this.readInt();if(e>0)for(let i=0;i<e;i++)t.push(this.readChar());return t}writePacketArray(t,e){if(t===null)this.writeInt(0);else{let i=di.getProtocol(e);this.writeInt(t.length),t.forEach(n=>{i.write(this,n)})}}readPacketArray(t){let e=[],i=this.readInt();if(i>0){let n=di.getProtocol(t);for(let r=0;r<i;r++)e.push(n.read(this))}return e}writeBooleanList(t){this.writeBooleanArray(t)}readBooleanList(){return this.readBooleanArray()}writeByteList(t){this.writeByteArray(t)}readByteList(){return this.readByteArray()}writeShortList(t){this.writeShortArray(t)}readShortList(){return this.readShortArray()}writeIntList(t){this.writeIntArray(t)}readIntList(){return this.readIntArray()}writeLongList(t){this.writeLongArray(t)}readLongList(){return this.readLongArray()}writeFloatList(t){this.writeFloatArray(t)}readFloatList(){return this.readFloatArray()}writeDoubleList(t){this.writeDoubleArray(t)}readDoubleList(){return this.readDoubleArray()}writeStringList(t){this.writeStringArray(t)}readStringList(){return this.readStringArray()}writeCharList(t){this.writeCharArray(t)}readCharList(){return this.readCharArray()}writePacketList(t,e){this.writePacketArray(t,e)}readPacketList(t){return this.readPacketArray(t)}writeBooleanSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeBoolean(e)}))}readBooleanSet(){return new Set(this.readBooleanArray())}writeByteSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeByte(e)}))}readByteSet(){return new Set(this.readByteArray())}writeShortSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeShort(e)}))}readShortSet(){return new Set(this.readShortArray())}writeIntSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeInt(e)}))}readIntSet(){return new Set(this.readIntArray())}writeLongSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeLong(e)}))}readLongSet(){return new Set(this.readLongArray())}writeFloatSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeFloat(e)}))}readFloatSet(){return new Set(this.readFloatArray())}writeDoubleSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeDouble(e)}))}readDoubleSet(){return new Set(this.readDoubleArray())}writeStringSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeString(e)}))}readStringSet(){return new Set(this.readStringArray())}writeCharSet(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach(e=>{this.writeChar(e)}))}readCharSet(){return new Set(this.readCharArray())}writePacketSet(t,e){if(t===null)this.writeInt(0);else{let i=di.getProtocol(e);this.writeInt(t.size),t.forEach(n=>{i.write(this,n)})}}readPacketSet(t){return new Set(this.readPacketArray(t))}writeIntIntMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeInt(i),this.writeInt(e)}))}readIntIntMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readInt(),r=this.readInt();t.set(n,r)}return t}writeIntLongMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeInt(i),this.writeLong(e)}))}readIntLongMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readInt(),r=this.readLong();t.set(n,r)}return t}writeIntStringMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeInt(i),this.writeString(e)}))}readIntStringMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readInt(),r=this.readString();t.set(n,r)}return t}writeIntPacketMap(t,e){if(t===null)this.writeInt(0);else{let i=di.getProtocol(e);this.writeInt(t.size),t.forEach((n,r)=>{this.writeInt(r),i.write(this,n)})}}readIntPacketMap(t){let e=new Map,i=this.readInt();if(i>0){let n=di.getProtocol(t);for(let r=0;r<i;r++){let s=this.readInt(),o=n.read(this);e.set(s,o)}}return e}writeLongIntMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeLong(i),this.writeInt(e)}))}readLongIntMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readLong(),r=this.readInt();t.set(n,r)}return t}writeLongLongMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeLong(i),this.writeLong(e)}))}readLongLongMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readLong(),r=this.readLong();t.set(n,r)}return t}writeLongStringMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeLong(i),this.writeString(e)}))}readLongStringMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readLong(),r=this.readString();t.set(n,r)}return t}writeLongPacketMap(t,e){if(t===null)this.writeInt(0);else{let i=di.getProtocol(e);this.writeInt(t.size),t.forEach((n,r)=>{this.writeLong(r),i.write(this,n)})}}readLongPacketMap(t){let e=new Map,i=this.readInt();if(i>0){let n=di.getProtocol(t);for(let r=0;r<i;r++){let s=this.readLong(),o=n.read(this);e.set(s,o)}}return e}writeStringIntMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeString(i),this.writeInt(e)}))}readStringIntMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readString(),r=this.readInt();t.set(n,r)}return t}writeStringLongMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeString(i),this.writeLong(e)}))}readStringLongMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readString(),r=this.readLong();t.set(n,r)}return t}writeStringStringMap(t){t===null?this.writeInt(0):(this.writeInt(t.size),t.forEach((e,i)=>{this.writeString(i),this.writeString(e)}))}readStringStringMap(){let t=new Map,e=this.readInt();if(e>0)for(let i=0;i<e;i++){let n=this.readString(),r=this.readString();t.set(n,r)}return t}writeStringPacketMap(t,e){if(t===null)this.writeInt(0);else{let i=di.getProtocol(e);this.writeInt(t.size),t.forEach((n,r)=>{this.writeString(r),i.write(this,n)})}}readStringPacketMap(t){let e=new Map,i=this.readInt();if(i>0){let n=di.getProtocol(t);for(let r=0;r<i;r++){let s=this.readString(),o=n.read(this);e.set(s,o)}}return e}},BE=kE;var ci=class ci{constructor(){this.m_iConnectTimes=0;this.m_iMaxTimes=10;this.m_iHeartTime=6e4;this.moveIndex=0;this._isMatching=!1;this.isFirst=!0;this.m_socket=new Laya.Socket,this.m_socket.on(Laya.Event.OPEN,this,this.onSocketOpen),this.m_socket.on(Laya.Event.CLOSE,this,this.onSocketClose),this.m_socket.on(Laya.Event.MESSAGE,this,this.onMessageReveived),this.m_socket.on(Laya.Event.ERROR,this,this.onConnectError)}static get instance(){return ci._instance==null&&(ci._instance=new ci),ci._instance}get isMatching(){return this._isMatching}set isMatching(t){this._isMatching=t,t||(this.m_socket.close(),this.isConnect=!1)}initSocket(){this.isMatching=!0,this.isFirst=!0;var t=B.instance.roomDto.connectAddr;ci.m_strHttpHost=t,this.connect()}onSocketOpen(){this.isConnect=!0,this.m_iConnectTimes=0,Wt.log("websocket----websocket connected",1),this.onLogin()}onLogin(){if(this.isFirst){let e=new Eh;e.roomId=B.instance.roomDto.roomId,e.loginToken=localStorage.getItem("TOX-COOKIE"+W.instance.walletAddress),e.pid=b.instance.playerDto.pid;var t=B.instance.roomWatcher;e.watch=t?1:0,this.sendData(e)}else{let e=new Ch;e.token=this.socketToken,this.sendData(e)}}onSocketClose(t){Wt.log("websocket----closed",1),this.isMatching&&(this.isOtherLogin||(this.isConnect=!1,console.log("websocket----closed m_iConnectTimes:"+this.m_iConnectTimes+", m_iMaxTimes: "+this.m_iMaxTimes),this.m_iConnectTimes<=this.m_iMaxTimes?Laya.timer.once(1500,this,this.onReconnect):_e.instance.hideLoading()))}onReconnect(){ci.instance.reconnect(),ci.instance.m_iConnectTimes++}onConnectError(t){Wt.log("websocket----onConnectError e:"+t,1),this.isMatching&&(this.isOtherLogin||(this.isConnect=!1,this.m_iConnectTimes<=this.m_iMaxTimes?Laya.timer.once(1500,this,this.onReconnect):_e.instance.hideLoading()))}connect(){Wt.log("websocket----connect: "+ci.m_strHttpHost,1),this.isMatching&&(this.isConnect||(Laya.timer.once(1e4,this,this.showTip),this.m_socket.connectByUrl(ci.m_strHttpHost),Wt.log("websocket----connect websocket",1)))}clearShowTip(){Laya.timer.clear(this,this.showTip)}showTip(){Ee.netError()}reconnect(){Wt.log("websocket----reconnect: "+ci.m_strHttpHost,1),this.isMatching&&(this.isConnect||(this.m_socket.connectByUrl(ci.m_strHttpHost),Wt.log("websocket----reconnect websocket",1)))}onSendMessage(){}sendData(t){if(this.isMatching)if(this.isConnect){let e=new BE;e.setWriteOffset(4),di.write(e,t),e.writeBoolean(!1);let i=e.writeOffset;e.setWriteOffset(0),e.writeRawInt(i-4),e.setWriteOffset(i),this.m_socket.send(e.buffer),console.log(Ee.GetLogTime+" websocket ------>>>>>>>> send message PROTOCOL_ID:"+t.protocolId()+"，内容："+JSON.stringify(t))}else Wt.log("socket send error： "+JSON.stringify(t))}async onMessageReveived(t){let e=t,i=new BE;i.writeBytes(e),i.setReadOffset(4);let n=di.read(i),r=n.protocolId();console.log(Ee.GetLogTime+" websocket ------<<<<<<<< recv PROTOCOL_ID: "+r+"，内容："+JSON.stringify(n));let s=n.errorCode;if(s&&s>0){console.warn("errorCode "+s+", errorMessage： "+Le.instance.get(s)),s==24||s==25?(this.isMatching=!1,De.instance.close(),ci.instance.clearShowTip(),se.intance.currSceneName!=Y.M_SCENE_MATCH&&(se.intance.setCurrentScene(Y.M_SCENE_MAIN),Ee.commTipWithYes(Le.instance.get(s)))):s==69&&Le.instance.showErrorWord(s);return}switch(g.intance.event("msg_"+r,[e]),r){case wh.PROTOCOL_ID:console.log("收到了登录返回"),this.isFirst=!1;let l=n;I.needHeart=!1,B.instance.matchDto=l.matchDto,this.socketToken=l.socketToken,se.intance.setCurrentScene(Y.M_SCENE_MATCH),this.clearShowTip();break;case Sh.PROTOCOL_ID:console.log("断线重连 返回");break;case Gh.PROTOCOL_ID:console.log("收到比赛开始数据");let c=n;A.intance.disposeView(y.MatchReadyView),B.instance.stopAll=!1;break;case kh.PROTOCOL_ID:console.log("收到移动数据");let u=n;this.moveIndex++,k.instance.onRevMovePush(u,this.moveIndex);break;case Kh.PROTOCOL_ID:var o=n.moveList.reverse();this.moveIndex++,o.forEach(oe=>{k.instance.onRevMovePush(oe,this.moveIndex)});break;case Fh.PROTOCOL_ID:let d=n;k.instance.onRevTargetMovePush(d);break;case Rh.PROTOCOL_ID:console.log("收到伤害数据");let L=n;k.instance.onRevAttackPush(L);break;case Uh.PROTOCOL_ID:console.log("收到动画数据");let v=n;k.instance.onRevAnimationPush(v);break;case Wh.PROTOCOL_ID:console.log("收到卡牌数据");let E=n;k.instance.onRevCardResponse(E);break;case $h.PROTOCOL_ID:console.log("收到大招卡牌检测数据");let w=n;k.instance.onRevCardResponse(w);break;case Yh.PROTOCOL_ID:console.log("收到buff数据");let R=n;k.instance.onRevUsePush(R);break;case Ah.PROTOCOL_ID:console.log("收到玩家加入或离开数据");let U=n;k.instance.addPlayer(U);break;case Oh.PROTOCOL_ID:console.log("收到第一滴血数据");let V=n;g.intance.event(f.EVENT_FirstBlood,[V]);break;case Hh.PROTOCOL_ID:console.log("收到多杀数据");let q=n;g.intance.event(f.EVENT_MutiKill,[q]);break;case Bh.PROTOCOL_ID:console.log("收到比赛结束");let te=n;B.instance.matchDto&&B.instance.onGoMatchEndRank(te);break;case Xh.PROTOCOL_ID:console.log("收到了怪物刷新数据返回");let ee=n;k.instance.onRevReLifePush(ee);break;case Nh.PROTOCOL_ID:console.log("收到了恢复数据返回");let X=n;k.instance.onRevRestorePush(X.matchDto);break;case ml.PROTOCOL_ID:console.log("收到了错误信息返回");let re=new ml;Object.assign(re,n),console.log("errorMessage： "+re.errorMessage),Le.instance.showErrByString(re.errorMessage);break;case Th.PROTOCOL_ID:this.isOtherLogin=!0,Laya.timer.clearAll(this),Ee.otherLogin(),console.log("websocket----------------------------otherLogin");break;default:break}}sendHeart(){this.m_socket.connected&&this.sendData(new Ih)}};ci.m_strHttpHost=getWSServer(),ci.CMD_99999=99999;var ot=ci;var Ke=class Ke{static get IsSetRelease(){return Ke._IsSetRelease}static get IsSetGuid(){return Ke._IsSetGuid}static initParms(){if(Laya.Browser.window.location){let e=Laya.Browser.window.location.href,i=this.getURLParameters(e);if(Ke.m_obj=i,console.log("1initgame-->urldata:",Ke.m_obj),Ke.m_obj.server&&Ke.m_obj.server!=""&&(I.httpRoot=Ke.m_obj.server),Ke.m_obj.socket&&Ke.m_obj.socket!=""){var t=Ke.m_obj.socket;ot.m_strHttpHost=t+"/websocket"}if(Ke.m_obj.address&&Ke.m_obj.address!=""&&(W.instance.walletAddress=Ke.m_obj.address),Ke.m_obj.from&&Ke.m_obj.from=="into"&&(z.isInto=!0),Ke.m_obj.isFull&&Ke.m_obj.isFull=="1"&&(z.isFull=!0),Ke.m_obj.justFull&&Ke.m_obj.justFull=="1"&&(z.justFull=!0),Ke.m_obj.white&&Ke.m_obj.white=="1"&&(z.isWhite=!0),Ke.m_obj.debug&&Ke.m_obj.debug!="0"&&(z.Debug=parseInt(Ke.m_obj.debug)),Ke.m_obj.res&&Ke.m_obj.res!="0"&&(z.Res=parseInt(Ke.m_obj.res)),Ke.m_obj.bookingId&&Ke.m_obj.bookingId!="0"&&(z.bookingId=parseInt(Ke.m_obj.bookingId),Ke.m_obj.teamId&&Ke.m_obj.teamId!="0"&&(z.teamId=parseInt(Ke.m_obj.teamId))),Ke.m_obj.lang&&Ke.m_obj.lang!=""){let n=parseInt(Ke.m_obj.lang);n<1&&(n=1),z.ignoreLang=!0,b.instance.m_strLanguage=n}}}static getURLParameters(t){let e={};return t.replace(/[?&]+([^=&]+)=([^&]*)/gi,(i,n,r)=>e[n]=decodeURIComponent(r)),e}static cheakStr(t){let e=new RegExp("[A-Za-z0-9_-\\s]","g"),i=t.match(e);return!!(i&&i.length==t.length)}static isNumber(t){return/^(?!0\d)\d*\.?\d*$/.test(t)}static roundToTwoDecimals(t){return t%1===0?t.toString():Number(t.toFixed(2)).toString()}static filterObjectsByState(t,e,i=void 0){return i?t.filter(n=>n.state===e&&i.indexOf(n.pk)<0&&n.newFightFlag!==1):t.filter(n=>n.state===e&&n.newFightFlag!==1)}static filterObjectsByNewFightFlag(t){return t.filter(e=>e.newFightFlag!==1)}static getArenaByTicketId(t){let e=_.intance.m_dicArenaDic.values;for(let i of e)if(Array.isArray(i.item)&&i.item.length>0&&i.item[0]===t)return i.name}static processItemsArray(t,e=!0){let i=_.intance.getGeneralValueById(20),n={},r={};var s=[];t.forEach(c=>{i.indexOf(c.id)>-1?r[c.id]?r[c.id].count+=c.count:r[c.id]=c:(n[c.id]=c,s.push(c))}),e&&i.forEach(c=>{r[c]||(r[c]={type:1,id:c,count:0})});let o=Object.values(r),l=Object.values(n);return o=o.sort((c,u)=>i.indexOf(c.id)-i.indexOf(u.id)),[o,l,s]}static sumItemCount(t){let e=new Map;return t.forEach(n=>{n.reward.forEach(r=>{let{type:s,id:o,count:l}=r;e.has(o)?e.set(o,{type:s,id:o,count:e.get(o).count+l}):e.set(o,{type:s,id:o,count:l})})}),Array.from(e.values())}static addIndexToObjects(t){return t.forEach((e,i)=>{e.index=i}),t}static findFirstTypeAndNotGold(t){for(let e=0;e<t.length;e++)if(t[e].id>=3001&&t[e].id<=3021&&t[e].id!==3005)return t[e]}static getTitleByGoodsId(t,e){for(let i of t)if(i.goods===e)return i.title;return null}static getShopByGoodsId(t,e){for(let i of t)if(i.goods===e)return i;return null}static getCurrencyIdByName(t){let e=ve.TYPE_TOX;switch(t){case"TOX":e=ve.TYPE_TOX;break;case"ETH":e=ve.TYPE_ETH;break;case"BTC":e=ve.TYPE_BTC;break;case"USDT":e=ve.TYPE_USDT;break;case"BTOX":e=ve.TYPE_BTOX;break;case"GALA":e=ve.TYPE_GALA;break;case"BNRY":e=ve.TYPE_BNRY;break;case"KLAY":e=ve.TYPE_KLAY;break;case"BNB":e=ve.TYPE_BNB;break;case"GGG":e=ve.TYPE_GGG;break}return e}static formatNumber(t,e=7){let i=t.toString(),n=i.indexOf(".");return n!==-1&&i.length-n>e?(i=i.slice(0,n+e),parseFloat(i)):t}static truncateToTwoDecimalPlaces(t){let e=t.toString(),i=e.indexOf(".");if(i===-1)return t;let n=e.substring(0,i+5);return parseFloat(n)}static getKeyByValue(t,e){return Object.keys(t).find(i=>t[i]===e)}static powerOf10(t,e){return t*Math.pow(10,e)}static isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}static getDaysInMonth(t,e){return e===2?this.isLeapYear(t)?29:28:[4,6,9,11].includes(e)?30:31}static shortenString(t,e,i){return t.length<=e+i?t:t.substr(0,e)+"..."+t.substr(-i)}static multiplyBigDecimals(t,e){let n=Math.pow(10,1e4),r=parseFloat(String(t))*parseFloat(String(e));return Math.round(r*n)/n}static arraysEqual(t,e){return t.length===e.length&&t.every((i,n)=>i===e[n])}static categorizeArrays(t,e){let i=[];for(let n of e){let r=n[0],s=n[1],o=t.find(c=>c[0]===r),l=o?o[1]:0;i.push([r,l,s])}return i}static setMap(t,e){if(t.has(e[0])){let i=t.get(e[0]);i+=e[1],t.set(e[0],i)}else t.set(e[0],e[1]);return console.log(t),t}static getfrom(){return Ke.m_obj.from}};Ke._IsSetRelease=!1,Ke._IsSetGuid=!1;var Q=Ke;var FS={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}};ai();var GS={block:dC({format(a){return{transactions:a.transactions?.map(e=>{if(typeof e=="string")return e;let i=xr(e);return i.typeHex==="0x7e"&&(i.isSystemTx=e.isSystemTx,i.mint=e.mint?Nt(e.mint):void 0,i.sourceHash=e.sourceHash,i.type="deposit"),i}),stateRoot:a.stateRoot}}}),transaction:hC({format(a){let t={};return a.type==="0x7e"&&(t.isSystemTx=a.isSystemTx,t.mint=a.mint?Nt(a.mint):void 0,t.sourceHash=a.sourceHash,t.type="deposit"),t}}),transactionReceipt:_1({format(a){return{l1GasPrice:a.l1GasPrice?Nt(a.l1GasPrice):null,l1GasUsed:a.l1GasUsed?Nt(a.l1GasUsed):null,l1Fee:a.l1Fee?Nt(a.l1Fee):null,l1FeeScalar:a.l1FeeScalar?Number(a.l1FeeScalar):null}}})};ya();ta();Mi();Ue();function sB(a,t){return lB(a)?oB(a):A1(a,t)}var KS={transaction:sB};function oB(a){cB(a);let{sourceHash:t,data:e,from:i,gas:n,isSystemTx:r,mint:s,to:o,value:l}=a,c=[t,i,o??"0x",s?Ce(s):"0x",l?Ce(l):"0x",n?Ce(n):"0x",r?"0x1":"0x",e??"0x"];return ni(["0x7e",sa(c)])}function lB(a){return a.type==="deposit"||typeof a.sourceHash<"u"}function cB(a){let{from:t,to:e}=a;if(t&&!dt(t))throw new Lt({address:t});if(e&&!dt(e))throw new Lt({address:e})}var Ar={contracts:FS,formatters:GS,serializers:KS};var Fi=Ct({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://rpc.ankr.com/bsc"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}});var Ba=Ct({id:97,name:"Binance Smart Chain Testnet",nativeCurrency:{decimals:18,name:"BNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://data-seed-prebsc-1-s1.bnbchain.org:8545"]}},blockExplorers:{default:{name:"BscScan",url:"https://testnet.bscscan.com",apiUrl:"https://api-testnet.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:17422483}},testnet:!0});var Zh=Ct({id:8217,name:"Klaytn",nativeCurrency:{decimals:18,name:"Klaytn",symbol:"KLAY"},rpcUrls:{default:{http:["https://public-en-cypress.klaytn.net"]}},blockExplorers:{default:{name:"KlaytnScope",url:"https://scope.klaytn.com"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:96002415}}});var ed=Ct({id:1890,name:"LightLink Phoenix Mainnet",network:"lightlink-phoenix",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},rpcUrls:{default:{http:["https://replicator.phoenix.lightlink.io/rpc/v1"]}},blockExplorers:{default:{name:"LightLink Phoenix Explorer",url:"https://phoenix.lightlink.io"}},testnet:!1});var Gn=Ct({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://cloudflare-eth.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});var Kn=Ct({id:5e3,name:"Mantle",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Explorer",url:"https://mantlescan.xyz/",apiUrl:"https://api.mantlescan.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:304717}}});var an=Ct({id:5003,name:"Mantle Sepolia Testnet",nativeCurrency:{decimals:18,name:"MNT",symbol:"MNT"},rpcUrls:{default:{http:["https://rpc.sepolia.mantle.xyz"]}},blockExplorers:{default:{name:"Mantle Testnet Explorer",url:"https://explorer.sepolia.mantle.xyz/",apiUrl:"https://explorer.sepolia.mantle.xyz/api"}},contracts:{multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:4584012}},testnet:!0});var td=56,Gi=Ct({id:204,name:"opBNB",nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},rpcUrls:{default:{http:["https://opbnb-mainnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opBNB (BSCScan)",url:"https://opbnb.bscscan.com",apiUrl:"https://api-opbnb.bscscan.com/api"}},contracts:{...Ar.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:512881},l2OutputOracle:{[td]:{address:"0x153CAB79f4767E2ff862C94aa49573294B13D169"}},portal:{[td]:{address:"0x1876EA7702C0ad0C6A2ae6036DE7733edfBca519"}},l1StandardBridge:{[td]:{address:"0xF05F0e4362859c3331Cb9395CBC201E3Fa6757Ea"}}},sourceId:td});var id=97,Ki=Ct({id:5611,name:"opBNB Testnet",nativeCurrency:{decimals:18,name:"tBNB",symbol:"tBNB"},rpcUrls:{default:{http:["https://opbnb-testnet-rpc.bnbchain.org"]}},blockExplorers:{default:{name:"opbnbscan",url:"https://testnet.opbnbscan.com"}},contracts:{...Ar.contracts,multicall3:{address:"0xcA11bde05977b3631167028862bE2a173976CA11",blockCreated:3705108},l2OutputOracle:{[id]:{address:"0xFf2394Bb843012562f4349C6632a0EcB92fC8810"}},portal:{[id]:{address:"0x4386C8ABf2009aC0c263462Da568DD9d46e52a31"}},l1StandardBridge:{[id]:{address:"0x677311Fd2cCc511Bbc0f581E8d9a07B033D5E840"}}},testnet:!0,sourceId:id});var yc=1,ad=Ct({...Ar,id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.optimism.io"]}},blockExplorers:{default:{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io/api"}},contracts:{...Ar.contracts,disputeGameFactory:{[yc]:{address:"0xe5965Ab5962eDc7477C8520243A95517CD252fA9"}},l2OutputOracle:{[yc]:{address:"0xdfe97868233d1aa22e815a266982f2cf17685a27"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:4286263},portal:{[yc]:{address:"0xbEb5Fc579115071764c7423A4f12eDde41f106Ed"}},l1StandardBridge:{[yc]:{address:"0x99C9fc46f92E8a1c0deC1b1747d010903E884bE1"}}},sourceId:yc});var co=Ct({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.drpc.org"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xc8Af999e38273D658BE1b921b88A9Ddf005769cC",blockCreated:5317080}},testnet:!0});var qn=class a{constructor(){this.assets_contract=null;this.startRecharge=!1}static get instance(){return a._instance||(a._instance=new a),a._instance}async init(){typeof window.ethereum>"u"||(g.intance.on(f.EVENT_RECHARGE_GET,this,this.rechargeEnd),this.assets_contract=new window.web3.eth.Contract(Z.WITHDRAW_AND_RECHARGE_ABI,Z.WITHDRAW_AND_RECHARGE_ADDRESS))}async depositWallet(t,e){if(_e.instance.showLoading(!0),!await W.instance.allowanceAddressByTokenAddress(Z.WITHDRAW_AND_RECHARGE_ADDRESS,t)){_e.instance.hideLoading(),T.instance.notice(m.instance.getLanguage(15));return}return e=window.web3.utils.toWei(e+""),await this.assets_contract.methods.recharge(t.toLowerCase(),e).send({from:W.instance.walletAddress},(n,r)=>{if(n)return _e.instance.hideLoading(),!1}),!0}async withdrawToken(t){return _e.instance.showLoading(!0),await this.assets_contract.methods.withdrawToken(t.tokenAddress,t.to,t.amount,t.timestamp,t.hash,t.r,t.s,t.v).send({from:W.instance.walletAddress},(e,i)=>{if(e)return _e.instance.hideLoading(),!1}),!0}async updateAssetsBalance(){Ga.instance.walletDic==null&&(Ga.instance.walletDic=new le),g.intance.event($t.UPDATE_LOCAL_WALLET_LIST_EVENT)}updateCwt(t){let e=Ga.instance.walletDic.get(bi.ASSETS_TOX);e||(e=new _h,e.itemId=bi.ASSETS_TOX,Ga.instance.walletDic.set(bi.ASSETS_TOX,e)),e.ethValue=t}async rechargeToken(t,e=null,i){try{if(e.token&&e.token!==Z.ADDRESS0&&!await W.instance.newAllowanceAddress(i,e.token))return _e.instance.hideLoading(),T.instance.notice(m.instance.getLanguage(15)),!1;let n=Dr(t+"",e.tokenDecimals),r=Z.RECHANGE_ABI_NEW,s="depositToken",o;!e.token||e.token==Z.ADDRESS0?o=await W.instance.walletClient.writeContract({account:W.instance.walletAddress,address:i,abi:r,functionName:"depositETH",value:n,args:[]}):o=await W.instance.walletClient.writeContract({account:W.instance.walletAddress,address:i,abi:r,functionName:s,args:[e.token,n]}),this.startRecharge=!0,Laya.timer.once(6e4,this,this.clearRecharge);let l,c=!1;if(l=await W.instance.publicClient.waitForTransactionReceipt({hash:o,pollingInterval:1e3}),l&&l.status=="success"||c){if(!this.startRecharge)return;Laya.timer.clear(this,this.clearRecharge),console.log(`Tx successful with hash: ${o}`);let u=await W.instance.walletClient.getChainId(),p=[u,o];return this.getReward(u,o),Laya.timer.loop(2e3,this,this.getReward,p),Laya.timer.once(6e4,this,this.clearRecharge),o}else{_e.instance.hideLoading(),Ee.TransactionErrorTip();return}}catch(n){_e.instance.hideLoading(),console.log(n),n instanceof Error?n.message.includes("does not match the target chain for the transaction")?g.intance.event(f.CHANGE_ASSET_CHAIN):console.log("Error message does not contain the specified character."):console.log("An error occurred, but it is not an instance of Error.")}}async getReward(t,e){let i=await I.requestPost("wxgame/sys/payCallPack",{chainId:t,hashId:e});if(i&&i.coin){Laya.timer.clear(this,this.clearRecharge);let r=i.coin[0];if(!r)return;g.intance.event($t.UPDATE_LOCAL_WALLET_LIST_EVENT);var n=new vt;n.id=r[0],n.count=r[1],_e.instance.hideLoading(),A.intance.openModule(y.RewardGetDialog,[n]),this.rechargeEnd()}}rechargeEnd(){b.instance.rechargeEnd=!1,Laya.timer.clear(this,this.getReward)}clearRecharge(){this.startRecharge=!1,_e.instance.hideLoading(),T.instance.notice(m.instance.getLanguage(1350)),this.rechargeEnd()}parseGwei(t){return t*1e9}async getAmountsOut(t,e,i,n=void 0){try{let r=18,s=18;n&&(r=n.usdtDecimals,s=n.tokenDecimals);let o=Q.powerOf10(i,r),l;if(t=="BNB"||t=="GALA"?l=await W.instance.publicClient.readContract({address:e,abi:Z.PUZZLE_ABI,functionName:"getAmountsOut",args:[o]}):l=await W.instance.publicClient.readContract({address:e,abi:Z.PUZZLE_ABI,functionName:"getTokenAmountsOut",args:[o,n.token]}),l){let c=Number(l)/Math.pow(10,s);return console.log(c),c}}catch(r){if(r instanceof Error){let s=r.message;return 0}}return 0}async withdrawAirToken(t,e=null,i,n,r,s,o,l){try{let u;l==Gn.id||l==co.id?u=Z.PUZZLE_ABI_ETH:u=Z.PUZZLE_ABI;var c=await W.instance.walletClient.writeContract({account:W.instance.walletAddress,address:t,abi:u,functionName:"withdrawToken",args:[e,i,n,r,s,o]});return c}catch(u){_e.instance.hideLoading(),console.log(u)}}};var rd=gD(qS());var Ma=class{static getInviteUrl(){return window.location.origin+"?invite="+this.encode(W.instance.walletAddress)}static encode(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=e.length,n=e.split(""),r="",s,o,l,c,u=0;u<t.length;u++)s=t.charCodeAt(u),o=s%i,s=(s-o)/i,l=s%i,s=(s-l)/i,c=s%i,r+=n[c]+n[l]+n[o];return window.btoa(r)}static decode(t){t=window.atob(t);var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=e.length,n,r,s,o,l=0,c;c=new Array(Math.floor(t.length/3)),n=c.length;for(var u=0;u<n;u++)r=e.indexOf(t.charAt(l)),l++,s=e.indexOf(t.charAt(l)),l++,o=e.indexOf(t.charAt(l)),l++,c[u]=r*i*i+s*i+o;return n=decodeCharCode(c.join(",")),n}static getQueryString(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return i!=null?i[2]:""}static getInviteWalletAddress(){let t=this.getQueryString("invite");return t&&(t=this.decode(t)),t}static toWei(t,e){let i=t*10**parseInt(e);return window.web3.utils.toBN("0x"+i.toString(16)).toString()}static fromWei(t,e,i=0){if(!t)return 0;let n=t.length-e+i;if(n<=0)return 0;let r=t.toString().slice(0,n);if(i){let s=r.length-i;if(s<=0){let o="0.";for(let l=0;l<Math.abs(s);l++)o+="0";r=o+r}else r=r.slice(0,r.length-i)+"."+r.slice(r.length-i)}return r}static deepClone(t){let e=new le;for(let i in t)typeof t[i]=="function"?e[i]=t[i]:e[i]=JSON.parse(JSON.stringify(t[i]));return e}};Lp();Ue();function bc(){return Ce(Za.utils.randomPrivateKey())}var nd=($=>($[$.MAINNET=1]="MAINNET",$[$.TESTNET_RINKEBY=4]="TESTNET_RINKEBY",$[$.ARBITRUM=42161]="ARBITRUM",$[$.ARBITRUM_TESTNET=421611]="ARBITRUM_TESTNET",$[$.AVALANCHE=43114]="AVALANCHE",$[$.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",$[$.POLYGON=137]="POLYGON",$[$.POLYGON_TESTNET=80001]="POLYGON_TESTNET",$[$.FANTOM=250]="FANTOM",$[$.FANTOM_TESTNET=4002]="FANTOM_TESTNET",$[$.OPTIMISM=10]="OPTIMISM",$[$.OPTIMISM_TESTNET=69]="OPTIMISM_TESTNET",$[$.BOBA=288]="BOBA",$[$.BOBA_TESTNET=28]="BOBA_TESTNET",$[$.ESC=20]="ESC",$[$.HECO=128]="HECO",$[$.BSC=56]="BSC",$[$.BSC_TESTNET=97]="BSC_TESTNET",$[$.MATCH=9001]="MATCH",$[$.MATCH_TESTNET=9e3]="MATCH_TESTNET",$[$.CC=1331]="CC",$[$.SEPOLIA=11155111]="SEPOLIA",$[$.Klaytn=8217]="Klaytn",$[$.Lightlink=1890]="Lightlink",$[$.OpBNB=Gi.id]="OpBNB",$[$.opBNBTestnet=5611]="opBNBTestnet",$[$.Mantle=Kn.id]="Mantle",$[$.MantleSepoliaTestnet=an.id]="MantleSepoliaTestnet",$))(nd||{}),Wn={id:9001,name:"MATCH",network:"MATCH",iconUrl:"",iconBackground:"#fff",nativeCurrency:{decimals:18,name:"MATCH",symbol:"MATCH"},rpcUrls:{default:{http:["https://rpc-match.phantomarena.co/"]},public:{http:["https://rpc-match.phantomarena.co/"]}},blockExplorers:{default:{name:"matchscan",url:"https://lisbon.matchscan.io"},etherscan:{name:"matchscan",url:"https://lisbon.matchscan.io"}},testnet:!1};var W=class a{constructor(){this.tokenContract=null;this.hero_contract=null}static get instance(){return a._instance||(a._instance=new a),a._instance}async init(){if(typeof window.ethereum>"u"||z.Debug==2){T.instance.notice(m.instance.getLanguage(130));return}Ne.instance.sendCustumEvent(10),this.walletClient=ro({transport:Qs(window.ethereum)});var t;if(z.Debug<2){var e=await a.instance.walletClient.getChainId();t=this.getChain(e)}t||(t=Fi),this.publicClient=cl({chain:t,transport:sl()}),this.walletClient=ro({chain:t,transport:Qs(window.ethereum)});let i=await a.instance.walletClient.getChainId();console.log("链id===============》",i),await c0(),Ne.instance.sendCustumEvent(12),this.registerProxy(),Ne.instance.sendCustumEvent(17)}async registerProxy(){Yr.instance.init()}async getWalletAddress(){if(this.walletAddress)return this.walletAddress;let[t]=await this.walletClient.requestAddresses();return console.log("钱包地址===============》",t),t;if(await c0(),Ht.type==Ht.TYPE_TRUST)try{console.log("initWeb3 -3");let e=await Ht.trustProvider.request({method:"eth_requestAccounts"});return console.log("initWeb3 -4"),console.log(e),e[0]}catch(e){console.log("initWeb3 -5"+e),e.code===4001&&console.error("User denied connection.")}else if(Ht.type==Ht.TYPE_WEB3)return(await window.ethereum.request({method:"eth_requestAccounts"}))[0];return null}async dappLogin(){console.log("dappLogin this.walletAddress: "+this.walletAddress),Ne.instance.sendCustumEvent(13),this.walletAddress=await this.getWalletAddress(),Ne.instance.sendCustumEvent(14),console.log("login to server",1),await this.signAndLogin(),console.log("login success",1)}getChainId(){let t="";return typeof window.ethereum>"u"&&(t="0x38"),(window.ethereum.chainId+"").indexOf("0x")==-1?t="0x"+window.ethereum.chainId.toString(16):t=window.ethereum.chainId,t!=="0x38"&&t!=="0x61"&&T.instance.notice(m.instance.getLanguage(18)),t}async signAndLogin(t=!1){console.log("signAndLogin mustSign: "+t);var e=!0;let i=new Date().getTime(),n="",r="",s="",o="";if(z.Debug!=0)e=!1;else if(!t&&localStorage.getItem("TOX-COOKIE"+this.walletAddress)&&z.Debug==0){let d=localStorage.getItem("TOX-COOKIE"+a.instance.walletAddress),L=localStorage.getItem("TOX-COOKIE-CODE"+a.instance.walletAddress);L=Ma.decode(L);let v=L.split("&");i=parseFloat(v[0]),n=v[1],r=v[2],s=v[3],o=v[4],d&&i&&n&&r&&s&&o&&(e=!1),console.log("needSign: "+e)}if(e){console.log("111");var l=bc().substring(0,32);n=Ce(l,{size:32}),console.log("222"),i=new Date().getTime();let L=this.walletAddress+n+i,v=new rd.default("SHA-256","TEXT",{encoding:"UTF8"});v.update(L);let E=v.getHash("HEX");console.log("进入签名",1);let w=await this.walletClient.signMessage({account:this.walletAddress,message:E});console.log("签名结束",1);let R=w.substring(2);r="0x"+R.substring(0,64),s="0x"+R.substring(64,128),o="0x"+R.substring(128,130)}let c={debug:z.Debug,address:this.walletAddress,time:i,randomHex:n,r,s,v:o};Ne.instance.sendCustumEvent(15);let u=await I.requestPost("wxgame/player/login",c,!1,!1);if(u){if(console.log("服务器登录成功"),u.status==1){Ee.alertNoAll(Le.instance.get(2));return}Ne.instance.sendCustumEvent(16),localStorage.setItem("TOX-COOKIE"+a.instance.walletAddress,u.loginToken);var p=Ma.encode(i+"&"+n+"&"+r+"&"+s+"&"+o);localStorage.setItem("TOX-COOKIE-CODE"+a.instance.walletAddress,p)}else A.intance.openModule(y.NoServerView);g.intance.event(f.EVENT_LOGIN_GAME_END,u)}async main(){let t=cl({chain:Gn,transport:sl()}),e=ro({chain:Gn,transport:Qs(window.ethereum)}),i=await t.getBalance({address:"0x55d398326f99059fF775485246999027B3197955"});console.log("balance:"+i);let[n]=await e.requestAddresses();console.log("address:"+n);let r=await e.signMessage({account:n,message:"Hello world!"});console.log("address: "+n),console.log("message: Hello world!"),console.log("signature: "+r);let s=await t.verifyMessage({address:n,message:"Hello world!",signature:r});console.log("valid: "+s);let l=await(await fetch("http://localhost:3000/api/login",{method:"POST",body:JSON.stringify({address:e.account.address,signature:r})})).json();console.log("data: "+l)}async refreshToken(){let t,e=localStorage.getItem("TOX-COOKIE-CODE"+a.instance.walletAddress);e=Ma.decode(e);let i=e.split("&"),n=parseFloat(i[0]),r=i[1],s=i[2],o=i[3],l=i[4];if(n&&r&&s&&o&&l){let c={debug:z.Debug,address:this.walletAddress,time:n,randomHex:r,r:s,s:o,v:l};t=await I.requestPost("wxgame/player/getJwt",c,!1,!1).catch(u=>{}),t&&localStorage.setItem("TOX-COOKIE"+a.instance.walletAddress,t.loginToken)}return t}async checkNickName(t){console.log("checkNickName");let e={name:t,address:this.walletAddress};return await I.requestPost("wxgame/player/nameCheck",e,!1,!1).catch(n=>{_e.instance.hideLoading(),console.log("checkResult 失败")})}waitGetAccount(){Laya.timer.loop(2e3,this,this.getAcccount)}async getAcccount(){console.log("getAcccount");var t=!0;let e=new Date().getTime(),i="",n="",r="",s="";if(z.Debug!=0)t=!1;else{let u=localStorage.getItem("TOX-COOKIE-CODE"+a.instance.walletAddress);u=Ma.decode(u);let p=u.split("&");e=parseFloat(p[0]),i=p[1],n=p[2],r=p[3],s=p[4],e&&i&&n&&r&&s&&(t=!1),console.log("needSign: "+t)}if(t){var o=bc().substring(0,32);i=Ce(o,{size:32}),e=new Date().getTime();let p=this.walletAddress+i+e,d=new rd.default("SHA-256","TEXT",{encoding:"UTF8"});d.update(p);let L=d.getHash("HEX");console.log("进入签名",1);let v=await this.walletClient.signMessage({account:this.walletAddress,message:L});console.log("签名结束",1);let E=v.substring(2);n="0x"+E.substring(0,64),r="0x"+E.substring(64,128),s="0x"+E.substring(128,130)}let l,c={address:this.walletAddress,time:e,randomHex:i,r:n,s:r,v:s};if(l=await I.requestPost("wxgame/player/getAccount",c,!1,!1).catch(u=>{}),l){Laya.timer.clear(this,this.getAcccount);let u=l.playerDto;localStorage.setItem("TOX-COOKIE"+a.instance.walletAddress,l.loginToken),g.intance.event(f.EVENT_WAIT_PLAYERINFO,u)}}async createAcccount(t,e,i,n,r){console.log("createAcccount");var s=!0;let o=new Date().getTime(),l="",c="",u="",p="";if(z.Debug!=0)s=!1;else{let E=localStorage.getItem("TOX-COOKIE-CODE"+a.instance.walletAddress);E=Ma.decode(E);let w=E.split("&");o=parseFloat(w[0]),l=w[1],c=w[2],u=w[3],p=w[4],o&&l&&c&&u&&p&&(s=!1),console.log("needSign: "+s)}if(s){var d=bc().substring(0,32);l=Ce(d,{size:32}),o=new Date().getTime();let w=this.walletAddress+l+o,R=new rd.default("SHA-256","TEXT",{encoding:"UTF8"});R.update(w);let U=R.getHash("HEX");console.log("进入签名",1);let V=await this.walletClient.signMessage({account:this.walletAddress,message:U});console.log("签名结束",1);let q=V.substring(2);c="0x"+q.substring(0,64),u="0x"+q.substring(64,128),p="0x"+q.substring(128,130)}let L,v={name:t,sex:e,icon:i,country:n,referral:r,debug:z.Debug,address:this.walletAddress,time:o,randomHex:l,r:c,s:u,v:p};if(L=await I.requestPost("wxgame/player/create",v,!1,!1).catch(E=>{}),L){let E=L.playerDto;return localStorage.setItem("TOX-COOKIE"+a.instance.walletAddress,L.loginToken),E}return null}async getBalance(){return 0}async allowanceAddress(t){}async newAllowanceAddress(t,e){let i=a.instance.walletAddress,n=t;try{console.log("查看是否已经授权, owner:"+i+", spender:"+n+", publicClient.chain.id:"+this.publicClient.chain.id);let r=await a.instance.publicClient.readContract({address:e,abi:Z.TOKEN_ERC20ABI,functionName:"allowance",args:[i,n]});if(r=="0"){console.log("未授权，进行授权, owner:"+i+", allowance:"+r+", walletClient.chain.id:"+this.walletClient.chain.id);let s=await a.instance.walletClient.writeContract({address:e,abi:Z.TOKEN_ERC20ABI,functionName:"approve",args:[n,"100000000000000000000000000000000000000000000000"],account:i});console.log("授权hash============"+s);let o=await a.instance.publicClient.waitForTransactionReceipt({hash:s});return console.log(`Tx with hash: ${s}`,o),o&&o.status=="success"?(console.log(`Tx successful with hash: ${s}`),!0):!1}else return console.log("已授权, owner:"+i+", allowance:"+r),!0}catch(r){if(console.log("授权错误====》",r),r instanceof Error){let s=r.message;console.log("授权错误====》",s)}}}async allowanceAddressByTokenAddress(t,e){let i=new window.web3.eth.Contract(Z.TOKEN_ERC20ABI,e);return await i.methods.allowance(this.walletAddress,t).call()=="0"&&(console.log("ERC20 allowance!"),await i.methods.approve(t,"100000000000000000000000000000000000000000000000").send({from:this.walletAddress},(r,s)=>{if(r)return _e.instance.hideLoading(),!1})),!0}async getERC20TokenBalance(t){return window.ethereum,await new window.web3.eth.Contract(Z.TOKEN_ERC20ABI,t).methods.balanceOf(this.walletAddress).call()}async getBalance2(t,e=void 0){let i=this.walletAddress;e&&(i=e);let n;return!t||t==Z.ADDRESS0?n=await a.instance.publicClient.getBalance({address:i}):n=await this.publicClient.readContract({address:t,abi:Z.TOKEN_ERC20ABI,functionName:"balanceOf",args:[i]}),console.log("getBalance2 publicClient.chain.id:"+this.publicClient.chain.id,"代币地址",t,"余额：",n),n}async getIgoUSD(){let t=z.vType==2?Z.IGO_ADDRESS:Z.IGO_ADDRESS_TEST;return await this.publicClient.readContract({address:t,abi:Z.IGO_ABI,functionName:"USD"})}async getIgoLimitTime(){let t=z.vType==2?Z.IGO_ADDRESS:Z.IGO_ADDRESS_TEST;return await this.publicClient.readContract({address:t,abi:Z.IGO_ABI,functionName:"deadline"})}async getIgoRecord(){let t=z.vType==2?Z.IGO_ADDRESS:Z.IGO_ADDRESS_TEST,e=this.walletAddress;return await this.publicClient.readContract({address:t,abi:Z.IGO_ABI,functionName:"getRecords",args:[e]})}async rechargeIgoUSD(t,e,i){let n=z.vType==2?Z.IGO_ADDRESS:Z.IGO_ADDRESS_TEST,r=this.walletAddress,s=Number(Dr(t+"",18)),o=await I.requestPost("wxgame/fodc/getSignature",{amount:s,chainId:e,contract:n});if(o&&o.signInfo){let l=o.signInfo;try{if(_e.instance.showLoading(),!await a.instance.newAllowanceAddress(n,i))return _e.instance.hideLoading(),T.instance.notice(m.instance.getLanguage(15)),!1;let u=await a.instance.walletClient.writeContract({address:l.contract,abi:Z.IGO_ABI,functionName:"recharge",args:[l.address,l.amount,l.inviteAddress,l.deadline,l.signature],account:r}),p;if(p=await a.instance.publicClient.waitForTransactionReceipt({hash:u,pollingInterval:1e3}),p&&p.status=="success")return console.log(`Tx successful with hash: ${u}`),_e.instance.hideLoading(),u;_e.instance.hideLoading(),Ee.TransactionErrorTip();return}catch(c){_e.instance.hideLoading(),Ee.TransactionErrorTip(),console.log(c)}}}async getRechargedIgoUSD(){let t=z.vType==2?Z.IGO_ADDRESS:Z.IGO_ADDRESS_TEST,e=a.instance.walletAddress;return await this.publicClient.readContract({address:t,abi:Z.IGO_ABI,functionName:"getAmounts",args:[e]})}async getAllRechargedMoney(){let t=z.vType==2?Z.IGO_ADDRESS:Z.IGO_ADDRESS_TEST,e=a.instance.walletAddress;return await this.publicClient.readContract({address:t,abi:Z.IGO_ABI,functionName:"totalQuota"})}async getMyAllRechargedMoney(){let t=z.vType==2?Z.IGO_ADDRESS:Z.IGO_ADDRESS_TEST,e=a.instance.walletAddress;return await this.publicClient.readContract({address:t,abi:Z.IGO_ABI,functionName:"getAmounts",args:[e]})}async getBankBalance(t,e,i){if(i=="WBNB"){let n=await a.instance.publicClient.getBalance({address:e});if(n)return n}else{let n=this.getBalance2(t,e);if(n)return n}}async getHeroStatus(t){return await this.hero_contract.methods.getStatus(parseInt(t)).call()}async checkHeroIsBuzy(t){let e=await this.getHeroStatus(t);return parseInt(e)?(T.instance.notice(m.instance.getLanguage(19)),!0):!1}async switchChain(t){var e=this.getChainName(t);let i=await a.instance.walletClient.getChainId();if(z.isInto&&Laya.Browser.onIOS&&i!==t)return T.instance.notice(m.instance.getLanguage(1172,e)),!1;try{console.log("switchChain id:"+t),await this.walletClient.switchChain({id:t})}catch(n){if(console.log(n),n instanceof Error){let r=n.message;console.log("切换错误====》",r)}return T.instance.notice(m.instance.getLanguage(1172,e)),!1}return await this.resetPublicAndWallet(t),!0}async addChain(t){console.log(t);var e=this.getChain(t);let i=await this.walletClient.addChain({chain:e});console.log(i)}getChain(t){var e=null;switch(t){case Fi.id:e=Fi;break;case Ba.id:e=Ba;break;case Wn.id:e=Wn;break;case Gn.id:e=Gn;break;case ad.id:e=ad;break;case co.id:e=co;break;case Zh.id:e=Zh;break;case ed.id:e=ed;break;case Gi.id:e=Gi;break;case Ki.id:e=Ki;break;case Kn.id:e=Kn;break;case an.id:e=an;break}return e}getChainName(t){var e="",i=this.getChain(t);return i&&(e=i.name),e}async resetPublicAndWallet(t){console.log("resetPublicAndWallet chain:"+t);var e=this.getChain(t);await a.instance.reInitPublicClient(e),await a.instance.reInitWalletClient(e)}reInitPublicClient(t){console.log("reInitPublicClient chain:"+t),this.publicClient=cl({chain:t,transport:sl()})}reInitWalletClient(t){console.log("reInitWalletClient chain:"+t),this.walletClient=ro({chain:t,transport:Qs(window.ethereum)})}async getAuthStatus(){let t=a.instance.walletAddress;try{return await a.instance.publicClient.readContract({address:Z.SAT_ADDRESS,abi:Z.SAT_ABI,functionName:"getAuthStatus",args:[t]})}catch(e){if(console.log("授权错误====》",e),e instanceof Error){let i=e.message;console.log("授权错误====》",i)}}}};var WS=Laya.HttpRequest,Yt=class Yt{static requestGet(t,e,i=!1,n=!0,r=!1){return new Promise((s,o)=>{var l=Laya.Pool.getItem("HttpRequest");l||(l=new WS),l.http.timeout=2e3,l.on(Laya.Event.COMPLETE,null,L),l.on(Laya.Event.ERROR,null,v),l.http.onreadystatechange=()=>{if(l.http.readyState===XMLHttpRequest.DONE){var w=l.http.status;w>=200&&w<400||(o(),E())}};let c=localStorage.getItem("TOX-COOKIE"+W.instance.walletAddress),u=["Content-Type","application/json"];c&&(u=[...u,"Authorization",c]);let p;t.startsWith("http")?(p=t+d(e),l.send(t,e,"post","json",u)):p=Yt.httpRoot+"/"+t+d(e),Yt.httpRoot!="https://api.phantomarena.co"&&Wt.log("REQUEST_GET "+p,1),l.send(p,null,"get","json",u);function d(w){if(typeof w=="string")return w;let R="";for(let U in w)R+="&"+U+"="+w[U];return R}function L(w){w.code==="0"?s(w.data):(Le.instance.showErrorWord(parseInt(w.code)),o(w.code)),E()}function v(w,R){debugger;o(w),E()}function E(){l.off(Laya.Event.COMPLETE,null,L),l.off(Laya.Event.ERROR,null,v),Laya.Pool.recover("HttpRequest",l)}})}static startHeart(){Laya.stage.on(Laya.Event.BLUR,this,()=>{this.stopHeartInStage=!0,console.log("失去焦点, 停止心跳")}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.stopHeartInStage=!1,console.log("获取焦点, 开始心跳")}),Laya.timer.loop(3e3,this,this.onHeart)}static async onHeart(){if(z.showHeartLog){if(!Yt.needHeart||this.stopHeartInRoom)return}else if(!Yt.needHeart||this.stopHeartInStage||this.stopHeartInRoom)return;let t=new Date().getTime();var e=await this.requestPost("wxgame/sys/ping",{},!0,!0);if(e.status==1){Ee.alertNoAll(Le.instance.get(2)),Laya.timer.clear(this,this.onHeart);return}var n=new Date().getTime()-t;g.intance.event(f.EVENT_Game_Delay,n);var r=e.time;b.instance.m_serverTime=r;var s=e.resChange;b.instance.playerDto.fightHeroPk=e.fightHeroPk;var o=e.itemChange,l=!1;s&&s.length>0&&(l=!0,b.instance.moneyInfoHander(s,!0,!1),g.intance.event($t.UPDATE_LOCAL_WALLET_LIST_EVENT),g.intance.event(f.REFRESH_ALL_WITHDRAW_DATA)),o&&o.length>0&&(l=!0,b.instance.itemsDataUpdataHandler(o,!0,!1)),e.redPoint&&!Q.arraysEqual(b.instance.redDotData,e.redPoint)&&(b.instance.redDotData=e.redPoint,b.instance.refreshRedDotShow()),e.teamInviteDtoList&&e.teamInviteDtoList.length&&e.teamInviteDtoList.forEach(c=>{console.log("onHeart == teamInviteDto: ",c),De.instance.goBookingInviteConfimDialog(c)}),e.teamApplyDtoList&&e.teamApplyDtoList.length&&e.teamApplyDtoList.forEach(c=>{console.log("onHeart == teamApplyDto: ",c),De.instance.goBookingApplyConfimDialog(c)}),e.preContractReadyRoomId&&this.lastPrecontractReadyRoomId!=e.preContractReadyRoomId&&(this.lastPrecontractReadyRoomId=e.preContractReadyRoomId,console.log("onHeart == data.preContractReadyRoomId: ",e.preContractReadyRoomId),De.instance.goBookingCreateRoomDialog(e.preContractReadyRoomId)),e.preContractStartRoomId&&this.lastPreContractstartRoomId!=e.preContractStartRoomId&&(this.lastPreContractstartRoomId=e.preContractStartRoomId,console.log("onHeart == data.preContractStartRoomId: ",e.preContractStartRoomId),De.instance.goMatchCreateRoomDialog(e.preContractStartRoomId)),l&&console.log("onHeart: data =============> ",e)}static requestPost(t,e,i=!1,n=!0,r=!1){let s=localStorage.getItem("TOX-COOKIE"+W.instance.walletAddress);return i&&!s?[]:new Promise((o,l)=>{var c=Laya.Pool.getItem("HttpRequest");c||(c=new WS),c.http.timeout=1e4,c.once(Laya.Event.COMPLETE,null,d),c.once(Laya.Event.ERROR,null,L);let u=[];s&&n&&(u=[...u,"Authorization",s]);var p=Yt.seq+1;Yt.seq=p,t=="wxgame/sys/ping"?z.showHeartLog&&console.log(Ee.GetLogTime+" "+p+" >>> HTTP_POST "+Yt.httpRoot+"/"+t+" "+JSON.stringify(e),s):console.log(Ee.GetLogTime+" "+p+" >>> HTTP_POST "+Yt.httpRoot+"/"+t+" "+JSON.stringify(e),s),t.startsWith("http")?c.send(t,e,"post","json",u):c.send(Yt.httpRoot+"/"+t,e,"post","json",u);async function d(E){if(t=="wxgame/sys/ping"?z.showHeartLog&&console.log(Ee.GetLogTime+" "+p+" <<< hTTP_RCV data: "+JSON.stringify(E),1):console.log(Ee.GetLogTime+" "+p+" <<< hTTP_RCV data: "+JSON.stringify(E),1),E.errorCode==0||E.errorCode==="0")o(E);else{if(E.errorCode===10)Ee.heroNotEnought();else if(E.errorCode===18)Ee.titickNotEnought();else if(E.errorCode===26)Ee.RemError();else if(E.errorCode!==29)if(E.errorCode===30)Ee.NoHeroError(Le.instance.get(E.errorCode));else if(E.errorCode===32)Ee.NoHeroError(Le.instance.get(E.errorCode));else if(E.errorCode===2||E.errorCode===21)Ee.alertNoAll(Le.instance.get(E.errorCode));else if(E.errorCode===5)if(z.Debug==0){localStorage.setItem("TOX-COOKIE"+W.instance.walletAddress,"");var w=await W.instance.refreshToken();w&&Yt.requestPost(t,e,i,n)}else localStorage.setItem("TOX-COOKIE"+W.instance.walletAddress,""),Le.instance.showErrorWord(parseInt(E.errorCode));else E.errorCode===17?z.Debug==0?(localStorage.setItem("TOX-COOKIE"+W.instance.walletAddress,""),W.instance.signAndLogin(),Le.instance.showErrorWord(parseInt(E.errorCode))):(localStorage.setItem("TOX-COOKIE"+W.instance.walletAddress,""),Le.instance.showErrorWord(parseInt(E.errorCode))):E.errorCode===9?(De.instance.close(),Ee.commTipWithYes(Le.instance.get(E.errorCode))):E.errorCode===51?Ee.commTipWithYes(Le.instance.get(E.errorCode)):r||Le.instance.showErrorWord(parseInt(E.errorCode),E.errorParams);l(E.errorCode)}v()}function L(E,w){console.log("errorHandler data: "+E,1),r||Le.instance.showErrorWord(500),l(E),v()}function v(){c.off(Laya.Event.COMPLETE,null,d),c.off(Laya.Event.ERROR,null,L),Laya.Pool.recover("HttpRequest",c)}})}};Yt.httpRoot=getServer(),Yt.needHeart=!0,Yt.stopHeartInRoom=!1,Yt.stopHeartInStage=!1,Yt.lastPreContractstartRoomId=-1,Yt.lastPrecontractReadyRoomId=-1,Yt.seq=0;var I=Yt;var oa=class oa{constructor(){}static trim(t,e=null){e||(e=[" ","\r",`
`,"	",String.fromCharCode(65279)]);var i,n,r;for(i=t,r=e.length,n=0;n<r;n++)i=oa.getReplace(i,e[n],"");return i}static getReplace(t,e,i){if(!t)return"";var n;return n=t.replace(new RegExp(e,"g"),i),n}static isEmpty(t){return t.length<1?!0:oa.emptyStrDic.hasOwnProperty(t)}static trimLeft(t){var e;e=0;var i;for(i=t.length;oa.isEmpty(t.charAt(e))&&e<i;)e++;return e<i?t.substr(e):""}static trimRight(t){var e;for(e=t.length-1;oa.isEmpty(t.charAt(e))&&e>=0;)e--;var i;return i=t.substring(0,e),e>=0?t.substring(0,e+1):""}static trimSide(t){var e;return e=oa.trimLeft(t),e=oa.trimRight(e),e}static shortStr(t,e){return t.length>e?t.substr(0,e)+"...":t}static shortHeroStr(t,e=10){return oa.abbreviateString(t,e)}static abbreviateString(t,e=11){if(t.length<=e)return t;{let i=Math.floor((e-3)/2);return t.slice(0,i)+"..."+t.slice(-i)}}static caseInsensitiveSearchWithRegex(t,e){return new RegExp(e,"i").test(t)}static formatWalletAddress(t){let n="...";return t.length<=12+10?t:`${t.substring(0,12)}${n}${t.substring(t.length-10)}`}};oa.ANONYMOUS_NAME="***",oa.emptyStrDic={" ":!0,"\r":!0,"\n":!0,"	":!0};var Be=oa;var B=class a{constructor(){this._inited=!1;this.stopAll=!1;this.roomWatcher=!1;this.matchWatcher=!1;this.heroReadyDic=new le;this.init()}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){this._inited||(this._inited=!0)}get roomDto(){return this._roomDto}set roomDto(t){if(console.log("roomDto: ",t),this._roomDto=t,t){var e=b.instance.playerDto.pid;if(t.watch){let i=t.watch.some(n=>n===e);this.roomWatcher=i}}}setRoomAnonymousLabel(t,e=-1){return e==-1&&(e=a.instance.roomDto.anonymous),e==1?Be.ANONYMOUS_NAME:t}setMatchAnonymousLabel(t,e=-1){return e==-1&&(e=a.instance.matchDto.anonymous),!this.matchWatcher&&e==1?Be.ANONYMOUS_NAME:t}setMatchAnonymousImg(t,e=-1){return e==-1&&(e=a.instance.matchDto.anonymous),!this.matchWatcher&&e==1?null:t}get matchDto(){return this._matchDto}set matchDto(t){if(console.log("matchDto: ",t),this._matchDto=t,t){var e=b.instance.playerDto.pid;if(t.watch){let i=t.watch.some(n=>n===e);this.matchWatcher=i}t.startTime-t.nowTime>0?this.stopAll=!0:this.stopAll=!1}else this.stopAll=!1}setMatchRes(){this.heroReadyDic=new le;var t=this.roomDto.members.length,e=[],i=this.currArenaItem.mapid;if(this.heroReadyDic.get("map_"+i)==null){var i=a.instance.currArenaItem.mapid,n=D.instance.getMapImg(i);e.push(n);var r=D.instance.getMapPrefab(i);e.push(r),this.heroReadyDic.set("map_"+i,!0)}for(var s=0;s<t;s++){var o=this.roomDto.members[s];if(this.heroReadyDic.get(o.heroId+"_"+o.heroColor)==null){var l=_.intance.m_dicHeros.get(o.heroId),c=D.instance.getHeroSkRes(l.serialId,o.heroColor);e.push({url:c,type:Laya.Loader.SPINE}),this.heroReadyDic.set(o.heroId+"_"+o.heroColor,!0)}}e.length>0&&Laya.loader.load(e,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{})}onPreAssetPress1(t){}async checkMatchRankData(){if(this.reward==null){let t=await I.requestPost("wxgame/room/balanceInfo",{roomId:a.instance.matchDto.roomId});this.onGoMatchEndRank(t)}}onGoMatchEndRank(t){if(this.roomGameOverPush=t,ot.instance.isMatching=!1,t.arenaType==K.ARENA_TYPE_PVE){var e=k.instance.myPlayer;e&&console.log("我的英雄血量剩余： "+e.hp),a.instance.stopAll=!0,A.intance.openModule(y.MatchEndView,[null,null,null,t])}else{var i=t.rankList,n=t.reward,r=t.groupId,s=t.groupData;if(this.reward==null)if(a.instance.reward=n,r){var o=t.teamData;A.intance.openModule(y.MatchEndTeamRankView,[i,s,o,r])}else A.intance.openModule(y.MatchEndRankView,[i,s]);else console.warn("onGoMatchEndRank this.rewrad: ",this.reward)}}clearData(){console.log("clearData ",this.reward),this.roomDto=null,this.matchDto=null,this.reward=null,this.playerJoinDic=null,this.roomGameOverPush=null,this.playerEndDic=null,this.heroReadyDic=null,this.currArenaItem=null,this.roomWatcher=!1,this.matchWatcher=!1,k.instance.clearData(),I.needHeart=!0,ze.instance.playMusicByName(ze.soundName_bg,".mp3"),ct.instance.needPop=!0,yi.instance.startShow()}};var bt=class a{constructor(){}static judgePosition(t,e){let i=Math.atan2(e,t)*180/Math.PI;return i<0&&(i+=360),Math.floor(i)}static distancePoint(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))}get2D_Distance(t,e){return Math.sqrt(Math.pow(Math.abs(t),2)+Math.pow(Math.abs(e),2))}static rollCharacterByDir(t,e,i,n){let r=i;return a.rollCharacter(t,e,r,n)}static rollCharacter(t,e,i,n){let r=i*(Math.PI/180);var s=t+n*Math.cos(r),o=e+n*Math.sin(r),l=B.instance.currArenaItem.mapid,c=_.intance.m_dicMaps.get(l),u=c.offset;return s<u?s=u:s>c.width-u&&(s=c.width-u),o<u?o=u:o>c.height-u&&(o=c.height-u),console.log(`新的坐标：X=${s}, Y=${o}`),[s,o]}static createDirectPath(t,e,i,n=40,r=25){for(var s=[],o=i*Math.PI/180,l=1;l<n;++l){var c=t,u=e+r*l,p=-(u-e)*Math.sin(o)+t,d=(u-e)*Math.cos(o)+e;s.push(p,d)}return s}static pointsBack(t,e){if(e<=0||!t||t.length<4)return t;for(var i=0,n=-1,r=-1,s=0;s<t.length;s+=2){var o=t[s],l=t[s+1];n>0&&r>0&&(i+=this.distancePoint(n,r,o,l)),n=o,r=l}if(i<e)return null;for(var c=t.concat(),u=0,p=0;c&&c.length>=4&&u<e;){var d=c.pop(),L=c.pop(),v=c[c.length-1],E=c[c.length-2];if(u+=this.distancePoint(E,v,L,d),p=u-e,p>0){var w=Math.atan2(v-d,E-L),R=w*180/Math.PI+90;w=R*Math.PI/180;var U=v+p,V=-(U-v)*Math.sin(w)+E,q=(U-v)*Math.cos(w)+v;c.push(V,q)}}return c}static createLinePath(t,e,i,n,r=25,s=0){var o=[],l=Math.atan2(n-e,i-t);l=(l*180/Math.PI-90)*Math.PI/180;for(var c=this.distancePoint(t,e,i,n)-s,u=0,p=0;c>u;){var d=t,L=e+r*p,v=-(L-e)*Math.sin(l)+t,E=(L-e)*Math.cos(l)+e;u=this.distancePoint(t,e,v,E),c>u&&o.push(v,E),p++}return s==0&&o.push(i,n),o}static rolePosTransform(t,e,i){var n=new Laya.Matrix;return n.rotate(Math.PI/180*(t.modelAngle-90)),n.translate(e.x,e.y),n.transformPoint(i)}static pointtInPolygon(t,e){for(var i=0,n=0;n<e.length;n++){var r=e[n],s=e[(n+1)%e.length];if(r.y!=s.y&&!(t.y<Math.min(r.y,s.y))&&!(t.y>=Math.max(r.y,s.y))){var o=(t.y-r.y)*(s.x-r.x)/(s.y-r.y)+r.x;o>t.x&&i++}}return i%2==1}static pointInPie(t,e,i,n,r,s){var o=Math.atan2(s.y-e,s.x-t)*180/Math.PI,l=this.distancePoint(t,e,s.x,s.y);return o>=i&&o<=n&&l<=r}static getRandInRound(t,e){return Math.floor(Math.random()*(e-t+1))+t}static getUnitVector(t){let i=t*(Math.PI/180),n=1*Math.cos(i),r=1*Math.sin(i);return new Laya.Point(n,r)}static subtract(t,e){let i=new Laya.Point;return i.x=t.x-e.x,i.y=t.y-e.y,i}static getDistance(t,e){let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}static calculateDistance(t,e){let i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}};var Yn=class Yn{constructor(){this.activeMonsters=[];this.maxActiveMonsters=2;this.maxActiveMonsters=_.intance.getGeneralValueById(30)}update(){this.updateActiveMonsters(),this.manageActiveMonsters()}updateActiveMonsters(){for(let t of this.activeMonsters)t._isDead&&this.removeActiveMonster(t)}manageActiveMonsters(){var t=B.instance.matchCoolDownTime,e=this.maxActiveMonsters;for(t<30?e=1:t<60&&(e=2);this.activeMonsters.length<e;){let i=k.instance.matchHeroSprs.filter(s=>s!=k.instance.myHeroSpr&&!this.activeMonsters.includes(s)&&!s._isDead);if(i.length===0)break;let n=Math.floor(Math.random()*i.length),r=i[n];this.activeMonsters.push(r),r.isFocusedOnPlayer=!0}}removeActiveMonster(t){let e=this.activeMonsters.indexOf(t);e!==-1&&(t.isFocusedOnPlayer=!1,this.activeMonsters.splice(e,1))}clearData(){this.activeMonsters=[]}static get instance(){return Yn._instance==null&&(Yn._instance=new Yn),Yn._instance}};Yn._instance=null;var kr=Yn;var Bt=class Bt{constructor(){this.arenaType=1;this.validEnemyList=[];this.gameWindowX=0;this.gameWindowY=0;this.isControl=!1;this.tIndex=0;this.mapDir=-4;this.moveP=new Laya.Point}get gameMap(){return this._gameMap}set gameMap(t){this._gameMap=t}clearData(){kr.instance.clearData(),this.gameMap=null,this.box_players=null,this.box_behind=null,this.box_front=null,this.myHeroSpr=null,this.otherHeroSpr=null,this.matchHeroSmallDic=null,this.matchHeroSprDic=null,this.matchHeroSprs=null,this.matchHeroDic=null,this.myPlayer=null,this.allOrders=null}static get instance(){return Bt._instance==null&&(Bt._instance=new Bt),Bt._instance}init(){this.validEnemyList=[]}insertValidList(t){this.isFInd(t,this.validEnemyList)||this.validEnemyList.push(t)}isFInd(t,e){var i=!1;(!t||!e||e.length<=0)&&(i=!1);for(let n=0;n<e.length;n++)if(e[n]==t)return!0;return i}isFIndIndex(t,e){var i=-1;(!t||!e||e.length<=0)&&(i=-1);for(let n=0;n<e.length;n++)e[n]==t&&(i=n);return i}removeValidListByValue(t){if(!(!t||!this.validEnemyList||this.validEnemyList.length<=0)){var e=this.isFIndIndex(t,this.validEnemyList);e!=-1&&this.validEnemyList.splice(e,1)}}createWallMap(){Laya.loader.load("resources/tiledMap/map1_32.json").then(()=>{let e=Laya.loader.getRes("resources/tiledMap/map1_32.json").data.layers[2],i=e.data,n=e.width,r=e.height,s;s=new Array,this.gridXNum=n,this.gridYNum=r;for(var o=0;o<this.gridYNum;o++){s[o]=new Array;for(var l=0;l<this.gridXNum;l++)i[o*this.gridXNum+l]==0?s[o][l]=1:s[o][l]=0}this.graph=new window.Graph(s),this.opts=[],this.opts.closest=!0,this.opts.heuristic=window.astar.heuristics.diagonal})}getEveryPath(t,e){var i,n=this.graph.grid[Math.ceil(t.y/32)-1][Math.ceil(t.x/32)-1],r=this.graph.grid[Math.ceil(e.y/32)-1][Math.ceil(e.x/32)-1];n.weight==0&&(console.log(n,"不能通过"),n=this.getNeighborCanGo(n)),r.weight==0&&(console.log(r,"不能通过"),r=this.getNeighborCanGo(r));var s=new Date().getTime();i=window.astar.search(this.graph,n,r,{closest:this.opts.closest});var o=new Date().getTime();return this.tIndex++,i}getNodeAt(t,e){var i=this.graph.grid[Math.ceil(e/32)-1][Math.ceil(t/32)-1];return i}isInBounds(t,e){return t>=0&&t<this.gridYNum&&e>=0&&e<this.gridXNum}isWalkableAt(t,e){return this.isInBounds(t,e)?this.graph.grid[t][e].weight==1:!1}getNeighborCanGo(t,e=1){let i=t.x,n=t.y,r=[{dx:0,dy:-e},{dx:e,dy:0},{dx:0,dy:e},{dx:-e,dy:0}],s=[{dx:-e,dy:-e},{dx:e,dy:-e},{dx:e,dy:e},{dx:-e,dy:e}];for(let o of r){let l=i+o.dx,c=n+o.dy;if(this.isWalkableAt(l,c))return this.graph.grid[l][c]}for(let o of s){let l=i+o.dx,c=n+o.dy;if(this.isWalkableAt(l,c))return this.graph.grid[l][c]}return this.getNeighborCanGo(t,++e)}getNeighbors(t){let e=[],i=t.x,n=t.y,r=[{dx:0,dy:-10},{dx:10,dy:0},{dx:0,dy:10},{dx:-10,dy:0}],s=[{dx:-10,dy:-10},{dx:10,dy:-10},{dx:10,dy:10},{dx:-10,dy:10}];return r.forEach(o=>{let l=i+o.dx,c=n+o.dy;this.isWalkableAt(l,c)&&e.push(this.graph.grid[l][c])}),s.forEach(o=>{let l=i+o.dx,c=n+o.dy;this.isWalkableAt(l,c)&&e.push(this.graph.grid[l][c])}),e}getRunways(t){let e=[],i=t.x,n=t.y,r=[{dx:0,dy:-2},{dx:2,dy:0},{dx:0,dy:2},{dx:-2,dy:0}],s=[{dx:-2,dy:-2},{dx:2,dy:-2},{dx:2,dy:2},{dx:-2,dy:2}];return r.forEach(o=>{let l=i+o.dx,c=n+o.dy;this.isWalkableAt(l,c)&&e.push(this.graph.grid[l][c])}),s.forEach(o=>{let l=i+o.dx,c=n+o.dy;this.isWalkableAt(l,c)&&e.push(this.graph.grid[l][c])}),e}initMatch(t,e){this.createWallMap(),Laya.loader.load("scenes/match/MatchHeroSpr.lh").then(i=>{this.roleAniPrefab=i,this.createPlayers(t),e&&e(t)})}updateMatch(t,e){this.updatePlayers(),e&&e(t)}createPlayers(t){this.matchHeroDic=new le,this.matchHeroSprDic=new le,this.matchHeroSmallDic=new le,this.matchHeroSprs=[],this.allOrders||(this.allOrders=[]);let e=B.instance.matchDto.members.length;for(var i,n=B.instance.matchWatcher,r=0;r<e;r++){var s=B.instance.matchDto.members[r];b.instance.playerDto.pid==s.id&&(this.myPlayer=s)}for(var o=0;o<e;o++){var s=B.instance.matchDto.members[o],l=new Laya.Image;l.anchorX=0,l.anchorY=0,s.no?this.myPlayer&&this.myPlayer.no==s.no?l.skin="res/match1/img_point_2.png":l.skin="res/match1/img_point_1.png":b.instance.playerDto.pid==s.id?l.skin="res/match1/img_point_2.png":l.skin="res/match1/img_point_1.png",t.img_smallMap.addChild(l),this.matchHeroSmallDic.set(s.id,l);let u=this.roleAniPrefab.create();try{u.smallHeroImg=l,u.dataSource=s,n?s.leader==1&&(this.setOtherHero(u),i=!0):b.instance.playerDto.pid==s.id&&this.setCurrentHero(u),this.matchHeroDic.set(s.id,s),this.box_players.addChild(u),this.matchHeroSprs.push(u),this.allOrders.push(u),this.matchHeroSprDic.set(s.id,u)}catch(p){console.warn(p)}}!i&&n&&this.setOtherHero(this.matchHeroSprs[0])}drawPath(t){if(this.box_players.graphics.clear(),t.length>1){this.box_players.graphics.drawLine(this.transformPos(t[0].y),this.transformPos(t[0].x),this.transformPos(t[1].y),this.transformPos(t[1].x),"#FF0000");for(let e=0;e<t.length;e++)this.box_players.graphics.drawCircle(this.transformPos(t[e].y),this.transformPos(t[e].x),5,"#00FF00"),e<t.length-1&&this.box_players.graphics.drawLine(this.transformPos(t[e].y),this.transformPos(t[e].x),this.transformPos(t[e+1].y),this.transformPos(t[e+1].x),"#FF0000")}}transformPos(t){return t*32+16}updatePlayers(){this.matchHeroSprs=[];let t=B.instance.matchDto.members.length;for(var e=0;e<t;e++){var i=B.instance.matchDto.members[e];let r=this.matchHeroSprDic.get(i.id);if(r){r.dataSource=i;var n=B.instance.matchWatcher;n||b.instance.playerDto.pid==i.id&&(this.myPlayer=i,this.setCurrentHero(r)),this.matchHeroDic.set(i.id,i),this.matchHeroSprs.push(r)}}}addPlayer(t){if(t.type==1){if(this.matchHeroSprs){if(b.instance.playerDto.pid==t.member.id){console.log("自己不处理 :"+t.member.id);return}let e=this.getRoleById(t.member.id);if(e)e.dataSource=t.member,e.alpha=1;else{let i=this.roleAniPrefab.create();i.dataSource=t.member,this.box_players.addChild(i),this.matchHeroSprs.push(i)}}}else this.removeRoleById(t.member.id)}onSendMove(t,e,i,n,r,s,o){if(b.instance.playerDto.pid==e){let l=new Dh;l.time=t,l.speed=i,l.dire=n,l.x=r,l.y=s,l.area=o,ot.instance.sendData(l)}}onNpcSendMove(t,e,i,n,r,s,o){let l=new Qh;l.monsterId=e,l.time=t,l.speed=i,l.dire=n,l.x=r,l.y=s,l.area=o,ot.instance.sendData(l)}onSendTargetMove(t,e,i,n,r,s=0){if(b.instance.playerDto.pid==e){let o=new Vh;o.time=t,o.targetId=i,o.targetX=n,o.targetY=r,o.skillId=s,o.sourceId=e,ot.instance.sendData(o)}}onSendUse(t,e){if(t){let i=new jh;i.pos=e,ot.instance.sendData(i)}else{let i=new qh;i.pos=e,ot.instance.sendData(i)}}onRevCardResponse(t){console.log("onRevCardResponse");var e=t.skillId,i=t.pos;if(e){g.intance.event(f.EVENT_UPDATE_ITEM_SKILL_COOL,[[e,t.remainCount]]);var n=_.intance.m_dicSkills.get(e);(n.type==6||n.type==7)&&Bt.instance.myHeroSpr.attack(i,n.id)}}onRevUsePush(t){console.log("onRevUsePush");var e=t.buffList;e&&e.forEach(n=>{var r=_.intance.m_dicBuffs.get(n.buffId);if(r.triggerTiming==1){var s=Bt.instance.getRoleById(n.pid);r.cycle!=1&&s.parseBuffDto(n,!0)}});var i=t.buffEffects;console.log("onRevAttackPush buffEffects: ",i),i&&i.forEach(n=>{var r=n.buffId,s=_.intance.m_dicBuffs.get(r),o=Bt.instance.getRoleById(n.targetPid);o.parseBuffEffect(n)})}onSendAnimation(t,e,i,n=-1,r=-1,s=-1){if(b.instance.playerDto.pid==t){let o=new Nl;o.skillId=e,o.type=i,o.targetId=n,o.param.set("newX",`${r}`),o.param.set("newY",`${s}`),ot.instance.sendData(o)}else{let o=new Nl;o.monsterId=t,o.skillId=e,o.type=i,o.targetId=n,o.param.set("newX",`${r}`),o.param.set("newY",`${s}`),ot.instance.sendData(o)}}onRevAnimationPush(t){var e=Bt.instance.getRoleById(t.attId);t.attId!=b.instance.playerDto.pid&&(t.defId&&t.param.set("defId",t.defId),e.attack(0,t.skillId,!1,t.param))}onSendAttack(t,e,i,n){if(b.instance.playerDto.pid==t){let r=new Mh;r.targetId=e,r.attackType=i,r.skillId=n,ot.instance.sendData(r)}else{let r=new Jh;r.monsterId=t,r.targetId=e,r.attackType=i,r.skillId=n,ot.instance.sendData(r)}}onSendAttackBig(t,e){let i=new zh;i.pos=t,i.targetList=e,ot.instance.sendData(i)}onRevMovePush(t,e){if(!(t==null||t.pid==b.instance.playerDto.pid)){var i=Bt.instance.getRoleById(t.pid);i?i.onPushMoveData(t,e):console.log(t.pid+" sprite is null")}}onRevTargetMovePush(t){if(t.sourceId!=b.instance.playerDto.pid){var e=Bt.instance.getRoleById(t.targetId);e?e.onPushTargetMoveData(t.time,t.targetX,t.targetY):console.log(t.targetId+" sprite is null")}}onRevAttackPush(t){var e=Bt.instance.getRoleById(t.attPid);if(t.attPid!=b.instance.playerDto.pid){var i=_.intance.m_dicSkills.get(t.skill);i.type!=5&&e.attack(0,t.skill,!1)}var n=Bt.instance.getRoleById(t.defPid);n.takeDamage(t,e);var r=t.buffEffects;console.log("onRevAttackPush buffEffects: ",r),r&&r.forEach(l=>{var c=Bt.instance.getRoleById(l.targetPid);c.parseBuffEffect(l)});var s=this.matchHeroDic.get(t.attPid),o=this.matchHeroDic.get(t.defPid);if(s.score=t.attScore,o.score=t.defScore,t.defHp<=0){var s=this.matchHeroDic.get(t.attPid);s.kill++}g.intance.event(f.UPDATE_KILL_NUM)}sendRestoreData(){if(B.instance.reward==null){let t=new Ph;t.roomId=B.instance.matchDto.roomId,ot.instance.sendData(t)}}onRevRestorePush(t){B.instance.matchDto=t,g.intance.event(f.EVENT_RESTORE_DATA),t&&t.startTime-t.nowTime<=0&&A.intance.disposeView(y.MatchReadyView)}onRevReLifePush(t){var e=t.monsterId;if(console.log("复活："+e),e){var i=this.matchHeroDic.get(e);i.hp=t.hp,i.maxHp=t.maxHp,i.x=t.x,i.y=t.y;let n=this.getRoleById(e);n&&(n.dataSource=i)}}getRoleById(t){let e;return this.matchHeroSprs&&this.matchHeroSprs.forEach(i=>{if(i.roomPlayerDto.id==t){e=i;return}}),e}removeRoleById(t){var e;this.matchHeroSprs&&this.matchHeroSprs.forEach(i=>{if(i.roomPlayerDto.id==t){e=i,i.speed=0,i.alpha=.3;return}})}getValidList(){return this.validEnemyList}playMusic(){ze.instance.playMusicByURL("mp3/battle.mp3"),ct.instance.needPop=!1}playSound(t){var e="";t==1?e="resources/music/pugong":t==2?e="resources/music/enemyHit":t==3&&(e="resources/music/dazhao"),ze.instance.playSound(e+".wav",1)}setCurrentHero(t){var e=B.instance.matchWatcher;if(!e){t.isMe=!0;var i=this.myHeroSpr==null;this.myHeroSpr=t,this.moveType=K.CAMERA_FOLLOW_ME,Bt.instance.moveGameWindow(!0),this.myHeroSpr.initBirth(i)}}setOtherHero(t){if(this.otherHeroSpr&&this.otherHeroSpr==t){this.setCameraIdle();return}this.removeOtherHero(),t.setFollowIcon(!0),this.otherHeroSpr=t,this.moveType=K.CAMERA_FOLLOW_OTHER,Bt.instance.moveGameWindow(!0)}setCameraIdle(){this.removeOtherHero(),this.moveType=K.CAMERA_IDLE,Bt.instance.moveGameWindow(!0)}removeOtherHero(){this.otherHeroSpr&&this.otherHeroSpr.setFollowIcon(!1),this.otherHeroSpr=null}getAttackTarget(t,e){console.log("getAttackTarget");var i=e.distance,n=e.targetsType;if(n==1){let o=new Laya.Point(t.x,t.y),l=bt.getUnitVector(t.roleDirection);var r=[];return this.matchHeroSprs&&this.matchHeroSprs.forEach(c=>{if(!c._isDead&&!this.isOneTeam(t,c)&&t.roomPlayerDto.id!=c.roomPlayerDto.id){var u=this.getEnemyDistance(t,c);if(u<=i){let p=new Laya.Point(c.x,c.y),d=bt.subtract(p,o);d.x*l.x+d.y*l.y>0&&r.push(c)}}}),r}else if(n==2){let o,l=1e4;if(this.matchHeroSprs&&this.matchHeroSprs.forEach(c=>{if(!c._isDead&&!this.isOneTeam(t,c)&&t.roomPlayerDto.id!=c.roomPlayerDto.id){var u=this.getEnemyDistance(t,c);u<=i&&u<l&&this.canAttack(t,c)&&(o=c,l=u)}}),o)return[o]}else if(n==3){let o=[];this.matchHeroSprs&&this.matchHeroSprs.forEach(u=>{if(!u._isDead&&!this.isOneTeam(t,u)&&t.roomPlayerDto.id!=u.roomPlayerDto.id){var p=this.getEnemyDistance(t,u);p<=i&&o.push(u)}});let l=[];var s=e.targetsNum;let c=this.shuffleArray(o);for(let u=0;u<Math.min(s,c.length);u++)l.push(c[u]);return l}return[]}shuffleArray(t){for(let e=t.length-1;e>0;e--){let i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}return t}isOneTeam(t,e){return t.roomPlayerDto&&t.roomPlayerDto.no?t.roomPlayerDto.no==e.roomPlayerDto.no:t.roomPlayerDto.id==e.roomPlayerDto.id}getEnemyDistance(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}canAttack(t,e){let i=new Laya.Vector2;i.x=e.x-t.x,i.y=e.y-t.y;let n=bt.getUnitVector(t.roleDirection),r=Math.atan2(i.y,i.x)-Math.atan2(n.y,n.x);r<0&&(r+=2*Math.PI),r=r*180/Math.PI;let s=90;return t.roomPlayerDto.npc&&(s=120),r<s||r>360-s}canTui(t,e){let i=new Laya.Vector2;i.x=e.x-t.x,i.y=e.y-t.y;let n=bt.getUnitVector(t.roleDirection),r=Math.atan2(i.y,i.x)-Math.atan2(n.y,n.x);r<0&&(r+=2*Math.PI),r=r*180/Math.PI;let s=45;return r<s||r>360-s}setMyHeroDirection(t){var e=B.instance.matchWatcher;if(e){if(!this.moveP){console.log("setMyHeroDirection: "+this.moveP);return}this.moveType!=K.CAMERA_DIRECT_OPERATE&&(this.removeOtherHero(),this.moveType=K.CAMERA_DIRECT_OPERATE,this.setMapPos()),this.mapDir=t}else{if(!this.myHeroSpr)return;t!=-4?(this.myHeroSpr.myRoleDirection=t,this.myHeroSpr.speed=this.myHeroSpr.moveSpeed*this.myHeroSpr.speedRate,this.myHeroSpr.inControl=!0,this.isControl=!0):(this.myHeroSpr.speed=0,this.myHeroSpr.inControl=!1,this.isControl=!1)}}updateMyRoleSpeed(){this.myHeroSpr&&this.myHeroSpr.inControl&&(this.myHeroSpr.speed=this.myHeroSpr.moveSpeed*this.myHeroSpr.speedRate)}fromBigToSmall(t,e){var i=B.instance.currArenaItem.mapid;i==1002&&(t-=160,e-=160);var n=t*216/3040,r=e*216/3040;return[n,r]}fromSmallToBig(t,e){var i=B.instance.currArenaItem.mapid,n=t/(216/3040),r=e/(216/3040);return i==1002&&(n+=160,r+=160),[n,r]}clickSmallMapToMove(t){this.removeOtherHero();var e=Bt.instance.fromSmallToBig(t.x,t.y);this.moveP.setTo(e[0],e[1]),this.moveType=K.CAMERA_MAP_CLICK,this.moveGameWindow(!0)}moveGameWindow(t=!1){if(this.moveType!=K.CAMERA_IDLE){if(this.moveType==K.CAMERA_FOLLOW_ME){if(!this.myHeroSpr)return;this.moveP.setTo(this.myHeroSpr.x,this.myHeroSpr.y)}else if(this.moveType==K.CAMERA_FOLLOW_OTHER){if(!this.otherHeroSpr)return;this.otherHeroSpr._isDead?this.setCameraIdle():this.moveP.setTo(this.otherHeroSpr.x,this.otherHeroSpr.y)}else if(this.moveType==K.CAMERA_MAP_CLICK){if(!this.moveP)return}else if(this.moveType==K.CAMERA_DIRECT_OPERATE){if(!this.moveP)return;if(this.mapDir!=-4){let c=1*9.799999999999999,u=this.mapDir*(Math.PI/180),p=c*Math.cos(u),d=c*Math.sin(u);var e=Math.round(this.moveP.x+p),i=Math.round(this.moveP.y+d);this.gameWindowX=e-Laya.stage.width/2,this.gameWindowY=i-Laya.stage.height/2;var n=-this.gameWindowX,r=-this.gameWindowY,s=Laya.stage.width-this.gameMap.width,o=Laya.stage.height-this.gameMap.height;console.log("moveGameWindow: gameMap ",this.moveType,t,n,r,Laya.stage.width,Laya.stage.height,this.gameMap.x,this.gameMap.y),n>0?e=this.moveP.x:n<s&&(e=this.moveP.x),r>0?i=this.moveP.y:r<o&&(i=this.moveP.y),this.moveP.setTo(e,i),t=!0}else return}if(this.moveP){this.gameWindowX=this.moveP.x-Laya.stage.width/2,this.gameWindowY=this.moveP.y-Laya.stage.height/2;var n=-this.gameWindowX,r=-this.gameWindowY,s=Laya.stage.width-this.gameMap.width,o=Laya.stage.height-this.gameMap.height;n>0?n=0:n<s?n=s:n=n,r>0?r=0:r<o?r=o:r=r,t?(Laya.Tween.clearAll(this.gameMap),this.gameMap.pos(n,r,!0)):Laya.Tween.to(this.gameMap,{x:n,y:r},500)}}}setMapPos(){var t=Laya.stage.width/2-this.gameMap.x,e=Laya.stage.height/2-this.gameMap.y;this.moveP.setTo(t,e)}};Bt._instance=null;var k=Bt;var It=class It{constructor(){this.resArr=["gameIcon/map/1001/img_map.jpg","gameIcon/map/1002/img_map.jpg",{url:"gameIcon/map/map_1001.lh",type:Laya.Loader.HIERARCHY},{url:"gameIcon/map/map_1002.lh",type:Laya.Loader.HIERARCHY},"res/common/comm_bg/img_com_bg.jpg","res/common/comm/img_bg_large.png","res/common/comm/img_bg_medium.png","res/common/comm/img_bg_small.png","res/igoPage/img_com_anniu3.png","res/igoPage/img_com_anniu4.png",{url:"res/common.atlas",type:Laya.Loader.ATLAS},{url:"gameIcon/effect/match/beiji/spine.sk"},{url:"gameIcon/effect/match/dunpai/spine.sk"},{url:"gameIcon/effect/ruchang/effect1.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/ruchang/effect2.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/ruchang/effect3.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/hua/effect.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/diquan/img_3.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/diquan/img_4.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/diquan/img_5.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/diquan/img_6.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/zhuangbei/img_equip_1.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/zhuangbei/img_equip_2.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/zhuangbei/img_equip_3.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/zhuangbei/img_equip_4.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/tx/img_wudi.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/baoqi/img_4.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/baoqi/img_5.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/baoqi/img_6.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/tx/img_gongji_1009.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/tx/img_gongji_1010.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/tx/img_gongji_1011.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/tx/img_gongji_1012.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/tx/img_gongji_1013.skel",type:Laya.Loader.SPINE},{url:"gameIcon/effect/match/tx/img_gongji_1014.skel",type:Laya.Loader.SPINE},{url:"scenes/mainView/MainScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/shop/ShopScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/hero/MyHeroScene.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/match/Match.ls",type:Laya.Loader.HIERARCHY},{url:"scenes/hero/AniSk.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchHeroSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/DamageNumber.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/RocketSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/mainView/EnterRoomSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtLoadingView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/notice/TxtNoticeView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/mainView/BarrageSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/mainView/SpecialBarrageSpr.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/mainView/CreateRoomDialog.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/mainView/EnterRoomView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchEndRankView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchEndTeamRankView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchReadyView.lh",type:Laya.Loader.HIERARCHY},{url:"scenes/match/MatchEndView.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/closeBtn.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/defaultButton.lh",type:Laya.Loader.HIERARCHY},{url:"prefab/DropBox.lh",type:Laya.Loader.HIERARCHY},{url:"resources/sound/destroy.wav",type:Laya.Loader.BUFFER},{url:"resources/sound/hit.wav",type:Laya.Loader.BUFFER}];this.m_arrPreResource=["config/spot.json","config/scene.json"];this.m_arrInitResource=["resources/tiledMap/map1_32.json","config/general.json","config/head.json","config/iconBadge.json","config/country.json","config/expression.json","config/fontColor.json","config/variable.json","config/equip.json","config/shop.json","config/likeIt.json","config/union.json","config/hero.json","config/monster.json","config/pveLuckyDraw.json","config/skill.json","config/buff.json","config/effect.json","config/item.json","config/arena.json","config/arenaType.json","config/characterStar.json","config/node.json","config/groupWar.json","config/teamName.json","config/heroRent.json","config/map.json","config/level.json","config/welfarebag.json","config/mailmessage.json","config/currencyAddress.json","config/aCoin.json","config/coinAddress.json","config/buyHeroes.json","config/puzzleExchange.json","config/DropCashAddress.json","config/otcTelegram.json","config/attributes.json","config/equipSuit.json","config/turntable.json","config/wheel.json","config/heroStar.json","config/wheel1.json","config/wheelPC.json"];this.m_objModuleReource={FindScene:["res/atlas/find.atlas"],MainScene:[],ShopScene:[],RankScene:[],GetMatScene:[],OpenGameScene:[],ScholarshipScene:[],FriendScene:[],CommentDialog:["res/atlas/comment.atlas"],GuideView:["res/atlas/guide.atlas","res/atlas/ShopView.atlas","config/newplayer.json"],ShareView:["res/atlas/share.atlas"],SelectHeadDialog:[],UnionApplyDialog:["config/alliance_constant.json","config/guild_building_main.json","config/alliance_pos.json","config/guild_level.json"],GuildScene:["res/atlas/union.atlas","config/alliance_constant.json","config/guild_building_main.json","config/alliance_pos.json","config/guild_level.json","config/guild_apply.json","config/guild_contrubute.json"],UnionWarScene:["res/atlas/unionWar.atlas","config/resource_node.json"],HeroScene:["res/atlas/hero.atlas","config/hero_lv.json","config/hero_attup.json","res/atlas/equip.atlas"],AFKBattleScene:["res/atlas/battle.atlas"],ArenaScene:["res/atlas/Arena.atlas"],MailScene:[],KnapsackScene:["res/atlas/mainUI1.atlas"],UnionScene:["res/union1.atlas"],IgoPageScene:[],PveScene:[]};this.m_objModuleViews={NoServerView:"scenes/createRole/NoServer.lh",CreateLoginView:"scenes/createRole/CreateLoginView.lh",ChangeHeadDialog:"scenes/createRole/ChangeHeadDialog.lh",HeroGetDialog:"scenes/shop/HeroGetDialog.lh",BuyTicketDialog:"scenes/shop/BuyTicketDialog.lh",ItemGetDialog:"scenes/item/ItemGetDialog.lh",EquipStarUpDialog:"scenes/item/EquipStarUpDialog.lh",RewardGetDialog:"scenes/item/RewardGetDialog.lh",KnapsackTipDialog:"scenes/item/KnapsackTipDialog.lh",SelectHeadDialog:"scenes/createRole/SelectHeadDialog.lh",TxtNoticeView:"scenes/notice/TxtNoticeView.lh",NoticeDialog:"scenes/notice/NoticeDialog.lh",HelpDialog:"scenes/notice/HelpDialog.lh",ImgDialog:"scenes/notice/ImgDialog.lh",ChampDetailDialog:"scenes/asset/ChampDetailDialog.lh",ChampRecordDialog:"scenes/asset/ChampRecordDialog.lh",RoleInfoDialog:"scenes/createRole/RoleInfoDialog.lh",RemGetDialog:"scenes/createRole/RemGetDialog.lh",CreateRoomDialog:"scenes/mainView/CreateRoomDialog.lh",CreateRentalDialog:"scenes/shop/CreateRentalDialog.lh",MyLeasedDialog:"scenes/shop/MyLeasedDialog.lh",MyRentedDialog:"scenes/shop/MyRentedDialog.lh",MyRentalBuyDialog:"scenes/shop/MyRentalBuyDialog.lh",EnterRoomView:"scenes/mainView/EnterRoomView.lh",InputPwdDialog:"scenes/mainView/InputPwdDialog.lh",RoomInfoDialog:"scenes/mainView/RoomInfoDialog.lh",HeroDetailDialog:"scenes/hero/HeroDetailDialog.lh",MatchEndRankView:"scenes/match/MatchEndRankView.lh",MatchEndTeamRankView:"scenes/match/MatchEndTeamRankView.lh",MyBookingView:"scenes/airdrop/MyBookingView.lh",UnionMemberView:"scenes/union/UnionMemberView.lh",UnionListView:"scenes/union/UnionListView.lh",CreateSubUnionView:"scenes/union/CreateSubUnionView.lh",ChangeUnionIconDialog:"scenes/union/ChangeUnionIconDialog.lh",MySubUnionView:"scenes/union/MySubUnionView.lh",UnionMemberApplyView:"scenes/union/UnionMemberApplyView.lh",UnionReferralView:"scenes/union/UnionReferralView.lh",UnionTransferView:"scenes/union/UnionTransferView.lh",TicketTransferView:"scenes/union/TicketTransferView.lh",HeroTransferView:"scenes/hero/HeroTransferView.lh",BanAccountView:"scenes/match/BanAccountView.lh",MatchReadyView:"scenes/match/MatchReadyView.lh",MatchEndView:"scenes/match/MatchEndView.lh",GameSettingLanguageDialog:"scenes/gameSetting/GameSettingLanguageDialog.lh",SkillTipDialog:"scenes/hero/SkillTipDialog.lh",TransferRecordDialog:"scenes/hero/TransferRecordDialog.lh",TeamCreateShareDialog:"scenes/airdrop/TeamCreateShareDialog.lh",TeamShareDialog:"scenes/airdrop/TeamShareDialog.lh",TeamJoinUsingDialog:"scenes/airdrop/TeamJoinUsingDialog.lh",TeamInfoDialog:"scenes/airdrop/TeamInfoDialog.lh",MyTeamDialog:"scenes/airdrop/MyTeamDialog.lh",MyFriendDialog:"scenes/airdrop/MyFriendDialog.lh",BaseAlertDialog:"scenes/baseAlert/BaseAlertDialog.lh",MatchConfimDialog:"scenes/baseAlert/MatchConfimDialog.lh",InviteConfimDialog:"scenes/airdrop/InviteConfimDialog.lh",ApplyConfimDialog:"scenes/airdrop/ApplyConfimDialog.lh",CreateSubWalletDialog:"scenes/scholarship/CreateSubWalletDialog.lh",WalletChooseHeroDialog:"scenes/scholarship/WalletChooseHeroDialog.lh",WalletChoosePropsDialog:"scenes/scholarship/WalletChoosePropsDialog.lh",EmployInfoDialog:"scenes/scholarship/EmployInfoDialog.lh",HireDetailDialog:"scenes/asset/HireDetailDialog.lh",ProxyDetailDialog:"scenes/asset/ProxyDetailDialog.lh",WithDrawRecordDialog:"scenes/asset/WithDrawRecordDialog.lh",CardPayView:"scenes/asset/CardPayView.lh",RentalRecordDialog:"scenes/scholarship/RentalRecordDialog.lh",PrivateChatDialog:"scenes/friend/PrivateChatDialog.lh",AirdropRecordDialog:"scenes/asset/AirdropRecordDialog.lh",ActivityInfoDialog:"scenes/createRole/ActivityInfoDialog.lh",CharacterStarDialog:"scenes/createRole/CharacterStarDialog.lh",LastDrawDialog:"scenes/lcPool/LastDrawDialog.lh",IgoPageScene:"scenes/igoPage/IgoPageScene.lh",IgoJoinDialog:"scenes/igoPage/IgoJoinDialog.lh",IgoRecordDialog:"scenes/igoPage/IgoRecordDialog.lh",DailyTaskPropsDialog:"scenes/dailyTasks/DailyTaskPropsDialog.lh",DailyTaskNoPropsDialog:"scenes/dailyTasks/DailyTaskNoPropsDialog.lh",PveScene:"scenes/pve/PveScene.lh",PveRecordView:"scenes/pve/PveRecordView.lh",PveSponsorView:"scenes/pve/PveSponsorView.lh",PveChoosePropsDialog:"scenes/pve/PveChoosePropsDialog.lh",ReferralDialog:"scenes/createRole/ReferralDialog.lh",ReferralL2Dialog:"scenes/createRole/ReferralL2Dialog.lh",TotalBattlesDialog:"scenes/createRole/TotalBattlesDialog.lh"};this.m_objConfigReource={};this.m_commonResource=new le;this.loadingView=Laya.Browser.window.loadingView;this.ii=100;this.baseUrl="https://cdn.phantomarena.ai/hero/";if(It._instance)throw new Error("LayerManager是单例,不可new.");It._instance=this}static get instance(){return It._instance==null&&(It._instance=new It),It._instance}init(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),this.initGameLanguage()}initGameLanguage(){It.GameLanguage_URL="config/language.json",Laya.loader.load(It.GameLanguage_URL,Laya.Handler.create(this,this.initGameResource))}initGameResource(t){if(t==null)return;let e=It.instance.getResBySetURL(It.GameLanguage_URL);m.instance.initLanTypes(e.data),Laya.loader.clearRes(It.GameLanguage_URL),this.onConfigLoaded()}onError(t){}onConfigLoaded(){let t=new Fa;t.ID=4,t.Event="加载语言包信息",Ne.instance.sendCustumEvent(4,null,t),z.ignoreLang||(b.instance.m_strLanguage=m.instance.getLanIdByType(z.User_Lan)),this.m_UILang="config/lang_english"+b.instance.m_strLanguage+".json",this.m_NomalLang="config/english"+b.instance.m_strLanguage+".json",this.m_NomalLang1="config/english1.json",this.m_ErrorLang="config/error"+b.instance.m_strLanguage+".json",this.m_arrPreResource.push(this.m_UILang),this.m_arrPreResource.push(this.m_NomalLang),this.m_arrPreResource.push(this.m_NomalLang1),this.m_arrPreResource.push(this.m_ErrorLang),this.initResourceURL(this.m_arrPreResource,!0),this.initResourceURL(this.m_arrInitResource,!0),this.addFont1()}addFont1(){Laya.loader.load("res/font/CookieRun Regular.otf",Laya.Loader.TTF).then(()=>{this.loadDemoResource()})}loadDemoResource(){Laya.loader.load(this.resArr,null,Laya.Handler.create(this,this.onPreAssetPress1,null,!1)).then(()=>{_e.instance.init(),k.instance.damageNumPrefab=Laya.loader.getRes("scenes/match/DamageNumber.lh"),k.instance.rocketSprPrefab=Laya.loader.getRes("scenes/match/RocketSpr.lh"),k.instance.aniSkPrefab=Laya.loader.getRes("scenes/hero/AniSk.lh"),De.instance.enterRoomPrefab=Laya.loader.getRes("scenes/mainView/EnterRoomSpr.lh"),De.instance.barrageSprPrefab=Laya.loader.getRes("scenes/mainView/BarrageSpr.lh"),De.instance.specialBarrageSprPrefab=Laya.loader.getRes("scenes/mainView/SpecialBarrageSpr.lh"),k.instance.roleAniPrefab=Laya.loader.getRes("scenes/match/MatchHeroSpr.lh"),k.instance.ruchangEffects=[Laya.loader.getRes("gameIcon/effect/ruchang/effect1.skel"),Laya.loader.getRes("gameIcon/effect/ruchang/effect2.skel"),Laya.loader.getRes("gameIcon/effect/ruchang/effect3.skel")],k.instance.huaEffect=Laya.loader.getRes("gameIcon/effect/hua/effect.skel"),k.instance.beijiTemplet=Laya.loader.getRes("gameIcon/effect/match/beiji/spine.sk"),k.instance.dunpaiTemplet=Laya.loader.getRes("gameIcon/effect/match/dunpai/spine.sk"),k.instance.diquanEffect3=Laya.loader.getRes("gameIcon/effect/diquan/img_3.skel"),k.instance.diquanEffect4=Laya.loader.getRes("gameIcon/effect/diquan/img_4.skel"),k.instance.diquanEffect5=Laya.loader.getRes("gameIcon/effect/diquan/img_5.skel"),k.instance.diquanEffect6=Laya.loader.getRes("gameIcon/effect/diquan/img_6.skel"),k.instance.equipPos1=Laya.loader.getRes("gameIcon/effect/match/zhuangbei/img_equip_1.skel"),k.instance.equipPos2=Laya.loader.getRes("gameIcon/effect/match/zhuangbei/img_equip_2.skel"),k.instance.equipPos3=Laya.loader.getRes("gameIcon/effect/match/zhuangbei/img_equip_3.skel"),k.instance.equipPos4=Laya.loader.getRes("gameIcon/effect/match/zhuangbei/img_equip_4.skel"),k.instance.img_wudi=Laya.loader.getRes("gameIcon/effect/match/tx/img_wudi.skel"),k.instance.baoqiEffect4=Laya.loader.getRes("gameIcon/effect/baoqi/img_4.skel"),k.instance.baoqiEffect5=Laya.loader.getRes("gameIcon/effect/baoqi/img_5.skel"),k.instance.baoqiEffect6=Laya.loader.getRes("gameIcon/effect/baoqi/img_6.skel"),k.instance.img_gongji_1009=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1009.skel"),k.instance.img_gongji_1010=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1010.skel"),k.instance.img_gongji_1011=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1011.skel"),k.instance.img_gongji_1012=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1012.skel"),k.instance.img_gongji_1013=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1013.skel"),k.instance.img_gongji_1014=Laya.loader.getRes("gameIcon/effect/match/tx/img_gongji_1014.skel");var t=k.instance.roleAniPrefab.create();console.log(" ================ roleAniPrefab: "+t),this.onLoadThreeDimen()})}onLoadThreeDimen(){Laya.loader.load(this.m_arrPreResource,Laya.Handler.create(this,this.onPreAssetLoaded),Laya.Handler.create(this,this.onPreAssetPress2,null,!1))}onPreAssetPress1(t){this.va=(t*100*.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetPress2(t){this.va=(t*100*.5+.5).toFixed(0),this.loadingView&&this.va<100&&this.va>this.m_iPrecess&&this.loadingView.loading(this.va)}onPreAssetLoaded(t){if(!t)return;let e=Laya.Browser.now();Kr.instance.initSpotCfgData(),this.initResourceURL(this.m_objModuleReource),this.initResourceURL(this.m_objConfigReource),Ne.instance.sendCustumEvent(5),_.intance.preInit(),this.setGlobalLanguage(),Ne.instance.sendCustumEvent(6),g.intance.event(f.EVENT_BACK_TO_LOGIN),se.intance.initPreload(),this.loadingView&&this.loadingView.loading(100),console.log("-----------------------preload-time:"+(Laya.Browser.now()-e))}setGlobalLanguage(){let t=It.instance.getResByURL(this.m_NomalLang);m.instance.initConfigLan(t.data);let e=It.instance.getResByURL(this.m_NomalLang1);m.instance.initConfigLan1(e.data);let i=It.instance.getResByURL(this.m_UILang);m.instance.initUILan(i.data);let n=It.instance.getResByURL(this.m_ErrorLang);Le.instance.initErrData(n.data),this.clearResUrlByRoot(this.m_UILang,!0),this.clearResUrlByRoot(this.m_NomalLang,!0),this.clearResUrlByRoot(this.m_NomalLang1,!0),this.clearResUrlByRoot(this.m_ErrorLang,!0)}initResourceURL(t,e=!1){if(t instanceof Array)this.setResURLArr(t,e);else if(t instanceof Object)for(let i in t)this.setResURLArr(t[i],e)}setResURLArr(t,e){let i,n;for(let r=0;r<t.length;r++)e?(this.m_commonResource.set(t[r],!0),n=this.setResURL(t[r]),i=this.getTypeFromUrl(n),t[r]={url:n,type:i,size:1,priority:1}):this.m_commonResource.get(t[r])?(t.splice(r,1),r--):(n=this.setResURL(t[r]),i=this.getTypeFromUrl(n),t[r]={url:n,type:i,size:1,priority:1})}getTypeFromUrl(t){let{ext:e,typeId:i,main:n,loaderType:r}=Laya.Loader.getURLInfo(t);It._extReg.lastIndex=t.lastIndexOf(".");let s=It._extReg.exec(t);return s&&s.length>1?s[1].toLowerCase():"text"}setResURL(t){return t}clearResUrlByRoot(t,e=!1){let i=t;Laya.loader.clearRes(i)}hasFormatEffectUrl(t){return t.indexOf("effect/")>=0}setItemResURL(t){return t&&t.hasOwnProperty("item_img")?this.setResURL("icon/"+t.item_img+".png"):""}setThreeDimenUrl(t){return t?this.setResURL("threeDimen/"+t):""}getThreeDimenUrl(t){let e=this.setResURL("threeDimen/"+t);return Laya.Loader.getRes(e)}getResByURL(t){let e=It.instance.setResURL(t);return Laya.Loader.getRes(e)}getResBySetURL(t){return Laya.Loader.getRes(t)}loadModuleUrl(t,e=null,i=null,n=1,r=!0){console.log("loadModuleUrl m_strName: "+t),this.ii++;let s=It.instance.m_objModuleReource[t];if(s==null||s.length<1){e.run();return}Laya.loader.load(s,Laya.Handler.create(this,this.loadItemComplete,[e,s]),Laya.Handler.create(this,this.onLoadProgress,[t],!1),i,n,r,this.ii.toString())}loadItemComplete(t,e){this.usedUrlDic||(this.usedUrlDic=new le);for(let i in e){let n=e[i].url,r=this.usedUrlDic.get(n);r?this.usedUrlDic.set(n,++r):this.usedUrlDic.set(n,1)}t.run()}clearModuleUrl(t){console.log("clearModuleUrl m_strName: "+t);let e=It.instance.m_objModuleReource[t];for(let i in e){let n=e[i].url;if(this.usedUrlDic){let r=this.usedUrlDic.get(n);r-=1,r<1?(this.usedUrlDic.remove(n),Laya.loader.clearRes(n)):this.usedUrlDic.set(n,r)}}}onLoadProgress(t,e){}loadResource(t,e=null,i=null,n=null,r=1,s=!0){Laya.loader.load(t,e,i,n,r,s)}getNodeIcon(t){return this.setResURL("gameIcon/node/img_"+t+".png")}getCountryIcon(t){return this.setResURL("gameIcon/country/img_"+t+".png")}getTeamFlag(t){return this.setResURL("gameIcon/hero/teamFlag/img_"+t+".png")}getChestIcon(t){return this.setResURL("gameIcon/items/chest/img_"+t+".png")}getChestBigIcon(t){return this.setResURL("gameIcon/items/chestBig/img_"+t+".png")}getHeroEggIcon(t){return this.setResURL("gameIcon/hero/heroEgg/img_"+t+".png")}getHeroEggBigIcon(t){return this.setResURL("gameIcon/hero/heroEggBig/img_"+t+".png")}getHeroHeadIcon(t){return this.setResURL("gameIcon/hero/heroHead/img_"+t+".png")}getHeroQuality(t){return this.setResURL("gameIcon/hero/heroQuality/img_"+t+".png")}getHeroBackIcon(t){return this.setResURL("gameIcon/hero/heroDetail/img_hero_di_"+t+".png")}getHeroFrontIcon(t){return this.setResURL("gameIcon/hero/heroDetail/img_hero_"+t+".png")}getItemIcon(t){return this.setResURL("gameIcon/items/item/img_"+t+".png")}getItemBgIcon(t){return this.setResURL("gameIcon/items/itemBg/img_"+t+".png")}getItemBigIcon(t){return this.setResURL("gameIcon/items/itemBig/img_"+t+".png")}getItemBigBigIcon(t){return this.setResURL("gameIcon/items/itemBigBig/img_"+t+".jpg")}getItemQualityIcon(t){return this.setResURL("gameIcon/items/itemQuality/img_"+t+".png")}getMoneyIcon(t){return this.setResURL("gameIcon/items/money/img_"+t+".png")}getAttrIcon(t){return this.setResURL("gameIcon/attr/img_attr_"+t+".png")}getSkillIcon(t,e=!1){let i;return e?i=this.setResURL("gameIcon/skill/skills/img_big_"+t+".png"):i=this.setResURL("gameIcon/skill/skills/img_"+t+".png"),i}getMatchSkillIcon(t){return this.setResURL("gameIcon/skill/matchSkills/img_"+t+".png")}getPlayerIcon(t){return parseInt(t)>0?this.setResURL("gameIcon/head/headCircle/img_"+t+".png"):t}getUnionIcon(t){return parseInt(t)>0?this.setResURL("gameIcon/union/badge/img_trade_"+t+".png"):t}getUnionLvIcon(t){return this.setResURL("gameIcon/union/lvIcon/img_trade_"+(t>3?4:t)+".png")}getUnionLvDiIcon(t){return this.setResURL("gameIcon/union/lvIcon/img_trade_di_"+(t>3?4:t)+".png")}getEmoji(t,e){return this.setResURL("gameIcon/emoji/tab"+t+"/img_"+e+".png")}getFontColor(t){return this.setResURL("gameIcon/emoji/img_color_"+t+".png")}getSceneBgUrl(t){return"scene/"+t+".jpg"}clearSKinUrl(t){for(let e in t)t[e]instanceof String&&t[e].indexOf("skincolor")==-1&&Laya.loader.clearRes(t[e]);t=[]}getFunctionIcon(t){return this.setResURL("icon/functionIcon/"+t+".png")}getNewFunIcon(t){return this.setResURL("icon/newFunIcon/"+t+".png")}getSoundURL(t,e=".ogg"){let i;return i=this.setResURL("mp3/"+t+e),i}getSoundURLogg(t){let e;return e=this.setResURL("mp3/"+t),e}getSceneUrl(t){return"scene/sceneBg/"+t+".jpg"}getMianSysIcon(t){return this.setResURL("icon/mainSysIcon/btn_"+t+".png")}getEffectUrl(t){return this.setResURL("effect/"+t+".json")}getLoadingUrl(t){return this.setResURL("effect/"+t)}getGuangImg(t){return this.setResURL("swf/"+t+".png")}getGuildProofBg(t){return this.setResURL("scene/guild/proof/"+t+"/1.png")}getGuildProofHots(t){return this.setResURL("scene/guild/proof/"+t+"/"+t+"/"+t+".json")}getShareImgUrl(t,e=!1,i=!1){let n;return i?t:(t=t+".jpg",e?n="https://mutantbox.8686c.com/16/qa/common/share/"+t:n="https://cdn.test.com/16/qa/common/share/"+t,n)}getHeadUrl(t){return"common/common_icon/"+t+".png"}getMapImg(t){return"gameIcon/map/"+t+"/img_map.jpg"}getMapPrefab(t){return"gameIcon/map/map_"+t+".lh"}clearCache(){}getHeroHeadRes(t,e){return z.Res==0?"gameIcon/hero/heroHead/img_"+t+".png":this.baseUrl+`${t}/${e}.png`}getHeroSkRes(t,e){return z.Res==0?`gameIcon/hero/heroSk/${t}/img_hero.skel`:this.baseUrl+`${t}/${e}/img_hero.skel`}};It._extReg=/\.(\w+)\??/g;var D=It;var zn=class zn{constructor(){this._list=[];this._isNoticing=!1;this._isListener=!1}static get instance(){return zn._instance||(zn._instance=new zn),zn._instance}notice(t){this._isNoticing?this._isListener||(this._isListener=!0,this._list.push(t),Laya.timer.loop(zn.Tip_Interval,this,this.onInterVal)):(this._list.push(t),this.noticeOne())}noticeOne(){var t=D.instance.m_objModuleViews.TxtNoticeView;let e;Laya.loader.load(t).then(i=>{if(!i){console.log("noticeOne : "+t+"  res is null");return}e=Laya.Pool.getItemByCreateFun("txtNotice",i.create,i);let n=this._list.shift();e.notice(n),Laya.stage.addChild(e),e.x=C.instence.stageWidth*.5-e.width*.5,e.y=C.instence.stageHeight*.5-e.height*.5,Laya.Tween.to(e,{y:e.y-250,alpha:.5},1e3,null,Laya.Handler.create(this,this.onFinish,[e]),1e3)})}onFinish(t){t&&(t.visible=!1,t.removeSelf())}onInterVal(){this._list.length>=1?this.noticeOne():(this._isNoticing=!1,this._isListener=!1,Laya.timer.clear(this,this.onInterVal))}};zn.Tip_Interval=1e3;var T=zn;var Le=class a{constructor(){this._curErrTxt=""}static get instance(){return a._instance||(a._instance=new a),a._instance}initErrData(t){this.errData=t}get(t){return this.errData[t]?this.errData[t].words:(console.warn("服务端错误码语言包未配表 错误码："+t),t)}showErrorWord(t,...e){var i=this.getLanguage2(t,e);T.instance.notice(i)}getLanguage2(t,e){if(this.errData&&this.errData[t]){let i=this.errData[t].words;if(i&&i!="")return this._curErrTxt=m.instance.replacePlaceholder(i,e),this._curErrTxt}return this._curErrTxt=m.instance.replacePlaceholder(t+"",e),this._curErrTxt}showErrByString(t,e="#ff0000"){this._curErrTxt=t;let i=new Laya.Label(this._curErrTxt);i.width=500,i.align="center",i.height=40,i.fontSize=26,i.color=e,i.mouseEnabled=!1,i.strokeColor="#000000",i.stroke=.5,Laya.stage.addChild(i),i.x=(Laya.stage.width-i.width)/2,i.y=(Laya.stage.height-i.height)/2,Laya.Tween.to(i,{y:i.y-100,alpha:0},500,null,Laya.Handler.create(this,this.completeHandler,[i]),1e3)}completeHandler(t){t&&t.parent&&t.parent.removeChild(t)}dispose(){this.errData=null}};var ut=class{};ut.FUNID_MALL="1004",ut.FUN_ID_TAGGARDEN="2005",ut.FunID_WORK="1006",ut.FUN_ID_BARGAIN_SHOP="1007",ut.TRAVEL_HARD="1012",ut.TRAVEL_REWARD="3006",ut.FUNID_TUJIAN="2105",ut.FUN_ID_PARTY="7003",ut.FUN_ID_FB="9010",ut.FUN_ID_PET="9004",ut.FUN_ID_TURNTABLE="9001",ut.FUN_ID_GASHPOEN="9012",ut.FUN_ID_SHOPEXCHANGE="2104",ut.FUN_ID_TIME_STAGE="9014",ut.FUN_ID_DRAWCARD_PVP="1008613",ut.FUN_ID_PHONE="2004",ut.FUN_ID_DS="9017",ut.FUN_ID_BUY_PS="9030",ut.FUN_ID_DESTINY="3020",ut.FUN_ID_ACTIVITY_SHOP="9026",ut.FUN_ID_WORKSHOP_RECYCLE="3002",ut.FUN_ID_WORKSHOP_COLOR="3004",ut.FUN_ID_WORKSHOP_UPGRADE="3003",ut.FUN_ID_GUILD="1010",ut.FUN_ID_VIP="9022",ut.FUN_ID_MONTHCARD="9100";var sd=class{constructor(){this.bafflesInfo=[[330,740,9],[294,113.95,1],[712.95-80,343.45,3],[1251.35,125.95,7]];this.redHotStateMap=new le;this.openSystem=new le;this.m_dicSystemInfoCfg=new le,this._openTypeList=new le,this.parseJson()}hasRedState(t){let e=this.redHotStateMap.get(t+"");return e&&e.redState>0?e.redState:0}initSystemOpen(t){this.openSystem=new le;for(let e=0;e<t.length;e++)this.openSystem.set(t[e],!0),t[e]+""==ut.FUN_ID_PHONE.toString()}parseJson(){let t=D.instance.getResByURL("config/system_open.json"),e;for(let i in t)if(e=t[i],e){this.m_dicSystemInfoCfg.set(e.functionID,e);let n=this._openTypeList.get(e.open_type);n||(n=[],this._openTypeList.set(e.open_type,n)),n.push(e)}}getSystemsByType(t){let e=[];for(let i=0;i<this.m_dicSystemInfoCfg.values.length;i++){let n=this.m_dicSystemInfoCfg.values[i];n.positionID==t&&e.push(n)}return e}getLockFun(t,e){let i=this._openTypeList.get(t);for(let n of i)if(n.parameter1+""==e+"")return n;return null}getBuildSystem(){}isOpen(t){return z.buildClickState?!0:(t instanceof String&&(t=parseInt(t+"")),this.openSystem.get(t)!=null)}};var od=class{constructor(){this._vipLv=0}isReceive(t){for(let e of this.isRewards)if(e+""==t.toString())return!0;return!1}addIsReceive(t){this.isReceive(t)||this.isRewards.push(t)}get vipLv(){return this._vipLv}set vipLv(t){this._vipLv!=t&&(this._vipLv=t)}};var ld=class{constructor(){this.m_dicItemList=new le,this.m_dicTypeList=new le,this.m_dicSubTypeList=new le,this.m_dicBackList=new le}initData(t){this.m_dicItemList=new le,this.m_dicTypeList=new le,this.m_dicSubTypeList=new le,this.m_dicBackList=new le;let e;for(let n=0;n<t.length;n++){e=new Pe;var i=t[n];e.m_iId=i.id,i.pk&&(e.m_iPk=i.pk),e.m_iId=i.id,e.m_iNum=i.count,e.m_iNum>0&&this.pushItem(e)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}getCountById(t,e=!0){return _.intance.m_dicItems.get(t)==null?0:this.getItemCountById(t,e)}pushItem(t){this.m_dicItemList.set(t.m_iId,t),this.m_dicTypeList.get(t.type)==null&&this.m_dicTypeList.set(t.type,new le),this.m_dicSubTypeList.get(t.subType)==null&&this.m_dicSubTypeList.set(t.subType,new le),this.m_dicBackList.get(t.backType)==null&&this.m_dicBackList.set(t.backType,new le),this.m_dicTypeList.get(t.type).set(t.m_iId,t),this.m_dicSubTypeList.get(t.subType).set(t.m_iId,t),this.m_dicBackList.get(t.backType).set(t.m_iId,t)}removeItem(t){this.m_dicItemList.remove(t.m_iId),this.m_dicTypeList.get(t.type).remove(t.m_iId),this.m_dicSubTypeList.get(t.subType).remove(t.m_iId),this.m_dicBackList.get(t.backType).remove(t.m_iId)}updateData(t,e=!1,i=!0){console.log("updateData: ",t,e,i);let n=[],r=!1,s;for(let o=0;o<t.length;o++){t[o]instanceof Array?(s=new vt,s.id=t[o][0],s.count=t[o][1]):s=t[o];let l=this.m_dicItemList.get(s.id);l==null&&(l=new Pe(s.id),this.pushItem(l),l.m_bNew=!0),e?l.m_iNum=s.count:(l.newAddCnt=s.count,l.m_iNum=l.m_iNum+s.count),n.push(l.m_iId),l.m_iNum<=0&&this.removeItem(l),l.newAddCnt>0&&ct.instance.needPop&&i&&(ct.instance.addItem(l),r=!0)}r&&ct.instance.needPop&&ct.instance.autoPop&&yi.instance.startShow(),n.length>0&&g.intance.event(f.PACKAGE_UPDATE_ITEM,[n])}getItemById(t){return this.m_dicItemList.get(t)}getItemsBySubType(t){let e=this.m_dicSubTypeList.get(t);return e==null&&(e=[]),e}getListByType(t){let e=[];return this.m_dicTypeList.get(t)&&(e=this.m_dicTypeList.get(t).values.slice()),e.sort(this.sortOnQa),e}getBackByType(t){let e=[];return this.m_dicBackList.get(t)&&(e=this.m_dicBackList.get(t).values.slice()),e.sort(this.sortOnQa),e}async getQuan(t){let e=[];var n=(await I.requestPost("wxgame/hero/loserTicketBagList",{},!0,!0)).data;let r;for(let l=0;l<n.length;l++){r=new Pe;var s=n[l];if(r.m_iId=s.id,s.pk&&(r.m_iPk=s.pk),r.m_iId=s.id,r.m_iNum=s.count,s.extra&&s.extra.onChain?(r.chainStatus=1,t==1&&e.push(r)):t==2&&e.push(r),s.extra&&s.extra.prize&&(r.prizeStatus=2),s.extra&&s.extra.expTime?r.expTime=parseFloat(s.extra.expTime):r.expTime=0,t==3){var o=b.instance.m_serverTime;o>r.expTime&&e.push(r)}}return e.sort(this.sortOnExpTime),e}getListBySubType(t){let e=[];return this.m_dicSubTypeList.get(t)&&(e=this.m_dicSubTypeList.get(t).values.slice()),e.sort(this.sortOnQa),e}sortOnQa(t,e){let i=t.itemItem.sort,n=e.itemItem.sort;return i<n?-1:i>n?1:0}sortOnExpTime(t,e){let i=t.expTime,n=e.expTime;return i<n?1:i>n?-1:0}getItemCountById(t,e=!0){let i=this.getItemById(t);return i?i.m_iNum:0}};var cd=class a{constructor(t){this._addNewFList=[];this.delayShowNewFun=!1}static get instance(){return a._instace==null&&(a._instace=new a(new PE)),a._instace}addNewOpenFun(t){this._addNewFList=this._addNewFList.concat(t),this.delayShowNewFun||this.showNewFun()}setDelayShowFun(t){this.delayShowNewFun!=t&&(this.delayShowNewFun=t,t||this.showNewFun())}showNewFun(){if(this._addNewFList.length>0){let t=this._addNewFList.pop(),e=b.instance.systemOpenModel.m_dicSystemInfoCfg.get(t.toString());e?e.if_open.toString()=="1"||e.if_pop.toString()!="1"?this.showNewFun():this.swithToNewFun(t):this.showNewFun()}}swithToNewFun(t,e=!1){let i=b.instance.systemOpenModel.m_dicSystemInfoCfg.get(t);if(i){if(i.if_open.toString()=="1"){T.instance.notice("system_open.json-->funId:"+i.functionID+"is close");return}(i.if_pop.toString()=="1"||e)&&g.intance.event(f.EVENT_OPEN_MODULE,[y.NewFunUnLockDialog,t])}}hasUnlockFunction(t,e=!0){let i=b.instance.systemOpenModel.m_dicSystemInfoCfg.get(t+""),n=b.instance.systemOpenModel.isOpen(parseInt(t));return!n&&e&&T.instance.notice(m.instance.getLanguage(i.lock_word)),n}},PE=class{};var jn=class{constructor(){}ReadShort(t){let e=new Uint8Array(t.buffer),i=e[t.pos]<<8,n=e[t.pos+1],r=i|n;return t.pos+=2,r}ReadInt(t){let e=new Uint8Array(t.buffer),i=e[t.pos]<<24|e[t.pos+1]<<16|e[t.pos+2]<<8|e[t.pos+3];return t.pos+=4,i}ReadByte(t){return t.getByte()}ReadString(t){let e=this.ReadShort(t);return e==0?"":t.getUTFBytes(e)}ReadBytes(t,e){let i=t.buffer.slice(t.pos,e);return new Laya.Byte(i)}dispose(){}};var ud=class{constructor(){this.writeByt=new Laya.Byte}writeByte(){}writeShort(t){this.writeByt.writeByte(t>>8),this.writeByt.writeByte(t)}writeInt(t){this.writeByt.writeByte(t>>24),this.writeByt.writeByte(t>>16),this.writeByt.writeByte(t>>8),this.writeByt.writeByte(t)}writeString(t){if(t.length==0){this.writeShort(0);return}let i=new Laya.Byte;i.writeUTFBytes(t),this.writeShort(i.length),this.writeByt.writeUTFBytes(t)}dispose(){}};var uo=class a{constructor(){this.cookie="####1.0.0#0#";this.encryptKey="FFIYD#^3LB954JB90fzj*(d)sO7";this._curSendIndex=-1}static get instance(){return a._instance||(a._instance=new a),a._instance}setLoginCookie(){this.cookie="####1.0.0#"+z.Login_UDID+"#"+z.UserAgent}parseCookie(t,e,i,n="1.0.0"){let r=this.encryptKey+e+t,s=uB(r);n=b.instance.M_S_VersionServer;let o=s+"#"+t+"#"+e+"#"+i+"#"+n+"#"+this._curSendIndex+"#1#"+z.Login_UDID+"#"+z.UserAgent;this.cookie=o}reflashCookie(){this.parseCookie(this.m_time,this.m_roleID,this.m_accout)}analyClient(t,e){let i=new ud;i.writeString(this.cookie),i.writeShort(t);let n=this.analyData[t];return n&&n.length>0&&this.writeByt(n,e,i),i.writeByt}writeByt(t,e,i){for(let n in t){let r=e[n];if(t[n].indexOf("7/")!=-1){i.writeShort(r.length);let s=this.analyData[String(t[n]).split("7/")[1]];if(s)for(let o in r)this.writeByt(s,r[o],i)}else if(t[n]=="1")i.writeInt(r);else if(t[n]=="2")i.writeShort(r);else if(t[n]=="3")i.writeString(r);else if(t[n]=="4"||t[n]=="5"||t[n]=="6"){i.writeShort(r.length);for(let s in r)t[n]=="4"?i.writeInt(r[s]):t[n]=="5"?i.writeShort(r[s]):t[n]=="6"&&i.writeString(r[s])}}}analyServer(t){let e=new jn,i=e.ReadShort(t),n=[i],r=this.analyData[i];return r&&r.length>0&&(n=n.concat(this.readByt(r,t,e))),n}analyCookie(t=""){console.log("RECE_COOKIE: "+t,1);let e=t.split("#");this.m_time=e[0],this.m_roleID=e[1],this.m_accout=e[2];let i=e[3];this._curSendIndex=i,this._curSendIndex++,console.log("cookie:_time:"+this.m_time+"  _roleID："+this.m_roleID+"	  _accout："+this.m_accout),this.parseCookie(this.m_time,this.m_roleID,this.m_accout),b.instance.timeStamp=parseFloat(this.m_time)}readByt(t,e,i){let n=[];for(let r in t)if(t[r].indexOf("7/")!=-1){let s=i.ReadShort(e),o=this.analyData[String(t[r]).split("7/")[1]],l=[];if(o&&s>0)for(let c=0;c<s;c++)l.push(this.readByt(o,e,i));n.push(l)}else if(t[r]=="1")n.push(i.ReadInt(e));else if(t[r]=="2")n.push(i.ReadShort(e));else if(t[r]=="3")n.push(i.ReadString(e));else if(t[r]=="4"||t[r]=="5"||t[r]=="6"){let s=i.ReadShort(e),o=[];for(let l=0;l<s;l++)t[r]=="4"?o.push(i.ReadInt(e)):t[r]=="5"?o.push(i.ReadShort(e)):t[r]=="6"&&o.push(i.ReadString(e));n.push(o)}return n}dispose(){}};function uB(a){throw new Error("Function not implemented.")}var Oe=class Oe{constructor(){this._isSending=!1;this._stopSending=!1;this._sendCmd=0;this._callDataArr=[],this._httpReq=new Laya.HttpRequest,this._httpReq.http.timeout=15e3,this._httpReq.http.ontimeout=this.timeoutFunction,this._httpReq.on(Laya.Event.COMPLETE,this,this.reqCompleteHandler),this._httpReq.on(Laya.Event.ERROR,this,this.reqErrorHandler),this._httpReq.on(Laya.Event.PROGRESS,this,this.reqProcessHandler),Oe.RepeatHandler=Laya.Handler.create(this,this.repeatCallHandler,null,!1)}static get instance(){return Oe._instance||(Oe._instance=new Oe),Oe._instance}repeatCallHandler(){let t=this._callDataArr[0];t&&(t.needReSend?(this._callDataArr.shift(),this._sendByByte(t.command,t.callData,t.isShowLoading,!0)):this._callDataArr.shift())}timeoutFunction(){Oe.ErrorIndex++,this._sendCmd==2,Oe.timeoutTimes<Oe.MaxSendTimes,Oe.timeoutTimes++,Oe._IS_SEND=!1,this._isSending=!1,Oe.ErrorIndex>=Oe.RepeatTimesTimeOut?(_e.instance.hideLoading(),Oe.ErrorTips=m.instance.getLanguage(5076),A.intance.openModule(y.ClientErrView)):Oe.RepeatHandler.run()}reqCompleteHandler(t){let e=Laya.Browser.now()-this.m_nSendTime;if(e&&e>Oe.RequestTime?(Oe.reqTimes<Oe.MaxSendTimes,Oe.reqTimes++):(Oe.reqTimes=0,Oe.timeoutTimes=0,Oe.errorTimes=0),console.log("cmd time："+(Laya.Browser.now()-this.m_nSendTime)),this._httpReq.data==null){Le.instance.showErrByString("_buff:null");return}this._isSending=!1,Oe.ErrorIndex=0;let i=new Laya.Byte(this._httpReq.data),n;if(i){let r=new jn,s=r.ReadString(i);uo.instance.analyCookie(s);let o=r.ReadByte(i);for(let l=0;l<o;l++){r.ReadByte(i);let c=r.ReadShort(i),u=r.ReadBytes(i,i.pos+c);if(i.pos+=c,u.length<2)continue;u.pos=0;let p=r.ReadBytes(u,u.length);p.pos=0;let d=new Uint8Array(p.buffer),L=new Uint8Array(mB(d)),v=new Laya.Byte(L.buffer);v.pos=0;let E=uo.instance.analyServer(v);Laya.LayaEnv.isConch?console.log("REVC_CMD: cmdID:"+E[0]+" data:"+E,1):console.log(Ee.GetLogTime+" REVC_CMD: cmdID:",E[0],E),E[0]==153&&console.log("......"),E[0]==27&&(E[1]==2e4||E[1]==20042)&&(n=!0),g.intance.event("msg_"+E.shift(),[E])}o==0&&console.log("REVC_DATA: NO_DATA",1)}if(this._callDataArr.length>0){let r=this._callDataArr.shift();n&&r&&r.callBackHandler!=null&&r.callBackHandler.run()}Oe._IS_SEND=!1,this._callDataArr.length>0?Oe.RepeatHandler.run():_e.instance.hideLoading()}reqErrorHandler(t){console.log("[error] HttpNetService reqError: ["+t+"]",1),Oe.errorTimes<Oe.MaxSendTimes&&this._sendCmd==2,Oe.errorTimes++,_e.instance.showLoadingByInfo(m.instance.getLanguage(5205)),Oe.ErrorIndex++,Oe._IS_SEND=!1,this._isSending=!1,Oe.ErrorIndex>=Oe.RepeatTimes?(_e.instance.hideLoading(),Oe.ErrorTips=m.instance.getLanguage(5075),A.intance.openModule(y.ClientErrView),this._callDataArr.length=0):Laya.timer.once(1e3,this,function(){Oe.RepeatHandler.run()})}reqProcessHandler(t){}DataToService(t){Laya.LayaEnv.isConch?this._httpReq.send(z.server,t.buffer,"post","arraybuffer",["Content-Type","application/x-www-form-urlencoded","Connection","close"]):this._httpReq.send(z.server,t.buffer,"post","arraybuffer",["Content-Type","application/x-www-form-urlencoded"])}SendData(t,e,i=null,n=!0,r=!0){this._stopSending||(this.m_nSendTime=Laya.Browser.now(),Oe.ErrorIndex=0,r&&this._callDataArr.push({command:t,callData:e,callBackHandler:i,isShowLoading:n,needReSend:r}),this._sendByByte(t,e,n,!1))}_sendByByte(t,e,i=!0,n=!1){this._sendCmd=t,this._sendCmd==2,ot.instance.sendData({cmd:t,code:"",data:e})}reSendData(){this._callDataArr.length>0&&Oe.RepeatHandler.run()}sendOutHandler(){Laya.timer.clear(this,this.sendOutHandler),this._isSending&&(this._isSending=!1,Oe.ErrorIndex>=Oe.RepeatTimes?(_e.instance.hideLoading(),Oe.ErrorTips="Client Error!",A.intance.openModule(y.ClientErrView),this._callDataArr.length=0):Oe.RepeatHandler.run())}EnCodeByte(t){t.pos=0;let i=new jn().ReadBytes(t,t.length);i.pos=0;let n=new Laya.Byte,r=0,s,o=0;for(let l=0;l<i.length;l++)r>=6?r=1:r+=1,s=i.getByte(),o=s,s>>=8-r,o<<=r,o|=s,o^=3,n.writeByte(o);return n}DecryptByte(t){t.pos=0;let i=new jn().ReadBytes(t,t.length);i.pos=0;let n=new Laya.Byte,r=0,s,o=new Uint8Array(i.buffer);for(let l=0;l<o.length;l++)r>=6?r=1:r+=1,s=o[l],s^=3,s<<=8-r,o[l]^=3,o[l]>>=r,o[l]|=s;return n=new Laya.Byte(o.buffer),n}init(){}HttpLoadProcess(t){}httpLoadComplete(t){uo.instance.analyData=t}dispose(){}set stopSending(t){this._stopSending=t}};Oe._IS_SEND=!1,Oe.ErrorIndex=0,Oe.RepeatTimes=8,Oe.RepeatTimesTimeOut=3,Oe.ErrorTips="",Oe.LoginTime=5e3,Oe.RequestTime=4e3,Oe.MaxSendTimes=5,Oe.reqTimes=0,Oe.timeoutTimes=0,Oe.errorTimes=0;var nn=Oe;function mB(a){throw new Error("Function not implemented.")}var Xt=class extends Laya.Event{constructor(){super()}};Xt.INIT_SUIT_EVENT="HeroEvent:INIT_SUIT_EVENT",Xt.EVENT_FIND_ITEM_CLICK="HeroEvent:EVENT_FIND_ITEM_CLICK",Xt.EVENT_RELEASE_ITEM_CLICK="HeroEvent:EVENT_RELEASE_ITEM_CLICK",Xt.EVENT_FINISH="HeroEvent:EVENT_FINISH",Xt.EVENT_START="HeroEvent:EVENT_START",Xt.EVENT_AGAIN="HeroEvent:EVENT_AGAIN",Xt.EVENT_ENABLE_TIJIAO="HeroEvent:EVENT_ENABLE_TIJIAO",Xt.EVENT_HUMANSTAY="HeroEvent:EVENT_HUMANSTAY",Xt.EVENT_STOPGAME="HeroEvent:EVENT_STOPGAME",Xt.EVENT_RESTORE="HeroEvent:EVENT_RESTORE",Xt.EVENT_CANCEL_RESTORE="HeroEvent:EVENT_CANCEL_RESTORE",Xt.EVENT_COLLISIONENTER="HeroEvent:EVENT_COLLISIONENTER",Xt.EVENT_HERO_DRAW_UPDATE_PRODUCTION="HeroEvent:EVENT_HERO_DRAW_UPDATE_PRODUCTION",Xt.SELECT_UI="HeroEvent:SELECT_UI";var md=class extends pe{constructor(){super()}};var pd=class extends pe{constructor(){super()}};var We=class a{constructor(){this._inited=!1;this._initUpgrade=!1;this.heroList=[];this.init()}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){this._inited||(this._inited=!0)}initUpgrade(){if(!this._initUpgrade){let t=_.intance;t.m_dicHeroLv||(t.m_dicHeroLv=t.initConfig("hero_lv",["hero_lv","hero_star","race"],pd)),t.m_dicHeroAttup||(t.m_dicHeroAttup=t.initConfig("hero_attup",["star_lv","race"],md)),this._initUpgrade=!0}}getHead(t){let e=Math.floor(Math.random()*3)+1;return"common/common_icon/img_"+t+"_"+e+".png"}getNextHero(t){let e=b.instance.m_heroData.heroVoDic.keys.indexOf(t.pk);return b.instance.m_heroData.heroVoDic.keys.length===1?null:e<=b.instance.m_heroData.heroVoDic.keys.length-2?b.instance.m_heroData.heroVoDic.values[e+1]:null}getLastHero(t){let e=b.instance.m_heroData.heroVoDic.keys.indexOf(t.pk);return e>0?b.instance.m_heroData.heroVoDic.values[e-1]:null}setStar(t,e,i=1){let n=parseInt(e);var r=Math.floor(n/6),s=n%6,o=r+s;let l=0,c=i<2?"img_star":"img_star_";for(let L=0;L<r;L++)t[c+(L+1)].skin="gameIcon/hero/heroDetail/img_star_2.png",t[c+(L+1)].visible=!0;for(let L=r;L<s;L++)t[c+(L+1)].skin="gameIcon/hero/heroDetail/img_star_1.png",t[c+(L+1)].visible=!0;for(let L=o;L<5;L++)t[c+(L+1)].visible=!1;let p=(i<2?t.box_star:t[`box_star${i}`]).width,d=46;o==1?t[c+1].x=p/2-l:o==2?(t[c+1].x=p/2-d/2-l,t[c+2].x=p/2+d/2-l):o==3?(t[c+1].x=p/2-l,t[c+2].x=p/2-d-l,t[c+3].x=p/2+d-l):o==4?(t[c+1].x=p/2-d/2-l,t[c+2].x=p/2+d/2-l,t[c+3].x=p/2-d*(1/2+1)-l,t[c+4].x=p/2+d*(1/2+1)-l):(t[c+1].x=p/2-l,t[c+2].x=p/2-d-l,t[c+3].x=p/2+d-l,t[c+4].x=p/2-d*2-l,t[c+5].x=p/2+d*2-l)}setStar2(t,e){let i=parseInt(e);for(let n=1;n<6;n++)n<=i?t["img_star"+n].skin="gameIcon/hero/heroDetail/img_star_1.png":t["img_star"+n].skin="gameIcon/hero/heroDetail/img_star_0.png",t["img_star"+n].visible=!0}getRoundName(t){let e=m.instance.getLanguage(10014,16,8);return t==4?e=m.instance.getLanguage(10014,2,1):t==3?e=m.instance.getLanguage(10014,4,2):t==2&&(e=m.instance.getLanguage(10014,8,4)),e}setHeroVoByHeroDto(t,e){t.id=e.id,t.lv=e.lv,t.pk=e.pk,t.color=e.color,t.state=e.state,t.newFightFlag=e.newFightFlag}};var hd=class{};var dd=class{};var gt=class a{constructor(){this.mail_contract=null}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){typeof window.ethereum>"u"||(this.mail_contract=new window.web3.eth.Contract(Z.BLINDBOX_ABI,Z.BLINDBOX_ADDRESS))}async initData(){this.mailList=new le,_e.instance.showLoading(!0);let t=await this.mail_contract.methods.getPricesLength().call();for(let e=0;e<t;e++){let i=await this.mail_contract.methods.getPriceByIndex(e).call(),n=new hd;n.type=1,n.idx=e,Object.assign(n,i),this.mailList.set(n.idx,n),n.showPrice=io(n.currentPrice+"")}_e.instance.hideLoading()}async hasFree(){return await this.mail_contract.methods.getIsFreeOpen().call()?!await this.mail_contract.methods.hasFreeHero(W.instance.walletAddress).call():!1}async recruit(t){console.log("成功",66),console.log("失败",66),_e.instance.showLoading(!0);let e=_.intance.m_dicShops.get(t),i=e.cost[0];try{var n;z.vType==2?n=Wn.id:z.vType==1?n=Wn.id:n=Ba.id;let l=_.intance.getBuyHeroAddress(n),c=await W.instance.walletClient.getChainId();if(n!==c){var r=await W.instance.switchChain(n);if(!r){this.onEndHeroBuy(),console.log("切换失败，请手动切换");return}c=await W.instance.walletClient.getChainId()}let u=_.intance.getCurrencyAddress(3001);if(!u)return this.onEndHeroBuy(),T.instance.notice(m.instance.getLanguage(1177,c)),!1;if(!l)return this.onEndHeroBuy(),T.instance.notice(m.instance.getLanguage(1174,c)),!1;let p=e.cost[1],d=await W.instance.getBalance2(u),L=io(p+"");if(parseFloat(d)<parseFloat(L)){this.onEndHeroBuy(),Ee.moneyNotEnought(i);return}if(console.log("判断授权 tokenAddress: "+u+", chainIDData:"+n),!await W.instance.newAllowanceAddress(l,u))return console.log("未授权"),this.onEndHeroBuy(),T.instance.notice(m.instance.getLanguage(15)),_e.instance.hideLoading(),!1;console.log("授权成功 开始购买");var s=await W.instance.walletClient.writeContract({account:W.instance.walletAddress,address:l,abi:Z.BUY_HERO_ABI,functionName:"mintByTOX",args:[]});console.log("============"+s);let E=await W.instance.publicClient.waitForTransactionReceipt({hash:s});return console.log(`Tx with hash: ${s}`,E),E&&E.status=="success"?(console.log(`Tx successful with hash: ${s}`),s):(this.onEndHeroBuy(),Ee.TransactionErrorTip(),!1)}catch(l){this.onEndHeroBuy();var o=l.shortMessage;if(o&&o.indexOf("does not match")!=-1&&(o=m.instance.getLanguage(1118)),console.log(o),l instanceof G){let c=l.walk(u=>u instanceof Jt);if(c instanceof Jt){let u=c.data?.errorName??"";console.log("============errorName: "+u)}}return null}}waitGetHero(){Laya.timer.loop(2e3,this,this.getHero)}async getHero(){var t=await I.requestPost("wxgame/hero/heroBuyChainCheck",{}).catch(e=>{});t&&t.heroList&&t.heroList.length>0&&(Laya.timer.clear(this,this.getHero),this.onNewAddHero(t.heroList))}onNewAddHero(t){ct.instance.autoPop=!1,b.instance.herosDataUpdataHandler(t),this.onEndHeroBuy()}onAddHero(t){ct.instance.autoPop=!1,b.instance.herosDataUpdataHandler(t.reward),t.resChange&&b.instance.moneyInfoHander(t.resChange),t.fightHeroPk&&(b.instance.playerDto.fightHeroPk=t.fightHeroPk),this.onEndHeroBuy()}onEndHeroBuy(){_e.instance.hideLoading(),g.intance.event(f.EVENT_END_HEROBUY)}async recruit1(t){let e=_.intance.m_dicShops.get(t),i=e.cost[1],n=await W.instance.getBalance(),r=await I.requestPost("wxgame/hero/heroBuy",{shopId:e.id},!0,!0);r?this.onAddHero(r):this.onEndHeroBuy()}async recruitItem(t,e,i=void 0){let n=_.intance.m_dicShops.get(t),r=n.cost[1],s=await W.instance.getBalance(),o=await I.requestPost("wxgame/hero/itemBuy",{shopId:n.id,count:e},!0,!0);o&&(o.reward&&A.intance.openModule(y.RewardGetDialog,o.reward),o.resChange&&b.instance.moneyInfoHander(o.resChange),o.fightHeroPk&&(b.instance.playerDto.fightHeroPk=o.fightHeroPk),_e.instance.hideLoading(),i&&i&&i.run())}async recruitFree(){_e.instance.showLoading(!0),this.isOpen=await this.mail_contract.methods.getIsOpen().call();let t=await this.hasFree();if(!this.isOpen){_e.instance.hideLoading(),g.intance.event(f.EVENT_HERO_DRAW_BACK,[m.instance.getLanguage(12)]);return}if(!t){g.intance.event(f.EVENT_HERO_DRAW_BACK,[m.instance.getLanguage(17)]);return}await this.mail_contract.methods.recruitFree().send({from:W.instance.walletAddress},(e,i)=>{if(e){_e.instance.hideLoading(),g.intance.event(f.EVENT_HERO_DRAW_BACK,[m.instance.getLanguage(16)]);return}})}async ownerHero(t=!1){let e=await I.requestPost("wxgame/hero/heroList",{},!0,!0);b.instance.m_heroData.initData(e.heroList,t),console.log("HERO LIST")}async ownerBag(){let t=await I.requestPost("wxgame/hero/bagList",{},!0,!0);b.instance.m_packageData.initData(t.data),console.log("BAG LIST")}async heroOutputRate(){if(We.instance.heroOutputRateDic)return;let t=await I.requestPost("cybertron-sys-api/api/v1/heroes/heroOutputRate",{},!0);We.instance.heroOutputRateDic=new le;for(let e of t){let i=new dd;Object.assign(i,e),We.instance.heroOutputRateDic.set(i.mineralLevel,i)}console.log("HERO heroOutputRate"),g.intance.event(Xt.EVENT_HERO_DRAW_UPDATE_PRODUCTION)}makeHeroVo(t){let e=new Pt;return Object.assign(e,t),e}};var Qe=class Qe{constructor(){}};Qe.DEFAULT_HERO_ID=11000010003,Qe.DEFAULT_HERO_COLOR=1,Qe.TYPE_Professional=1,Qe.TYPE_Training=2,Qe.ANI_beiji="beiji",Qe.ANI_daiji="daiji",Qe.ANI_gongji="gongji",Qe.ANI_ti="ti",Qe.ANI_hua="hua",Qe.ANI_dang="gedang",Qe.ANI_dazhao="z_dazhao",Qe.ANI_ruchang="ruchang",Qe.ANI_siwang="siwang",Qe.ANI_xingzou="xingzou",Qe.ANI_chongzhuang="z_chongzhuang",Qe.ANI_chongzhuang2="z_chongzhuang2",Qe.ANI_daodi="z_daodi",Qe.ANI_shanbi="z_shanbi",Qe.ANIS=[Qe.ANI_daiji,Qe.ANI_xingzou,Qe.ANI_gongji,Qe.ANI_ti,Qe.ANI_hua,Qe.ANI_dang,Qe.ANI_beiji,Qe.ANI_siwang],Qe.TYPE_GONGJI=1,Qe.TYPE_TI=2,Qe.TYPE_HUA=3,Qe.TYPE_DANG=4,Qe.TYPE_FEI=5,Qe.TYPE_DAZHAO=6,Qe.TYPE_HUOJIANDAN=7;var $e=Qe;var fd=class{constructor(){this.heroVoDic=new le}initData(t,e=!1){(!this.heroVoDic||e)&&(this.heroVoDic=new le);let i;for(let r=0;r<t.length;r++){i=new Pt;var n=t[r];We.instance.setHeroVoByHeroDto(i,n),this.pushItem(i)}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}updateData(t){console.dir("更新英雄："+t),this.updataItemVoByArr(t)}herosDataRemoveHandler(t){console.dir("删除英雄："+t);for(let i=0;i<t.length;i++){var e=t[i];this.removeItemPk(e)}}pushItem(t){this.heroVoDic.set(t.pk,t)}removeItem(t){this.removeItemPk(t.pk)}removeItemPk(t){this.heroVoDic.remove(t+"")}updataItemVoByArr(t,e=!1){let i=[],n=!1,r;for(let s=0;s<t.length;s++){r=t[s];let o=this.heroVoDic.get(r.pk);o==null?(o=new Pt,We.instance.setHeroVoByHeroDto(o,r),o.m_bNew=!0,o.newAddCnt=1,o.newAddCnt>0&&this.pushItem(o)):o.newAddCnt=1,o.isLvUp=e,i.push(o.pk),o.m_iNum<=0&&this.removeItem(o),o.newAddCnt>0&&ct.instance.needPop&&(ct.instance.addHeroItem(o),n=!0)}n&&ct.instance.needPop&&ct.instance.autoPop&&yi.instance.startShow(),i.length>0&&g.intance.event(f.PACKAGE_UPDATE_ITEM,[i])}getItemById(t){return this.heroVoDic.get(t)}getCount(){return this.heroVoDic.values.length}getCanTransferHero(t){let e=this.heroVoDic.get(t+"");return e&&e.state==0&&e.pk!=b.instance.playerDto.fightHeroPk?e:null}getListByType(t){let e=[],i=t==$e.TYPE_Training?1:0;for(let n=0;n<this.heroVoDic.values.length;n++){let r=this.heroVoDic.values[n];r.newFightFlag==i&&e.push(r)}return e}};var yd=class{constructor(){this.m_redData={system:!1,friend:!1,announce:!1};this.m_dicItemList=new le,this.m_dicTypeList=new le}initData(t){this.m_dicItemList=new le,this.m_dicTypeList=new le,this.m_redData={system:!1,friend:!1,announce:!1};let e;for(let i=0;i<t.length;i++)switch(e=t[i],this.pushItem(e),e.type){case 1:e.state==0&&(this.m_redData.system=!0);break;case 2:e.state==0&&(this.m_redData.friend=!0);break;case 3:e.state==0&&(this.m_redData.announce=!0);break}console.log("@@@@@@@@@@@@@@@@@@-----------------------------------------packVo: ")}parseItem(t){if(t.mailId>0){var e=_.intance.m_dicMail.get(t.mailId);t.title=m.instance.getLanguage(e.title),t.content=m.instance.getLanguageMulti(e.text,t.params)}}pushItem(t){this.parseItem(t),this.m_dicItemList.set(t.id,t),this.m_dicTypeList.get(t.type)==null&&this.m_dicTypeList.set(t.type,new le),this.m_dicTypeList.get(t.type).set(t.id,t)}removeItem(t){this.m_dicItemList.remove(t.id),this.m_dicTypeList.get(t.type).remove(t.id)}getItemById(t){return this.m_dicItemList.get(t)}getListByType(t){let e=[];return this.m_dicTypeList.get(t)&&(e=this.m_dicTypeList.get(t).values.slice()),e}getRedData(){return this.m_redData}};var b=class a{constructor(){this.timeZoneOff=0;this.hearIntervalSceond=10*60;this._timeStamp=0;this._m_strLanguage=1;this.isLanChanged=!1;this.pveOpen=2;this.lastTimestamp=0;this._m_serverTime=0;this.M_S_VersionServer="1.0.0";this.redDotData=[];this.friendNum=0;this.headId=10001;this.countryId=1010;this.colorId=1;this._guildIcon=2006;this.rechargeEnd=!1;this.needPopError=!0}async initData(){Ne.instance.sendCustumEvent(20),await gt.instance.ownerHero(),await gt.instance.ownerBag(),Ne.instance.sendCustumEvent(21)}get m_serverTime(){let t=Date.now();return this._m_serverTime+(t-this.lastTimestamp)}set m_serverTime(t){this._m_serverTime=t,this.lastTimestamp=Date.now()}get guildIcon(){return this._guildIcon}set guildIcon(t){console.log("guildIcon: "+t),this._guildIcon=t}get m_strLanguage(){return this._m_strLanguage}set m_strLanguage(t){this._m_strLanguage=t}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){this.vipInfo=new od,this.m_packageData=new ld,this.m_mailData=new yd,this.m_heroData=new fd,this.systemOpenModel=new sd,this.m_dicCustomerVo=new le,g.intance.on("msg_27",this,this.commonErrHandler),g.intance.on("msg_11",this,this.vipInfoHandler),g.intance.on("msg_13",this,this.onVipUpgrade),g.intance.on("msg_90",this,this.initSystemOpen),g.intance.on("msg_161",this,this.reciveTurnoverVo),g.intance.on("msg_333",this,this.onInitSceneBg),g.intance.on("msg_350",this,this.onInitStoreDiscount),g.intance.on("msg_388",this,this.onInitTitle),g.intance.on("msg_1002",this,this.onLanChange)}initSend(){}onLanChange(t){let e=parseInt(t[0]),i=parseInt(t[1]);switch(e){case 1:i==1&&Ne.instance.reload();break;case 2:break}}get timeStamp(){return this._timeStamp+(Laya.Browser.now()-this.recordStampTime)/1e3}set timeStamp(t){this.recordStampTime=Laya.Browser.now(),this._timeStamp=t}onReciveBuyTimes(t){a.instance.playerDto.updateRoleBuyTimes(t)}reciveTurnoverVo(t){}onInitSceneBg(t){}onInitTitle(t){}getAdRankById(t){return this.m_adRankDic&&this.m_adRankDic.get(t)?this.m_adRankDic.get(t):""}onGetPvpGrade(t){let e=t[0]}onInitStoreDiscount(t){}reciveBuyCustomerMsg(t){}onInitStyleAndTag(t){let e=t[0];for(let i=0;i<e.length;i++){let n=e[i],r=n[0],s=n[1],o=n[2]}}reciveFriendList(t){}reciveFirstRecharge(t){}hasReceiveFirst(){return this.firstRechargeState.toString()=="3"}recieveOnlineAward(t){}initFriendsGiftHandler(t){}initSystemOpen(t){this.systemOpenModel.initSystemOpen(t[0])}updateSystemOpen(t){let e=t[0];cd.instance.addNewOpenFun(e);for(let i=0;i<e.length;i++)this.systemOpenModel.openSystem.set(e[i],!0)}serverTimeUpdateHandler(){let t=this.hearIntervalSceond*1e3;Laya.timer.loop(t,this,this.onHear)}onHear(){}itemsDataUpdataHandler(t,e,i){this.m_packageData.updateData(t,e,i),g.intance.event(f.EVENT_ITEM_UPDATE)}herosDataUpdataHandler(t){this.m_heroData.updateData(t)}vipInfoHandler(t){this.vipInfo.trecharge=t[1],this.vipInfo.isRewards=t[2],this.vipInfo.daygift=t[3]}onVipUpgrade(t){}getConsumeValue(t){t=parseInt(t.toString());var e=this.playerDto.coins[t];return e>0?e:0}hasEnoughMoney(t,e,i=!0){switch(t=parseInt(t.toString()),e=parseInt(e.toString()),t){default:return this.playerDto.coins[t]<e&&i&&g.intance.event("open_buy",4),this.playerDto.coins[t]>=e}}moneyInfoHander(t,e=!0,i=!0){let n=!1,r=!1,s=0;for(let o of t)r=!1,o[0]==ve.TYPE_EXP?(s=parseInt(o[1]+"")-this.playerDto.exp,this.playerDto.exp=parseInt(o[1]+""),r=s>0):(s=parseFloat(o[1]+"")-this.playerDto.coins[o[0]],this.playerDto.coins[o[0]]=parseFloat(o[1]+""),r=s>0),r&&ct.instance.needPop&&i&&(n=!0,ct.instance.addConsumeByServer([o[0],s]));e&&g.intance.event(f.ROLE_INFO_CHANGE),n&&ct.instance.autoPop&&yi.instance.startShow()}commonErrHandler(t){if(_e.instance.hideLoading(),parseInt(t[0])==2e4){this.needPopError&&(Le.instance.showErrorWord(parseInt(t[0])),g.intance.event(f.RECIVE_SUCESS_SERVICE));return}else if(parseInt(t[0])==20008){g.intance.event("open_buy",1);return}else if(parseInt(t[0])==20007){g.intance.event("open_buy",2);return}else if(parseInt(t[0])==20015){g.intance.event("open_buy",3);return}else if(parseInt(t[0])==20016){g.intance.event("open_buy",4);return}else if(parseInt(t[0])==10021){nn.ErrorTips=Le.instance.get(10021),A.intance.openModule(y.ClientErrView);return}else if(parseInt(t[0])==10023){nn.ErrorTips=Le.instance.get(10023),A.intance.openModule(y.ClientErrView);return}else if(parseInt(t[0])==10019){nn.ErrorTips=Le.instance.get(10019),A.intance.openModule(y.ClientErrView);return}else if(parseInt(t[0])!=20053){if(parseInt(t[0])==10002){nn.ErrorTips=m.instance.getLanguage(5085),A.intance.openModule(y.ClientErrView);return}}Le.instance.showErrorWord(parseInt(t[0])),console.log("Server Error Code:"+t[0])}dispose(){}parseNumber(t){let e=[];for(let i=0;i<t.length;i++){let n=t[i];n=this.dividedNumber(n),e.push(n.toString())}return e}dividedNumber(t){return t/1e4}getRedDotById(t){return!!(this.redDotData&&this.redDotData.indexOf(t)>-1)}openWheelDialog(){let t=Laya.Handler.create(this,()=>{se.intance.setCurrentScene(Y.M_SCENE_DAILY_TASK)});me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1772),P.CANCEL,t)}refreshRedDotShow(){for(let t=0;t<this.redDotData.length;t++)switch(this.redDotData[t]){case 7:case 8:case 9:g.intance.event(f.REFRESH_MAINSCENE_HEAD_RED),g.intance.event(f.REFRESH_ROLEINFO_RED),g.intance.event(f.REFRESH_ACTIVITY_RED);break;case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:g.intance.event(f.REFRESH_ACTIVITY_RED);break;case 23:g.intance.event(f.REFRESH_MAIL_RED);break;case 26:g.intance.event(f.REFRESH_WHEEL_RED);break}}};var qi=class{constructor(){}};qi.Lan_en=1,qi.Lan_zh=6,qi.Lan_tr=7;var m=class a{constructor(){this._lanTypesById=new le,this._lanTypesByType=new le,this._configData=new le,this._configData1=new le}static get instance(){return a._instance||(a._instance=new a),a._instance}initLanTypes(t){this._lanTypesById=new le,this._lanTypesByType=new le;for(let e in t){let i=new Eo;if(i.init(t[e]),parseInt(i.if_open)!=1)continue;let n=i.id,r=i.type;this._lanTypesById.set(n,i),r&&r!=""&&this._lanTypesByType.set(r,i)}}getLanTypes(){return this._lanTypesById}getLanIdByType(t){if(this._lanTypesByType){let e=this._lanTypesByType.get(t);if(e)return parseInt(e.id.toString())}return 1}getLanTypeById(t){if(this._lanTypesById){let e=this._lanTypesById.get(t);if(e)return e.type}return"en"}initConfigLan(t){this._configData=t}initConfigLan1(t){this._configData1=t}initUILan(t){Laya.Text.langPacks={};let e;for(e in t){let i=t[e].value;Laya.Text.langPacks[e]=i}}changeBrToN(t){let e=/<br>/g;for(;t.indexOf("<br>")!=-1;)t=t.replace(e,`
`);return t}replacePlaceholder(t,e){if(t=="")return"";let i=/{(\d+)}/g;return e.length>0&&(t=t.replace(i,function(){return e[arguments[1]]})),this.replaceLanByBR(t)}replaceLanByBR(t){return t+""}getEnglishLanguage(t,...e){return this.getEnglishLanguageReplace(t,e)}getEnglishLanguageReplace(t,e){if(this._configData1&&this._configData1[t]){let i=this._configData1[t].value;if(i&&i!="")return this.replacePlaceholder(i,e)}return this.replacePlaceholder(t+"",e)}getLanguage(t,...e){return this.getLanguageReplace(t,e)}getLanguageReplace(t,e){if(this._configData&&this._configData[t]){let i=this._configData[t].value;if(i&&i!="")return this.replacePlaceholder(i,e)}return this.replacePlaceholder(t+"",e)}getLanguageMulti(t,e){if(console.log("getLanguageMulti",e),this._configData&&this._configData[t]){let i=this._configData[t].value;if(i&&i!="")return this.replacePlaceholderMulti(i,e)}return this.replacePlaceholder(t+"",e)}replacePlaceholderMulti(t,e){if(t=="")return"";let i=/{(\d+)}/g;return e.length>0&&(t=t.replace(i,function(){var n=e[arguments[1]];if(typeof n=="object")n=JSON.parse(n),n=a.instance.parseObj(n);else if(typeof n=="string")try{n=JSON.parse(n),typeof n=="object"&&(n=a.instance.parseObj(n))}catch{}return n})),this.replaceLanByBR(t)}parseObj(t){if(t.hasOwnProperty("tableType")){if(t.tableType==1){var e=_.intance.m_dicItems.get(t.id);e&&(t=a.instance.getLanguage(e.name))}else if(t.tableType==2){var i=_.intance.m_dicArenaDic.get(t.id);i&&(t=a.instance.getLanguage(i.name))}}else t=a.instance.getMultiLan(t);return t}getUILang(t,e=null,i=null,n=null,r=null){if(t=Laya.Text.langPacks&&Laya.Text.langPacks[t]?Laya.Text.langPacks[t]:t,arguments.length>1)for(let s=0,o=arguments.length;s<o;s++)t=t.replace("{"+s+"}",arguments[s+1]);return t}getMultiLan(t){var e=parseInt(b.instance.m_strLanguage.toString()),i;return t&&(i=t[e],i||(i=t[qi.Lan_en])),i}FGM_GetLanguage(){let t=function(i){console.log("initGame->-----------------------------FGM_GetLanguage:=="+i),i&&(i=i.substring(0,2),z.User_Lan=i)},e=Laya.LocalStorage.getItem(z.COOKIE_CF_LAN);!e||e==""?t(this.language):t(e)}get language(){return"en"}FGM_SetLanguage(t){t&&t!=""&&Laya.LocalStorage.setItem(z.COOKIE_CF_LAN,t)}dispose(){}};var bd=class a{constructor(){this.m_sprMap=new Laya.Sprite;this.m_Image=new Laya.Image}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){}showLoading(t=!1){if(this.loadingMc)this.m_sprMap.size(Laya.stage.width,Laya.stage.height),z.m_bIsIphoneX&&(this.m_Image.scaleX=z.IPHONEX_SCARE,this.m_Image.scaleY=z.IPHONEX_SCARE),this.m_Image.x=(this.m_sprMap.width-this.m_Image.width*this.m_Image.scaleX)/2,this.m_Image.y=(this.m_sprMap.height-this.m_Image.height*this.m_Image.scaleY)/2,this.m_sprMap.x=(C.instence.m_iStageWidth-this.m_sprMap.width*this.m_sprMap.scaleX)/2,this.m_sprMap.y=(C.instence.m_iStageHeight-this.m_sprMap.height*this.m_sprMap.scaleY)/2,this.m_sprMap.visible=!0,Laya.timer.clear(this,this.showLazyBg),t?(this.m_Image.alpha=1,this.showLazyBg()):(this.m_Image.alpha=0,this.m_sprMap&&(this.m_sprMap.graphics.clear(),this.m_sprMap.graphics.drawRect(0,0,Laya.stage.width,Laya.stage.height,"#000000")),Laya.timer.once(300,this,this.showLazyBg));else return}showLazyBg(){this.m_sprMap&&(this.m_sprMap.graphics.clear(),this.m_Image.alpha=1),this.loadingMc&&(this.loadingMc.x=Laya.stage.width/2,this.loadingMc.y=Laya.stage.height/2,this.loadingMc.play(),this.loadingMc.visible=!0)}hideLoading(){if(this.loadingMc)this.hideLoadingSHow();else return}hideLoadingSHow(){Laya.timer.clear(this,this.showLazyBg),this.loadingMc.stop(),this.loadingMc.visible=!1,this.m_sprMap.visible=!1}get isShow(){return this.loadingMc&&this.loadingMc.visible}dispose(){this.m_sprMap&&this.m_sprMap.graphics.clear(),Laya.timer.clear(this,this.showLazyBg),this.loadingMc&&(this.loadingMc.destroy(),this.loadingMc.removeSelf(),this.loadingMc=null)}};var{regClass:pB}=Laya,mo=class extends iu{constructor(){super(...arguments);this.isLogout=!1;this.dotNum=0;this.m_nProgress=0}onAwake(){Laya.loader.on(Laya.Event.ERROR,this,this.onError),Laya.loader.load(["res/common/comm_bg/img_loading1_bg.jpg","res/loading/progress_load1.png","res/loading/progress_load1$bar.png"]).then(()=>{this.createUI(),this.init()})}onError(e){console.log("加载失败: "+e)}createUI(){this.m_nSendTime=Laya.timer.currTimer,ze.instance.init(),ze.instance.playMusicByName(ze.soundName_bg,".mp3"),g.intance.on(f.EVENT_BACK_TO_LOGIN,this,this.backToLogin),g.intance.on(f.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),g.intance.on(f.EVENT_ENTER_MAIN,this,this.loginCallBack),this.initLoad(),m.instance.FGM_GetLanguage();let e=z.User_Lan;var i=getGameVersion();this.txtLoad.text=i,console.log("VERSION: "+i);let n=new Fa;n.ID=1,n.Event="加载版本信息 "+i,Ne.instance.sendCustumEvent(1,null,n),Wt.Initialize(Laya.stage,!0)}initLoad(){this.onAssetLoaded()}onAssetLoaded(){this.loadingProcess=0,this.m_nProgress=0,Laya.timer.loop(1800,this,this.onLoading,[this.m_nProgress])}set loadingProcess(e){e>1&&(e=1),this.mcProcess.value=e,this.txtProcess.text=Math.floor(e*100)+"%";var i=e*this.mcProcess.width-70;i<0&&(i=0),this.img_guang.x=i}init(){C.instence.init(),se.intance.init(),bd.instance.init(),A.intance.init(),b.instance.init();let e=new Fa;e.ID=3,e.Event="加载资源信息",Ne.instance.sendCustumEvent(3,null,e),D.instance.init(),Q.initParms()}backToLogin(){Laya.timer.clear(this,this.onLoading),this.m_nProgress=0,Laya.loader.load(D.instance.m_arrInitResource,Laya.Handler.create(this,this.getLoginData),Laya.Handler.create(this,this.onLoading2,null,!1))}getLoginData(){Ne.instance.sendCustumEvent(7),this.readyInitGame()}readyInitGame(){if(this.isLogout){g.intance.event(f.EVENT_LOADING_SUC);return}this.mcProcess&&(this.loadingProcess=.8+.2),z.isWhite?this.loginGame():this.onGetNotice()}async onGetNotice(){Laya.loader.maxLoader=50,I.requestPost("wxgame/sys/notice",{type:1},!1,!1).then(e=>{var i=e;if(i.list&&i.list.length>0){A.intance.openModule(y.NoticeDialog,[1,i]);return}this.loginGame()}).catch(e=>{A.intance.openModule(y.NoServerView)})}async loginGame(){g.intance.event(f.EVENT_LOADED_COMPLETE),await W.instance.init(),await W.instance.dappLogin()}async loginGameEnd(e){_e.instance.showLoading(!0),Ne.instance.sendCustumEvent(8),_.intance.init(),nn.instance.init(),console.log("PreLoadingView.joinGame()");let i=Laya.timer.currTimer-this.m_nSendTime;if(Ne.instance.sendCustumEvent(22),!e){A.intance.openModule(y.NoServerView);return}e.loginState==1?(console.log("have no regist"),Ne.instance.sendCustumEvent(23),A.intance.openModule(y.CreateLoginView)):(Ne.instance.sendCustumEvent(30),e.playerDto?(Ne.instance.sendCustumEvent(31),console.log("registed "+e.playerDto.name),b.instance.playerDto=e.playerDto,this.loginCallBack()):(Ne.instance.sendCustumEvent(32),console.log("getRegisted error"),T.instance.notice(m.instance.getLanguage(135))))}async loginCallBack(){console.log("loginCallBack++++++++++++++++++++++++++++++++"),z.vType==2&&z.Debug==0&&(Laya.Browser.window.console.log=function(){}),b.instance.initData(),_e.instance.hideLoading();var e=b.instance.playerDto;if(e.roomId>0){let i=await I.requestPost("wxgame/room/info",{roomId:e.roomId});B.instance.roomDto=i.roomDto,i.roomDto?e.roomState==10?ot.instance.initSocket():A.intance.openModule(y.EnterRoomView):T.instance.notice(m.instance.getLanguage(135))}else Ee.logs("进入主界面",5),Ne.instance.sendCustumEvent(33),se.intance.setCurrentScene(Y.M_SCENE_MAIN),b.instance.openWheelDialog();I.startHeart()}onLoading(e){this.m_nProgress+=.01,this.mcProcess&&e>this.mcProcess.value&&(this.loadingProcess=e*.4)}onLoading2(e){this.mcProcess&&(this.loadingProcess=0+e*1.1)}removeEvent(){g.intance.off(f.EVENT_BACK_TO_LOGIN,this,this.backToLogin),g.intance.off(f.EVENT_LOGIN_GAME_END,this,this.loginGameEnd),g.intance.off(f.EVENT_ENTER_MAIN,this,this.loginCallBack)}};mo.m_iState=1,mo=h([pB("xmaaYG8AQ1yC07pr_JvyPA")],mo);var{regClass:hB,property:Dme}=Laya,gc=class extends Laya.Script{constructor(){super()}onEnable(){Laya.timer.frameLoop(1,this,this.onRunRoll),this.onScaleEnd1()}onRunRoll(){this.owner.rotation++}onScaleEnd1(){Laya.Tween.to(this.owner,{scaleX:1.1,scaleY:1.1,alpha:.8},500,null,Laya.Handler.create(this,this.onScaleEnd2))}onScaleEnd2(){Laya.Tween.to(this.owner,{scaleX:.8,scaleY:.8,alpha:.5},500,null,Laya.Handler.create(this,this.onScaleEnd1))}onDisable(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};gc=h([hB("w5pr4pHJTMOM3bYxCyc4Ag")],gc);var po=class po extends Laya.ColorFilter{constructor(t=null){super(t)}static addClickFilter(t){let e=t.filters||[];e.push(po.clickFilter),t.filters=e}static clearClickFilter(t){let e=t.filters;if(e!=null&&e.length>0){for(let i=e.length-1;i>-1;i--)e[i]instanceof po&&e.splice(i,1);t.filters=e}}};po.clickFilter=new po([1,0,0,0,-34,0,1,0,0,-34,0,0,1,0,-34,0,0,0,1,0]);var $n=po;var{regClass:dB,property:fB}=Laya,ho=class extends Laya.Script{constructor(){super();this.noSound=!1}onEnable(){let e=this.owner.scaleX;this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onUp)}onDown(){this.noSound||ze.instance.playSoundByName(ze.soundName4),$n.addClickFilter(this.owner)}onUp(){$n.clearClickFilter(this.owner)}onDisable(){$n.clearClickFilter(this.owner),this.owner.off(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.onUp)}};h([fB({type:"boolean"})],ho.prototype,"noSound",2),ho=h([dB("cL1AmqOiTHmtQWKayPNcTA")],ho);var{regClass:yB,property:YS}=Laya,Br=class extends Laya.Script{onEnable(){b.instance.m_strLanguage==qi.Lan_zh?this.chSkin&&(this.owner.skin=this.chSkin.url):b.instance.m_strLanguage==qi.Lan_tr&&this.trSkin&&(this.owner.skin=this.trSkin.url)}};h([YS({type:Laya.Texture})],Br.prototype,"chSkin",2),h([YS({type:Laya.Texture})],Br.prototype,"trSkin",2),Br=h([yB("SPRGcvdcQR2PHb7I7j7sXg")],Br);var it=class it{constructor(){this.ROOM_1=1;this.ROOM_2=2;this.ROOM_3=3;this.ROOM_1_1=1;this.ROOM_1_2=2;this.ROOM_1_3=3;this.ROOM_2_1=201;this.ROOM_2_2=202;this.ROOM_2_3=203;this.ROOM_3_1=301;this.ROOM_3_2=302;this.ROOM_3_3=303;this.ROOM_4_6=406;this.ROOM_5_4=504;this.ROOM_5_4_SELF=5041}static get instance(){return it._instance==null&&(it._instance=new it),it._instance}};it._instance=null,it.ROOM_PRE_CONTRACT=401,it.ROOM_PRE_CONTRACT_SELF=402,it.ROOM_FRIEND_APPLY=4,it.ROOM_MAIL=5,it.RED_GUILD_APPLY=6,it.RED_SHIELDS=7,it.RED_ACTIVITY1=8,it.RED_ACTIVITY2=9,it.RED_ACTIVITY3=10,it.RED_EVERY_RANK_TOTAL=11,it.RED_EVERY_RANK_PRE=12,it.RED_EVERY_RANK_AIR=13,it.RED_EVERY_RANK_TRA=14,it.PRO_RANK_DAY_FIGHT_1=15,it.PRO_RANK_DAY_FIGHT_2=16,it.PRO_RANK_DAY_FIGHT_3=17,it.PRO_RANK_DAY_FIGHT_4=18,it.REM_RANK_DAY_FIGHT_1=19,it.REM_RANK_DAY_FIGHT_2=20,it.REM_RANK_DAY_FIGHT_3=21,it.REM_RANK_DAY_FIGHT_4=22,it.RED_IGO=25,it.RED_WHEEL=26,it.MAIL_ANNOUNCE_RED=23,it.ROOM_OFFER_CARD=24,it.RED_RENTAL=27;var ne=it;var Se=class a{static toFixed(t,e){if(t.toString().indexOf(".")==-1)return t;{let i=t.toFixed(e);return parseFloat(i)}}static toFixedWithPercent(t,e,i="+"){let n;return t.toString().indexOf(".")==-1?n=i+t*100+"%":(e=e-2,e<0&&(e=0),n=i+(t*100).toFixed(e)+"%"),n}static getGoldStr(t){let e;return t>999999?e=parseInt(String(t/1e5))+"m":e=t,e}static numStringFormat(t){let e=t;return b.instance.m_strLanguage==2?t.length>4&&(e=String(t).replace(/(\d)(?=(\d{3})+$)/g,"$1 ")):e=String(t).replace(/(\d)(?=(\d{3})+$)/g,"$1,"),e}static numSimple(t){let e=t,i=parseInt(parseInt(e)/1e3+"");return i>0?i+"k":a.numStringFormat(e)}static numStringFormat2(t){let e;if(t>999999)e=a.getNumStr(t,1e6,"M");else if(t>999)e=a.getNumStr(t,1e3,"K");else return t+"";return e}static getNumStr(t,e,i){return parseInt(Math.floor(t/e)+"")+i}static getTimeStr(t){let e;return t<3600?e=m.instance.getLanguage(9024,Math.ceil(t/60)):t<3600*24?e=m.instance.getLanguage(9025,Math.ceil(t/3600)):e=m.instance.getLanguage(9025,Math.ceil(t/(3600*24))),e}static BigInt(t){return 0}static isInteger(t){return t%1===0}static isNumber(t){return typeof t=="number"}static formatNumber(t,e=8){return Number.isInteger(t)?t:parseFloat(t.toFixed(e))}static formatNumberStr(t,e=2){return Number.isInteger(t)?t:parseFloat(t.toFixed(e)).toString()}static filterNumFormat(t,e=2,i=!1,n=!1){if(!t)return t;if(t<1e3&&t>0)if(n){var r=Math.floor(Number(parseFloat(t*10**e+"").toPrecision(16)))/10**e;return parseFloat(r.toFixed(e)).toString()}else return parseFloat(t.toFixed(e)).toString();if(t==="0.00")return t;var s=[{value:1,symbol:""},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}];i&&(s=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"}]);var o=/\.0+$|(\.[0-9]*[1-9])0+$/,l;for(l=s.length-1;l>0&&!(t>=s[l].value);l--);let c=(t/s[l].value).toString();return c.indexOf(".")>-1&&(e>0?c=c.substr(0,c.indexOf(".")+e+1):c=c.substr(0,c.indexOf(".")+e)),c.replace(o,"$1")+s[l].symbol}static fromWei(t,e,i=0){if(!t)return 0;let n=t.length-e+i;if(n<=0)return 0;let r=t.toString().slice(0,n);if(i){let s=r.length-i;if(s<=0){let o="0.";for(let l=0;l<Math.abs(s);l++)o+="0";r=o+r}else r=r.slice(0,r.length-i)+"."+r.slice(r.length-i)}return r}static getNumberSuffix(t){let e=parseInt(t,10);return isNaN(e)?t:(e%1e9).toString()}};var gd=class extends Laya.Scene{};var{regClass:bB}=Laya,Lc=class extends gd{constructor(){super(...arguments);this.currTab=0;this.arenaLv=1001;this.coinTypes=[];this.arenaType=1;this.nodeIds=[];this.selectArenaType=1;this.coinDatas=[];this.nodeDatas=[]}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}async onOpened(e){this.mouseThrough=this.mouseThrough=!0,this.updateTopInfo(),this.initNodeCombo(),this.initCoinCombo(),this.initArenaTypes(),this.onClickTab(this.selectArenaType);var i=Laya.stage.width-z.DESIGN_WIDTH>>1;this.leftX=this.leftMenu.x,this.leftMenu.x=this.leftX-i-this.leftMenu.width,Laya.Tween.to(this.leftMenu,{x:this.leftX-i},500),_.intance.testNodes()}updateTopInfo(){if(this.arenaType=k.instance.arenaType,this.arenaType==K.ARENA_TYPE_TEAM){this.btn_1.visible=this.btn_2.visible=this.btn_3.visible=!1,this.btn_4.x=this.btn_1.x;var e=this.btn_4.getChildByName("Label");e.text=m.instance.getLanguage(1769)}var i=_.intance.m_dicArenaTypes.get(this.arenaType);this.tf_name.text=m.instance.getLanguage(i.name),this.updateLocalAssets()}updateLocalAssets(){this.tf_3005.text=Se.filterNumFormat(b.instance.getConsumeValue(ve.TYPE_GOLD),0)}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_myBookings.on(Laya.Event.CLICK,this,this.onShowMyBooking);for(let e=1;e<5;e++)this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e]);this.list_room.vScrollBarSkin="",this.list_room.array=[],Laya.timer.loop(1e3,this,this.refreshRoomTime),this.btn_create.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_create]),g.intance.on(f.ROLE_INFO_CHANGE,this,this.updateTopInfo),g.intance.on($t.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),g.intance.on(f.EVENT_CHECK_ICON_SELECT,this,this.onCoinSelected),g.intance.on(f.EVENT_CHECK_NODE_SELECT,this,this.onNodeSelected),g.intance.on(f.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom)}onShowMyBooking(){A.intance.openModule(y.MyBookingView)}async onJoin(){let e=this.input_bookingUrl.text;if(e==""){T.instance.notice(m.instance.getUILang("Please input booking URL"));return}let i=De.instance.onGetBookingId(e),n=i[0];if(n){let r=i[1],s=parseInt(n),o=parseInt(r);De.instance.goBookingCreateRoomDialog(s,o)}else T.instance.notice(m.instance.getLanguage(1564))}setTab(e){for(let i=1;i<5;i++)e==i?(this["btn_"+i].getChildByName("btn_yellowBg").visible=!0,this["btn_"+i].getChildByName("Label").color="#143268"):(this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#ffffff")}onClickTab(e){if(this.currTab!=e){if(this.list_room.visible=!1,this.list_room4.visible=!1,this.currTab=e,this.showCoinCombo(),this.setTab(e),e==1){this.arenaLv=1;var i=this.getRoomByType()}else if(e==2){this.arenaLv=2;var i=this.getRoomByType()}else if(e==3){this.arenaLv=3;var i=this.getRoomByType()}else if(e==4)var i=this.getRoomByType()}}async getRoomByType(){if(Laya.timer.clear(this,this.getRoomByType),this.currTab==4){this.arenaType=k.instance.arenaType;let e=await I.requestPost("wxgame/roomPreContract/list",{lv:0,coinTypeList:this.coinTypes,arenaType:this.arenaType,nodeIds:this.nodeIds});if(this.destroyed)return;this.currTab==4&&(this.list_room4.array=e.list,this.list_room4.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0,this.list_room4.visible=!0)}else{this.arenaType=k.instance.arenaType;let e=await I.requestPost("wxgame/room/list",{lv:this.arenaLv,coinTypeList:this.coinTypes,arenaType:this.arenaType,nodeIds:this.nodeIds});if(this.destroyed)return;this.currTab!=4&&(this.list_room.array=e.roomList,this.list_room.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0,this.list_room.visible=!0)}Laya.timer.once(3e3,this,this.getRoomByType)}refreshRoomTime(){this.refreshRoomBtnRed();let e=this.list_room.array;if(!(e.length<1)){for(let i=0;i<e.length;i++)if(e[i]){let n=e[i];n.state==0?n.joinCd-=1e3:n.fightEndTime-=1e3}this.list_room.refresh()}}initArenaTypes(){var e=_.intance.m_dicArenaTypes.get(k.instance.arenaType),i=e.tabLvs,n=[1,2,3,4],r=-1;n.forEach(s=>{var o=this["btn_"+s],l=o.getChildByName("img_lock"),c=o.getChildByName("img_red");i.indexOf(s)!=-1?(o.disabled=!1,l.visible=!1,r==-1&&(r=s)):(o.disabled=!0,l.visible=!0)}),r!=-1&&(this.selectArenaType=r)}showCoinCombo(){k.instance.arenaType==3?this.list_coin.visible=!1:this.list_coin.visible=!0}initCoinCombo(){this.showCoinCombo();var e=_.intance.m_dicArenaTypes.get(k.instance.arenaType);this.coinTypes=[];var i=e.coinTypes;this.coinDatas=[],i.forEach(n=>{this.coinTypes.push(n);var r=_.intance.m_dicItems.get(n);this.coinDatas.push([n,!0,m.instance.getLanguage(r.name)])}),this.list_coin.array=this.coinDatas}onCoinSelected(){this.coinTypes=[],this.coinDatas.forEach(e=>{e[1]&&this.coinTypes.push(e[0])}),console.log("您选中了 coinType"+this.coinTypes),this.getRoomByType()}initNodeCombo(){this.nodeIds=[];var e=_.intance.m_dicNodes.values;this.nodeDatas=[],e.forEach(i=>{this.nodeIds.push(i.id),this.nodeDatas.push([i.id,!0,i])}),this.list_node.array=this.nodeDatas}onNodeSelected(){this.nodeIds=[],this.nodeDatas.forEach(e=>{e[1]&&this.nodeIds.push(e[0])}),console.log("您选中了 nodeType"+this.nodeIds),this.getRoomByType()}refreshRoomBtnRed(){var e=k.instance.arenaType;this.img_red_1.visible=b.instance.getRedDotById(ne.instance.ROOM_1_1),this.img_red_1.visible=b.instance.getRedDotById(ne.instance["ROOM_"+e+"_1"]),this.img_red_2.visible=b.instance.getRedDotById(ne.instance["ROOM_"+e+"_2"]),this.img_red_3.visible=b.instance.getRedDotById(ne.instance["ROOM_"+e+"_3"]),e==K.ARENA_TYPE_TEAM?(this.img_red_4.visible=b.instance.getRedDotById(ne.instance.ROOM_5_4),this.img_red_myBooking.visible=b.instance.getRedDotById(ne.instance.ROOM_5_4_SELF)):(this.img_red_4.visible=b.instance.getRedDotById(ne.ROOM_PRE_CONTRACT),this.img_red_myBooking.visible=b.instance.getRedDotById(ne.ROOM_PRE_CONTRACT_SELF))}async onclickBtnHandler(e){switch(e){case this.btn_create:this.currTab==4?A.intance.openModule(y.CreateRoomDialog,[K.ACTION_CREATE_BOOKING,!0,!0,0]):A.intance.openModule(y.CreateRoomDialog,[K.ACTION_CREATE,!0,!1,this.arenaLv]);break;default:T.instance.notice(m.instance.getLanguage(12));break}}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}onDisable(){g.intance.off(f.ROLE_INFO_CHANGE,this,this.updateTopInfo),g.intance.off($t.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),g.intance.off(f.EVENT_CHECK_ICON_SELECT,this,this.onCoinSelected),g.intance.off(f.EVENT_CHECK_NODE_SELECT,this,this.onNodeSelected),g.intance.off(f.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}onEnterMatchRoom(e){e?Laya.timer.once(3e3,this,this.getRoomByType):Laya.timer.clear(this,this.getRoomByType)}};Lc.M_B_FIRST_Open=!0,Lc=h([bB("Kvjumjs4Q--HdgEZ8LzawA")],Lc);var Wi=class{constructor(){}};Wi.MONTH="months",Wi.DAYS="days",Wi.HOURS="hours",Wi.MINUTES="minutes",Wi.SECOUNDS="seconds",Wi.MS="ms";var St=class St{constructor(){}static formatMM(t){if(t<=0)return"00:000";let e,i;e=t/1e3,i=t%1e3;let n="";return e<=9&&(n+="0"),n+=Math.floor(e),n+=":",i<=9?n+="00":i<=99&&(n+="0"),n+=i,n}static format(t,e=":",i=!0){if(t<=0)return i?"00:00:00":"00:00";let n,r,s,o,l;o=t/3600,s=t%3600,l=s/60,n=s%60;let c="";return i&&(o<=9&&(c+="0"),c+=Math.floor(o)+e),l<=9&&(c+="0"),c+=Math.floor(l)+e,Math.ceil(n)<=9&&(c+="0"),c+=Math.ceil(n),c}static formatWithDay(t,e=":",i=!1){if(t<=0)return"00:00";let n,r,s,o,l;r=t/86400,s=t%86400,o=s/3600,s=s%3600,l=s/60,n=s%60;let c="";return r>=1?(c=m.instance.getLanguage(1660,Math.floor(r))+" ",o<=9&&(c+="0"),i&&n%2!=0&&(e=Ee.getColorText(e,"#412b20")),c+=Math.floor(o)+e,l<=9&&(c+="0"),c+=Math.floor(l)):(o<=9&&(c+="0"),c=Math.floor(o)+e,l<=9&&(c+="0"),c+=Math.floor(l)+e,Math.ceil(n)<=9&&(c+="0"),c+=Math.ceil(n)),c}static formatWithSecondByMs(t){return`${t/1e3}`}static formatWithDayByMs(t,e=":",i=!1){if(t<=0)return"00:00";let n,r,s,o,l,c;s=t/864e5,o=t%864e5,l=o/36e5,o=o%36e5,c=o/6e4,o=o%6e4,r=o/1e3,n=o%1e3;let u="";return s>=1&&(u=m.instance.getLanguage(1660,Math.floor(s))+" "),l<=9&&(u+="0"),u+=Math.floor(l)+e,c<=9&&(u+="0"),u+=Math.floor(c)+e,Math.ceil(r)<=9&&(u+="0"),u+=Math.floor(r)+" ",u+=Math.ceil(n),u}static getTimeArray(t,e="HH-MM-SS"){if(t=Math.max(0,t),e.indexOf("-")==-1)return[];let i=[],n=e.split("-");for(let r of n)r=="DD"?i.push(Math.floor(t/St.OneDaySceond)):r=="HH"?i.push(Math.floor(t%St.OneDaySceond/St.OneHourSceond)):r=="MM"?i.push(Math.floor(t%St.OneHourSceond/St.OneMiniuteSecond)):r=="SS"&&i.push(t%St.OneMiniuteSecond);return i}static getServerDate(t){return new Date(t)}static formatTime(t){return(parseInt(t/60+"")+100).toString().substring(1)+":"+(parseInt(t%60+"")+100).toString().substring(1)}static formatTime000000(t){return t?(parseInt(t/3600+"")+100).toString().substring(1)+":"+(parseInt(t%3600/60+"")+100).toString().substring(1)+":"+(parseInt(t%60+"")+100).toString().substring(1):"00:00:00"}static formatTimeStamp(t,e="YY-MT-DD HH:MM:SS",i=!1){let n=St.getServerDate(t),r="";if(e.indexOf("YY")>=0&&(r=(i?n.getUTCFullYear():n.getFullYear())+"",e=e.replace("YY",r)),e.indexOf("MT")>=0){let s=(i?n.getUTCMonth():n.getMonth())+1;s>9?r=s+"":r="0"+s,e=e.replace("MT",r)}if(e.indexOf("DD")>=0){let s=i?n.getUTCDate():n.getDate();s>9?r=s+"":r="0"+s,e=e.replace("DD",r)}if(e.indexOf("HH")>=0){let s=i?n.getUTCHours():n.getHours();s>9?r=s+"":r="0"+s,e=e.replace("HH",r)}if(e.indexOf("MM")>=0){let s=i?n.getUTCMinutes():n.getMinutes();s>9?r=s+"":r="0"+s,e=e.replace("MM",r)}if(e.indexOf("SS")>=0){let s=i?n.getUTCSeconds():n.getSeconds();s>9?r=s+"":r="0"+s,e=e.replace("SS",r)}return e}static formatTimeStamps(t,e="YY-MT-DD HH:MM:SS"){let i=St.getServerDate(t),n=e;return n=St.parseTimeDetail(i,n,"YY",!1),n=St.parseTimeDetail(i,n,"MT",!1),n=St.parseTimeDetail(i,n,"DD",!1),n=St.parseTimeDetail(i,n,"HH",!0),n=St.parseTimeDetail(i,n,"MM",!0),n=St.parseTimeDetail(i,n,"SS",!0),n}static parseTimeDetail(t,e,i,n){if(e.indexOf(i)>=0){let r,s;i=="YY"?s=t.getFullYear():i=="MT"?s=t.getMonth()+1:i=="DD"?s=t.getDate():i=="HH"?s=t.getHours():i=="MM"?s=t.getMinutes():i=="SS"&&(s=t.getSeconds()),s>9||!n?r=s.toString():r="0"+s,e=e.replace(i,r)}return e}static getServerTimeStr(){return St.formatTimeStamp(Laya.timer.currTimer)}static getTimeArr(){return St.getServerTimeStr().split("/")}static get getDay(){let e=St.getServerTimeStr().split("/");return parseInt(e[2])}static parseSheetTime(t){let e="";if(t){let i=t.length;for(let n=0;n<i;n++){let r="";t[n]<10?r="0"+t[n]:r=t[n],n!==i-1&&(r=r+":"),e+=r}}return e}static dateStringToTimestamp(t,e){let[i,n,r]=t.split("-").map(Number),s=Number(e),o=new Date(i,n-1,r,s).getTime();return Number(o)}static getTimestamp(t,e,i,n,r){return new Date(t,e-1,i,n,r).getTime()}static getCurrentDayTimestamp(){let t=new Date,e=t.getHours();return t.setHours(e,0,0,0),t.getTime()}static getYearMonthDat(t){let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):""+(e.getMonth()+1),r=e.getDate()<10?"0"+e.getDate():""+e.getDate();return`${i}-${n}-${r}`}static formatDayAndTime(t,e="-"){let i=new Date(t),n=i.getFullYear(),r=String(i.getMonth()+1).padStart(2,"0"),s=String(i.getDate()).padStart(2,"0"),o=String(i.getHours()).padStart(2,"0"),l=String(i.getMinutes()).padStart(2,"0");return{date:`${n}${e}${r}${e}${s}`,time:`${o}:${l}`}}static formatTimeAgo(t){return t<60*1e3?m.instance.getLanguage(1188):t<60*60*1e3?m.instance.getLanguage(2004,Math.floor(t/6e4)):t<24*60*60*1e3?m.instance.getLanguage(2003,Math.floor(t/36e5)):m.instance.getLanguage(2002,Math.floor(t/(24*60*60*1e3)))}static colorTimeAgo(t){return t<60*1e3?"#43ef74":"#b4b4b4"}static formatTimeExpires(t){return t<60*1e3?m.instance.getLanguage(1214,t):t<60*60*1e3?m.instance.getLanguage(1215,Math.floor(t/6e4)):t<24*60*60*1e3?m.instance.getLanguage(1216,Math.floor(t/36e5)):m.instance.getLanguage(1217,Math.floor(t/(24*60*60*1e3)))}static getTimeDifference(t,e=Wi.MONTH){let i=new Date,r=new Date(t*1e3).getTime()-i.getTime();if(r<0)return{months:0,days:0,hours:0,minutes:0,seconds:0,ms:0};let s=r,o=Math.floor(r/1e3),l=Math.floor(o/60),c=Math.floor(l/60),u=Math.floor(c/24),p=Math.floor(u/30);return e==="months"?(u%=30,c%=24,l%=60,o%=60,s%=1e3):e==="days"?(c%=24,l%=60,o%=60,s%=1e3,p=0):e==="hours"?(l%=60,o%=60,s%=1e3,p=0,u=0):e==="minutes"?(o%=60,s%=1e3,p=0,u=0,c=0):e==="seconds"?(s%=1e3,p=0,u=0,c=0,l=0):e==="ms"&&(p=0,u=0,c=0,l=0,o=0),{months:e==="months"?p:0,days:e==="months"||e==="days"?u:0,hours:e==="months"||e==="days"||e==="hours"?c:0,minutes:e==="months"||e==="days"||e==="hours"||e==="minutes"?l:0,seconds:e!=="ms"?o:0,ms:s}}};St.OneDaySceond=24*3600,St.OneHourSceond=3600,St.OneMiniuteSecond=60;var ce=St;var Ld=class extends Laya.Dialog{};var{regClass:gB}=Laya,_d=class extends Ld{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(e){let i=e.target;i.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):i.name=="cancleBtn"&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(e){if(e){if(this._okHandler=e.okHandler,this._cancelHandler=e.cancelHandler,this.destroyDoCancel=e.destroyDoCancel,e.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):e.flag&P.YES&&!(e.flag&P.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):e.flag&P.NO&&!(e.flag&P.YES)?this.okBtn.visible=!1:e.flag&P.YES&&e.flag&P.NO,e.data){var i=e.data,n=_.intance.m_dicGroupWar.get(i.groupId);if(n){var r=m.instance.getMultiLan(i.applicant.shortUnionName);r||(r="N/A"),this.tf_inviteTitle.text=m.instance.getLanguage(1654,i.applicant.name,r);var s=_.intance.m_dicArenaDic.get(i.arenaId);this.tf_arenaName.text=m.instance.getLanguage(s.name);var o=s.coinType,l=_.intance.m_dicItems.get(o),c=m.instance.getLanguage(l.name);this.tf_token.text=c,this.tf_groupName.text=m.instance.getLanguage(n.name),this.tf_startTime.text=ce.formatTimeStamp(i.startTime,"MT-DD HH:MM")}}e.initHandler&&e.initHandler.runWith(this)}}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(e){e!="side"&&this.canClose&&super.close(e)}};_d=h([gB("TkYqV_cDTf6zOkSNHZa8ng")],_d);var vd=class extends Laya.Box{};var{regClass:LB}=Laya,xd=class extends vd{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.check_coin.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!e)return;this.addEvent();let i=e;this.check_coin.selected=i[1];var n=i[2];this.img_node.skin=D.instance.getNodeIcon(n.area)}onCheck(){this._dataSource[1]=this.check_coin.selected,g.intance.event(f.EVENT_CHECK_NODE_SELECT)}};xd=h([LB("81z6wk15RUi5m_pFud3KHg")],xd);var Id=class extends Laya.Box{};var{regClass:_B}=Laya,Ed=class extends Id{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!e)return;this.addEvent();let i=e;this.tf_coin.text=m.instance.getLanguage(i[3])}onChange(e){e?this.check_coin.selected=!0:this.check_coin.selected=!1}};Ed=h([_B("zVQ6gbw9T-e9xifHx-wXrg")],Ed);var wd=class extends Laya.Dialog{};var{regClass:vB}=Laya,Td=class extends wd{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(e){let i=e.target;i.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):i.name=="cancleBtn"&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(e){if(e){if(this._okHandler=e.okHandler,this._cancelHandler=e.cancelHandler,this.destroyDoCancel=e.destroyDoCancel,e.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):e.flag&P.YES&&!(e.flag&P.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):e.flag&P.NO&&!(e.flag&P.YES)?this.okBtn.visible=!1:e.flag&P.YES&&e.flag&P.NO,e.data){var i=e.data,n=_.intance.m_dicGroupWar.get(i.groupId);if(n){this.tf_inviteTitle.text=m.instance.getLanguage(1628,i.friendName,n.groupPer);var r=_.intance.m_dicArenaDic.get(i.arenaId);this.tf_arenaName.text=m.instance.getLanguage(r.name);var s=r.coinType,o=_.intance.m_dicItems.get(s),l=m.instance.getLanguage(o.name);this.tf_token.text=l,this.tf_groupName.text=m.instance.getLanguage(n.name),this.tf_startTime.text=ce.formatTimeStamp(i.startTime,"MT-DD HH:MM")}}e.initHandler&&e.initHandler.runWith(this)}}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(e){e!="side"&&this.canClose&&super.close(e)}};Td=h([vB("8_1WgbqTTIqRSqG5gME9Rg")],Td);var Cd=class extends Laya.Dialog{};var{regClass:xB}=Laya,Sd=class extends Cd{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack)}onOpened(e){this.initLuckDrawView()}async initLuckDrawView(){this.list_room4.visible=!1;var e=k.instance.arenaType;let i=await I.requestPost("wxgame/roomPreContract/selfList",{arenaType:e});this.list_room4.array=i.list,this.list_room4.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0,this.list_room4.visible=!0}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};Sd=h([xB("n7Y3cABUSqauk_SyBPv2qg")],Sd);var Dd=class extends Laya.Dialog{};var{regClass:IB}=Laya,Ad=class extends Dd{constructor(){super();this.friendData=null}onEnable(){}setOpenData(e){this.roomId=e[0],this.teamId=e[1],this.onGetList()}async onGetList(){let e=await I.requestPost("wxgame/friend/friendList",{});e&&e.list&&(b.instance.friendNum=e.list.length,this.list_friend.array=e.list,this.list_friend.visible=!0,this.friendData=e.list),(!e||!e.list||e.list.length<1)&&(this.noDataBox.visible=!0),console.log(e)}};Ad=h([IB("0iWaxfs9RBKN2SAQf6r1dw")],Ad);var kd=class extends Laya.Box{};var{regClass:EB}=Laya,Bd=class extends kd{constructor(){super();this.friendData=null;this.invited=!1}addEvent(){this.btn_invite.on(Laya.Event.CLICK,this,this.onClickInvite)}onDisable(){this.removeEvent()}removeEvent(){this.btn_invite.off(Laya.Event.CLICK,this,this.onClickInvite)}set dataSource(e){super.dataSource=e,e&&(this.friendData=e,this.setData(e),this.addEvent())}setData(e){this.tf_name.text=e.name,this.img_flag.skin=D.instance.getCountryIcon(e.country),this.playerIcon.headSkin=e.icon,e.online?(this.tf_online.text="on line",this.tf_online.color="#43ef74"):(this.tf_online.text=ce.formatTimeAgo(e.lastLoginTime),this.tf_online.color="#b4b4b4")}async onClickInvite(){if(this.invited)return;let e=this.friendData.id,i=this.friendData.openid;console.log("onClickInvite",e,i);var n=this.parent.parent.parent,r=n.roomId,s=n.teamId,o=await I.requestPost("wxgame/roomPreContract/groupInvite",{roomId:r,teamId:s,targetPid:e});if(o){if(this.destroyed)return;this.btn_invite.skin="res/airdrop/img_com_join_button_1.png",this.btn_invite.label="Invited",this.btn_invite.labelColors="#4789c7",this.invited=!0}}};Bd=h([EB("fmYAqp9UQqmSfuho5FGK7g")],Bd);var Md=class extends Laya.Dialog{};var{regClass:wB}=Laya,Rd=class extends Md{constructor(){super()}onEnable(){this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite)}onInvite(){var e=this.roomId,i=this.teamDto.teamId;A.intance.openModule(y.MyFriendDialog,[e,i])}setOpenData(e){this.roomId=e[0],this.teamDto=e[1],this.tf_num.text=`${this.teamDto.curNum}/${this.teamDto.totalNum}`,this.teamDto&&this.teamDto.players&&(this.btn_invite.disabled=this.teamDto.curNum>=this.teamDto.totalNum,this.list_members.array=this.teamDto.players,!this.teamDto.players||this.teamDto.players.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}};Rd=h([wB("hX77g-jXRXWpDYzwnZesiQ")],Rd);var Pd=class extends Laya.Box{};var{regClass:TB}=Laya,Nd=class extends Pd{constructor(){super(...arguments);this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){let e=this.roomPlayer.openId;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}set dataSource(e){super.dataSource=e,this.roomPlayer=e,this.roomPlayer&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){let e=this.roomPlayer.icon;this.playerIcon.headSkin=e,this.tf_name.text=this.roomPlayer.name,this.tf_union.text=m.instance.getMultiLan(this.roomPlayer.shortUnionName),this.tf_address.text=Be.abbreviateString(this.roomPlayer.openId,18)}};Nd=h([TB("MsLl8of8Q-66zTyBsBmOng")],Nd);var Di=class{constructor(){}};Di.GREEN="#2ac84b",Di.YELLOW="#e8c833",Di.RED="#e04343";var Od=class extends Laya.Box{};var{regClass:CB}=Laya,Hd=class extends Od{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.nodeItem=e,this.img_node.skin=D.instance.getNodeIcon(this.nodeItem.area),this.tf_node.text=m.instance.getLanguage(this.nodeItem.name),this.onGameDelay(this.nodeItem.dT)}onGameDelay(e){var i=_.intance.getGeneralValueById(6),n=i[0],r=i[1];this.tf_delay.text=e+"ms",e>r?(this.img_delay.skin="res/common/comm/img_com_xinhao3.png",this.tf_delay.color=Di.RED):e>n?(this.img_delay.skin="res/common/comm/img_com_xinhao2.png",this.tf_delay.color=Di.YELLOW):(this.img_delay.skin="res/common/comm/img_com_xinhao1.png",this.tf_delay.color=Di.GREEN)}startTest(){Laya.timer.loop(5e3,this,this.onTestUrl)}onTestUrl(){I.stopHeartInStage||(this.nodeItem&&this.nodeItem.testUrl(),this.onGameDelay(this.nodeItem.dT))}onDisable(){Laya.timer.clearAll(this)}};Hd=h([CB("hhMSfaGLSJmVqJcF08xLgA")],Hd);var Ud=class extends Laya.Box{};var{regClass:SB}=Laya,Vd=class extends Ud{addEvent(){}set dataSource(e){super.dataSource=e;var i=e;i&&(this.addEvent(),this.img_icon.skin=D.instance.getNodeIcon(i.area),this.tf_name.text=m.instance.getLanguage(i.name),this.nodeDelaySign.dataSource=i)}onChange(e){e?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};Vd=h([SB("3WEF588kThqDCYUgf5gM6w")],Vd);var Fd=class extends Laya.Dialog{};var{regClass:DB}=Laya,Gd=class extends Fd{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}setOpenData(e){e&&(this.roomId=e[0],this.teamId=e[1],this.leaderName=e[2])}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy),this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite),this.initContainer()}onClose(){this.close()}onDisable(){}initContainer(){this.tf_tip.text=m.instance.getLanguage(1652),this.tf_leaderName.text=this.leaderName,this.tf_teamId.text=this.teamId+"";var e=this.roomId,i=this.teamId;let n=De.instance.onGetNewUrl(e,i);this.input_bookingUrl.text=n}onInvite(){var e=this.roomId,i=this.teamId;A.intance.openModule(y.MyFriendDialog,[e,i])}async onJoin(){let e=this.input_bookingUrl.text;if(e==""){T.instance.notice(m.instance.getUILang("Please input booking URL"));return}let i=De.instance.onGetBookingId(e),n=i[0];if(n){let r=i[1],s=parseInt(n),o=parseInt(r);De.instance.goBookingCreateRoomDialog(s,o)}else T.instance.notice(m.instance.getLanguage(1564))}onClickCopy(){let e=this.input_bookingUrl.text;e&&(doCopy(e),T.instance.notice(m.instance.getLanguage(132)))}};Gd=h([DB("Dy-cG4svSO2sXy3rqqLgtA")],Gd);var Kd=class extends Laya.Dialog{};var{regClass:AB}=Laya,qd=class extends Kd{constructor(){super()}onEnable(){this.btn_create.on(Laya.Event.CLICK,this,this.onCreate)}onCreate(){De.instance.goBookingCreateRoomDialog(this.roomId)}async setOpenData(e){this.list_members.array=[],this.roomId=e,this.onUpdateData(),Laya.timer.loop(3e3,this,this.onUpdateData)}async onUpdateData(){this.destroyed||I.requestPost("wxgame/roomPreContract/teamList",{roomId:this.roomId}).then(e=>{if(!this.destroyed){var i=e.teamDtoList;this.myTeamId=e.myTeamId,this.btn_create.disabled=this.myTeamId>0,i&&i.length&&(this.list_members.array=i,!i||i.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}}).catch(e=>{this.close()})}onDisable(){Laya.timer.clearAll(this)}};qd=h([AB("vn92QbT4TOu8O2hiUdYh1w")],qd);var Wd=class extends Laya.Box{};var{regClass:kB}=Laya,Yd=class extends Wd{constructor(){super(...arguments);this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_view.on(Laya.Event.CLICK,this,this.onView),this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite),this.btn_share.on(Laya.Event.CLICK,this,this.onShare),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_apply.on(Laya.Event.CLICK,this,this.onApply),this.isAddEvent=!0)}onView(){var e=this.parent.parent.parent,i=e.roomId,n=this.teamDto;A.intance.openModule(y.MyTeamDialog,[i,n])}onInvite(){var e=this.parent.parent.parent,i=e.roomId,n=this.teamDto.teamId;A.intance.openModule(y.MyFriendDialog,[i,n])}onShare(){var e=this.parent.parent.parent,i=e.roomId,n=this.teamDto.teamId;A.intance.openModule(y.TeamShareDialog,[i,n])}onJoin(){A.intance.openModule(y.TeamJoinUsingDialog)}async onApply(){var e=this.parent.parent.parent,i=e.roomId,n=this.teamDto.teamId,r=await I.requestPost("wxgame/roomPreContract/groupJoin",{roomId:i,teamId:n});if(r){if(this.destroyed)return;Ee.popTip(1650)}}set dataSource(e){super.dataSource=e,this.teamDto=e,this.teamDto&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.leader=this.teamDto.leaderPlayer;let e=this.leader.icon;this.playerIcon.headSkin=e,this.tf_name.text=this.leader.name,this.tf_union.text=m.instance.getMultiLan(this.leader.shortUnionName),this.teamDto.curNum<this.teamDto.totalNum?(this.img_dengdai.skin="res/booking/img_com_dengdai.png",this.tf_people.text=`<font color="#e84d34">${this.teamDto.curNum}</font>/${this.teamDto.totalNum}`):(this.img_dengdai.skin="res/booking/img_com_gou.png",this.tf_people.text=`<font color="#25ff63">${this.teamDto.curNum}</font>/${this.teamDto.totalNum}`);var i=this.parent.parent.parent,n=i.myTeamId;n&&this.teamDto.teamId==n?(this.btn_invite.visible=!0,this.btn_share.visible=!0,this.btn_join.visible=!1,this.btn_apply.visible=!1,this.teamDto.curNum==this.teamDto.totalNum?(this.setBtnDisabled(this.btn_invite,!0),this.setBtnDisabled(this.btn_share,!0)):(this.setBtnDisabled(this.btn_invite,!1),this.setBtnDisabled(this.btn_share,!1))):(this.btn_invite.visible=!1,this.btn_share.visible=!1,this.btn_join.visible=!0,this.btn_apply.visible=!0,this.teamDto.curNum==this.teamDto.totalNum?(this.setBtnDisabled(this.btn_join,!0),this.setBtnDisabled(this.btn_apply,!0)):n?(this.setBtnDisabled(this.btn_join,!0),this.setBtnDisabled(this.btn_apply,!0)):(this.setBtnDisabled(this.btn_join,!1),this.setBtnDisabled(this.btn_apply,!1)))}setBtnDisabled(e,i){i?(e.skin="res/booking/img_com_anniu2.png",e.labelColors="#11c5fa"):(e.skin="res/booking/img_com_anniu1.png",e.labelColors="#ffffff"),e.disabled=i}};Yd=h([kB("7oyF4ImKSpieTvgTF4Thew")],Yd);var zd=class extends Laya.Dialog{};var{regClass:BB}=Laya,jd=class extends zd{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}setOpenData(e){}onEnable(){this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.initContainer()}onClose(){this.close()}onDisable(){}initContainer(){this.tf_tip.text=m.instance.getLanguage(1648),this.input_bookingUrl.text=""}async onJoin(){let e=this.input_bookingUrl.text;if(e==""){T.instance.notice(m.instance.getUILang("Please input booking URL"));return}let i=De.instance.onGetBookingId(e),n=i[0];if(n){let r=i[1],s=parseInt(n),o=parseInt(r);De.instance.goBookingCreateRoomDialog(s,o),this.close()}else T.instance.notice(m.instance.getLanguage(1564))}};jd=h([BB("FJTW2dtzTA-7IRwokvDqbQ")],jd);var $d=class extends Laya.Dialog{};var{regClass:MB}=Laya,Xd=class extends $d{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}setOpenData(e){e&&(this.roomId=e[0],this.teamId=e[1])}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy),this.initContainer()}onClose(){this.close()}onDisable(){}initContainer(){this.tf_tip.text=m.instance.getLanguage(1651);var e=this.roomId,i=this.teamId;let n=De.instance.onGetNewUrl(e,i);this.input_bookingUrl.text=n}async onJoin(){let e=this.input_bookingUrl.text;if(e==""){T.instance.notice(m.instance.getUILang("Please input booking URL"));return}let i=De.instance.onGetBookingId(e),n=i[0];if(n){let r=i[1],s=parseInt(n),o=parseInt(r);De.instance.goBookingCreateRoomDialog(s,o)}else T.instance.notice(m.instance.getLanguage(1564))}onClickCopy(){let e=this.input_bookingUrl.text;e&&(doCopy(e),T.instance.notice(m.instance.getLanguage(132)))}};Xd=h([MB("WZneRofHTmO4le4SOiIw8A")],Xd);var Qd=class extends Laya.Dialog{};var{regClass:RB}=Laya,Jd=class extends Qd{constructor(){super()}onEnable(){this.list_airdrop.visible=!1,this.tf_consume.text=m.instance.getUILang("Consume items"),this.tf_value.text=m.instance.getUILang("value/U"),this.setOpenData()}async setOpenData(){var t=await I.requestPost("wxgame/money/drawTokenPayOutRecord",{});t&&(t.records.push(void 0),this.list_airdrop.array=t.records,this.list_airdrop.visible=!0,!t.records||t.records.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onDisable(){}};Jd=h([RB("u4LW1QxJTQOj64w92cnRVg")],Jd);var Zd=class extends Laya.Box{};var{regClass:PB}=Laya,ef=class extends Zd{constructor(){super()}addEvent(){}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.setData(t),this.addEvent()}setData(t){let e=_.intance.getPuzzleExchangeByName("WBNB").value,i=ce.formatDayAndTime(t.time);this.tf_day.text=i.date,this.tf_consume.text=`${t.count}`,this.tf_value.text=`${t.count*e}`,t.puzzleId==1?this.tf_limit.text=`${Se.filterNumFormat(t.coinValue,2)}`:this.tf_limit.text=`${Se.filterNumFormat(t.coinValue,6)}`;let n=_.intance.getPuzzleExchange(t.puzzleId).name;this.tf_type.text=`${n}`}};ef=h([PB("gHc-YmsARYaK65kwDLBAAw")],ef);var tf=class extends Laya.Scene{};var Ge=class{constructor(){}};Ge.TYPE_Consumption=1,Ge.TYPE_Equipment=2,Ge.TYPE_Currency=3,Ge.TYPE_Hero=4,Ge.TYPE_Fragment=5,Ge.TYPE_CARD=6,Ge.CHOOSE_Wallet=1,Ge.CHOOSE_PutOn=2;function af(a,t){var e;t===void 0&&(t="0");var i=0,n=-1;a[0]=="-"&&(a=a.substring(1),HE(a)||(i++,n=1,a.length)),t[0]=="-"&&(t=t.substring(1),HE(t)||(i++,n=2,t.length)),a=ui(a),t=ui(t),e=KE(ui(a),ui(t)),a=e[0],t=e[1],i==1&&(n===1?a=NE(a):n===2&&(t=NE(t)));var r=JS(a,t);return i?i==2?"-"+ui(r):a.length<r.length?ui(r.substring(1)):"-"+ui(NE(r)):ui(r)}function NE(a){if(HE(a))return a;for(var t="",e=a.length,i=a.split(".")[1],n=i?i.length:0,r=0;r<e;r++)a[r]>="0"&&a[r]<="9"?t+=9-parseInt(a[r]):t+=a[r];var s=n>0?"0."+new Array(n).join("0")+"1":"1";return JS(t,s)}function ui(a){var t=a.split(".");for(t[0]||(t[0]="0");t[0][0]=="0"&&t[0].length>1;)t[0]=t[0].substring(1);return t[0]+(t[1]?"."+t[1]:"")}function KE(a,t){var e=a.split("."),i=t.split("."),n=e[0].length,r=i[0].length;return n>r?i[0]=new Array(Math.abs(n-r)+1).join("0")+(i[0]?i[0]:""):e[0]=new Array(Math.abs(n-r)+1).join("0")+(e[0]?e[0]:""),n=e[1]?e[1].length:0,r=i[1]?i[1].length:0,(n||r)&&(n>r?i[1]=(i[1]?i[1]:"")+new Array(Math.abs(n-r)+1).join("0"):e[1]=(e[1]?e[1]:"")+new Array(Math.abs(n-r)+1).join("0")),a=e[0]+(e[1]?"."+e[1]:""),t=i[0]+(i[1]?"."+i[1]:""),[a,t]}function JS(a,t){var e;e=KE(a,t),a=e[0],t=e[1];for(var i="",n=0,r=a.length-1;r>=0;r--){if(a[r]==="."){i="."+i;continue}var s=parseInt(a[r])+parseInt(t[r])+n;i=s%10+i,n=Math.floor(s/10)}return n?n.toString()+i:i}function HE(a){return/^0[0]*[.]{0,1}[0]*$/.test(a)}function zS(a){return(typeof a=="number"||typeof a=="bigint")&&(a=a.toString()),a[0]=="-"?a.substring(1):a}var Mt;(function(a){a[a.CEILING=0]="CEILING",a[a.DOWN=1]="DOWN",a[a.FLOOR=2]="FLOOR",a[a.HALF_DOWN=3]="HALF_DOWN",a[a.HALF_EVEN=4]="HALF_EVEN",a[a.HALF_UP=5]="HALF_UP",a[a.UNNECESSARY=6]="UNNECESSARY",a[a.UP=7]="UP"})(Mt||(Mt={}));function _c(a,t,e){if(t===void 0&&(t=0),e===void 0&&(e=Mt.HALF_EVEN),e===Mt.UNNECESSARY)throw new Error("UNNECESSARY Rounding Mode has not yet been implemented");(typeof a=="number"||typeof a=="bigint")&&(a=a.toString());var i=!1;a[0]==="-"&&(i=!0,a=a.substring(1));var n=a.split("."),r=n[0],s=n[1];if(t<0){if(t=-t,r.length<=t)return"0";var o=r.substr(0,r.length-t);return a=o+"."+r.substr(r.length-t)+s,o=_c(a,0,e),(i?"-":"")+o+new Array(t+1).join("0")}if(t==0)return r.length,jS(n[1],r,i,e)&&(r=OE(r)),(i&&parseInt(r)?"-":"")+r;if(n[1]){if(n[1].length<t)return(i?"-":"")+r+"."+n[1]+new Array(t-n[1].length+1).join("0")}else return(i?"-":"")+r+"."+new Array(t+1).join("0");s=n[1].substring(0,t);var l=n[1].substring(t);return l&&jS(l,s,i,e)&&(s=OE(s),s.length>t)?(i?"-":"")+OE(r,parseInt(s[0]))+"."+s.substring(1):(i&&(parseInt(r)||parseInt(s))?"-":"")+r+"."+s}function jS(a,t,e,i){if(!a||a===new Array(a.length+1).join("0")||i===Mt.DOWN||!e&&i===Mt.FLOOR||e&&i===Mt.CEILING)return!1;if(i===Mt.UP||e&&i===Mt.FLOOR||!e&&i===Mt.CEILING)return!0;var n="5"+new Array(a.length).join("0");if(a>n)return!0;if(a<n)return!1;switch(i){case Mt.HALF_DOWN:return!1;case Mt.HALF_UP:return!0;case Mt.HALF_EVEN:default:return parseInt(t[t.length-1])%2==1}}function OE(a,t){t===void 0&&(t=0),t||(t=1),typeof a=="number"&&a.toString();for(var e=a.length-1,i="",n=e;n>=0;n--){var r=parseInt(a[n])+t;r==10?(t=1,r=0):t=0,i+=r}return t&&(i+=t),i.split("").reverse().join("")}function Xn(a){var t=a[0]==="-";for(t&&(a=a.substr(1));a[0]=="0";)a=a.substr(1);if(a.indexOf(".")!=-1)for(;a[a.length-1]=="0";)a=a.substr(0,a.length-1);return a==""||a=="."?a="0":a[a.length-1]=="."&&(a=a.substr(0,a.length-1)),a[0]=="."&&(a="0"+a),t&&a!="0"&&(a="-"+a),a}function UE(a,t){a=a.toString(),t=t.toString();var e=0;a[0]=="-"&&(e++,a=a.substr(1)),t[0]=="-"&&(e++,t=t.substr(1)),a=Xn(a),t=Xn(t);var i=0,n=0;a.indexOf(".")!=-1&&(i=a.length-a.indexOf(".")-1),t.indexOf(".")!=-1&&(n=t.length-t.indexOf(".")-1);var r=i+n;if(a=Xn(a.replace(".","")),t=Xn(t.replace(".","")),a.length<t.length){var s=a;a=t,t=s}if(t=="0")return"0";for(var o=t.length,l=0,c=[],u=o-1,p="",d=0;d<o;d++)c[d]=a.length-1;for(var d=0;d<2*a.length;d++){for(var L=0,v=t.length-1;v>=u&&v>=0;v--)c[v]>-1&&c[v]<a.length&&(L+=parseInt(a[c[v]--])*parseInt(t[v]));L+=l,l=Math.floor(L/10),p=L%10+p,u--}return p=Xn(NB(p,r)),e==1&&(p="-"+p),p}function NB(a,t){return t==0?a:(a=t>=a.length?new Array(t-a.length+1).join("0")+a:a,a.substr(0,a.length-t)+"."+a.substr(a.length-t,t))}function VE(a,t,e){if(e===void 0&&(e=8),t==0)throw new Error("Cannot divide by 0");if(a=a.toString(),t=t.toString(),a=a.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),t=t.replace(/(\.\d*?[1-9])0+$/g,"$1").replace(/\.0+$/,""),a==0)return"0";var i=0;t[0]=="-"&&(t=t.substring(1),i++),a[0]=="-"&&(a=a.substring(1),i++);var n=t.indexOf(".")>0?t.length-t.indexOf(".")-1:-1;if(t=ui(t.replace(".","")),n>=0){var r=a.indexOf(".")>0?a.length-a.indexOf(".")-1:-1;if(r==-1)a=ui(a+new Array(n+1).join("0"));else if(n>r)a=a.replace(".",""),a=ui(a+new Array(n-r+1).join("0"));else if(n<r){a=a.replace(".","");var s=a.length-r+n;a=ui(a.substring(0,s)+"."+a.substring(s))}else n==r&&(a=ui(a.replace(".","")))}var o=0,l=t.length,c="",u=a.indexOf(".")>-1&&a.indexOf(".")<l?a.substring(0,l+1):a.substring(0,l);if(a=a.indexOf(".")>-1&&a.indexOf(".")<l?a.substring(l+1):a.substring(l),u.indexOf(".")>-1){var p=u.length-u.indexOf(".")-1;u=u.replace(".",""),l>u.length&&(p+=l-u.length,u=u+new Array(l-u.length+1).join("0")),o=p,c="0."+new Array(p).join("0")}for(e=e+2;o<=e;){for(var d=0;parseInt(u)>=parseInt(t);)u=af(u,"-"+t),d++;c+=d,a?(a[0]=="."&&(c+=".",o++,a=a.substring(1)),u=u+a.substring(0,1),a=a.substring(1)):(o||(c+="."),o++,u=u+"0")}return(i==1?"-":"")+ui(_c(c,e-2))}function FE(a,t){return a=a.toString(),t=t.toString(),t=GE(t),af(a,t)}function GE(a){return a[0]=="-"?a=a.substr(1):a="-"+a,a}function $S(a,t){if(t==0)throw new Error("Cannot divide by 0");a=a.toString(),t=t.toString(),XS(a),XS(t);var e="";a[0]=="-"&&(e="-",a=a.substr(1)),t[0]=="-"&&(t=t.substr(1));var i=FE(a,UE(t,_c(VE(a,t),0,Mt.FLOOR)));return e+i}function XS(a){if(a.indexOf(".")!=-1)throw new Error("Modulus of non-integers not supported")}function QS(a,t){var e,i,n=!1;if(e=[a,t].map(function(s){return Xn(s)}),a=e[0],t=e[1],a[0]=="-"&&t[0]!="-")return-1;if(a[0]!="-"&&t[0]=="-")return 1;if(a[0]=="-"&&t[0]=="-"&&(a=a.substr(1),t=t.substr(1),n=!0),i=KE(a,t),a=i[0],t=i[1],a.localeCompare(t)==0)return 0;for(var r=0;r<a.length;r++)if(a[r]!=t[r])return a[r]>t[r]?n?-1:1:n?1:-1;return 0}var fi=function(){function a(t){t===void 0&&(t="0"),this.value=a.validate(t)}return a.validate=function(t){if(t){if(t=t.toString(),isNaN(t))throw Error("Parameter is not a number: "+t);t[0]=="+"&&(t=t.substring(1))}else t="0";if(t.startsWith(".")?t="0"+t:t.startsWith("-.")&&(t="-0"+t.substr(1)),/e/i.test(t)){var e=t.split(/[eE]/),i=e[0],n=e[1];i=ui(i);var r="";i[0]=="-"&&(r="-",i=i.substring(1)),i.indexOf(".")>=0?(n=parseInt(n)+i.indexOf("."),i=i.replace(".","")):n=parseInt(n)+i.length,i.length<n?t=r+i+new Array(n-i.length+1).join("0"):i.length>=n&&n>0?t=r+ui(i.substring(0,n))+(i.length>n?"."+i.substring(n):""):t=r+"0."+new Array(-n+1).join("0")+i}return t},a.prototype.getValue=function(){return this.value},a.prototype.setValue=function(t){this.value=a.validate(t)},a.getPrettyValue=function(t,e,i){e===void 0&&(e=3),i===void 0&&(i=","),t=a.validate(t);var n=t.charAt(0)=="-";n&&(t=t.substring(1));var r=t.indexOf(".");r=r>0?r:t.length;for(var s="",o=r;o>0;)o<e?(e=o,o=0):o-=e,s=t.substring(o,o+e)+(o<r-e&&o>=0?i:"")+s;return(n?"-":"")+s+t.substring(r)},a.prototype.getPrettyValue=function(t,e){return t===void 0&&(t=3),e===void 0&&(e=","),a.getPrettyValue(this.value,t,e)},a.round=function(t,e,i){if(e===void 0&&(e=0),i===void 0&&(i=Mt.HALF_EVEN),t=a.validate(t),isNaN(e))throw Error("Precision is not a number: "+e);return _c(t,e,i)},a.prototype.round=function(t,e){if(t===void 0&&(t=0),e===void 0&&(e=Mt.HALF_EVEN),isNaN(t))throw Error("Precision is not a number: "+t);return new a(_c(this.value,t,e))},a.abs=function(t){return t=a.validate(t),zS(t)},a.prototype.abs=function(){return new a(zS(this.value))},a.floor=function(t){return t=a.validate(t),t.indexOf(".")===-1?t:a.round(t,0,Mt.FLOOR)},a.prototype.floor=function(){return this.value.indexOf(".")===-1?new a(this.value):new a(this.value).round(0,Mt.FLOOR)},a.ceil=function(t){return t=a.validate(t),t.indexOf(".")===-1?t:a.round(t,0,Mt.CEILING)},a.prototype.ceil=function(){return this.value.indexOf(".")===-1?new a(this.value):new a(this.value).round(0,Mt.CEILING)},a.add=function(t,e){return t=a.validate(t),e=a.validate(e),af(t,e)},a.prototype.add=function(t){return new a(af(this.value,t.getValue()))},a.subtract=function(t,e){return t=a.validate(t),e=a.validate(e),FE(t,e)},a.prototype.subtract=function(t){return new a(FE(this.value,t.getValue()))},a.multiply=function(t,e){return t=a.validate(t),e=a.validate(e),UE(t,e)},a.prototype.multiply=function(t){return new a(UE(this.value,t.getValue()))},a.divide=function(t,e,i){return t=a.validate(t),e=a.validate(e),VE(t,e,i)},a.prototype.divide=function(t,e){return new a(VE(this.value,t.getValue(),e))},a.modulus=function(t,e){return t=a.validate(t),e=a.validate(e),$S(t,e)},a.prototype.modulus=function(t){return new a($S(this.value,t.getValue()))},a.compareTo=function(t,e){return t=a.validate(t),e=a.validate(e),QS(t,e)},a.prototype.compareTo=function(t){return QS(this.value,t.getValue())},a.negate=function(t){return t=a.validate(t),GE(t)},a.prototype.negate=function(){return new a(GE(this.value))},a.stripTrailingZero=function(t){return t=a.validate(t),Xn(t)},a.prototype.stripTrailingZero=function(){return new a(Xn(this.value))},a.RoundingModes=Mt,a}();var vc=class{};var{regClass:OB}=Laya,nf=class extends tf{constructor(){super(...arguments);this.withdrawText=null;this.allProp=[];this.puzzleNum=0;this.addPuzzleNum=0;this.wbnbRate=0;this.logPage=1;this.logPageSize=0;this.isSearch=!1;this.btnLock=!1;this.tokenData1=[];this.tokenDataAir=[];this.tokenTransData=[];this.currTab=0;this.type=1;this.coinType=-1;this.currencyTokenId=0;this.items=[]}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onOpened(e){this.list_champ.array=[],e&&e.length>1&&(this.type=e[0],this.coinType=e[1],this.onClickTab(this.type)),this.withdrawText=this.withdrawCode.prompt}onEnable(){g.intance.on(f.EVENT_WELFARE_CLAIM,this,this.onClaimWelfare),this.btn_champDetail.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_champDetail]),this.btn_champRecord.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_champRecord]),this.btn_withdrawRecord.label=m.instance.getUILang("ExtractionRecords"),this.btn_airRecord.label=m.instance.getUILang("ExtractionRecords"),this.tf_serviceRate1.text=m.instance.getUILang("service rate"),this.tf_tokenLabMont.text=m.instance.getUILang("token"),this.initTokenWebData(),this.initTokenWebDataAir(),this.initTokenTransData(),this.handleSelectTokenTrans(0),this.initLeftList(),this.initLogList(),this.handleSelectLogType(0),this.handleSelectLogDate(0),this.list_left.selectedIndex=0,this.refreshMoney(),this.btn_transferMoney.on(Laya.Event.CLICK,this,this.onTransferMoney),this.rechargeCode.on(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.rechargeCode.on(Laya.Event.BLUR,this,this.testRechargeCodeInput),this.withdrawCode.on(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.withdrawCode.on(Laya.Event.BLUR,this,this.testInputData),g.intance.on(f.CHANGE_ASSET_CHAIN,this,this.changeAssetChain),this.btn_hireRecord.on(Laya.Event.CLICK,this,this.onHireRecord),this.btn_proxyRecord.on(Laya.Event.CLICK,this,this.onProxyRecord),this.btn_claimHire.on(Laya.Event.CLICK,this,this.onClaimHire),this.btn_claimProxy.on(Laya.Event.CLICK,this,this.onClaimProxy),this.btn_claimGuild.on(Laya.Event.CLICK,this,this.onClaimGuild),this.list_web.renderHandler=Laya.Handler.create(this,this.onWebItemRender,null,!1),this.list_token.renderHandler=Laya.Handler.create(this,this.onTokenItemRender,null,!1),this.list_web2.renderHandler=Laya.Handler.create(this,this.onWebItemRender2,null,!1),this.list_token2.renderHandler=Laya.Handler.create(this,this.onTokenItemRender2,null,!1),this.list_token3.renderHandler=Laya.Handler.create(this,this.onTokenItemRender3,null,!1),this.list_token4.renderHandler=Laya.Handler.create(this,this.onTokenItemRender4,null,!1),this.list_left.renderHandler=new Laya.Handler(this,this.onLeftItemRender),this.box_web.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_web_pad]),this.box_web2.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_web_pad2]),this.box_tokenTrans.on(Laya.Event.CLICK,this,this.onOpenWeb,[this.img_token_pad4]),this.box_token.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad]),this.box_token2.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad2]),this.box_token3.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad3]),this.box_token4.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_token_pad4]),this.box_selectLog.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_logType_pad]),this.box_currentDate.on(Laya.Event.CLICK,this,this.onOpenToken,[this.img_logDate_pad]),this.list_logType.renderHandler=Laya.Handler.create(this,this.onlogTypeRender,null,!1),this.list_logDate.renderHandler=Laya.Handler.create(this,this.onlogDateRender,null,!1),this.list_logType.selectHandler=new Laya.Handler(this,this.handleSelectLogType),this.list_logDate.selectHandler=new Laya.Handler(this,this.handleSelectLogDate),this.btn_confirm.on(Laya.Event.CLICK,this,this.onbtnConfirm),this.btn_cardPay.on(Laya.Event.CLICK,this,this.onbtnCardPay),this.btn_max.on(Laya.Event.CLICK,this,this.onbtnMax),this.list_web.selectHandler=new Laya.Handler(this,this.handleSelectWeb),this.list_token.selectHandler=new Laya.Handler(this,this.handleSelectToken),this.list_web2.selectHandler=new Laya.Handler(this,this.handleSelectWebWithdraw),this.list_token2.selectHandler=new Laya.Handler(this,this.handleSelectTokenWithdraw),this.list_token3.selectHandler=new Laya.Handler(this,this.handleSelectTokenAir),this.list_token4.selectHandler=new Laya.Handler(this,this.handleSelectTokenTrans),this.list_left.selectHandler=new Laya.Handler(this,this.handleSelectLeft),this.tf_adress.text=W.instance.walletAddress,this.tf_adressAir.text=W.instance.walletAddress,this.btn_withdraw.on(Laya.Event.CLICK,this,this.onBtnWithdraw),this.btn_withdrawRecord.on(Laya.Event.CLICK,this,this.onBtnWithdrawRecord),this.btn_jianE.on(Laya.Event.CLICK,this,this.onBtnJianE),this.btn_addE.on(Laya.Event.CLICK,this,this.onBtnAddE),this.btn_addMax.on(Laya.Event.CLICK,this,this.onBtnAddMax),this.btn_airRecord.on(Laya.Event.CLICK,this,this.onBtnAirRecord),this.btn_claimRecom.on(Laya.Event.CLICK,this,this.onClaimRem),g.intance.on(f.EVENT_ADD_MONEY_ADDRESS,this,this.onAddMoneyAddress),g.intance.on(f.REFRESH_ALL_WITHDRAW_DATA,this,this.refreshWithdrawData),this.btn_Search.on(Laya.Event.CLICK,this,this.searchLogArray,[!0]),this.btn_right.on(Laya.Event.CLICK,this,this.onBtnRightAndRight,[!0]),this.btn_left.on(Laya.Event.CLICK,this,this.onBtnRightAndRight,[!1]),this.btn_Combine.on(Laya.Event.CLICK,this,this.onBtnCombine),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.box_all.visible=!1,this.initDataView()}setTab(e){for(let i=1;i<11;i++)e==i?this["box_"+i]&&(this["box_"+i].visible=!0):this["box_"+i]&&(this["box_"+i].visible=!1)}async initDataView(){if(!this.destroyed){b.instance.playerDto.country?this.btn_cardPay.visible=!0:this.btn_cardPay.visible=!1,this.type?this.onClickTab(this.type):this.onClickTab(5),this.list_hire.visible=!1,this.list_proxy.visible=!1,this.list_reward.visible=!1,this.listHireReward.visible=!1;var e=b.instance.playerDto.status;e==2?(this.btn_withdraw.visible=!1,this.tf_noAllowed.visible=!0):(this.btn_withdraw.visible=!0,this.tf_noAllowed.visible=!1)}}async showHireData(){var e=await I.requestPost("wxgame/lease/outline",{});if(e&&e.reward){let n=Q.processItemsArray(e.reward);e.reward.length>0?this.btn_claimHire.disabled=!1:this.btn_claimHire.disabled=!0;let r=n[0];this.list_hire.array=r,this.list_hire.selectedIndex=-1,this.list_hire.visible=!0,e.leaderCount?this.tf_hireNum.text=m.instance.getLanguage(1179,e.leaderCount):this.tf_hireNum.text=m.instance.getLanguage(1179,0);let s=n[1];var i=[];s.forEach(o=>{var l=new Pe(o.id);l.newAddCnt=o.count,i.push(l)}),this.listHireReward.array=i,this.listHireReward.selectedIndex=-1,this.listHireReward.visible=!0}}async showProxyData(){var e=await I.requestPost("wxgame/lease/outline",{});if(e&&e.childReward){let r=Q.processItemsArray(e.childReward),s=r[0],o=r[2];e.childReward.length>0?this.btn_claimProxy.disabled=!1:this.btn_claimProxy.disabled=!0;var i=[],n=o;n.forEach(l=>{var c=new Pe(l.id);c.newAddCnt=l.count,i.push(c)}),this.list_reward.array=i,this.list_reward.visible=!0,this.list_proxy.array=s,this.list_proxy.visible=!0,this.list_proxy.selectedIndex=-1,e.childCount?this.tf_proxyNum.text=m.instance.getLanguage(1180,e.childCount):this.tf_proxyNum.text=m.instance.getLanguage(1180,0)}}async showGuildData(){var e=await I.requestPost("wxgame/money/unionBonusInfo",{});if(e&&e.reward){e.reward.length<1?this.btn_claimGuild.disabled=!0:this.btn_claimGuild.disabled=!1;let r=Q.processItemsArray(e.reward),s=r[0],o=r[2];var i=[],n=o;n.forEach(l=>{var c=new Pe(l.id);c.newAddCnt=l.count,i.push(c)}),this.list_guild.array=s,this.list_guild.visible=!0,this.list_guild.selectedIndex=-1}}async showRecommendData(){let e=b.instance.playerDto;this.tf_recomNum.text=m.instance.getLanguage(1531,e.remCount);var i=await I.requestPost("wxgame/money/remRewardList",{});if(i&&i.reward){i.reward.length<1?this.btn_claimRecom.disabled=!0:this.btn_claimRecom.disabled=!1;let r=Q.processItemsArray(i.reward)[0];this.list_recommend.array=r,this.list_recommend.visible=!0,this.list_recommend.selectedIndex=-1}}initLeftList(){let e=["DEPOSIT","WITHDRAW","HIRE","PROXY","STAKING BAG","AIRDROP WITHDRAWAL","Token Transfer","Guild","RECOMMENDED BY","ASSET LOGS"];this.list_left.array=e}async onClickTab(e){if(this.currTab=e,this.setTab(e),this.box_all.visible=!0,e==1)this.box_1.visible=!0,await this.initContainer();else if(e==2)await this.initContainer();else if(e==3)this.showHireData();else if(e==4)this.showProxyData();else if(e==5){var i=await I.requestPost("wxgame/welfare/outline",{});i?(this.tf_champNum.text=m.instance.getLanguage(1133)+" "+i.welfareCount,this.list_champ.array=i.welfareDtoList,!i.welfareDtoList||i.welfareDtoList.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1):T.instance.notice(m.instance.getLanguage(135))}else e==6?this.initContainerAir():e==7?(this.list_address.array=[null],this.initTokenArray(this.list_token4.selectedIndex)):e==8?this.showGuildData():e==9?this.showRecommendData():e==10&&(this.isSearch||this.searchLogArray())}async handleClickBtn(e){switch(e){case this.btn_champDetail:{let i=await I.requestPost("wxgame/welfare/list",{});i.welfareDtoList?A.intance.openModule(y.ChampDetailDialog,i.welfareDtoList):T.instance.notice(m.instance.getLanguage(135))}break;case this.btn_champRecord:{let i=await I.requestPost("wxgame/welfare/takeList",{});i.welfareDtoList?A.intance.openModule(y.ChampRecordDialog,i.welfareDtoList):T.instance.notice(m.instance.getLanguage(135))}break}}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}onClaimWelfare(e){var i=this.list_champ.array;if(i instanceof Array){for(let n of i)if(n.coinType==e.coinType){n.takeValue=0;continue}this.list_champ.refresh()}}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(f.EVENT_WELFARE_CLAIM,this,this.onClaimWelfare),this.rechargeCode.off(Laya.Event.INPUT,this,this.onRechargeCodeInput),g.intance.off(f.CHANGE_ASSET_CHAIN,this,this.changeAssetChain),this.btn_hireRecord.off(Laya.Event.CLICK,this,this.onHireRecord),this.btn_proxyRecord.off(Laya.Event.CLICK,this,this.onProxyRecord),this.btn_claimHire.off(Laya.Event.CLICK,this,this.onClaimHire),this.btn_claimProxy.off(Laya.Event.CLICK,this,this.onClaimProxy),this.box_web.off(Laya.Event.CLICK,this,this.onOpenWeb),this.box_web2.off(Laya.Event.CLICK,this,this.onOpenWeb),this.box_token.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token2.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token3.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_token4.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_selectLog.off(Laya.Event.CLICK,this,this.onOpenToken),this.box_currentDate.off(Laya.Event.CLICK,this,this.onOpenToken),this.btn_confirm.off(Laya.Event.CLICK,this,this.onbtnConfirm),this.btn_max.off(Laya.Event.CLICK,this,this.onbtnMax),this.btn_transferMoney.off(Laya.Event.CLICK,this,this.onTransferMoney),this.rechargeCode.off(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.rechargeCode.off(Laya.Event.BLUR,this,this.testRechargeCodeInput),this.withdrawCode.off(Laya.Event.INPUT,this,this.onRechargewithdrawCodeInput),this.withdrawCode.off(Laya.Event.BLUR,this,this.testInputData),this.box_tokenTrans.off(Laya.Event.CLICK,this,this.onOpenWeb),this.btn_withdraw.off(Laya.Event.CLICK,this,this.onBtnWithdraw),this.btn_withdrawRecord.off(Laya.Event.CLICK,this,this.onBtnWithdrawRecord),this.btn_jianE.off(Laya.Event.CLICK,this,this.onBtnJianE),this.btn_addE.off(Laya.Event.CLICK,this,this.onBtnAddE),this.btn_addMax.off(Laya.Event.CLICK,this,this.onBtnAddMax),this.btn_airRecord.off(Laya.Event.CLICK,this,this.onBtnAirRecord),this.btn_Combine.off(Laya.Event.CLICK,this,this.onBtnCombine),this.btn_Search.off(Laya.Event.CLICK,this,this.searchLogArray),this.btn_right.off(Laya.Event.CLICK,this,this.onBtnRightAndRight),this.btn_left.off(Laya.Event.CLICK,this,this.onBtnRightAndRight),g.intance.offAllCaller(this)}onOpenWeb(e){e.visible==!1&&(e.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onOpenToken(e){e.visible==!1&&(e.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList))}onWebItemRender(e,i){e&&e.onChange&&e.onChange(this.list_web.selectedIndex==i)}onWebItemRender2(e,i){e&&e.onChange&&e.onChange(this.list_web2.selectedIndex==i)}onTokenItemRender(e,i){e&&e.onChange&&e.onChange(this.list_token.selectedIndex==i)}onTokenItemRender2(e,i){e&&e.onChange&&e.onChange(this.list_token2.selectedIndex==i)}onTokenItemRender3(e,i){e&&e.onChange&&e.onChange(this.list_token3.selectedIndex==i)}onTokenItemRender4(e,i){e&&e.onChange&&e.onChange(this.list_token4.selectedIndex==i)}async createWebList(){this.currTab==1?(this.list_web.array=this.webData,this.list_web.visible=!0):(this.list_web2.array=this.webDataWithdraw,this.list_web2.visible=!0),await this.initNetComboBox()}async createTokenList(e){switch(this.currTab){case 1:if(e){let r=this.list_web.selectedItem;var i=_.intance.getTokensByChainId(r,this.currTab);this.list_token.array=i,this.list_token.visible=!0,i.length>0?(this.list_token.selectedIndex=-1,this.list_token.selectedIndex=0):(this.list_token.selectedIndex=-1,this.tf_token.text="N/A")}else this.list_token.array=[],this.list_token.selectedIndex=-1,this.tf_token.text="N/A";break;case 2:if(e){let r=this.list_web2.selectedItem;var n=_.intance.getTokensByChainId(r,this.currTab);this.list_token2.array=n,this.list_token2.visible=!0,n.length>0?(this.list_token2.selectedIndex=-1,this.list_token2.selectedIndex=0):(this.list_token2.selectedIndex=-1,this.tf_token2.text="N/A")}else this.list_token2.array=[],this.list_token2.selectedIndex=-1,this.tf_token2.text="N/A";break;case 6:this.list_token3.array=this.tokenDataAir,this.list_token3.visible=!0,this.list_token3.selectedIndex=0,this.tf_token3.text=`${this.tokenDataAir[0]}`;break;default:break}}onHideList(){this.img_web_pad.visible=!1,this.img_token_pad.visible=!1,this.img_web_pad2.visible=!1,this.img_token_pad2.visible=!1,this.img_token_pad3.visible=!1,this.img_token_pad4.visible=!1,this.img_logType_pad.visible=!1,this.img_logDate_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList)}async initContainer(){await this.createWebList()}async initContainerAir(){this.createTokenList(!0)}async getRestCoin(e){console.log("getRestCoin");try{let i=await W.instance.getBalance2(e.token),n=e.tokenDecimals,r=ri(i,n);this.tf_rest.text=`${Q.truncateToTwoDecimalPlaces(Number(r))}`}catch(i){if(i instanceof Error){let n=i.message;console.log("剩余货币错误",n)}this.tf_rest.text="0"}}async initNetComboBox(){let e=await W.instance.walletClient.getChainId();if(e)switch(this.currTab){case 1:let i=this.list_web.array.findIndex(r=>r==e);this.list_web.selectedIndex=-1,this.list_web.selectedIndex=i,i==-1&&(this.tf_web.text="N/A",this.createTokenList(!1));break;case 2:let n=this.list_web2.array.findIndex(r=>r==e);this.list_web2.selectedIndex=-1,this.list_web2.selectedIndex=n,n==-1&&(this.tf_web2.text="N/A",this.createTokenList(!1));break;case 6:this.handleSelectTokenAir(0);break;default:break}}async switchChain(e=!0){try{let i,n;switch(this.currTab){case 1:n=this.list_web.selectedItem;break;case 2:n=this.list_web2.selectedItem;break;case 6:break;default:break}let r=await W.instance.walletClient.getChainId();if(n!==r&&!await W.instance.switchChain(n)){console.log("切换失败，请手动切换"),await this.addChain(),await this.initNetComboBox();return}return}catch(i){if(i instanceof Error){let n=i.message;(n.includes("Unrecognized chain ID")||n.includes("An unKnown PRC"))&&await this.addChain()}this.initNetComboBox()}}async addChain(){let e;this.currTab===1?e=this.list_web.selectedItem:e=this.list_web2.selectedItem,await W.instance.addChain(e);let i=await W.instance.walletClient.getChainId();i&&this.switchChain(i)}async handleSelectLeft(e){let i=this.list_left.selectedItem;this.onClickTab(e+1)}onLeftItemRender(e,i){e&&e.onChange&&e.onChange(this.list_left.selectedIndex==i)}async handleSelectWeb(e){if(e!=-1){let i=this.list_web.selectedItem;this.tf_web.text=W.instance.getChainName(i),this.createTokenList(!0),await this.switchChain(!0)}else this.createTokenList(!1)}async handleSelectWebWithdraw(e){if(e!=-1){let i=this.list_web2.selectedItem;this.tf_web2.text=W.instance.getChainName(i),this.createTokenList(!0),await this.switchChain(!0)}else this.createTokenList(!1)}handleSelectToken(e){if(e!=-1){var i=this.list_token.selectedItem;this.tf_token.text=i.name,this.refreshToken()}}async refreshWithdrawData(){this.handleSelectTokenWithdraw(this.list_token2.selectedIndex)}async handleSelectTokenWithdraw(e){if(e!=-1){var i=this.list_token2.selectedItem;this.tf_token2.text=i.name;let r=0,s=i.id,o=i.chainId;r=b.instance.getConsumeValue(s),this.tf_appAmount.text=`${Q.truncateToTwoDecimalPlaces(r)}`;let l=_.intance.getACoin(o,s);l&&(this.tf_servicerate.text=`${l.Commission/100}%`);var n=await I.requestPost("wxgame/payOrder/query",{chainId:o});if(n&&n.selfData){let c=this.searchRestMoney(n.selfData,s);this.tf_canAmount.text=`${Q.truncateToTwoDecimalPlaces(c)}`}}}async handleSelectTokenAir(e){if(e!=-1){this.wbnbRate=0,this.tf_token3.text=`${this.tokenDataAir[e]}`,this.allProp=await this.getItemByType();let i=_.intance.getPuzzleExchangeByName(this.tf_token3.text),n=i.items,r=i.redeemTickets,s=new Pe;s.m_iId=r[0],s.m_iNum=r[1],this.img_extRe.skin=D.instance.getItemIcon(s.itemItem.icon);let o=this.getAirdropArrData(this.allProp,n);this.puzzleNum==0?this.btn_Combine.disabled=!0:this.btn_Combine.disabled=!1,this.listPuzzle.array=o,this.addPuzzleNum=0,this.tf_token3.text=="WICP"||this.tf_token3.text=="WKLAY"||this.tf_token3.text=="WBNRY",this.puzzleNum==0?(this.tf_extraRec.text="0",this.tf_ExtractNum.text="0",this.addPuzzleNum=0):(this.addPuzzleNum=1,this.showExtraNum(1))}}async initTokenArray(e){let i=this.tokenTransData[e];if(i==ve.TYPE_BNRY||i==ve.TYPE_BNB){let r=new vc;r.checked=!0,r.num=0,z.vType!==2?r.openid="0x4774aF1F0fc3B81c080955ae2eEA8e98AF5E1191":r.openid="0x7571FeB15D5043B2A9e38786d424b5e7a02a5cB2",r.noInput=!0;var n=await I.requestPost("wxgame/sys/queryName",{openid:r.openid.toLowerCase()});r.playerName=n.name,this.list_address.array=[r]}else this.list_address.array=[null]}handleSelectTokenTrans(e){if(e!=-1){let n=this.tokenTransData[e];this.initTokenArray(e);var i=_.intance.m_dicItems.get(n);this.tf_tokenName.text=m.instance.getLanguage(i.name),this.currencyTokenId=n;let r=b.instance.getConsumeValue(n);r<1e-6&&(r=0),this.tf_tokenAmount.text=`${Q.formatNumber(r)}`,this.img_token.skin=D.instance.getMoneyIcon(n)}this.img_token_pad4.visible=!1}async showExtraNum(e){this.tf_extraRec.text=`${e}`,this.tf_ExtractNum.text=`${this.addPuzzleNum}`}getAirdropArrData(e,i){let n=[];this.puzzleNum=0;for(let s=0;s<i.length;s++){let o=e.find(l=>l.itemItem.id==i[s][0]);if(o){n.push(o);let l=Se.formatNumber(o.m_iNum,8);n.length==1?this.puzzleNum=l:this.puzzleNum=Math.min(this.puzzleNum,l)}else{var r=new Pe(i[s][0]);r.newAddCnt=0,n.push(r),this.puzzleNum=0}}return this.refreshRestExtraValue(),n}refreshRestExtraValue(){let e=_.intance.getPuzzleExchangeByName(this.tf_token3.text).value,i=_.intance.getPuzzleExchangeByName("WBNB").value,n=`${this.puzzleNum*i}U / `;switch(this.tf_token3.text){case"WTOX":n+=`${Se.filterNumFormat(this.puzzleNum*e,2)}WTOX`;break;case"WBNB":n+=`${Se.filterNumFormat(this.puzzleNum*e*this.wbnbRate,6)}WBNB`;break;case"WGALA":n+=`${Se.filterNumFormat(this.puzzleNum*e*this.wbnbRate,6)}WGALA`;break;case"WGGG":n+=`${Se.filterNumFormat(this.puzzleNum*e*this.wbnbRate,6)}WGGG`;break;case"WICP":n+="?WICP";break;case"WKLAY":n+="?WKLAY";break;case"WBNRY":n+="?WBNRY";break;default:break}this.tf_extraVal.text=n}onRechargeCodeInput(){let e=Number(this.rechargeCode.text),i=Q.isNumber(this.rechargeCode.text);(e<0||!i)&&(this.rechargeCode.text="0")}testRechargeCodeInput(){let e=Number(this.rechargeCode.text);this.rechargeCode.text=`${Q.formatNumber(e)}`}async onbtnCardPay(){A.intance.openModule(y.CardPayView,1)}async onbtnConfirm(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1}),this.testRechargeCodeInput();let e=Number(this.tf_rest.text),i=Number(this.rechargeCode.text),n=await W.instance.walletClient.getChainId();if(!i){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(33),P.YES);return}if(e<i){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(34),P.YES);return}var r=this.list_token.selectedItem;if(!r){T.instance.notice(m.instance.getLanguage(1801));return}_e.instance.showLoadingByInfo();let s=r.tokenAddress;await qn.instance.rechargeToken(i,r,s)&&(this.getRestCoin(r),b.instance.rechargeEnd=!0)}async refreshToken(){console.log("refreshToken");try{var e=this.list_token.selectedItem;let i=await W.instance.getBalance2(e.token),n=e.tokenDecimals,r=ri(i,n);this.tf_rest.text!==r&&(this.tf_rest.text=`${Q.truncateToTwoDecimalPlaces(Number(r))}`,Laya.timer.clear(this,this.refreshToken))}catch{this.tf_rest.text="0"}}onbtnMax(){let e=Number(this.tf_rest.text);this.rechargeCode.text=`${e}`}initTokenWebData(){this.webData=[],this.webDataWithdraw=[];var e=_.intance.getGeneralValueById(7),i=_.intance.getGeneralValueById(8);e&&(z.vType==2?(this.webData=e[2],this.webDataWithdraw=i[2]):z.vType==1?(this.webData=e[1],this.webDataWithdraw=i[1]):(this.webData=e[0],this.webDataWithdraw=i[0]))}initTokenWebDataAir(){this.tokenDataAir=["WTOX","WBNB","WGGG","WGALA","WICP","WKLAY","WBNRY"]}initTokenTransData(){this.tokenTransData=_.intance.getGeneralValueById(31);var e=[];for(let n of this.tokenTransData){var i=_.intance.m_dicItems.get(n);i&&e.push(m.instance.getLanguage(i.name))}this.list_token4.array=e}changeAssetChain(){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(36),P.YES,Laya.Handler.create(this,()=>{this.switchChain(!0)}))}onHireRecord(){A.intance.openModule(y.HireDetailDialog)}onProxyRecord(){A.intance.openModule(y.ProxyDetailDialog)}async onClaimHire(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await I.requestPost("wxgame/lease/take",{});if(e&&e.reward.length>0){let i=e.reward,n=[];i.forEach(r=>{var s=new vt;s.id=r.id,s.count=r.count,n.push(s)}),A.intance.openModule(y.RewardGetDialog,n)}this.showHireData()}}async onClaimProxy(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await I.requestPost("wxgame/lease/childTake",{});if(e&&e.reward&&e.reward.length>0){let i=e.reward;A.intance.openModule(y.RewardGetDialog,i)}this.showProxyData()}}async onClaimGuild(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await I.requestPost("wxgame/money/unionBonusTake",{});if(e&&e.reward.length>0){let i=e.reward,n=[];i.forEach(r=>{var s=new vt;s.id=r.id,s.count=r.count,n.push(s)}),A.intance.openModule(y.RewardGetDialog,n)}this.showGuildData()}}async onClaimRem(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await I.requestPost("wxgame/money/remRewardTake",{});if(e&&e.list.length>0){let i=e.list,n=[];i.forEach(r=>{var s=new vt;s.id=r.id,s.count=r.count,n.push(s)}),A.intance.openModule(y.RewardGetDialog,n)}this.showRecommendData()}}onRechargewithdrawCodeInput(){let e=Number(this.withdrawCode.text),i=Q.isNumber(this.withdrawCode.text);(e<0||!i)&&this.withdrawCode.text!==this.withdrawText&&(this.withdrawCode.text="0")}async testInputData(){let e=Number(this.withdrawCode.text);var i=this.list_token2.selectedItem;let n=i.id,r=i.chainId,s=_.intance.getACoin(r,n);if(!s)return;let o=Number(this.tf_appAmount.text);e>o?T.instance.notice(Le.instance.get(111)):e>s.maxAmount?T.instance.notice(m.instance.getLanguage(1211,s.maxAmount)):e<s.minAmount&&T.instance.notice(m.instance.getLanguage(1212,s.minAmount));let l=s.Commission,c=e*(1-l/1e4);n==ve.TYPE_TOX&&r==Fi.id?this.tf_arrive.text=`${c.toFixed(2).replace(/\.?0+$/,"")}`:this.tf_arrive.text=`${c.toFixed(8).replace(/\.?0+$/,"")}`}async onBtnWithdraw(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});let e=Number(this.tf_appAmount.text);var i=this.list_token2.selectedItem;let n=i.id,r=i.chainId,s=Number(this.withdrawCode.text),o=_.intance.getACoin(r,n);if(!o)return;let l=o.Commission,c=new fi(l/1e4),u=new fi(s),p=c.multiply(u).getValue();if(s>e){T.instance.notice(Le.instance.get(111));return}if(s>o.maxAmount){T.instance.notice(m.instance.getLanguage(1211,o.maxAmount));return}else if(s<o.minAmount){T.instance.notice(m.instance.getLanguage(1212,o.minAmount));return}if(z.vType==2&&r==Wn.id&&!await W.instance.getAuthStatus()){T.instance.notice(Le.instance.get(113));return}if(i.bankAddress&&i.bankAddress.length>10){let R=await W.instance.getBankBalance(i.token,i.bankAddress,i.name);if(console.log("contractBalance: "+R),R){let U=i.tokenDecimals,V=ri(R,U),q=Number(V);if(console.log("银行余额 constNum: "+q),q<s){_e.instance.hideLoading(),T.instance.notice(m.instance.getLanguage(1356,i.name));return}}}let d=Number(this.tf_arrive.text),L=s*(1-l/1e4);n==ve.TYPE_TOX&&r==Fi.id?d=Number(parseFloat(L.toFixed(2))):d=L;let E=_.intance.getCurrency(n,r).token||Z.ADDRESS0,w=await I.requestPost("wxgame/payOrder/create",{chainId:r,coinType:n,payMoney:s,fee:p,arriveMoney:d,token:E});w&&w.errorCode==0&&Ee.NoHeroError("Pending Review")}onBtnWithdrawRecord(){A.intance.openModule(y.WithDrawRecordDialog)}searchRestMoney(e,i){for(let n=0;n<e.length;n++)if(e[n][0]===i)return e[n][1];return 0}async onBtnCombine(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});let i=_.intance.getPuzzleExchangeByName(this.tf_token3.text).id;var n=await I.requestPost("wxgame/equip/puzzleExchangeTicket",{puzzleId:i,count:this.addPuzzleNum});if(n){let s=await I.requestPost("wxgame/hero/bagList",{},!0,!0);b.instance.m_packageData.initData(s.data),this.handleSelectTokenAir(this.list_token3.selectedIndex);let o=n.reward;if(o){var r=new vt;r.id=o[0].id,r.count=o[0].count,A.intance.openModule(y.RewardGetDialog,[r])}}}async onBtnAddExtr(){}async getItemByType(){var e=Ge.TYPE_Consumption;this.items=[];for(var i=b.instance.m_packageData.getBackByType(e),n=0;n<i.length;n++){var r=i[n];r?this.items.push(r):this.items.push(new Pe(0))}return this.items}onBtnJianE(){this.addPuzzleNum=Math.max(0,this.addPuzzleNum-1),this.addPuzzleNum<=0?(this.tf_extraRec.text="0",this.tf_ExtractNum.text="0",this.btn_Combine.disabled=!0):this.showExtraNum(this.addPuzzleNum)}onBtnAddE(){this.addPuzzleNum=Math.min(this.puzzleNum,this.addPuzzleNum+1),this.showExtraNum(this.addPuzzleNum),this.addPuzzleNum>0&&(this.btn_Combine.disabled=!1)}onBtnAddMax(){this.puzzleNum<=0||(this.addPuzzleNum=this.puzzleNum,this.showExtraNum(this.addPuzzleNum))}onBtnAirRecord(){A.intance.openModule(y.AirdropRecordDialog)}onAddMoneyAddress(){console.log("onAddMoneyAddress: ",this.list_address.array);let e=new vc;e.num=0,this.list_address.array||(this.list_address.array=[null]),this.list_address.setItem(this.list_address.array.length-1,e),this.list_address.addItem(null),this.list_address.refresh(),this.list_address.tweenTo(this.list_address.array.length-1)}async onTransferMoney(){if(this.btnLock)return;this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=[];let i=0;this.list_address.array.forEach(s=>{s&&s.checked&&s.playerName&&s.openid&&s.num>0&&(e.push({address:s.openid,num:s.num}),i+=s.num)});let n=Number(this.tf_tokenAmount.text);if(i>n){T.instance.notice(Le.instance.get(56));return}if(e.length>0){let s=this.currencyTokenId;var r=await I.requestPost("wxgame/welfare/coinTransfer",{list:e,id:s});if(r){let o=r.remainingCoin;s==o[0]&&(this.tf_tokenAmount.text=`${Q.formatNumber(o[1])}`),T.instance.notice(m.instance.getLanguage(2e3));let l=Laya.Handler.create(this,()=>{this.list_address.array=[null]});s!==ve.TYPE_BNRY&&s!==ve.TYPE_BNB&&me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1551),P.SURE,l)}else T.instance.notice(m.instance.getLanguage(135))}else T.instance.notice(m.instance.getUILang("Please enter the recipient address."))}async refreshMoney(){var e=await I.requestPost("wxgame/money/panel",{});if(e&&this.currTab==2){let i=Q.getCurrencyIdByName(this.tf_token2.text),n=b.instance.getConsumeValue(i);this.tf_appAmount.text=`${Q.truncateToTwoDecimalPlaces(n)}`}}initLogList(){var e=_.intance.getGeneralValueById(21);this.list_logType.array=e,this.list_logType.selectedIndex=0;var i=_.intance.getGeneralValueById(22);this.list_logDate.array=i,this.list_logDate.selectedIndex=0,console.log(e)}onlogTypeRender(e,i){e&&e.onChange&&e.onChange(this.list_logType.selectedIndex==i)}onlogDateRender(e,i){e&&e.onChange&&e.onChange(this.list_logDate.selectedIndex==i)}handleSelectLogType(e){if(e!=-1){let i=this.list_logType.selectedItem;this.tf_selectLog.text=`${m.instance.getLanguage(i)}`}}handleSelectLogDate(e){if(e!=-1){let i=this.list_logDate.selectedItem;this.tf_selectLogDate.text=`${m.instance.getLanguage(i)}`}}async searchLogArray(e=!1){let i;switch(this.list_logType.selectedItem){case 1536:i=0;break;case 1537:i=2;break;case 1538:i=12;break;case 1539:i=20;break;case 1540:i=19;break;case 1541:i=6;break;case 1542:i=23;break;case 1549:i=31;break;case 1550:i=1;break;default:i=0;break}let n=this.list_logDate.selectedIndex+1;n==6&&(n=0),e&&(this.logPage=1),this.isSearch=!0;let r=await I.requestPost("wxgame/player/itemRecordPageList",{pageSize:10,pageIndex:this.logPage,logType:i,timeType:n});this.list_recordLog.array=r.list,this.tf_pearchPage.text=`${this.logPage}/${r.pages}`,this.logPageSize=r.pages,console.log(r)}onBtnRightAndRight(e){let i=this.logPage;e?this.logPage=Math.min(this.logPageSize,this.logPage+1):this.logPage=Math.max(1,this.logPage-1),i!==this.logPage&&this.searchLogArray()}};nf=h([OB("lWg_-biNSI2538WxA3KVVw")],nf);var{regClass:HB,property:qE}=Laya,xc=Laya.Browser,UB=Laya.Render,VB=Laya.SpriteUtils,at=class extends Laya.Script{constructor(){super();at.instance=this}onEnable(){this.videoBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{this.createElementVideo()})}createElementVideo(){xc.window.IframeElementRT=this;var e="aa289ea0-a5fc-41df-8288-7961c1b4cc87",i="1982f465-31d2-414b-ac52-5522e695a3c0";let n="https://uat-paymentapi.bitzaro.com/widget";var r=W.instance.walletAddress,s=b.instance.playerDto.pid,o="shasta",l="usdt";if(z.vType==2){var o="binance",l="usdt";n="https://paymentapi.bitzaro.com/widget";let d=window.location.hostname;var c={"app.phantomarena.ai":{email:"ceo@phantomarena.co",apiKey:"f2761d89-6305-4efe-b01b-a5c6c98f6d97",secretKey:"fe672313-dc47-42fc-9b6e-bf458f418255"},"www.phantomarena.ai":{email:"alanhung8888@gmail.com",apiKey:"daf670b4-10ab-4cfc-a91e-c41da2dc1112",secretKey:"0269186d-b10f-4ee4-8932-2dcdf1dc57b3"},"app.phantomarena.co":{email:"Clara.tuong@gmail.com",apiKey:"dcc9e12d-bcaa-4a95-832f-ccd455141684",secretKey:"7113752a-425e-434a-905f-7c35ce86e11a"},"www.phantomarena.co":{email:"yenlinh.tuong@gmail.com",apiKey:"5a6d0862-7f08-44d2-bd91-11d681fccfbe",secretKey:"87a01e91-7c36-48f1-9be1-57e98de0416b"}}[d];c&&(console.log("domain:",d),e=c.apiKey,i=c.secretKey)}getPayApi(n,e,i,r,o,l,s,this.createElementVideoDetail)}createElementVideoDetail(e){var i=e.link;i?(at.instance.createScript(),at.instance.createDiv(),at.instance.createIframe(i),at.instance.setDOMElementInArea(),Laya.stage.on(Laya.Event.RESIZE,at.instance,at.instance.setDOMElementInArea)):(console.error(e.message),at.instance.videoBtn.label=e.message)}setDOMElementInArea(){this.iframeElement!=null&&VB.fitDOMElementInArea(this.iframeElement,this.iframeBox,0,0,this.iframeBox.width,this.iframeBox.height)}createScript(){this.scriptElement=xc.document.createElement("script"),xc.document.body.appendChild(this.scriptElement),this.scriptElement.innerHTML="function closeVideo(){IframeElementRT.closeVideo() }"}createIframe(e){this.iframeElement=xc.createElement("iframe"),xc.document.body.appendChild(this.iframeElement),this.iframeElement.style.zIndex=UB.canvas.style.zIndex+998,this.iframeElement.src=e,this.iframeElement.allow="camera; microphone",this.iframeElement.style.margin="0",this.iframeElement.style.frameborder="0",this.iframeElement.style.border="none",this.iframeElement.style.borderRadius="0.5rem",this.iframeElement.style.background="white",this.iframeElement.style.padding="0",this.iframeElement.style.left="0",this.iframeElement.style.top="0px",this.iframeElement.style.position="absolute"}createDiv(){}closeVideo(){Laya.Browser.document.body.removeChild(this.scriptElement),Laya.Browser.document.body.removeChild(this.iframeElement),this.scriptElement=this.iframeElement=null,Laya.stage.off(Laya.Event.RESIZE,this,this.setDOMElementInArea)}};h([qE({type:Laya.Button})],at.prototype,"videoBtn",2),h([qE({type:Laya.Box})],at.prototype,"closeBox",2),h([qE({type:Laya.Box})],at.prototype,"iframeBox",2),at=h([HB("ZtMxoJHQTWipjGWyGV51jQ")],at);var rf=class extends Laya.Dialog{};var{regClass:FB}=Laya,sf=class extends rf{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.currTab=0}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack);for(let e=1;e<3;e++)this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e])}setOpenData(e){console.log("setOpenData: ",e),this.itemVo=e,this.onClickTab(1),this.callLater(this.createIframe)}createIframe(){at.instance.iframeElement&&at.instance.closeVideo(),!at.instance.iframeElement&&at.instance.createElementVideo()}onClickTab(e){this.currTab!=e&&(this.currTab=e,this.setTab(e),e==1?this.alertDesc.text=_.intance.getGeneralValueById(33):e==2&&(this.alertDesc.text=_.intance.getGeneralValueById(34)))}setTab(e){for(let i=1;i<3;i++)e==i?(this["btn_"+i].getChildByName("btn_yellowBg").visible=!0,this["btn_"+i].getChildByName("Label").color="#ffffff"):(this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#64b4ec")}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.onBack),at.instance.iframeElement&&at.instance.closeVideo()}};sf=h([FB("VKTfedC1Q_2f1d3bFS4oYQ")],sf);var of=class extends Laya.Dialog{};var{regClass:GB}=Laya,lf=class extends of{constructor(){super()}onEnable(){this.list_champ.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1)}setOpenData(t){t&&t instanceof Array&&(this.list_champ.array=t,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onItemRender(t,e){t.onSetIndex(e)}onDisable(){}};lf=h([GB("mXj9kkXUQny2iuvlC1REmA")],lf);var cf=class extends Laya.Box{};var{regClass:KB}=Laya,uf=class extends cf{set dataSource(e){super.dataSource=e,this.welfareDto=e,this.welfareDto&&this.setCurrentOutPut()}onSetIndex(e){this.tf_id.text=e+1+""}setCurrentOutPut(){this.tf_createDate.text=ce.formatTimeStamp(this.welfareDto.createDate,"YY-MT-DD");let e=this.welfareDto.coinType;this.img_coinType.skin=D.instance.getMoneyIcon(e),this.tf_type.text=m.instance.getUILang("Staking_Type_"+this.welfareDto.type),this.tf_coinValue.text=Se.formatNumberStr(this.welfareDto.coinValue,8),this.tf_remainValue.text=Se.formatNumberStr(this.welfareDto.remainValue,8),this.tf_remainDays.text=this.welfareDto.remainDays+""}};uf=h([KB("b0cMZEy9S5q2q_vqsjWzDA")],uf);var mf=class extends Laya.Box{};var{regClass:qB}=Laya,pf=class extends mf{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_claim.on(Laya.Event.CLICK,this,this.onClaim),this.isAddEvent=!0)}async onClaim(){if(this.welfareOutlineDto.takeValue>0){let i=await I.requestPost("wxgame/welfare/take",{coinType:this.welfareOutlineDto.coinType});if(i){var e=new vt;e.id=i.coinType,e.count=i.coinValue,A.intance.openModule(y.RewardGetDialog,[e]),g.intance.event(f.EVENT_WELFARE_CLAIM,i)}else T.instance.notice(m.instance.getLanguage(135))}}set dataSource(e){super.dataSource=e,this.welfareOutlineDto=e,this.welfareOutlineDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.welfareOutlineDto.coinType;this.img_coinType.skin=D.instance.getItemIcon(e),this.tf_allValue.text=Se.formatNumberStr(this.welfareOutlineDto.allValue,8),this.tf_todayRelease.text=Se.formatNumberStr(this.welfareOutlineDto.todayRelease,8),this.tf_takeValue.text=Se.formatNumberStr(this.welfareOutlineDto.takeValue,8),this.btn_claim.disabled=this.welfareOutlineDto.takeValue<=0}};pf=h([qB("XTGeF2FhTp2j7VZIhqRAtg")],pf);var hf=class extends Laya.Dialog{};var{regClass:WB}=Laya,df=class extends hf{constructor(){super()}onEnable(){this.list_champ.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1)}setOpenData(t){t&&t instanceof Array&&(this.list_champ.array=t,!t||t.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1)}onItemRender(t,e){t.onSetIndex(e)}onDisable(){}};df=h([WB("RzcjHDjIS62Ejw744kaKKw")],df);var ff=class extends Laya.Box{};var{regClass:YB}=Laya,yf=class extends ff{set dataSource(e){super.dataSource=e,this.welfareTakeDto=e,this.welfareTakeDto&&this.setCurrentOutPut()}onSetIndex(e){this.tf_id.text=e+1+""}setCurrentOutPut(){this.tf_takeTime.text=ce.formatTimeStamp(this.welfareTakeDto.takeTime,"YY-MT-DD");var e=this.welfareTakeDto.reward,i=[];e&&e.forEach(n=>{var r=new Pe(n.id);r.newAddCnt=n.count,i.push(r)}),this.list_reward.array=i}};yf=h([YB("0TASbeEtRlmozr-j6sElTw")],yf);var bf=class extends Laya.Dialog{};var{regClass:zB}=Laya,gf=class extends bf{constructor(){super()}onEnable(){this.setOpenData(),this.list_sum.visible=!1,this.list_sumProp.visible=!1,this.list_champ.visible=!1}async setOpenData(){var t=await I.requestPost("wxgame/lease/takeList",{});if(t){let i=t.list;i=Q.addIndexToObjects(i),this.list_champ.array=i,this.list_champ.visible=!0;let n=Q.sumItemCount(i),r=Q.processItemsArray(n,!1),s=r[0],o=r[1];this.list_sum.array=s,this.list_sum.visible=!0,s.length>3?this.list_sum.y=506:this.list_sum.y=533;var e=[];o.forEach(l=>{var c=new Pe(l.id);c.newAddCnt=l.count,e.push(c)}),this.list_sumProp.array=e,this.list_sumProp.visible=!0}}onDisable(){}};gf=h([zB("ZG7XYFvMTD-oZPNAmJhfIQ")],gf);var Lf=class extends Laya.Box{};var{regClass:jB}=Laya,_f=class extends Lf{constructor(){super()}set dataSource(e){super.dataSource=e,this.itemDto=e,this.itemDto&&this.setCurrentOutPut()}async setCurrentOutPut(){let e=this.itemDto.id;this.img_coinType.skin=D.instance.getItemIcon(e),this.tf_takeValue.text=Se.formatNumberStr(this.itemDto.count,8)}};_f=h([jB("S4XctoHfRm66A2jjw3rSsQ")],_f);var vf=class extends Laya.Box{};var{regClass:$B}=Laya,xf=class extends vf{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.btnName=e,e=="Guild"&&b.instance.playerDto.unionLeader!==1?this.disabled=!0:this.disabled=!1,this.tf_txt.text=this.btnName,this.addEvent()}onChange(e){e?(this.selectBox.visible=!0,this.tf_txt.color="#143f6b"):(this.selectBox.visible=!1,this.tf_txt.color="#4e87b7")}};xf=h([$B("cbJ24As0TNGTuTkEeEDFzQ")],xf);var If=class extends Laya.Box{};var{regClass:XB}=Laya,Ef=class extends If{set dataSource(e){super.dataSource=e,e&&(this.tf_data.text=m.instance.getLanguage(e))}onDisable(){}onChange(e){e?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};Ef=h([XB("mPcFFRzmR82zTzTJafri7Q")],Ef);var wf=class extends Laya.Box{};var{regClass:QB}=Laya,Tf=class extends wf{constructor(){super();this.isAddEvent=!1;this.addL=1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.isAddEvent=!0,this.tf_num.on(Laya.Event.BLUR,this,this.testRechargeCodeInput))}testRechargeCodeInput(){let e=Number(this.tf_num.text),i=Q.isNumber(this.tf_num.text);if(e<0||!i)this.tf_num.text="",this.addL=0;else{let n=Q.formatNumber(e);this.tf_num.text=`${n}`,this.addL=n}this.setItemNum()}set dataSource(e){super.dataSource=e,this.moneyAddressVo=e,this.moneyAddressVo?(this.btn_add.visible=!1,this.box_address.visible=!0,this.tf_uid.text=this.moneyAddressVo.openid,this.tf_player_name.text=this.moneyAddressVo.playerName,this.tf_uid.disabled=e.noInput,console.log("data1: ",e),this.addL=this.moneyAddressVo.num,this.setItemNum()):(this.btn_add.visible=!0,this.box_address.visible=!1,console.log("data2: ",e)),this.addEvent()}onAdd(){g.intance.event(f.EVENT_ADD_MONEY_ADDRESS)}async setPlayerName(){try{if(this.tf_uid.text=="")return;this.moneyAddressVo.openid=this.tf_uid.text.toLowerCase();var e=await I.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});e&&(console.log(e),this.tf_player_name.text=e.name,this.moneyAddressVo.checked=!0,this.moneyAddressVo.playerName=e.name)}catch{}}uidFocus(){this.moneyAddressVo.openid="",this.moneyAddressVo.playerName="",this.moneyAddressVo.checked=!1,this.tf_uid.text="",this.tf_player_name.text=""}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&(this.addL=Q.formatNumber(this.addL-1)),this.setItemNum();break;case this.btn_plus:this.addL=Q.formatNumber(this.addL+1),this.setItemNum();break}}setItemNum(){this.addL?this.tf_num.text=this.addL+"":this.tf_num.text="",this.moneyAddressVo.num=this.addL}onDisable(){this.removeEvent()}removeEvent(){this.tf_uid.off(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.off(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.off(Laya.Event.CLICK,this,this.onAdd),this.tf_num.off(Laya.Event.BLUR,this,this.testRechargeCodeInput)}};Tf=h([QB("J6QFYTIIQjqstznXD28nBA")],Tf);var Cf=class extends Laya.Box{};var{regClass:JB}=Laya,Sf=class extends Cf{constructor(){super();this.isAddEvent=!1}addEvent(){}set dataSource(e){super.dataSource=e,this.pledgeData=e,this.pledgeData&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.pledgeData.reward,i=Q.processItemsArray(e,!1),n=i[0],r=i[1];this.list_champ.array=n,n.length>3?this.list_champ.y=14:this.list_champ.y=40,this.tf_id.text=`${this.pledgeData.index+1}`;var s=[];r.forEach(o=>{var l=new Pe(o.id);l.newAddCnt=o.count,s.push(l)}),this.listHireReward.array=s,this.tf_days.text=ce.getYearMonthDat(this.pledgeData.takeTime)}};Sf=h([JB("_mG5oDuaQY6l5yGUFmpG4w")],Sf);var Df=class extends Laya.Box{};var{regClass:ZB}=Laya,Af=class extends Df{constructor(){super();this.isAddEvent=!1}addEvent(){}set dataSource(e){super.dataSource=e,this.pledgeData=e,e&&(this.addEvent(),this.setCurrentOutPut(e))}async setCurrentOutPut(e){this.img_coinType.skin=D.instance.getItemIcon(e.id),this.tf_coinValue.text=Se.formatNumberStr(e.count,8)}};Af=h([ZB("5t1LQunTRFOali6ENPwdqQ")],Af);var kf=class extends Laya.Dialog{};var{regClass:e2}=Laya,Bf=class extends kf{constructor(){super()}onEnable(){this.setOpenData(),this.list_sum.visible=!1,this.list_sumProp.visible=!1,this.list_champ.visible=!1}async setOpenData(){var t=await I.requestPost("wxgame/lease/childTakeList",{});if(t){let i=t.list;i=Q.addIndexToObjects(i),this.list_champ.array=i,this.list_champ.visible=!0;let n=Q.sumItemCount(i),r=Q.processItemsArray(n,!1),s=r[0],o=r[1];this.list_sum.array=s,this.list_sum.visible=!0,s.length>3?this.list_sum.y=506:this.list_sum.y=533;var e=[];o.forEach(l=>{var c=new Pe(l.id);c.newAddCnt=l.count,e.push(c)}),this.list_sumProp.array=e}}onDisable(){}};Bf=h([e2("hbicTwT0TxSxlRep4P48Tw")],Bf);var Mf=class extends Laya.Box{};var{regClass:t2}=Laya,Rf=class extends Mf{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_copyFrom.on(Laya.Event.CLICK,this,this.onClickCopy,[!0]),this.btn_copyTo.on(Laya.Event.CLICK,this,this.onClickCopy,[!1]))}set dataSource(e){if(super.dataSource=e,!e)return;this.recordItemVo=e,this.tf_day.text=ce.getYearMonthDat(this.recordItemVo.time),this.tf_quilty.text=`${this.recordItemVo.count}`;let i=_.intance.m_dicItems.get(this.recordItemVo.itemId);i&&(this.tf_item.text=m.instance.getLanguage(i.name)),this.setTypeData(),this.recordItemVo.from?(this.tf_from.text=`${Q.shortenString(this.recordItemVo.from,8,6)}`,this.btn_copyFrom.visible=!0):(this.tf_from.text="N/A",this.btn_copyFrom.visible=!1),this.recordItemVo.to?(this.tf_to.text=`${Q.shortenString(this.recordItemVo.to,8,6)}`,this.btn_copyTo.visible=!0):(this.tf_to.text="N/A",this.btn_copyTo.visible=!1),this.addEvent()}onClickCopy(e){e?doCopy(this.recordItemVo.from):doCopy(this.recordItemVo.to),T.instance.notice(m.instance.getLanguage(132))}setTypeData(){let e;switch(this.recordItemVo.logType){case 0:e=1536;break;case 2:e=1537;break;case 12:e=1538;break;case 20:e=1539;break;case 19:e=1540;break;case 6:e=1541;break;case 23:e=1542;break;case 31:e=1549;break;case 1:e=1550;break;default:e=1536;break}this.tf_type.text=m.instance.getLanguage(e)}onDisable(){this.removeEvent()}removeEvent(){}};Rf=h([t2("DhTylrISSfmA8oRRMwHOnw")],Rf);var Pf=class extends Laya.Box{};var{regClass:i2}=Laya,Nf=class extends Pf{set dataSource(e){if(super.dataSource=e,e){var i=e;this.tf_data.text=W.instance.getChainName(i)}}onDisable(){}onChange(e){e?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};Nf=h([i2("psWSlYJaS8O0LUu-BH6R2Q")],Nf);var Of=class extends Laya.Box{};var{regClass:a2}=Laya,Hf=class extends Of{set dataSource(e){if(super.dataSource=e,e){var i=e;this.tf_data.text=i.name}}onDisable(){}onChange(e){e?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};Hf=h([a2("2gLgNMBIQd-cWw6HJjr46Q")],Hf);var Uf=class extends Laya.Dialog{};var{regClass:n2}=Laya,Vf=class extends Uf{constructor(){super()}onEnable(){this.list_champ.visible=!1,this.setOpenData()}async setOpenData(){var t=await I.requestPost("wxgame/payOrder/list",{});if(t){let e=t.orderItems;this.list_champ.array=e,this.list_champ.visible=!0}!t.orderItems||t.orderItems.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}onDisable(){}};Vf=h([n2("y0xiZs-qSDWRAXN_oE10yg")],Vf);var Ff=class extends Laya.Box{};var{regClass:r2}=Laya,Gf=class extends Ff{constructor(){super()}addEvent(){}set dataSource(t){if(super.dataSource=t,!t){this.visible=!1;return}this.setData(t),this.addEvent()}setData(t){let e=ce.formatDayAndTime(t.createTime);switch(this.tf_day.text=e.date,this.tf_minute.text=e.time,this.img_coinType.skin=D.instance.getMoneyIcon(t.coinType),this.tf_amounte.text=`${t.payMoney}`,this.tf_serviceRate.text=`${t.fee.toFixed(8).replace(/\.?0+$/,"")}`,this.tf_arrive.text=`${t.arriveMoney.toFixed(8).replace(/\.?0+$/,"")}`,this.tf_network.text=W.instance.getChainName(t.matchId),t.status){case 0:this.tf_status.text="Pending review",this.tf_status.color="#4be063";break;case 1:this.tf_status.text="Approved",this.tf_status.color="#4be063";break;case 2:this.tf_status.text="Not passed",this.tf_status.color="#cd4a4a";break;case 3:this.tf_status.text="Uploading",this.tf_status.color="#ffffff";break;case 4:this.tf_status.text="Upload Failed",this.tf_status.color="#cd4a4a";break;case 5:var i=m.instance.getUILang("successfully");this.tf_status.text=i,this.tf_status.color="#4be063";break;case 6:this.tf_status.text="Withdraw success",this.tf_status.color="#4be063";break}}};Gf=h([r2("tbS8gPlOTWuMdXb9g8wZAg")],Gf);var Kf=class extends Laya.Dialog{};var{regClass:s2}=Laya,qf=class extends Kf{constructor(){super();this.destroyDoCancel=!1;this.canClose=!0}onEnable(){this.on(Laya.Event.CLICK,this,this.onClickEvent)}onClickEvent(e){let i=e.target;i.name=="okBtn"?(this._okHandler&&this._okHandler.runWith(null),this.close()):i.name=="cancleBtn"&&(this.destroyDoCancel=!1,this._cancelHandler&&this._cancelHandler.runWith(null),this.close())}setOpenData(e){e&&(this._okHandler=e.okHandler,this._cancelHandler=e.cancelHandler,this.destroyDoCancel=e.destroyDoCancel,e.flag<0?(this.cancleBtn.visible=!1,this.okBtn.visible=!1,this.canClose=!1):e.flag&P.YES&&!(e.flag&P.NO)?(this.okBtn.x=this.width-this.okBtn.width>>1,this.cancleBtn.visible=!1,this.okBtn.label="Sure"):e.flag&P.NO&&!(e.flag&P.YES)?this.okBtn.visible=!1:e.flag&P.YES&&e.flag&P.NO,e.data&&this.alertDesc&&(e.data instanceof Array?(this.alertTitle.text=e.data[0],this.alertDesc.text=e.data[1]):this.alertDesc.text=e.data),e.initHandler&&e.initHandler.runWith(this))}onDisable(){this.destroyDoCancel&&this._cancelHandler&&this._cancelHandler.run(),this._okHandler=null,this._cancelHandler=null}close(e){this.canClose&&super.close(e)}};qf=h([s2("8G0DBvD7T_2CVupdfQXrBw")],qf);var Wf=class extends Laya.Dialog{};var{regClass:o2}=Laya,Yf=class extends Wf{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.activityList.visible=!1,this.tab1.on(Laya.Event.CLICK,this,this.onTabClick,[1]),this.tab2.on(Laya.Event.CLICK,this,this.onTabClick,[2]),this.tab3.on(Laya.Event.CLICK,this,this.onTabClick,[3]),this.onTabClick(1),this.refreshRed(),g.intance.on(f.REFRESH_ACTIVITY_RED,this,this.refreshRed)}onChangeHead(){A.intance.openModule(y.SelectHeadDialog,!0)}async onTabClick(e){for(let n=1;n<4;n++)e==n?(this["tab"+n].skin="res/scholarship/img_transfer_tab2.png",this["tab"+n].getChildByName("tf_tit").color="#143268"):(this["tab"+n].skin="res/scholarship/img_transfer_tab1.png",this["tab"+n].getChildByName("tf_tit").color="#429fdf");let i=await I.requestPost("wxgame/player/remActiveList",{remType:e});i&&(this.activityList.array=i.list,this.activityList.visible=!0,this.tf_totalActivity.text=m.instance.getLanguage(1555,i.remRate),!this.activityList.array||this.activityList.array.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,g.intance.event(f.REFRESH_MAINSCENE_HEAD_RED),g.intance.event(f.REFRESH_ROLEINFO_RED),this["tab"+e].getChildByName("img_red").visible=!1)}refreshRed(){this.tab1.getChildByName("img_red").visible=b.instance.getRedDotById(ne.RED_ACTIVITY1),this.tab2.getChildByName("img_red").visible=b.instance.getRedDotById(ne.RED_ACTIVITY2),this.tab3.getChildByName("img_red").visible=b.instance.getRedDotById(ne.RED_ACTIVITY3)}onDisable(){g.intance.offAllCaller(this)}};Yf=h([o2("GIxGfJ0QQmuel1O3zm7Weg")],Yf);var zf=class extends Laya.Box{};var{regClass:l2}=Laya,jf=class extends zf{addEvent(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){super.dataSource=e,this.activityItem=e,this.activityItem&&(this.setData(this.activityItem),this.addEvent())}setData(e){this.tf_name.text=e.name,this.tf_address.text=`${Q.shortenString(e.openid,7,8)}`,this.tf_guild.text=m.instance.getMultiLan(e.unionName),this.tf_battle.text=`${e.fight}`,this.tf_score.text=`${e.ticket}`,this.playerIcon.headSkin=e.icon}onCopy(){let e=this.activityItem.openid;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};jf=h([l2("L-m245Z3S8-bKPqo8Afxww")],jf);var $f=class extends Laya.Dialog{};var{regClass:c2}=Laya,Xf=class extends $f{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(e){if(e!=-1){let i=this.list_head.selectedItem;b.instance.headId=i.id,this.playerIcon.headSkin=b.instance.headId}}createHeadList(){let e=_.intance.m_dicHead;this.list_head.array=e.values,this.list_head.visible=!0;let i=-1,n=0;this.playerIcon.headSkin=b.instance.headId;for(let r of e.values){if(r.id==b.instance.headId){i=n;break}n++}this.list_head.selectedIndex=i}onBtnChangePic(){var e=Laya.Render.canvas.style.zIndex,i=m.instance.getUILang("Upload picture"),n=m.instance.getUILang("Select Image"),r=m.instance.getUILang("Save changes");openUploadPic(this,e,i,n,r)}async openPicEnd(e,i){if(i.length>500){let n=await I.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(b.instance.headId=n.imgUrl,e.playerIcon.headSkin=n.imgUrl,console.log(n.imgUrl))}}onRegister(){let e=b.instance.headId;g.intance.event(f.EVENT_MODIFY_HEAD,[e]),this.close()}};Xf=h([c2("BmtPy79ySCyg4IuEQC4zsQ")],Xf);var Qf=class extends Laya.Dialog{};var{regClass:u2}=Laya,Jf=class extends Qf{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.list_characterStar.visible=!1,this.onInit()}async onInit(){var e=_.intance.m_dicCharacterStars.values.filter(n=>n.starLv!==0);this.list_characterStar.array=e,this.list_characterStar.visible=!0,!this.list_characterStar.array||this.list_characterStar.array.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1;let i=await I.requestPost("wxgame/player/getPlayerInfo",{pid:b.instance.playerDto.pid});if(i){let n=i.star;We.instance.setStar2(this,n);let r=i.starExp+""}else T.instance.notice(m.instance.getLanguage(135))}};Jf=h([u2("JCb2ay9yQOa9uxMZE1fJrw")],Jf);var Zf=class extends Laya.Box{};var{regClass:m2}=Laya,ey=class extends Zf{addEvent(){}set dataSource(e){super.dataSource=e,this.characterStarItem=e,this.characterStarItem&&(this.setData(this.characterStarItem),this.addEvent())}setData(e){let i=e.starLv;We.instance.setStar2(this,i+""),this.tf_number.text=m.instance.getLanguage(1798,e.number),this.tf_pasAdd.text=e.pasAdd/100+"%"}};ey=h([m2("wA3mADC1Q7W-qEplQmRhhg")],ey);var ty=class extends Laya.ComboBox{};var{regClass:p2}=Laya,iy=class extends ty{set defaultLabel(t){this._defaultLabel=t,this._selectedIndex<0&&(this._button.label=t)}onEnable(){this.list=this.comboList,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1)}set dataSource(t){super.dataSource=t;var e=t;if(e){this.list.repeatY=e.length,this.list.width=this.width;var i=[];e.forEach(n=>{n instanceof Array?i.push(n[1]):i.push(n)}),this.labels=i.join(","),console.log("comboData.length: "+e.length,this.labels)}}onCountryItemRender(t,e){t.onChange(this.list.selectedIndex==e)}set isOpen(t){if(console.log("isOpen: "+t),this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),i=e.y+this._button.height;i=i+this._listHeight<=Laya.stage.height||e.y-this._listHeight<0?i:e.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(e.x,i),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};iy=h([p2("AqEOSlrnRkmI9RUPCJUVqQ")],iy);var ay=class extends Laya.List{};var{regClass:h2}=Laya,ny=class extends ay{};ny=h([h2("7DDHp602Rs6dL3bjAu4ArA")],ny);var ry=class extends Laya.Box{};var{regClass:d2}=Laya,sy=class extends ry{addEvent(){}set dataSource(e){this.zOrder=5,super.dataSource=e;var i=e;console.log("coinName: ",i),i&&i.label&&(this.addEvent(),this.tf_name.text=i.label)}onChange(e){e?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};sy=h([d2("nREGzTKFSX6LuiRnM5nPXA")],sy);var oy=class extends Laya.Box{};var{regClass:f2}=Laya,ly=class extends oy{addEvent(){}set dataSource(e){super.dataSource=e;var i=e;i&&(this.addEvent(),e.id==999?(this.img_icon.visible=!1,this.tf_name.text="All"):(this.img_icon.visible=!0,this.img_icon.skin=D.instance.getCountryIcon(i.id),this.tf_name.text=m.instance.getLanguage(i.name)))}onChange(e){e?(this.selectImg.visible=!0,this.tf_name.color="#ffffff"):(this.tf_name.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};ly=h([f2("LJ8PUf7kRCGUr4eT8Mhy3g")],ly);var cy=class extends Laya.Dialog{};var fo=class extends Laya.Event{constructor(){super()}};fo.INIT_CREATELOGIN_EVENT="CreateLoginEvent:INIT_CREATELOGIN_EVENT";var{regClass:y2}=Laya,uy=class extends cy{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){g.intance.on(fo.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),g.intance.on(f.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),g.intance.on(f.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack),this.btn_setting.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_setting]),this.btn_radio1.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio1]),this.btn_radio2.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_radio2]),this.btn_register.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_register]),this.box_change.on(Laya.Event.CLICK,this,this.onChangeHead),this.input_name.prompt=m.instance.getLanguage(31),this.selectRadio(1),this.initCountry(),this.initCreateLoginView(),Ne.instance.sendCustumEvent(23)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}onListDown(e){e.stopPropagation()}onScrollBarDown(e){e.stopPropagation()}onCountryItemRender(e,i){e.onChange(this.list_country.selectedIndex==i)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(e){if(console.log("handleSelectCountry: "+e),e!=-1){let i=this.list_country.selectedItem;b.instance.countryId=i.id,this.img_flag.skin=D.instance.getCountryIcon(i.id),this.tf_country.text=m.instance.getLanguage(i.name)}}createCountryList(){let e=_.intance.m_dicCountry;this.list_country.array=e.values,this.list_country.visible=!0;let i=-1,n=0;for(let r of e.values){if(r.id==b.instance.countryId){i=n;break}n++}this.list_country.selectedIndex=i}onChangeHeadBack(e,i){this.input_name.text=e,b.instance.headId=i,this.playerIcon.headSkin=i}onChangeModifyHead(e){b.instance.headId=e,this.playerIcon.headSkin=e}onChangeHead(){A.intance.openModule(y.ChangeHeadDialog)}onBtnChangePic(){var e=Laya.Render.canvas.style.zIndex,i=m.instance.getUILang("Upload picture"),n=m.instance.getUILang("Select Image"),r=m.instance.getUILang("Save changes");openUploadPic(this,e,i,n,r)}async openPicEnd(e,i){if(i.length>500){let n=await I.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(b.instance.headId=n.imgUrl,e.playerIcon.headSkin=n.imgUrl,console.log(n.imgUrl))}}selectRadio(e){let i=e==1;this.btn_radio1.selected=i,this.btn_radio2.selected=!i}handleClickBtn(e){switch(e){case this.btn_radio1:this.selectRadio(1);break;case this.btn_radio2:this.selectRadio(2);break;case this.btn_register:this.onRegister();break;case this.btn_setting:A.intance.openModule(y.GameSettingLanguageDialog);break}}async onRegister(){let e=this.input_name.text,i=this.btn_radio1.selected?1:2;if(e=e.trim(),e==""){T.instance.notice(m.instance.getLanguage(31));return}if(b.instance.countryId==-1){T.instance.notice(m.instance.getLanguage(1048));return}let s=new URL(window.location.href).searchParams.get("referral");console.log("referral: ",s);let o=await W.instance.createAcccount(e,i,b.instance.headId.toString(),b.instance.countryId,s);this.onWaitPlayerInfoBack(o)}onWaitPlayerInfoBack(e){e&&(_e.instance.hideLoading(),b.instance.playerDto=e,this.close(),g.intance.event(f.EVENT_ENTER_MAIN))}initCreateLoginView(){}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(fo.INIT_CREATELOGIN_EVENT,this,this.initCreateLoginView),g.intance.off(f.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),g.intance.off(f.EVENT_WAIT_PLAYERINFO,this,this.onWaitPlayerInfoBack)}};uy=h([y2("1K2SyFxcQY-12SasSSRXyQ")],uy);var my=class extends Laya.Dialog{};var{regClass:b2}=Laya,py=class extends my{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0;this.btnLock=!1;this.currTab=0}onEnable(){this.list_rental.visible=!1,this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.btn_claim.on(Laya.Event.CLICK,this,this.onClaimRem),this.list_rental.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange),this.list_toBeClaimed.on(Laya.Event.CLICK,this,this.clickList),this.initContainer()}initContainer(){this.getReferralData(),this.showReferralNum()}onScrollBarChange(){this.list_rental.scrollBar.value>=this.list_rental.scrollBar.max&&this.loadMoreData()}async getReferralData(e=!1){let i=await I.requestPost("wxgame/player/referralList1",{pageSize:this.pageSize,page:this.pageIndex});i&&(this.list_rental.array=i.list,this.list_rental.visible=!0,this.list_rental.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e=await I.requestPost("wxgame/player/referralList1",{pageSize:this.pageSize,page:this.pageIndex});if(console.log(e),e){this.scrolLock=!0;let i=e.list;this.list_rental.array.push(...i),this.list_rental.array=this.list_rental.array,Laya.timer.clear(this,this.refreshLock)}}}refreshLock(){this.scrolLock=!0,console.log("重置锁")}async onClickTab(e){this.currTab!=e&&(this.setTab(e),e==2&&(this.noDataBox.visible=!1,this.showReceivedData()))}setTab(e){for(let i=1;i<3;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b",this["btn_"+i].getChildByName("selectBox").skin="res/role/img_transfer_tab2_1.png",this["box_"+i].visible=!0):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#76c7ff",this["btn_"+i].getChildByName("selectBox").skin="res/role/img_transfer_tab1_1.png",this["box_"+i].visible=!1)}async showReferralNum(){let e=await I.requestPost("wxgame/player/referralListInfo",{pageSize:this.pageSize,page:this.pageIndex});console.log(e),e&&(this.tf_l1.text=`${e.total}`,this.tf_l2.text=`${e.twoTotal}`,this.tf_battle.text=`${e.totalBattles}`)}onDisable(){this.list_rental.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}async showReceivedData(){var e=await I.requestPost("wxgame/money/remRewardListAll",{});if(e&&e.reward){e.reward.length<1?this.btn_claim.disabled=!0:this.btn_claim.disabled=!1;let n=Q.processItemsArray(e.reward)[0];this.list_toBeClaimed.array=n,this.list_toBeClaimed.visible=!0,this.list_toBeClaimed.vScrollBarSkin="",this.list_toBeClaimed.selectedIndex=-1}if(e&&e.rewardRecord){let n=Q.processItemsArray(e.rewardRecord)[0];this.list_claimed.array=n,this.list_claimed.visible=!0,this.list_claimed.vScrollBarSkin="",this.list_claimed.selectedIndex=-1}}async onClaimRem(){if(!this.btnLock){this.btnLock=!0,Laya.timer.once(1e3,this,()=>{this.btnLock=!1});var e=await I.requestPost("wxgame/money/remRewardTake",{});if(e&&e.list.length>0){let i=e.list,n=[];i.forEach(r=>{var s=new vt;s.id=r.id,s.count=r.count,n.push(s)}),A.intance.openModule(y.RewardGetDialog,n)}this.showReceivedData()}}clickList(){console.log("123333333")}};py=h([b2("sawRNG-YR0WiyH87IfeHmg")],py);var hy=class extends Laya.Dialog{};var{regClass:g2}=Laya,dy=class extends hy{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0}onEnable(){this.list_rental2.visible=!1,this.list_rental2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange)}setOpenData(e){e&&(console.log(e),this.pid=e.pid,this.getReferralData())}onScrollBarChange(){this.list_rental2.scrollBar.value>=this.list_rental2.scrollBar.max&&this.loadMoreData()}async getReferralData(){let e=await I.requestPost("wxgame/player/referralList2",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});e&&(this.list_rental2.array=e.list,this.list_rental2.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e=await I.requestPost("wxgame/player/referralList2",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});if(console.log(e),e){this.scrolLock=!0;let i=e.list;this.list_rental2.array.push(...i),this.list_rental2.array=this.list_rental2.array,Laya.timer.clear(this,this.refreshLock)}}}refreshLock(){this.scrolLock=!0,console.log("重置锁")}onDisable(){this.list_rental2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}};dy=h([g2("kAtevFvnTYGkg5Pu-ISlQw")],dy);var fy=class extends Laya.Box{};var{regClass:L2}=Laya,yy=class extends fy{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_battle.on(Laya.Event.CLICK,this,this.onBtnBattle)}set dataSource(e){e&&(super.dataSource=e,this.referralData=e,this.tf_name.text=e.name,this.tf_guild.text=m.instance.getMultiLan(e.unionName),this.playerIcon.headSkin=e.icon,this.tf_l2.text=e.fightTimes,e.openid?(this.fromBox.visible=!0,this.address=e.openid,this.tf_from.text=`${Q.shortenString(e.openid,7,4)}`):this.fromBox.visible=!1)}onBtnBattle(){console.log("btn12"),this.referralData.fightTimes>0&&A.intance.openModule(y.TotalBattlesDialog,this.referralData)}onCopy(){let e=this.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};yy=h([L2("6RSP0qtzSg-R9oUDT-GOCw")],yy);var by=class extends Laya.Box{};var{regClass:_2}=Laya,gy=class extends by{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_l2.on(Laya.Event.CLICK,this,this.onBtn12),this.btn_battle.on(Laya.Event.CLICK,this,this.onBtnBattle)}set dataSource(e){e&&(super.dataSource=e,this.referralData=e,this.tf_name.text=e.name,this.tf_guild.text=m.instance.getMultiLan(e.unionName),this.playerIcon.headSkin=e.icon,this.tf_l2.text=e.remNum,this.tf_battle.text=e.fightTimes,e.openid?(this.fromBox.visible=!0,this.address=e.openid,this.tf_from.text=`${Q.shortenString(e.openid,7,4)}`):this.fromBox.visible=!1)}onBtn12(){this.referralData.remNum>0&&A.intance.openModule(y.ReferralL2Dialog,this.referralData)}onBtnBattle(){console.log("btn12"),this.referralData.fightTimes>0&&A.intance.openModule(y.TotalBattlesDialog,this.referralData)}onCopy(){let e=this.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};gy=h([_2("QTOEy7PgRqi9dIWmX22OTw")],gy);var Ly=class extends Laya.Dialog{};var{regClass:v2}=Laya,_y=class extends Ly{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){ze.instance.playSoundByName(ze.soundName32)}onDisable(){}};_y=h([v2("szfg-Zt_RRWZ_nHMppjUMA")],_y);var vy=class extends Laya.Box{};var{regClass:x2}=Laya,xy=class extends vy{set dataSource(t){super.dataSource=t;var e=t;e&&(this.img_icon.skin="res/role/img_icon_"+e[0]+".png",this.tf_name.text=m.instance.getUILang(e[1]),this.tf_num.text=e[2])}};xy=h([x2("WJ5TDeRBSkC9yMqJ72B0Ow")],xy);var Iy=class extends Laya.Box{};var{regClass:I2}=Laya,Ey=class extends Iy{set dataSource(e){super.dataSource=e,this.headItem=e,this.headItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let e=this.headItem.id;this.playerIcon.headSkin=e}onChange(e){}};Ey=h([I2("AwN_JFPwQsKswm1N53Bmkg")],Ey);var wy=class extends Laya.Dialog{};var{regClass:E2}=Laya,Ty=class extends wy{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_copy2.on(Laya.Event.CLICK,this,this.onCopy2),this.btn_copyReferral.on(Laya.Event.CLICK,this,this.onCopyReferral),this.btn_changeHead.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_receive.on(Laya.Event.CLICK,this,this.onReceive),this.btn_activity.on(Laya.Event.CLICK,this,this.onActivity),this.btn_starView.on(Laya.Event.CLICK,this,this.onOpenCharacterStarDialog),this.btn_detail.on(Laya.Event.CLICK,this,this.onDetail),this.redemptionCode.on(Laya.Event.FOCUS,this,this.redemFocus),g.intance.on(f.ROLE_INFO_CHANGE,this,this.updateRoleInfo),g.intance.on(f.REFRESH_ROLEINFO_RED,this,this.refreshActivityRed),this.refreshActivityRed(),this.updateRoleInfo()}redemFocus(){this.redemptionCode.text=""}updateRoleInfo(){let e=b.instance.playerDto;this.tf_name.text=e.name,this.img_sex.skin=e.sex==1?"res/role/img_icon_xb_1.png":"res/role/img_icon_xb_2.png",this.tf_uid.text=e.pid.toString(),this.tf_myCode.text=e.remCode,this.ally_num.text=`${e.remCount}`,this.tf_myCode.text==""?this.btn_copy2.disabled=!0:this.btn_copy2.disabled=!1,e.superRemCode?(this.btn_receive.disabled=!0,this.redemptionCode.text=`${e.superRemCode}`,this.yf_receive.text="Received"):this.yf_receive.text="Receive";var i=_.intance.m_dicCountry.get(e.country);this.img_country.skin=D.instance.getCountryIcon(e.country+""),this.tf_address.text=Be.formatWalletAddress(W.instance.walletAddress);let n=e.icon;this.playerIcon.headSkin=n,this.onGetAttr(e.pid)}async onGetAttr(e){let i=this,n=await I.requestPost("wxgame/player/getPlayerInfo",{pid:e});if(n){this.box_starui.visible=!0;let r=n.star;We.instance.setStar2(this,r),this.box_starui.visible=!0;let s=n.starExp+"",l=_.intance.getCharacterStars(r).number;this.tf_mntArenaNum.text=m.instance.getUILang("MNT Arena")+`: <font color="#87f17f">${s}</font>/${l} <img src='res/roleStar/img_jiantou.png' />`,this.fighting_value.text=n.fightTimes,this.victory_num.text=n.winTimes,this.fail_num.text=`${n.fightTimes-n.winTimes}`,this.runAway_num.text=n.taopao}else T.instance.notice(m.instance.getLanguage(135))}onChangeHead(){A.intance.openModule(y.SelectHeadDialog,!0)}async onReceive(){if(this.redemptionCode.text=="Enter the redemption code to claim equipment(unique)"||this.redemptionCode.text=="輸入兌換碼領取裝備（唯一）"||this.redemptionCode.text==""){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1123),P.YES,null);return}if(this.redemptionCode.text==this.tf_myCode.text&&this.redemptionCode.text!==""){me.instance().AlertByType(P.BASEALERTVIEW,"You cannot enter your own invitation code.",P.YES,null);return}let e=this.redemptionCode.text,i=await I.requestPost("wxgame/player/setRem",{code:e});i&&(A.intance.openModule(y.RemGetDialog),b.instance.playerDto.superRemCode=i.code,this.btn_receive.disabled=!0,this.yf_receive.text="Received",this.tf_myCode.text=i.recommendCode,b.instance.playerDto.remCode=i.recommendCode,this.tf_myCode.text==""?this.btn_copy2.disabled=!0:this.btn_copy2.disabled=!1)}onCopy(){let e=W.instance.walletAddress;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}onCopy2(){let e=this.tf_myCode.text;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}onCopyReferral(){let e=this.tf_myCode.text,i=this.onGetNewUrl(e);doCopy(i),T.instance.notice(m.instance.getLanguage(132))}onGetNewUrl(e){let i=new URL(window.location.href),n=i.searchParams;n.get("referral")&&n.delete("referral"),n.has("debug")&&n.delete("debug"),n.has("address")&&n.delete("address");let s=e;return n.append("referral",s+""),i.search=n.toString(),i.toString()}onDisable(){g.intance.off(f.ROLE_INFO_CHANGE,this,this.updateRoleInfo),g.intance.offAllCaller(this),this.redemptionCode.off(Laya.Event.FOCUS,this,this.redemFocus)}onActivity(){A.intance.openModule(y.ActivityInfoDialog)}onOpenCharacterStarDialog(){A.intance.openModule(y.CharacterStarDialog)}onDetail(){A.intance.openModule(y.ReferralDialog)}refreshActivityRed(){this.img_activieyRed.visible=b.instance.getRedDotById(ne.RED_ACTIVITY1)||b.instance.getRedDotById(ne.RED_ACTIVITY3)}};Ty=h([E2("T7g565QQR7-fZgZNjVg92A")],Ty);var Cy=class extends Laya.Dialog{};var{regClass:w2}=Laya,Sy=class extends Cy{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}setOpenData(e){}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.btn_custom.on(Laya.Event.CLICK,this,this.onBtnChangePic),this.input_name.prompt=m.instance.getLanguage(31),this.initContainer();let e=_.intance.getGeneralValueById(13);this.tf_nameGold.text=e[1],this.img_nameGold.skin=D.instance.getMoneyIcon(e[0]),console.log(e)}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList(),this.initCountry()}handleSelectHead(e){if(e!=-1){let i=this.list_head.selectedItem;b.instance.headId=i.id,this.playerIcon.headSkin=b.instance.headId}}createHeadList(){let e=_.intance.m_dicHead;this.list_head.array=e.values,this.list_head.visible=!0;let i=-1,n=0;b.instance.headId=b.instance.playerDto.icon,this.playerIcon.headSkin=b.instance.headId,this.input_name.text=b.instance.playerDto.name;for(let r of e.values){if(r.id==b.instance.headId){i=n;break}n++}this.list_head.selectedIndex=i}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onCountryItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}onListDown(e){e.stopPropagation()}onScrollBarDown(e){e.stopPropagation()}onCountryItemRender(e,i){e.onChange(this.list_country.selectedIndex==i)}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}handleSelectCountry(e){if(console.log("handleSelectCountry: "+e),e!=-1){let i=this.list_country.selectedItem;b.instance.countryId=i.id,this.img_flag.skin=D.instance.getCountryIcon(i.id),this.tf_country.text=m.instance.getLanguage(i.name)}}createCountryList(){let e=_.intance.m_dicCountry;this.list_country.array=e.values,this.list_country.visible=!0;let i=-1,n=0;b.instance.countryId=b.instance.playerDto.country;for(let r of e.values){if(r.id==b.instance.countryId){i=n;break}n++}this.list_country.selectedIndex=i}onBtnChangePic(){var e=Laya.Render.canvas.style.zIndex,i=m.instance.getUILang("Upload picture"),n=m.instance.getUILang("Select Image"),r=m.instance.getUILang("Save changes");openUploadPic(this,e,i,n,r)}async openPicEnd(e,i){if(i.length>500){let n=await I.requestPost("wxgame/player/uploadImg",{base64Str:i},!1,!1);n&&(b.instance.headId=n.imgUrl,e.playerIcon.headSkin=n.imgUrl,e.list_head.selectedIndex=-1,console.log(n.imgUrl))}}onRegister(){let e=this.input_name.text;if(e=e.trim(),e==""){T.instance.notice(m.instance.getLanguage(31));return}if(b.instance.playerDto.name!==e&&b.instance.getConsumeValue(ve.TYPE_GOLD)<Number(this.tf_nameGold.text)){T.instance.notice(Le.instance.get(51));return}b.instance.headId!=-1?this.onModify(e,b.instance.headId,b.instance.countryId):T.instance.notice(m.instance.getLanguage(134))}async onModify(e,i,n){if(e==""){T.instance.notice(m.instance.getLanguage(31));return}let r=await Yr.instance.updateProfile(e,i.toString(),n);this.destroyed||(r?(b.instance.playerDto=r,this.close(),g.intance.event(f.ROLE_INFO_CHANGE)):T.instance.notice(m.instance.getLanguage(135)))}};Sy=h([w2("3CibwwHGSPG2Qkeq4rbMag")],Sy);var Dy=class extends Laya.Dialog{};var{regClass:T2}=Laya,Ay=class extends Dy{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0}onEnable(){this.list_battle.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange)}setOpenData(e){e&&(console.log(e),this.pid=e.pid,this.getReferralData())}onScrollBarChange(){this.list_battle.scrollBar.value>=this.list_battle.scrollBar.max&&this.loadMoreData()}async getReferralData(){let e=await I.requestPost("wxgame/player/battlesList",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});e&&(this.list_battle.array=e.list,this.list_battle.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e=await I.requestPost("wxgame/player/battlesList",{pageSize:this.pageSize,page:this.pageIndex,playerId:this.pid});if(console.log(e),e){this.scrolLock=!0;let i=e.list;this.list_battle.array.push(...i),this.list_battle.array=this.list_battle.array,Laya.timer.clear(this,this.refreshLock)}}}refreshLock(){this.scrolLock=!0,console.log("重置锁")}onDisable(){this.list_battle.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}};Ay=h([T2("qq0DrNoKSVmnXx-7vsMvNw")],Ay);var ky=class extends Laya.Box{};var{regClass:C2}=Laya,By=class extends ky{constructor(){super()}createChildren(){super.createChildren()}onEnable(){}set dataSource(e){if(!e)return;super.dataSource=e;let i=ce.formatDayAndTime(e.time);this.tf_endDate.text=`${i.date} ${i.time}`;var n=_.intance.m_dicArenaDic.get(e.arenaId);this.tf_arena.text=m.instance.getLanguage(n.name),this.img_coinType2.skin=D.instance.getMoneyIcon(e.coinType),this.tf_ticket.text=`${e.ticketValue}`,this.tf_bonus.text=`${e.bonus}`;let r=b.instance.getConsumeValue(e.coinType),s=_.intance.m_dicItems.get(e.coinType),o=m.instance.getLanguage(s.name);this.tf_moneyName.text=o}onBtn12(){this.referralData.l2>0&&A.intance.openModule(y.ReferralL2Dialog,this.referralData)}onCopy(){let e=this.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};By=h([C2("iUE6F1pjTg-jhQSieKM2hg")],By);var My=class extends Laya.ComboBox{};var{regClass:S2}=Laya,Ry=class extends My{set defaultLabel(t){this._defaultLabel=t,this._selectedIndex<0&&(this._button.label=t),this._button.labelAlign="center"}onEnable(){this.list=this.comboList}set dataSource(t){super.dataSource=t;var e=t;e&&(this.labels=e.join(","),console.log("comboData.length: "+e.length),this.list.repeatY=e.length,this.list.width=this.width,this.list.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1))}onCountryItemRender(t,e){t.onChange(this.list.selectedIndex==e)}set isOpen(t){if(console.log("isOpen: "+t),this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(Laya.Point.TEMP.setTo(0,0)),i=e.y+this._button.height;i=i+this._listHeight<=Laya.stage.height||e.y-this._listHeight<0?i:e.y-this._listHeight,this.img_pad.addChild(this._list),this.img_pad.pos(e.x,i),this.img_pad.visible=!0,Laya.stage.addChild(this.img_pad),this.img_pad.zOrder=1001,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.removeList),Laya.stage.on(Laya.Event.MOUSE_WHEEL,this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf(),this.img_pad&&this.img_pad.removeSelf()}};Ry=h([S2("Fns-7UW3RpSb95NWnjiDFQ")],Ry);var Py=class extends Laya.Box{};var{regClass:D2}=Laya,Ny=class extends Py{constructor(){super()}addEvent(){}set dataSource(t){super.dataSource=t,t&&(this.setData(t),this.addEvent())}setData(t){this.playerIcon.headSkin=t.pic,this.tf_name.text=t.name;var e=new Pe(t.itemId);t.itemId<1e6?(e.itemItem&&(this.img_prop.skin=D.instance.getItemIcon(e.itemItem.icon)),this.tf_value.text=`x${t.itemCount}`,this.img_prop.visible=!0):(this.tf_value.text="x1",this.img_prop.visible=!1)}};Ny=h([D2("5m33h8fgRfuOQ2uY1AqnNw")],Ny);var Oy=class extends Laya.Dialog{};var{regClass:A2}=Laya,Hy=class extends Oy{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.wheelType=1}onEnable(){}setOpenData(e){}onDisable(){}};Hy=h([A2("A1lCmwZyTaakvRLkYjnuQA")],Hy);var Uy=class extends Laya.Dialog{};var{regClass:k2}=Laya,Vy=class extends Uy{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.needNum=1;this.propNum=0;this.allProp=[];this.wheelType=1;this.items=[]}onEnable(){this.listPanel1.visible=!1,this.listPanel1.selectHandler=new Laya.Handler(this,this.handleSelectProp),this.btn_wheel.on(Laya.Event.CLICK,this,this.onBtnWheel),this.initPropList()}setOpenData(e){e&&(this.wheelType=e[0])}async initPropList(){let e=[];this.allProp=await this.getItemByType();let i=_.intance.getWheelByType(this.wheelType);console.log(i);let n=i[0].consumption;this.needNum=n[0][1],console.log("需要碎片======================》",this.needNum);let r=this.getAirdropArrData(this.allProp,n);console.log(r),this.listPanel1.array=r,this.listPanel1.visible=!0,this.listPanel1.selectedIndex=0}async getItemByType(){var e=Ge.TYPE_Consumption;this.items=[];for(var i=b.instance.m_packageData.getBackByType(e),n=0;n<i.length;n++){var r=i[n];r?this.items.push(r):this.items.push(new Pe(0))}return this.items}getAirdropArrData(e,i){let n=[];for(let r=0;r<i.length;r++){let s=e.find(o=>o._m_iId==i[r][0]);s&&n.push(s)}return n}handleSelectProp(e){if(e!==-1){let i=this.listPanel1.selectedItem;i&&(this.propNum=Number(i._m_iNum),console.log("该物品拥有数量:",this.propNum))}}async onBtnWheel(){let e=this.listPanel1.selectedItem,i=Number(e._m_iNum);if(this.needNum>i)T.instance.notice("Insufficient puzzle pieces");else{let n=await I.requestPost("wxgame/wheel/turn",{type:this.wheelType,itemId:e._m_iId,itemCount:this.needNum});n&&(console.log(n),this.close(),gt.instance.ownerBag(),g.intance.event(f.SEND_WHEEL_RESULT,n),gt.instance.ownerBag())}}onDisable(){}};Vy=h([k2("tOKleLLDR9uKlH2QwK8wHw")],Vy);var Fy=class{};var Gy=class extends Laya.Scene{};var{regClass:B2,property:xxe}=Laya,Ky=class extends Gy{constructor(){super(...arguments);this.text="";this.wheelReward=[];this.wheelLock=!1;this.wheelId=0}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onEnable(){g.intance.on(f.SEND_WHEEL_RESULT,this,this.startLottery),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.btn_3.on(Laya.Event.CLICK,this,this.onClickTab,[3]),this.btn_openFree1.on(Laya.Event.CLICK,this,this.openPropDialog,[1]),this.btn_openFree2.on(Laya.Event.CLICK,this,this.openPropDialog,[2]),this.btn_openFree3.on(Laya.Event.CLICK,this,this.openPropDialog,[3]),this.check_records.on(Laya.Event.CLICK,this,this.onCheck),this.btn_openFree1.label=m.instance.getLanguage(1665,1),this.btn_openFree2.label=m.instance.getLanguage(1665,5),this.btn_openFree3.label=m.instance.getLanguage(1665,10),this.check_records.selected=!1,this.initContainer(1),this.initContainer(2),this.initContainer(3),this.showNameList(),this.close&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.onClickTab(1)}async onClickTab(e){this.wheelLock||(this.setTab(e),this.box_all.visible=!0)}async openPropDialog(e){this.wheelLock||A.intance.openModule(y.DailyTaskPropsDialog,[e])}setTab(e){for(let i=1;i<4;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b",this["box_"+i]&&(this["box_"+i].visible=!0)):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe",this["box_"+i]&&(this["box_"+i].visible=!1))}setTopTab(e){for(let i=1;i<4;i++)console.log(i),e==i?(this["btn_top_"+i].getChildByName("selectBox").visible=!0,this["btn_top_"+i].getChildByName("tf_txt").color="#ffffff"):(this["btn_top_"+i].getChildByName("selectBox").visible=!1,this["btn_top_"+i].getChildByName("tf_txt").color="#4e87b7")}initContainer(e){let i=_.intance.getWheelByType(e);console.log(i);for(let n=0;n<i.length;n++){let r=i[n];if(r){let s=this["turntableBox_"+e+"_"+(n+1)].getChildByName("propBox"),o=D.instance.getItemIcon(r.wheelImage);s.getChildByName("img_reardIcon").skin=o,s.visible=!0,s.getChildByName("tf_name").text=m.instance.getLanguage(r.name);let l=s.getChildByName("tf_num");l&&(l.text=`x${r.rewardNum}`,r.rewardNum==0&&(l.visible=!1))}}}async showNameList(){let e=await I.requestPost("wxgame/wheel/panel",{});if(e)if(console.log(e),!this.check_records.selected)this.list_name.array=e.rewards;else{let i=[];i=e.rewards.filter(n=>n.pid==b.instance.playerDto.pid),this.list_name.array=i}}setToMainScene(){this.wheelLock||se.intance.setCurrentScene(Y.M_SCENE_MAIN)}getTargetIdxByWheelId(e){return e<7?e:e>=7&&e<15?e-6:e-14}startLottery(e){let i=e.type;console.log("btn_openFree",e),this.wheelLock=!0;let n=this.getTargetIdxByWheelId(e.wheelId),r=this["turntableBox_"+i+"_"+n].getChildByName("propBox"),s,o,l;this.wheelReward=e.reward,this.wheelId=e.wheelId,console.log("wheelReward=======================>",this.wheelReward),i==1?(s=6,o=this.img_pan1,l=r.getChildByName("img_guang")):i==2?(s=8,o=this.img_pan2,l=this.img_guang2):(s=10,o=this.img_pan3,l=r.getChildByName("img_guang")),l.visible=!1;let c=360/s,u=360-n*c+c,d=(Math.floor(Math.random()*5)+5)*360+u,L=new Laya.Tween,v=this;L.to(o,{rotation:d},7e3,Laya.Ease.expoInOut,Laya.Handler.create(this,function(){console.log("抽奖完成，抽中奖品："+n),o.rotation=u,Laya.timer.once(150,v,()=>{v.blinkImage(l,3)})}))}blinkImage(e,i){let n=0,r=this;function s(){if(!(!e||!r))if(e.visible=!e.visible,n++,n<i*2)Laya.timer.once(100,r,s);else{if(r.wheelLock=!1,e.visible=!1,r.wheelId==23){let o=[];r.wheelReward.forEach(l=>{var c=new Fy;c.id=l.id,o.push(c)}),b.instance.herosDataUpdataHandler(o)}else if(r.wheelReward&&r.wheelReward.length>0){let o=[];r.wheelReward.forEach(l=>{var c=new vt;c.id=l.id,c.count=l.count,o.push(c)}),A.intance.openModule(y.RewardGetDialog,o)}else A.intance.openModule(y.DailyTaskNoPropsDialog);r.showNameList()}}s()}onCheck(){this.showNameList()}onDisable(){this.removeEvent()}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),g.intance.off(f.SEND_WHEEL_RESULT,this,this.startLottery)}};Ky=h([B2("lukqyw9IQG6emThMQcQxNg")],Ky);var qy=class extends Laya.Scene{};var{regClass:M2,property:qxe}=Laya,Wy=class extends qy{constructor(){super(...arguments);this.text="";this.wheelReward=[];this.wheelLock=!1;this.wheelId=0;this.tabIndex=1;this.totalTabNum=9;this.timeMap=new Map;this.targetNumber=0;this.duration=2e3;this.updateInterval=30;this.currentValue=0;this.step=0}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onEnable(){g.intance.on(f.SEND_WHEEL_RESULT,this,this.startLottery);for(let r=1;r<=this.totalTabNum;r++)this["btn_"+r].on(Laya.Event.CLICK,this,this.onClickTab,[r]);this.btn_refresh.on(Laya.Event.CLICK,this,this.showPrizePool),this.btn_openFree1.on(Laya.Event.CLICK,this,this.useWheel,[1]),this.btn_openFree2.on(Laya.Event.CLICK,this,this.useWheel,[2]),this.btn_openFree3.on(Laya.Event.CLICK,this,this.useWheel,[3]),this.btn_openFree4.on(Laya.Event.CLICK,this,this.useWheel,[4]),this.btn_openFree8.on(Laya.Event.CLICK,this,this.useWheel,[8]),this.btn_openFree5.on(Laya.Event.CLICK,this,this.openPropDialog,[1]),this.btn_openFree6.on(Laya.Event.CLICK,this,this.openPropDialog,[2]),this.btn_openFree7.on(Laya.Event.CLICK,this,this.openPropDialog,[3]),this.check_records.on(Laya.Event.CLICK,this,this.onCheck),this.tab0.on(Laya.Event.CLICK,this,this.setBoxTab,[0]),this.tab1.on(Laya.Event.CLICK,this,this.setBoxTab,[1]),this.tab2.on(Laya.Event.CLICK,this,this.setBoxTab,[2]),this.btn_openFree5.label=m.instance.getLanguage(1665,1),this.btn_openFree6.label=m.instance.getLanguage(1665,5),this.btn_openFree7.label=m.instance.getLanguage(1665,10),this.check_records.selected=!1,this.initContainer(1),this.initContainer(2),this.initContainer(3),this.initContainer(4),this.initContainer(5),this.initContainer(6),this.initContainer(7),this.initContainer(8),this.close&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.onClickTab(1);let i=_.intance.getWheel2ByType(1)[0].consumption[0],n=this.btn_openFree8.getChildByName("tf_btn");n.text=m.instance.getLanguage(1726,i[1])}async onClickTab(e){this.wheelLock||(e==9?(this.nameBox.visible=!1,this.img_bj.skin="res/dailyTasks/img_com_bj5.jpg",await this.showPrizePool()):(this.box_all_1.visible&&this.img_bj.skin!="res/dailyTasks/bj_1.jpg"&&(this.img_bj.skin="res/dailyTasks/bj_1.jpg"),await this.getRestWheelNumData(e)),this.BoxsetTab(e))}async showPrizePool(){let e=await I.requestPost("wxgame/wheel1/prizePool",{});if(e){var i=e.totalNum;i=Math.floor(i),this.animateNumber(i)}}animateNumber(e){Laya.timer.clear(this,this.addNumber),this.currentValue=0,this.targetNumber=e,this.step=this.targetNumber/(this.duration/this.updateInterval),Laya.timer.loop(this.updateInterval,this,this.addNumber)}addNumber(){this.currentValue+=this.step,this.currentValue>=this.targetNumber&&(this.currentValue=this.targetNumber,Laya.timer.clear(this,this.addNumber));var e=this.padNumber(Math.floor(this.currentValue),9);this.fontClip_poolNum.value=e}padNumber(e,i){return e.toString().padStart(i,"0")}setBoxTab(e){for(let i=0;i<3;i++)e==i?(this["tab"+i].skin="res/dailyTasks/img_tab-xz.png",this["tab"+i].getChildByName("tf_tit").color="#ffffff"):(this["tab"+i].skin="res/dailyTasks/img_tabdi.png",this["tab"+i].getChildByName("tf_tit").color="#79c7fe");this.box_all_1.visible=e==0,this.box_all_2.visible=e==1,this.box_all_3.visible=e==2,e==0?(this.img_bj.skin="res/dailyTasks/bj_1.jpg",this.onClickTab(1)):e==1?(this.img_bj.skin="res/dailyTasks/bj.jpg",this.onClickTab(5)):this.onClickTab(8)}async openPropDialog(e){this.wheelLock||A.intance.openModule(y.DailyTaskPropsDialog,[e])}BoxsetTab(e){this.tabIndex=e;for(let i=1;i<=this.totalTabNum;i++)if(e==i){if(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b",this["box_"+i]&&(this["box_"+i].visible=!0),e<5){let n=this.getRestWheelNumByType(i),r=this["btn_openFree"+i].getChildByName("tf_left"),s=this["btn_openFree"+i].getChildByName("tf_btn");n>0?r&&(r.text=m.instance.getLanguage(1704,n),r.visible=!0,s.visible=!1):(r.visible=!1,s.visible=!0)}}else this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe",this["box_"+i]&&(this["box_"+i].visible=!1)}setTopTab(e){for(let i=1;i<5;i++)console.log(i),e==i?(this["btn_top_"+i].getChildByName("selectBox").visible=!0,this["btn_top_"+i].getChildByName("tf_txt").color="#ffffff"):(this["btn_top_"+i].getChildByName("selectBox").visible=!1,this["btn_top_"+i].getChildByName("tf_txt").color="#4e87b7")}initContainer(e){let i;e<=4?i=_.intance.getWheel1ByType(e):e>4&&e<8?i=_.intance.getWheelByType(e-4):i=_.intance.getWheel2ByType(e-7);for(let n=0;n<i.length;n++){let r=i[n];if(r){let s=this["turntableBox_"+e+"_"+(n+1)].getChildByName("propBox"),o=D.instance.getItemIcon(r.wheelImage);s.getChildByName("img_reardIcon").skin=o,s.visible=!0,s.getChildByName("tf_name").text=m.instance.getLanguage(r.name);let l=s.getChildByName("tf_num");l&&(l.text=`x${r.rewardNum}`,r.rewardNum==0&&(l.visible=!1));let c=this["btn_openFree"+e].getChildByName("tf_btn");if(c){let u=[];i.length>0&&(u=i[0].consumption[0]);let p=_.intance.m_dicItems.get(u[0]),d=m.instance.getLanguage(p.name);e==8?c.text=`${u[1]} Phantom Credit`:c.text=m.instance.getLanguage(1703,u[1],d,u[2])}}}}setToMainScene(){this.wheelLock||se.intance.setCurrentScene(Y.M_SCENE_MAIN)}getTargetIdxByWheelId(e){return this.tabIndex<5?e<9?e:e>=9&&e<19?e-8:e>=19&&e<33?e-18:e-32:this.tabIndex>=5&&this.tabIndex<8?e<7?e:e>=7&&e<15?e-6:e-14:e}startLottery(e){let i=e.type;this.tabIndex>=5&&this.tabIndex<8?i+=4:this.tabIndex>=8&&(i+=7),this.wheelLock=!0;let n=this.getTargetIdxByWheelId(e.wheelId),r=this["turntableBox_"+i+"_"+n].getChildByName("propBox"),s,o,l;switch(this.wheelReward=e.reward,this.wheelId=e.wheelId,i){case 1:s=8,o=this.img_pan1,l=this.img_guang;break;case 2:s=10,o=this.img_pan2,l=r.getChildByName("img_guang");break;case 3:s=14,o=this.img_pan3,l=r.getChildByName("img_guang");break;case 4:s=16,o=this.img_pan4,l=r.getChildByName("img_guang");break;case 5:s=6,o=this.img_pan5,l=r.getChildByName("img_guang");break;case 6:s=8,o=this.img_pan6,l=this.img_guang6;break;case 7:s=10,o=this.img_pan7,l=r.getChildByName("img_guang");break;case 8:s=16,o=this.img_pan8,l=r.getChildByName("img_guang");break}l.visible=!1;let c=360/s,u=360-n*c+c,d=(Math.floor(Math.random()*5)+30)*360+u,L=new Laya.Tween,v=this;L.to(o,{rotation:d},12e3,Laya.Ease.expoInOut,Laya.Handler.create(this,function(){console.log("抽奖完成，抽中奖品："+n),o.rotation=u,Laya.timer.once(150,v,()=>{v.blinkImage(l,3)})}))}blinkImage(e,i){let n=0,r=this;function s(){if(!(!e||!r))if(e.visible=!e.visible,n++,n<i*2)Laya.timer.once(100,r,s);else{if(r.wheelLock=!1,e.visible=!1,r.wheelId==23,r.wheelReward&&r.wheelReward.length>0){let o=[];r.wheelReward.forEach(l=>{var c=new vt;c.id=l.id,c.count=l.count,o.push(c)}),A.intance.openModule(y.RewardGetDialog,o)}else A.intance.openModule(y.DailyTaskNoPropsDialog);r.getRestWheelNumData(r.tabIndex)}}s()}onCheck(){this.getRestWheelNumData(this.tabIndex)}useWheel(e){if(this.wheelLock)return;if(this.getRestWheelNumByType(e)>0)this.turnWheel(e);else{let n;e==8?n=_.intance.getWheel2ByType(1):n=_.intance.getWheel1ByType(e);let r=0;n.length>0&&(r=n[0].consumption[0][1]);let s=b.instance.getConsumeValue(n[0].consumption[0][0]),o=_.intance.m_dicItems.get(n[0].consumption[0][0]),l=m.instance.getLanguage(o.name);if(s<r){let c=Laya.Handler.create(this,()=>{se.intance.setCurrentScene(Y.M_SCENE_ASSET),this.close()});me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1706,l),P.CANCEL,c)}else{let c=Laya.Handler.create(this,()=>{e==8?this.buyTurn2Times(1):this.buyTurnTimes(e)});me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1705,r,l),P.CANCEL,c)}}}async buyTurnTimes(e){let i=await I.requestPost("wxgame/wheel1/buy",{type:e});if(console.log(i),i){let n=i.times;this.timeMap.set(e,n),this.setOpenFree(e,n),this.turnWheel(e)}}async buyTurn2Times(e){let i=await I.requestPost("wxgame/wheelPc/buy",{type:e});console.log(i),i&&this.turnWheel2(e)}setOpenFree(e,i){let n=this["btn_openFree"+e].getChildByName("tf_left"),r=this["btn_openFree"+e].getChildByName("tf_btn");n.text=m.instance.getLanguage(1704,i),i>0?(n.visible=!0,r.visible=!1):(n.visible=!1,r.visible=!0)}async turnWheel(e){let i=await I.requestPost("wxgame/wheel1/turn",{type:e});if(console.log(i),i){let n=i.times;this.timeMap.set(e,n),this.setOpenFree(e,n),this.startLottery(i)}}async turnWheel2(e){let i=await I.requestPost("wxgame/wheelPc/turn",{type:e});console.log(i),i&&this.startLottery(i)}async getRestWheelNumData(e){let i;if(e<5?i=await I.requestPost("wxgame/wheel1/panel",{type:e}):e>=5&&e<8?i=await I.requestPost("wxgame/wheel/panel",{}):i=await I.requestPost("wxgame/wheelPc/panel",{}),console.log(i),i){let n=i.times;if(this.timeMap.set(e,n),!this.check_records.selected)this.list_name.array=i.rewards;else{let r=[];r=i.rewards.filter(s=>s.pid==b.instance.playerDto.pid),this.list_name.array=r}this.nameBox.visible=!0}}getRestWheelNumByType(e){return this.timeMap.has(e)?this.timeMap.get(e):0}onDisable(){this.removeEvent()}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),g.intance.off(f.SEND_WHEEL_RESULT,this,this.startLottery),this.btn_1.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_2.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_3.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_4.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_5.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_6.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_7.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_8.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_openFree1.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree2.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree3.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree4.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree5.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree6.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree7.off(Laya.Event.CLICK,this,this.useWheel),this.btn_openFree8.off(Laya.Event.CLICK,this,this.useWheel),this.tab0.off(Laya.Event.CLICK,this,this.setBoxTab,[0]),this.tab1.off(Laya.Event.CLICK,this,this.setBoxTab,[1]),this.tab2.off(Laya.Event.CLICK,this,this.setBoxTab,[2]),this.check_records.off(Laya.Event.CLICK,this,this.onCheck),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}};Wy=h([M2("7RZoY37eR_CbuJ-KiG2xcA")],Wy);var Yy=class extends Laya.Box{};var{regClass:R2}=Laya,zy=class extends Yy{constructor(){super();this.friendData=null}addEvent(){this.btn_cancel.on(Laya.Event.CLICK,this,this.onClickCancel),this.btn_claim.on(Laya.Event.CLICK,this,this.onClickClaim)}onDisable(){this.removeEvent()}removeEvent(){this.btn_cancel.off(Laya.Event.CLICK,this,this.onClickCancel),this.btn_claim.off(Laya.Event.CLICK,this,this.onClickClaim)}set dataSource(e){super.dataSource=e,e&&(this.friendData=e,this.btn_claim.label=m.instance.getUILang("agree"),this.setData(e),this.addEvent())}setData(e){this.tf_name.text=e.name,this.img_flag.skin=D.instance.getCountryIcon(e.country),this.playerIcon.headSkin=e.icon}async onClickCancel(){let e=await I.requestPost("wxgame/friend/friendApplyHandle",{fid:this.friendData.id,agree:!1});console.log(e),e&&me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(310),P.YES,Laya.Handler.create(this,()=>{g.intance.event(f.CHANGE_FRIEND_APPLY_LIST,this.friendData.id)}))}async onClickClaim(){let e=_.intance.getGeneralValueById(11);if(b.instance.friendNum>=e){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(301),P.YES);return}let i=await I.requestPost("wxgame/friend/friendApplyHandle",{fid:this.friendData.id,agree:!0});console.log(i),i&&(me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(309),P.YES),g.intance.event(f.CHANGE_FRIEND_APPLY_LIST))}};zy=h([R2("5M3de4CbRMertZBZtmoOIQ")],zy);var jy=class extends Laya.Box{};var{regClass:P2}=Laya,$y=class extends jy{constructor(){super();this.friendData=null}addEvent(){this.btn_app.on(Laya.Event.CLICK,this,this.onClickApp)}onDisable(){this.removeEvent()}removeEvent(){this.btn_app.off(Laya.Event.CLICK,this,this.onClickApp)}async onClickApp(){let e=_.intance.getGeneralValueById(11);if(b.instance.friendNum>=e){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(301),P.YES);return}let i=await I.requestPost("wxgame/friend/addFriend",{openid:this.friendData.openid});console.log(i),i&&me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(307),P.YES,Laya.Handler.create(this,()=>{g.intance.event(f.REFRSH_APPLY_FRIEND_LIST,this.friendData.id)}))}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.btn_app.label=m.instance.getUILang("application"),console.log(e),this.friendData=e,this.setData(e),this.addEvent()}setData(e){this.tf_name.text=e.name,this.img_flag.skin=D.instance.getCountryIcon(e.country),this.playerIcon.headSkin=e.icon}};$y=h([P2("EI72MOH9RbqdGkjSCxI8Kg")],$y);var Xy=class extends Laya.Box{};var{regClass:N2}=Laya,Qy=class extends Xy{constructor(){super();this.friendData=null}addEvent(){this.btn_remove.on(Laya.Event.CLICK,this,this.onClickRemove),this.btn_talk.on(Laya.Event.CLICK,this,this.onClickTalk)}onDisable(){this.removeEvent()}removeEvent(){this.btn_remove.off(Laya.Event.CLICK,this,this.onClickRemove),this.btn_talk.off(Laya.Event.CLICK,this,this.onClickTalk)}set dataSource(e){super.dataSource=e,e&&(this.friendData=e,this.setData(e),this.addEvent())}setData(e){this.tf_name.text=e.name,this.img_flag.skin=D.instance.getCountryIcon(e.country),this.playerIcon.headSkin=e.icon,e.online?(this.tf_online.text="on line",this.tf_online.color="#43ef74"):(this.tf_online.text=ce.formatTimeAgo(e.lastLoginTime),this.tf_online.color="#b4b4b4")}async onClickRemove(){await I.requestPost("wxgame/friend/delFriend",{fid:this.friendData.id})&&(me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(308),P.YES),g.intance.event(f.CHANGE_FRIEND_LIST,this.friendData.id))}async onClickTalk(){A.intance.openModule(y.PrivateChatDialog,this.friendData)}};Qy=h([N2("hh1cVJJ6Sr2JZvqUJFzF6Q")],Qy);var Jy=class extends Laya.Scene{};var{regClass:O2,property:J0e}=Laya,Zy=class extends Jy{constructor(){super(...arguments);this.text="";this.refreshCd=0;this.friendData=null;this.recommendFriend=null;this.applyFriend=null;this.inputFriendAddress=!1}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onEnable(){this.list_friend.visible=!1,this.list_apply.visible=!1,this.list_add.visible=!1,this.btn_myFriend.on(Laya.Event.CLICK,this,this.onClickMy),this.btn_addFriend.on(Laya.Event.CLICK,this,this.onClickAdd),this.btn_application.on(Laya.Event.CLICK,this,this.onClickApp),this.btn_addByDress.on(Laya.Event.CLICK,this,this.onClickAddByDress),this.btn_lookup.on(Laya.Event.CLICK,this,this.onClickLookup),this.btn_refresh.on(Laya.Event.CLICK,this,this.onClickRefresh),this.tf_nickname.on(Laya.Event.FOCUS,this,this.nameFocus),g.intance.on(f.REFRSH_APPLY_FRIEND_LIST,this,this.deleApplyFriendList),g.intance.on(f.CHANGE_FRIEND_APPLY_LIST,this,this.onClickApp),g.intance.on(f.CHANGE_FRIEND_LIST,this,this.deleFriendList),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.close&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.onClickMy(),this.refreshRed()}setTabState(e,i,n,r){e.getChildByName("selectBox").visible=i,e.getChildByName("tf_txt").color=i?n:r}onClickMy(){this.box_1.visible=!0,this.box_2.visible=!1,this.box_3.visible=!1,this.noDataBox.visible=!1,this.setTabState(this.btn_myFriend,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_addFriend,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_application,!1,"#143f6b","#7ff1fe"),this.setFriendData()}async setFriendData(){let e=await I.requestPost("wxgame/friend/friendList",{});if(e&&e.list){b.instance.friendNum=e.list.length,this.list_friend.array=e.list,this.list_friend.visible=!0,this.friendData=e.list;let i=this.countOnlineUsers(e.list);console.log(i);let n=_.intance.getGeneralValueById(11);this.tf_friendNum.text=`${b.instance.friendNum}/${n}`}else this.tf_friendNum.text="0/0";(!e||!e.list||e.list.length<1)&&(this.noDataBox.visible=!0),console.log(e)}async onClickAdd(){if(this.box_1.visible=!1,this.box_2.visible=!0,this.box_3.visible=!1,this.noDataBox.visible=!1,this.setTabState(this.btn_addFriend,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_myFriend,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_application,!1,"#143f6b","#7ff1fe"),!this.recommendFriend||this.recommendFriend.length<=0){let e=await I.requestPost("wxgame/friend/recommend",{});e&&e.list&&(this.recommendFriend=e.list,this.list_apply.array=e.list,this.list_apply.visible=!0,this.list_apply.vScrollBarSkin="")}}async onClickAddByDress(){if(this.tf_uid.text==W.instance.walletAddress){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1162),P.YES),this.tf_uid.text="";return}let e=this.tf_uid.text;if(e.length<=0||!this.inputFriendAddress){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1298),P.YES);return}let i=_.intance.getGeneralValueById(11);if(b.instance.friendNum>=i){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(301),P.YES);return}if(this.friendData.findIndex(r=>r.openid==e.toLowerCase())>-1){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(302),P.YES);return}me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(303),P.SURE,Laya.Handler.create(this,async()=>{let r=await I.requestPost("wxgame/friend/addFriend",{openid:e});console.log(r),r&&T.instance.notice(Le.instance.get(307))}))}nameFocus(){this.tf_nickname.text=""}uidFocus(){this.tf_uid.text="",this.inputFriendAddress=!0}async onClickApp(){this.box_1.visible=!1,this.box_2.visible=!1,this.box_3.visible=!0,this.noDataBox.visible=!1,this.setTabState(this.btn_addFriend,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_myFriend,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_application,!0,"#143f6b","#7ff1fe");let e=await I.requestPost("wxgame/friend/friendApplyList",{});e&&e.list&&(this.list_add.array=e.list,this.list_add.visible=!0,this.applyFriend=e.list,e.list.length<=0&&(this.Img_social.visible=!1)),(!e||!e.list||e.list.length<1)&&(this.noDataBox.visible=!0)}onDisable(){this.removeEvent()}removeEvent(){this.btn_myFriend.off(Laya.Event.CLICK,this,this.onClickMy),this.btn_addFriend.off(Laya.Event.CLICK,this,this.onClickAdd),this.btn_application.off(Laya.Event.CLICK,this,this.onClickApp),this.btn_addByDress.off(Laya.Event.CLICK,this,this.onClickAddByDress),this.btn_lookup.off(Laya.Event.CLICK,this,this.onClickLookup),this.btn_refresh.off(Laya.Event.CLICK,this,this.onClickRefresh),this.tf_nickname.off(Laya.Event.FOCUS,this,this.nameFocus),g.intance.off(f.REFRSH_APPLY_FRIEND_LIST,this,this.deleApplyFriendList),g.intance.off(f.CHANGE_FRIEND_APPLY_LIST,this,this.onClickApp),g.intance.off(f.CHANGE_FRIEND_LIST,this,this.deleFriendList),this.tf_uid.off(Laya.Event.FOCUS,this,this.uidFocus),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene)}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}countOnlineUsers(e){return e.filter(i=>i.online).length}async onClickLookup(){if(this.tf_nickname.text==""){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(304),P.YES);return}let e=this.tf_nickname.text,i=await I.requestPost("wxgame/friend/search",{nickName:e});i&&i.list&&(this.recommendFriend=i.list,this.list_apply.array=i.list)}deleApplyFriendList(e){let i=this.recommendFriend.findIndex(n=>n.id==e);i>-1&&this.recommendFriend.splice(i,1),this.list_apply.array=this.recommendFriend}deleFriendList(e){let i=this.friendData.findIndex(r=>r.id==e);i>-1&&this.friendData.splice(i,1),this.list_friend.array=this.friendData,b.instance.friendNum=this.friendData.length;let n=_.intance.getGeneralValueById(11);this.tf_friendNum.text=`${b.instance.friendNum}/${n}`,this.list_friend.array.length<=0&&(this.noDataBox.visible=!0)}async onClickRefresh(){if(this.refreshCd>0){T.instance.notice(m.instance.getLanguage(1287,this.refreshCd));return}let e=await I.requestPost("wxgame/friend/recommend",{});e&&e.list&&(this.recommendFriend=e.list,this.list_apply.array=e.list),console.log(e),this.tf_nickname.text="PLEASE ENTER A NICKNAME TO FIND FRIENDS",this.tf_uid.text="Enter wallet address to add friends",this.inputFriendAddress=!1,T.instance.notice(Le.instance.get(306)),this.refreshCd=5,Laya.timer.loop(1e3,this,this.RefreshCount)}RefreshCount(){this.refreshCd-=1,this.refreshCd<=0&&Laya.timer.clear(this,this.RefreshCount)}refreshRed(){this.Img_social.visible=b.instance.getRedDotById(ne.ROOM_FRIEND_APPLY)}};Zy=h([O2("W8WIf5GlS3S-dEWvgrU0ow")],Zy);var eb=class extends Laya.Dialog{};var{regClass:H2}=Laya,tb=class extends eb{constructor(e){super();this.friendData=null}onEnable(){this.btn_send.on(Laya.Event.CLICK,this,this.onClickSend),this.giftInput.on(Laya.Event.INPUT,this,this.onGoldInput)}setOpenData(e){e&&(this.friendData=e),this.playerIcon.headSkin=this.friendData.icon,this.tf_name.text=this.friendData.name,this.tf_gold.text=Se.filterNumFormat(b.instance.getConsumeValue(ve.TYPE_GOLD),0)}async onClickSend(){if(console.log(this.messageInput.text==""),this.messageInput.text.length<10){T.instance.notice(m.instance.getLanguage(1288,10));return}let e=Number(this.giftInput.text),i=Number(this.tf_gold.text);if(e>i){T.instance.notice(Le.instance.get(313));return}await I.requestPost("wxgame/friend/sendMassage",{fid:this.friendData.id,content:this.messageInput.text,sendGold:e})&&me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(314),P.YES,Laya.Handler.create(this,()=>{this.close()}))}onGoldInput(){let e=Number(this.giftInput.text),i=Q.isNumber(this.giftInput.text),n=this.giftInput.text.includes(".");(e<0||!i||n)&&(this.giftInput.text="0")}onDisable(){this.btn_send.off(Laya.Event.CLICK,this,this.onClickSend),this.giftInput.off(Laya.Event.INPUT,this,this.onGoldInput)}};tb=h([H2("MBJ6xxrTTGe8qOrAIMZfeQ")],tb);var ib=class extends Laya.Dialog{};var{regClass:U2}=Laya,Qn=class extends Laya.Script{constructor(){super();this._isLeft=!1}onAwake(){}get isLeft(){return this._isLeft}set isLeft(e){this._isLeft=e,this.btn_bg=this.owner.getChildByName("btn_bg"),this.label_left=this.owner.getChildByName("label_left"),this.label_right=this.owner.getChildByName("label_right"),this.isLeft?(this.btn_bg.x=4,this.label_left.color="#213343",this.label_right.color="#52a5e0"):(this.btn_bg.x=this.owner.width-this.btn_bg.width-4,this.label_left.color="#52a5e0",this.label_right.color="#213343")}};Qn=h([U2("-1MGS4JRSMOn_RKPUuuV9Q")],Qn);var{regClass:V2}=Laya,ab=class extends ib{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.totalLans=[1,6,7];this.currLan=0}onEnable(){this.musicSwitchButton=this.box_music.getComponent(Qn),this.soundSwitchButton=this.box_sound.getComponent(Qn),this.initContainer(),this.box_music.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_music]),this.box_sound.on(Laya.Event.CLICK,this,this.onClickHandler,[this.box_sound]),this.btn_copy.clickHandler=new Laya.Handler(this,this.onClickHandler,[this.btn_copy]),this.btn_referral.on(Laya.Event.CLICK,this,this.onClickHandler,[this.btn_referral]);for(let i=0;i<this.totalLans.length;i++){var e=this.totalLans[i];this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e])}}onClickHandler(e){switch(e){case this.box_music:this.musicSwitchButton.isLeft=!this.musicSwitchButton.isLeft,ze.instance.switchMusic(this.musicSwitchButton.isLeft);break;case this.box_sound:this.soundSwitchButton.isLeft=!this.soundSwitchButton.isLeft,ze.instance.switchSound(this.soundSwitchButton.isLeft);break;case this.btn_referral:A.intance.openModule(y.InviteRewardDialog);break;case this.btn_copy:{let i=this.inviteUrl;doCopy(i),T.instance.notice(m.instance.getLanguage(132))}break}}initContainer(){this.musicSwitchButton.isLeft=ze.instance.m_bPlayMusic,this.soundSwitchButton.isLeft=ze.instance.m_bPlayeSound,this.currLan=b.instance.m_strLanguage,this.setTab(b.instance.m_strLanguage),this.inviteUrl=Ma.getInviteUrl(),this.label_url.text=Be.shortStr(this.inviteUrl,50)}onClickTab(e){if(this.currLan==e)return;this.currLan=e,this.setTab(e);let i=m.instance.getLanTypeById(e);m.instance.FGM_SetLanguage(i),Ne.instance.reload()}setTab(e){for(let n=0;n<this.totalLans.length;n++){var i=this.totalLans[n];e==i?(this["btn_"+i].getChildByName("btn_yellowBg").visible=!0,this["btn_"+i].getChildByName("Label").color="#213343"):(this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#52a5e0")}}webCopyString(e){let i=e,n=window.document.createElement("textarea");n.value=i,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";let r=window.getSelection(),s=!1;r.rangeCount>0&&(s=r.getRangeAt(0)),window.document.body.appendChild(n),n.select(),n.selectionStart=0,n.selectionEnd=i.length;let o=!1;try{o=window.document.execCommand("copy")}catch(l){console.error(l)}return window.document.body.removeChild(n),s&&(r.removeAllRanges(),r.addRange(s)),o}};ab=h([V2("yJfJZzgZRluE_rgB44yTvg")],ab);var nb=class extends Laya.Scene{};var{regClass:F2}=Laya,rb=class extends nb{onAwake(){}onOpened(e){this.closeHandle=e[0]}onEnable(){this.btn_next.on(Laya.Event.CLICK,this,this.onBtnNext),this.btn_receive.on(Laya.Event.CLICK,this,this.onClickRec),this.tf_address.text=W.instance.walletAddress}onDisable(){this.closeHandle&&this.closeHandle.run(),this.removeEvent()}removeEvent(){}onBtnNext(){this.close()}async onClickRec(){let e=W.instance.walletAddress,i=await I.requestPost("wxgame/money/matQuery",{address:e});if(i&&i.use==1){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(122),P.YES,Laya.Handler.create(this,()=>{this.onBtnNext()}));return}try{(await I.requestPost("wxgame/money/matTake",{address:e})).errorcode==0?me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getUILang("You have applied to claim the MAT Tokens and they will be sent to your address [0X...]."),P.YES,Laya.Handler.create(this,()=>{this.onBtnNext()})):me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(122),P.YES,Laya.Handler.create(this,()=>{this.onBtnNext()}))}catch{me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(122),P.YES,Laya.Handler.create(this,()=>{this.onBtnNext()}))}}};rb=h([F2("wkgHnIZwR_-St6rzEoxYPQ")],rb);var sb=class extends Laya.Scene{};var{regClass:G2}=Laya,ob=class extends sb{constructor(){super(...arguments);this.restTime=5}onAwake(){}onOpened(e){console.log(e),this.closeHandle=e[0]}onEnable(){this.skipBox.on(Laya.Event.CLICK,this,this.onBtnSkip),b.instance.m_strLanguage==qi.Lan_zh?this.img_bg.skin="res/getMat/img_open_chn.jpg":this.img_bg.skin="res/getMat/img_open_eng.jpg",console.log("langid:",b.instance.m_strLanguage),this.restTime=5,this.runTime(),this.tf_skip.text=m.instance.getUILang("Skip")}runTime(){Laya.timer.loop(1e3,this,this.countTime)}countTime(){this.restTime-=1,this.tf_restTime.text=`${this.restTime}`,this.restTime==0&&(Laya.timer.clear(this,this.countTime),this.close())}onDisable(){this.closeHandle&&this.closeHandle.run(),this.removeEvent()}removeEvent(){}async onBtnSkip(){Laya.timer.clear(this,this.countTime),this.close()}};ob=h([G2("t3HJXNipRty7KBcnDKApfA")],ob);var lb=class extends Laya.Box{};var{regClass:K2}=Laya,la=class extends lb{constructor(){super();this.isAddEvent=!1;this.isReady=!1;this.needChangeAni=!0;this.loop=!0;this.isInited=!1}onEnable(){this.sk=this.box_sk,this.sk.on(Laya.Event.READY,this,this.onSkReady),this.sk.loop=this.loop,console.log("onEnable: + this.animationName： "+this.animationName),this.animationName&&(this.sk.animationName=this.animationName),this.spineTemplet?(this.sk.templet=this.spineTemplet,console.log("onEnable: + this.spineTemplet ")):this.templateUrl?Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(e=>{this.destroyed||(this.sk.templet=e,console.log("this.templateUrl: "+this.templateUrl))}):this.animationName||(this.sk.animationName="animation"),this.isInited=!0}onSkReady(){this.isReady=!0,console.log("onSkReady this.visible: "+this.visible)}play(e,i,n,r,s,o,l){if(!this.isReady){console.log("动画未准备好，不能play");return}this.sk.play(e,i,n,r,s,o,l)}stop(){if(!this.isReady){console.log("动画未准备好，不能stop");return}this.sk.stop()}init(e,i="animation",n=!0){console.log("init: ",i,e),this.animationName=i,this.spineTemplet=e,this.loop=n,this.visible=!0,this.isInited&&(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=this.spineTemplet)}initUrl(e,i="animation",n=!0){console.log("initUrl: ",e),this.animationName=i,this.templateUrl=e,this.loop=n,this.visible=!0,this.isInited&&Laya.loader.load(this.templateUrl,Laya.Loader.SPINE).then(r=>{this.destroyed||(this.animationName&&(this.sk.animationName=this.animationName),this.sk.templet=r,console.log("this.templateUrl: "+this.templateUrl))})}onDisable(){Laya.Pool.recover(la.aniSkPrefab,this),this.box_sk.off(Laya.Event.READY,this,this.onSkReady),this.sk.templet=null}};la.aniSkPrefab="aniSkPrefab",la=h([K2("2rJV0EbMT9K2L6-6HOpDHw")],la);var cb=class extends Laya.Box{};var{regClass:q2}=Laya,ub=class extends cb{set dataSource(t){super.dataSource=t;var e=t;if(!e)return;let i=Number(e[0]),n=e[1],r=_.intance.getAttributeDataById(i);this.tf_name.text=m.instance.getUILang(r.identification),i==1010||i==1011||i==1013||i==1014?this.tf_num.text=`${n/100}%`:this.tf_num.text=n}};ub=h([q2("lWiDi5bCR-CNy4v3ZMd42w")],ub);var Et=class Et{constructor(){}static pointEquil(t,e){return t&&e&&t.x==e.x&&t.y==e.y}static isEmpty(t){for(let e in t)return!1;return!0}static showTxtEffect(t,e){let i=parseInt(t.text),n=Math.floor((e-i)/5),r=0;Laya.timer.loop(60,null,s);let s=function(){r++,i+=n,r>=5&&(i=e,Laya.timer.clear(null,s)),t.text=i+""}}static showTxtFlash(t){let e=t.color;t.color=Et.COLORS[0],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,i),50);let i=function(){t.color=Et.COLORS[1],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,n),50)},n=function(){t.color=Et.COLORS[0],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,r),50)},r=function(){t.color=Et.COLORS[1],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,s),50)},s=function(){t.color=Et.COLORS[0],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,o),50)},o=function(){t.color=Et.COLORS[1],Laya.Tween.to(t,{},10,null,Laya.Handler.create(null,l),50)},l=function(){t.color=e}}static getProKey(t){return Et.PRO_DIC[t]?Et.PRO_DIC[t]:t}static getIconName(t){return Et.proList[t]}static clonePoint(t){return new Laya.Point(t.x,t.y)}static copyObj(t){let e={};for(let i in t)e[i]=t[i];return e}static mergeObj(t,e){for(let i in e)t[i]?t[i]=parseFloat(t[i])+parseFloat(e[i]):t[i]=e[i];return t}static checkHit(t){return t.visible&&t.mouseX>0&&t.mouseY>0&&t.mouseX<=t.width&&t.mouseY<=t.height}static separateObj(t,e){if(e)for(let i in e)t[i]&&(t[i]=parseFloat(t[i])-parseFloat(e[i]));return t}static toFixed(t,e=1){if((t+"").indexOf(".")!=-1){let i=parseFloat(t).toFixed(e);return e==1&&i.charAt(i.length-1)=="0"&&(i=parseInt(i)+""),i}return t+""}static formatResWith(t){return t>=1e12?Math.floor(t/1e12)+Et.RES_W[3]:t>=1e9?Math.floor(t/1e9)+Et.RES_W[2]:t>=1e6?Math.floor(t/1e6)+Et.RES_W[1]:t>=1e4?Math.floor(t/1e3)+Et.RES_W[0]:t+""}static formatNumWithSign(t,e=","){t=Math.floor(t);let i=t+"",n=1,r=[];for(let s=i.length-1;s>=0;s--)r.push(i.charAt(s)),n>0&&n%3==0&&r.push(e),n++;return r.reverse(),r[0]==e&&r.shift(),r.join("")}static autoRecyle(t,e=!1){t.on(Laya.Event.COMPLETE,null,i,[t]),t.isPlaying||t.play(1,!1);let i=function(n){n.off(Laya.Event.COMPLETE,null,i),n.stop(),n.removeSelf(),e&&Laya.Pool.recover("Animation",n)}}static createEllipse(t,e,i,n,r,s=1,o="#ffffff"){let l=[],c=n>r?s/n:s/r;for(let u=0;u<2*Math.PI;u+=c)l.push(e+n*Math.cos(u)-n/2,i+r*Math.sin(u));return t&&t.drawPoly(l.shift(),l.shift(),l,o),l}};Et.blackFilter=new Laya.ColorFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.78,0]),Et.blackFilter2=new Laya.ColorFilter([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5,0]),Et.qualityColors=["#78cefd","#89e47a","#78cefd","#d5a8ff","#fdd378","#ffa8a8","#ffa8a8","#ffa8a8"],Et.noColors=["#7efcc5","#7efbfc","#acfffa","#c1c5ff","#ffcdcd","#ecceff","#fff5bd","#ffcee3","#ffdcbd","#f0ffc4"],Et.COLORS=["#69ff4c","#FFFFFF"],Et.PRO_DIC={HP:"hp",ATK:"attack",DEF:"defense",SPEED:"speed",RES:"resilience",CDMG:"critDamage",CDMGR:"critDamReduct"},Et.proList={hp:"HP",attack:"ATK",defense:"DEF",speed:"SPEED",hit:"hit",dodge:"dodge",crit:"crit",critDamage:"CDMG",resilience:"RES",critDamReduct:"CDMGR"},Et.RES_W=["K","M","B","T"];var wt=Et;var mb=class extends Laya.Box{};var{regClass:W2}=Laya,pb=class extends mb{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.equipItem=e,this.equipItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(!this.equipItem)return;this.btn_remove.visible=!1,this.knapsackItem.dataSource=this.equipItem;let e=this.equipItem.itemItem.id;if(this.equipItem.type==Ge.TYPE_Equipment){this.tf_des.visible=!1,this.img_att.visible=!0,this.list_attrs.visible=!0;let n=_.intance.getEquipDataById(e),r=n.attribute;this.list_attrs.array=r,this.tf_name.text=m.instance.getLanguage(this.equipItem.itemItem.name),this.tf_name.color=wt.qualityColors[this.equipItem.itemItem.quality-1],this.tf_part.text=m.instance.getUILang(`Part_${n.type}:`),this.tf_grade.color=wt.qualityColors[this.equipItem.itemItem.quality-1];let s=_.intance.getEquipSuitDataById(e);if(s&&s.skill){let o=s.skill;var i=_.intance.m_dicSkills.get(o);this.skillListItem.dataSource=i,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;this.tf_grade.text=m.instance.getUILang(`Quality_${this.equipItem.itemItem.quality}:`)}else{let n=_.intance.getArrFromDicItemByKey("id",e);if(this.img_att.visible=!1,this.list_attrs.visible=!1,this.tf_des.visible=!0,n.length>0){let r=n[0];this.tf_des.text=m.instance.getLanguage(r.des),this.tf_name.text=m.instance.getLanguage(this.equipItem.itemItem.name),this.tf_name.color=wt.qualityColors[this.equipItem.itemItem.quality-1],this.tf_part.text=m.instance.getUILang(`Part_${r.type}:`),this.tf_grade.color=wt.qualityColors[this.equipItem.itemItem.quality-1];let s=r.skillId;if(s){var i=_.intance.m_dicSkills.get(s);this.skillListItem.dataSource=i,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;this.tf_grade.text=m.instance.getUILang(`Quality_${this.equipItem.itemItem.quality}:`)}}}};pb=h([W2("Aiuw9-xTQyukAos8XwcRDA")],pb);var hb=class extends Laya.Dialog{};var ei=class{constructor(){}};ei.UPDATE_HERO_EVENT="HeroEvent:UPDATE_HERO_EVENT",ei.UPDATE_HERO_UPGRADE_EVENT="HeroEvent:UPDATE_HERO_UPGRADE_EVENT",ei.UPDATE_HERO_EQUIP="HeroEvent:UPDATE_HERO_EQUIP";var{regClass:Y2}=Laya,db=class extends hb{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.selectPos=1;this.equipInfo=[];this.hostPid=0;this.clientPid=0;this.cardList=[];this.upgradeLock=!1}setOpenData(e){e&&(this._vo=e[0],e[1]&&(this.hostPid=e[1],this.clientPid=e[2],this.clientPid&&this.clientPid==b.instance.playerDto.pid&&(this._vo.state=4)),this._vo.newFightFlag||Ee.isFightHero(this._vo.pk)||this._vo.state!==0?this.btn_upgrade.disabled=!0:this.btn_upgrade.disabled=!1)}onComplete(){}onEnable(){this.initEquipBg(),this.initEquip(),this.btn_last.on(Laya.Event.CLICK,this,this.onClickLast),this.btn_next.on(Laya.Event.CLICK,this,this.onClickNext),this.btn_upgrade.on(Laya.Event.CLICK,this,this.onClickUpgrade),this.btn_out.on(Laya.Event.CLICK,this,this.onClickOut),g.intance.on(ei.UPDATE_HERO_EQUIP,this,this.wearSucess);for(let n=1;n<8;n++)this["equip_"+n].on(Laya.Event.CLICK,this,this.onClickEquip,[n]);this.EquipDetailBox.getChildByName("btn_remove").on(Laya.Event.CLICK,this,this.onUnequip);let i=this.EquipDetailBox.getChildByName("knapsackItem");if(i){let n=i.getChildByName("txt_num");n&&n.visible&&(n.visible=!1)}}async onClickUpgrade(){if(this.upgradeLock)return;this.upgradeLock=!0;let e=_.intance.getConsumptionByLevel(this._vo.heroItem.level);if(e&&e[0]){let i=e[0].consumption;console.log(i);let n=i[1],r=Laya.Handler.create(this,async()=>{let s=await I.requestPost("wxgame/hero/star",{heroPk:this._vo.pk});if(s){let o=s.hero;this._vo.id=o.id,this._vo.lv=o.lv,this._vo.color=o.color,this._vo.pk=o.pk,this._vo.newFightFlag=o.newFightFlag,this.showViewByVo(this._vo),this.initEquip(),g.intance.event(ei.UPDATE_HERO_EVENT),T.instance.notice(m.instance.getLanguage(1684)),this.upgradeLock=!1}else this.upgradeLock=!1});me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1683,n),P.SURE,Laya.Handler.create(this,()=>{r&&r.run()}),Laya.Handler.create(this,()=>{this.upgradeLock=!1}))}}onClickNext(){let e=We.instance.getNextHero(this._vo);e&&(this._vo=e,this.showViewByVo(e))}onClickLast(){let e=We.instance.getLastHero(this._vo);e&&(this._vo=e,this.showViewByVo(e))}addEvent(){g.intance.on(ei.UPDATE_HERO_UPGRADE_EVENT,this,this.onHeroUpgrade),this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips);for(let e=1;e<7;e++){let i=this["equip"+e];i.on(Laya.Event.CLICK,this,this.onClickEquip),this._vo.state!==0&&(i.disabled=!0)}}hideTips(){this.EquipDetailBox.visible=!1,this.equipBgBox.visible=!1,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}onClickEquip(e,i){let n=this["equip_"+e],r=e,s,o=_.intance.getGeneralValueById(26);o&&(e==5?(r=12,s=o[0][0]):e==6?(r=12,s=o[1][0]):e==7?(r=12,s=o[2][0]):s=e);let l=n.getChildByName("knapsackItem");if(l&&l.visible){this.resetEquipInfoData(l.get_dataSource()),this.selectPos=s,this.EquipDetailBox.x=n.x+80,this.EquipDetailBox.visible=!0,this.equipBgBox.visible=!0,this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips);let c=this.EquipDetailBox.getChildByName("btn_remove");c.visible=!0}else A.intance.openModule(y.WalletChoosePropsDialog,[Ge.CHOOSE_PutOn,r,this._vo.pk,s,this.cardList])}resetEquipInfoData(e){let i=e;this.EquipDetailBox.dataSource=i,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}onDisable(){this.removeEvent()}removeEvent(){this.selectPos=null,g.intance.off(ei.UPDATE_HERO_UPGRADE_EVENT,this,this.onHeroUpgrade),g.intance.off(ei.UPDATE_HERO_EQUIP,this,this.wearSucess)}onHeroUpgrade(){this._vo=b.instance.m_heroData.heroVoDic.get(this._vo.pk),this._vo&&this.showViewByVo(this._vo)}updateEquip(){let e=this._vo.equipDtoList;for(let i=0;i<e.length;i++){let n=e[i];this["equip"+(i+1)].dataSource=n}}async showViewByVo(e){console.log("showViewByVo",e),this.txt_name.text=e.name;let i=e.heroItem.level+"";e.heroItem.level>=6||e.newFightFlag||Ee.isFightHero(this._vo.pk)||this._vo.state!==0?this.btn_upgrade.disabled=!0:this.btn_upgrade.disabled=!1,We.instance.setStar(this,i),this.box_star.visible=!0,this.heroSk.dataSource=e,this.list_attrs.array=this.heroAttr;var n=[];e.heroItem.skillIds.forEach(r=>{var s=_.intance.m_dicSkills.get(r);n.push(s)}),this.list_skills.array=n,this.updatePk()}async updatePk(){let e=null;this._vo.state!==0?(console.log("this._vo.state: ",this._vo.state),this._vo.state==1?(this.btn_out.disabled=!0,this.btn_upgrade.disabled=!0,this.btn_out.label=m.instance.getLanguage(1037)):this._vo.state==2||this._vo.state==4?(this.btn_upgrade.disabled=!0,Ee.isFightHero(this._vo.pk)?(this.box_sign.visible=!0,this.btn_out.disabled=!0,this.btn_out.label=m.instance.getLanguage(1038)):(this.box_sign.visible=!1,this.btn_out.disabled=!1,this.btn_out.label=m.instance.getLanguage(1037),this.btn_upgrade.disabled=!0)):this._vo.state==3?(this.box_sign.visible=!1,this.btn_out.disabled=!0,this.btn_upgrade.disabled=!0,this.btn_out.label=m.instance.getLanguage(1037)):this._vo.state==4&&(this.btn_upgrade.disabled=!0),(this._vo.state==1||this._vo.state==2)&&(e=await I.requestPost("wxgame/lease/heroInfo",{heroPk:this._vo.pk}),e&&e.info&&e.info.startTime&&e.info.startTime>ce.getCurrentDayTimestamp()&&(this.btn_out.disabled=!0,this.btn_upgrade.disabled=!0))):Ee.isFightHero(this._vo.pk)?(this.box_sign.visible=!0,this.btn_out.disabled=!0,this.btn_out.label=m.instance.getLanguage(1038)):(this.box_sign.visible=!1,this.btn_out.disabled=!1,this.btn_out.label=m.instance.getLanguage(1037))}async initEquip(){let e;if(this._vo.state==4?e=await I.requestPost("wxgame/equip/info",{heroPk:this._vo.pk}):this.hostPid?e=await I.requestPost("wxgame/equip/info",{heroPk:this._vo.pk,heroPid:this.hostPid}):e=await I.requestPost("wxgame/equip/info",{heroPk:this._vo.pk}),e){console.log(e);let i=[];this.cardList=[];for(let n in e.equipInfo){let r=e.equipInfo[n];r.pos=Number(n),i.push(r)}this.equipInfo=i||[],e.attr&&(this.heroAttr=Object.entries(e.attr),this.equipInfo&&this.refreshEquipShow())}}refreshEquipShow(){for(let e=1;e<8;e++){let i=this.equipInfo[e-1];if(i){let n=_.intance.getArrFromDicItemByKey("id",i.id)[0],r=_.intance.getGeneralValueById(26),s;i.pos==r[0][0]?s=5:i.pos==r[1][0]?s=6:i.pos==r[2][0]?s=7:s=n.subType;let o=this["equip_"+s];if(o){let l=o.getChildByName("img_default");l.visible=!1;let c=o.getChildByName("knapsackItem");c.visible=!0;let u=new Pe(i.id);c.dataSource=u,s<5&&(this._vo.state==2||this._vo.state==4)&&(o.disabled=!i.own)}}}this.showEquipRed()}wearSucess(e){let i=e.type,n=_.intance.getGeneralValueById(26);i!==n[0][1]&&i!==n[1][1]&&i!==n[2][1]&&(this.equipInfo.push(e),this.refreshEquipShow())}initEquipBg(){for(let e=1;e<8;e++){let i=this["equip_"+e];if(i.disabled=this._vo.state!==0,!i)return;let n=i.getChildByName("img_default"),r=i.getChildByName("knapsackItem"),s=r.getChildByName("txt_num");switch(e<5?s.visible=!1:s.visible=!0,e){case 1:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_wuqi.png";break;case 2:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_toukui.png";break;case 3:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_kuijia.png";break;case 4:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_xuezi.png";break;case 5:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_dunpai.png";break;case 6:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_dunpai.png";break;case 7:i.disabled=this._vo.state==1||this._vo.state==3,n.skin="res/heroDetail/img_information_dunpai.png";break;case 101:case 102:case 103:n.skin="res/heroDetail/img_information_dunpai.png";break}n.visible=!0,r.visible=!1}}showEquipRed(){console.log(this.equipInfo);let e=_.intance.getGeneralValueById(26);var i=b.instance.m_packageData.getBackByType(5);for(let c=1;c<8;c++){let u=this["equip_"+c],p=c;e&&(c==5?p=e[0][1]:c==6?p=e[1][1]:c==7&&(p=e[2][1]));var n=b.instance.m_packageData.getListBySubType(p);if(u&&n.length>0){let d=u.getChildByName("red_mail");d&&(d.visible=!0)}}let r=[],s=!0,o;this.cardList=[];for(let c=0;c<this.equipInfo.length;c++){let u=this.equipInfo[c];this.cardList.push(u.id);let p=_.intance.getArrFromDicItemByKey("id",u.id);if(p&&p[0].subType!==e[0][1]&&p[0].subType!==e[1][1]&&p[0].subType!==e[2][1]&&(o=_.intance.getEquipSuitDataById(u.id),!s||!o||r.indexOf(o.id)<-1&&r.length>0?s=!1:r.push(o.id)),p&&p.length>0){let d=p[0].subType;u.pos==e[0][0]?d=5:u.pos==e[1][0]?d=6:u.pos==e[2][0]&&(d=7);let L=this["equip_"+d],v=L.getChildByName("knapsackItem"),E=v.getChildByName("txt_num");if(d<5)E.visible=!1;else{E.visible=!0;var l=b.instance.m_packageData.getCountById(u.id);E.text=l+"",v.gray=!(l>0)}let w=i.findIndex(R=>R.subType==p[0].subType&&R.itemItem.quality>p[0].quality);if(w<0&&(console.log(w),L)){let R=L.getChildByName("red_mail");R&&(R.visible=!1)}}}this.showViewByVo(this._vo)}async onClickOut(){if(De.instance.inMinWaiting){T.instance.notice(m.instance.getLanguage(1187));return}let e=this,i=this._vo.newFightFlag==1?1:0,n=await I.requestPost("wxgame/hero/heroFight",{pk:this._vo.pk,type:i});n?(n.type==1?b.instance.playerDto.newFightHeroPk=n.pk:b.instance.playerDto.fightHeroPk=n.pk,e.updatePk(),g.intance.event(ei.UPDATE_HERO_EVENT,i)):T.instance.notice(m.instance.getLanguage(135))}async onUnequip(){let e=_.intance.getGeneralValueById(26),i=this.selectPos===e[0][1]?101:this.selectPos;this.selectPos===e[0][0]?i=e[0][0]:this.selectPos===e[1][0]?i=e[1][0]:this.selectPos===e[2][0]?i=e[2][0]:i=this.selectPos;let n=await I.requestPost("wxgame/equip/takeOff",{heroPk:this._vo.pk,pos:i});if(n){for(let r=0;r<this.equipInfo.length;r++){let s=this.equipInfo[r];if(_.intance.getArrFromDicItemByKey("id",s.id)[0]&&s.pos===n.pos){this.equipInfo.splice(r,1);break}}this.initEquipBg(),this.refreshEquipShow(),this.hideTips()}else console.error("Failed to unequip: ",n)}};db=h([Y2("Qri7gUY9SiWsYhtvNCEOQQ")],db);var fb=class extends Laya.Box{};var{regClass:z2}=Laya,yb=class extends fb{constructor(){super();this.isAddEvent=!1;this.needPop=!0}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,this.heroVo=e,!this.heroVo){this.img_back.skin=D.instance.getHeroBackIcon(0),this.box_show.visible=!1;return}this.needPop&&this.addEvent(),this.setCurrentOutPut()}async setCurrentOutPut(){var e=[];Ee.isFightHero(this.heroVo.pk)&&e.push(1),this.heroVo.state==4&&e.push(14),this.heroVo.state==3&&e.push(13),this.heroVo.state==2&&e.push(3),this.heroVo.state==1&&e.push(2),this.heroVo.newFightFlag==1?(e.push(5),this.img_newFightFlag.visible=!0):this.img_newFightFlag.visible=!1,this.list_state.array=e,this.img_back.skin=D.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=D.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=Be.shortHeroStr(this.heroVo.name);let i=this.heroVo.heroItem.level+"";We.instance.setStar(this,i),this.box_show.visible=!0,this.destroyed}toDetail(){this.heroVo.id&&A.intance.openModule(y.HeroDetailDialog,[this.heroVo])}};yb=h([z2("PfeS1F4rQCqM4vXJpBZVWQ")],yb);var bb=class extends Laya.Box{};var{regClass:j2}=Laya,gb=class extends bb{constructor(){super();this.isAddEvent=!1;this.isReady=!1;this.skinIndex=0;this.spineAniIndex=0;this.skinArray=["goblin","goblingirl"];this.needChangeAni=!0}onEnable(){this.sk=this.box_sk}addEvent(){this.isAddEvent||(this.isAddEvent=!0,this.needChangeAni&&this.on(Laya.Event.CLICK,this,this.changeAni),this.box_sk.on(Laya.Event.READY,this,this.onSkReady))}onSkReady(){this.isReady=!0}set dataSource(e){super.dataSource=e,this.heroVo=e,this.addEvent(),this.createSpine()}createSpine(){Laya.loader.load(this.heroVo.sk,Laya.Loader.SPINE).then(e=>{this.destroyed||(this.sk.templet=e,this.sk.animationName=$e.ANI_daiji,this.spineAniNum=$e.ANIS.length)})}changeAni(){if(this.isReady){this.spineAniIndex++,this.spineAniIndex>=this.spineAniNum&&(this.spineAniIndex=0);var e=$e.ANIS[this.spineAniIndex];this.sk.play(e,!0,!0)}}changeSkin(){this.sk.showSkinByName(this.skinArray[this.skinIndex]),++this.skinIndex>=this.skinArray.length&&(this.skinIndex=0)}onDisable(){this.box_sk.off(Laya.Event.READY,this,this.onSkReady)}play(e,i,n,r,s,o,l){if(!this.isReady){console.log("动画未准备好，不能play");return}var c=this.parent.parent;i?(this.sk.play(e,i,n,r,s,o,l),c.beyond&&this.sk.paused()):c.beyond||this.sk.play(e,i,n,r,s,o,l)}paused(){this.isReady&&(this.sk?this.sk.paused():console.log("动画: paused, sk is null"))}resume(){this.isReady&&(this.sk?this.sk.resume():console.log("动画: resume, sk is null"))}};gb=h([j2("kS5K53GHRWOdgfXoo6VH1A")],gb);var Lb=class extends Laya.Box{};var nwe={9001:"0x3f76562685E9Cd18ba88C062bBC5999D78275734",56:"0x837656c3f5858692cCdce13BA66e09d2685073df",97:"0x6f4DceCEe81bfB85872BEaBC44C303b7c2f6c108"},rwe={9001:"0x96397347Ea2beE29713Bc48749eB277D6A36A407",56:"0x837656c3f5858692cCdce13BA66e09d2685073df",97:"0x6f4DceCEe81bfB85872BEaBC44C303b7c2f6c108"},swe={9001:"0x67Dc36C19835Fa65Bf4B100FAC9a80A9E9280fB9",56:"0x55d398326f99059ff775485246999027b3197955",97:"0x44004827f2F72566E12884A38f63f72F2a5143ea"},owe={9001:"0x67Dc36C19835Fa65Bf4B100FAC9a80A9E9280fB9"},lwe={9001:"0x67Dc36C19835Fa65Bf4B100FAC9a80A9E9280fB9"},cwe={9001:"0x2418F7F0486deBc9270E16126F36526925EDAAE4"},uwe={97:"0xa2f97A458c62f321f9565f03289f30BF4E0377Ab",9001:"0x84d225321122E69406B198e3A9B82Dc1BdF897e6"},mwe={9001:"0x945103b2fEa1EAc6cea4d25e9BBaA5284d128b29"},pwe={97:"0xfe261946218873F6eaec714BF757493256817534",9001:"0xfB51603B7863267a19736B070Bf9Cb2e5Fa256AF"},hwe={9001:"0xa2f97A458c62f321f9565f03289f30BF4E0377Ab"},Ic={5611:"0x6B2a7485a342726F4E3968683111a539B160566D"},WE={[nd.OpBNB]:"0x6536C561934B0dbC76757274dFf3e2dA723d61b6"},Ec={97:"0xfe261946218873F6eaec714BF757493256817534",9001:"0xE3a61771Ce3CA772D446e687AFd52DC28eC9cCb8",5611:"0x552a9558723d2B44B65237D4d52306442ac4Cf93"},YE={[nd.OpBNB]:"0x5ee3dc2e3Fe6570deB69266f5e6b62647D72288D"};var _b=class{constructor(){this.pool_contract=null;this.rewardTokenAddress=""}stakeTokenAndReward(){return this.heroesId?[[this.heroesId,this.capacity/24]]:[]}async calcCapacity(t){for(let e of t){let i=We.instance.heroOutputRateDic.get(e.mineralLevel);e.staking_second_rewards=i.capacity*this.baseYield/24+""}return t}async earnedAll(){return this.yieldValue}async refreshVo(){let t=await I.requestPost("cybertron-sys-api/api/v1/mineral/getMineralPool",{mineralId:this.id});this.heroesId=0,this.yieldValue=0,Object.assign(this,t)}async stake(t){if(!await W.instance.checkHeroIsBuzy(t))return _e.instance.showLoading(!0),await this.pool_contract.methods.stake(t,this.id).send({from:W.instance.walletAddress},(i,n)=>{if(i)return _e.instance.hideLoading(),!1}),!0}async withdrawAllAndClaim(){return _e.instance.showLoading(!0),await this.pool_contract.methods.withdraw(this.heroesId).send({from:W.instance.walletAddress},(t,e)=>{if(t)return _e.instance.hideLoading(),!1}),await this.refreshVo(),!0}async claimAllReward(){_e.instance.showLoading(!0),await I.requestPost("cybertron-sys-api/api/v1/mineral/collect",{mineralId:this.id}),await this.refreshVo(),_e.instance.hideLoading()}async getAccountTokens(){await this.refreshVo()}};var wc=class a{constructor(){this.poolAry=[];this.pool_contract=null}static get instance(){return a._instance||(a._instance=new a),a._instance}init(){this.poolDic=new le}async initPoolList(){this.poolAry=[];let t=await I.requestPost("cybertron-sys-api/api/v1/mineral/getMineralPoolList",{});for(let e of t){let i=new _b;Object.assign(i,e);let n=_.intance.m_dicItems.get(i.resourcesType);i.rewardTokenAddress=n.tokenId,i.pool_contract=this.pool_contract,this.poolDic.set(i.rewardTokenAddress,i),this.poolAry.push(i)}}async getHeroTokenIds(){let t=W.instance.walletAddress;try{console.log("getHeroTokenIds, account:"+t);var e;let n;z.vType==2?(e=Gi.id,n=WE[e]):z.vType==1?(e=Ki.id,n=Ic[e]):(e=Ki.id,n=Ic[e]);let r=await W.instance.walletClient.getChainId();if(e!==r){var i=await W.instance.switchChain(e);if(!i){await W.instance.addChain(e),await W.instance.resetPublicAndWallet(e);let o=await W.instance.walletClient.getChainId();if(e!==o)return this.onEndHeroList(),console.log("切换失败，请手动切换"),null}}else await W.instance.resetPublicAndWallet(e);return n?(console.log("publicClient",W.instance.publicClient),await W.instance.publicClient.readContract({address:n,abi:Z.HERO_LIST_ABI,functionName:"list",args:[t]})):(this.onEndHeroList(),T.instance.notice(m.instance.getLanguage(1219,r)),null)}catch(n){if(console.log("获取英雄列表错误====》",n),n instanceof Error){let r=n.message;console.log("获取英雄列表 错误====》",r)}}}async transferHero(t,e){_e.instance.showLoadingByInfo(m.instance.getLanguage(1119));try{var i;let o;z.vType==2?(i=Gi.id,o=YE[i]):z.vType==1?(i=Ki.id,o=Ec[i]):(i=Ki.id,o=Ec[i]);let l=await W.instance.walletClient.getChainId();if(i!==l){var n=await W.instance.switchChain(i);if(!n){this.onEndHeroList(),console.log("切换失败，请手动切换");return}}if(!o)return this.onEndHeroList(),T.instance.notice(m.instance.getLanguage(1220,l)),!1;if(console.log("判断授权 transferHeroAddress: "+o+", acceptAddress:"+t+", chainIDData:"+i),!await this.setApprovalForAll(o))return console.log("未授权"),this.onEndHeroList(),T.instance.notice(m.instance.getLanguage(15)),!1;console.log("授权成功 开始购买");var r=await W.instance.walletClient.writeContract({account:W.instance.walletAddress,address:o,abi:Z.TRANSFER_HERO_ABI,functionName:"batchTransfer",args:[t,e]});console.log("============"+r);let u=await W.instance.publicClient.waitForTransactionReceipt({hash:r});return console.log(`Tx with hash: ${r}`,u),u&&u.status=="success"?(this.delHero(e),this.waitGetHero(i,r),console.log(`Tx successful with hash: ${r}`),r):(this.onEndHeroList(),Ee.TransactionErrorTip(),!1)}catch(o){this.onEndHeroList();var s=o.shortMessage;if(s&&s.indexOf("does not match")!=-1&&(s=m.instance.getLanguage(1118)),console.log(s),T.instance.notice(s),o instanceof G){let l=o.walk(c=>c instanceof Jt);if(l instanceof Jt){let c=l.data?.errorName??"";console.log("============errorName: "+c)}}return null}}async setApprovalForAll(t){let e=W.instance.walletAddress;try{console.log("查看是否已经授权, owner:"+e+", spender:"+t);let n;var i;z.vType==2?(i=Gi.id,n=YE[i]):z.vType==1?(i=Ki.id,n=Ec[i]):(i=Ki.id,n=Ec[i]);let r;z.vType==2?(i=Gi.id,r=WE[i]):z.vType==1?(i=Ki.id,r=Ic[i]):(i=Gi.id,r=Ic[i]);let s=await W.instance.publicClient.readContract({address:r,abi:Z.HERO_LIST_ABI,functionName:"isApprovedForAll",args:[e,n]});if(console.log("allowance",s),s)return!0;{console.log("未授权，进行授权, owner:"+e);let o=await W.instance.walletClient.writeContract({address:r,abi:Z.HERO_LIST_ABI,functionName:"setApprovalForAll",args:[t,!0],account:e});console.log("============"+o);let l=await W.instance.publicClient.waitForTransactionReceipt({hash:o});return console.log(`setApprovalForAll with hash: ${o}`,l),l&&l.status=="success"?(console.log(`setApprovalForAll successful with hash: ${o}`),!0):!1}}catch(n){if(console.log("授权错误====》",n),n instanceof Error){let r=n.message;console.log("授权错误====》",r)}}}onEndHeroList(t=null){_e.instance.hideLoading(),t&&g.intance.event(f.EVENT_END_HEROTRANSFER,[t])}waitGetHero(t,e){this.chainId=t,this.hashId=e,Laya.timer.loop(2e3,this,this.getHero)}delHero(t=null){var e=I.requestPost("wxgame/mutiNft/delHero",{heroList:t}).catch(i=>{})}async getHero(){var t=await I.requestPost("wxgame/mutiNft/check",{chainId:this.chainId,hashId:this.hashId}).catch(e=>{});t&&t.heroList&&t.heroList.length>0&&(Laya.timer.clear(this,this.getHero),this.onNewAddHero(t.heroList))}onNewAddHero(t){b.instance.m_heroData.herosDataRemoveHandler(t),this.onEndHeroList(t)}};var vb=class extends Laya.Dialog{};var{regClass:$2}=Laya,rn=class extends vb{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.myHeroesNum=0;this.selectedNum=0}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_readClipboard.disabled=!navigator.clipboard,this.btn_readClipboard.on(Laya.Event.CLICK,this,this.readClipboard),this.btn_transferRecords.on(Laya.Event.CLICK,this,this.onShowTransferRecord),this.btn_approve.on(Laya.Event.CLICK,this,this.onTransferHero),this.btn_checkBox.on(Laya.Event.CLICK,this,this.onSelectAll),g.intance.on(f.EVENT_END_HEROTRANSFER,this,this.onEndHeroTransfer),g.intance.on(f.EVENT_REFRESH_HEROTRANSFER,this,this.onRefreshHeroTransfer),this.list_hero.array=[]}async readClipboard(){navigator.clipboard?navigator.clipboard.readText().then(e=>{console.log("剪切板中的文本内容:",e),this.input_acceptAddress.text=e}).catch(e=>{console.error("无法读取剪切板内容:",e)}):console.error("当前浏览器不支持 Clipboard API")}onOpened(e){this.getHeroTokenIds()}async getHeroTokenIds(){var e=await wc.instance.getHeroTokenIds();console.log("获得链上英雄ID heroTokenIds: ",e),this.heroVos=[],e&&e.length>0&&e.forEach(i=>{i=parseInt(i);var n=b.instance.m_heroData.getCanTransferHero(i);n&&this.heroVos.push(n)}),this.list_hero.array=this.heroVos,this.updateNum()}onEndHeroTransfer(e){this.heroVos=this.heroVos.filter(i=>!e.includes(i.pk)),this.list_hero.array=this.heroVos,this.updateNum()}onRefreshHeroTransfer(){this.list_hero.refresh(),this.updateNum()}updateNum(){!this.heroVos||this.heroVos.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,this.selectedNum=0,this.heroVos.forEach(e=>{e&&e.checked&&this.selectedNum++}),rn.chooseNum=this.selectedNum,this.myHeroesNum=this.heroVos.length,this.tf_myHeroesNum.text=m.instance.getLanguage(1222,this.heroVos.length),this.tf_selectedNum.text=m.instance.getLanguage(1223,this.selectedNum)}onSelectAll(){var e=this.btn_checkBox.selected;let i=0;e&&this.heroVos.forEach(n=>{n&&(n.checked=!1)}),this.heroVos.forEach(n=>{i+=1,i<101&&n&&(n.checked=e)}),this.list_hero.refresh(),this.updateNum()}onBack(){this.close()}async onTransferHero(){var e=this.input_acceptAddress.text;if(e==""){T.instance.notice(m.instance.getUILang("PLEASE ENTER THE ACCEPT ADDRESS"));return}var i=[];this.heroVos.forEach(n=>{n.checked&&i.push(n.pk)}),i.length>0?await wc.instance.transferHero(e,i):T.instance.notice(m.instance.getLanguage(1218))}onShowTransferRecord(){A.intance.openModule(y.TransferRecordDialog)}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(f.EVENT_END_HEROTRANSFER,this,this.onEndHeroTransfer),g.intance.off(f.EVENT_REFRESH_HEROTRANSFER,this,this.onRefreshHeroTransfer)}};rn.chooseNum=0,rn=h([$2("rERE5ZadTfqASnxDrsNtyw")],rn);var{regClass:X2}=Laya,xb=class extends Lb{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.heroVo=e,this.heroVo&&(this.img_checked.visible=this.heroVo.checked,this.heroListItem.needPop=!1,this.heroListItem.dataSource=this.heroVo,this.addEvent())}toDetail(){rn.chooseNum>=100&&!this.heroVo.checked||(this.heroVo.checked=!this.heroVo.checked),g.intance.event(f.EVENT_REFRESH_HEROTRANSFER)}};xb=h([X2("tzBcfqNYSL6KP4NjtslyHA")],xb);var Ib=class extends Laya.Scene{};var{regClass:Q2}=Laya,Eb=class extends Ib{constructor(){super(...arguments);this.currTab=0;this.type=1;this.items=[];this.hasItem=!1}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onOpened(e){this.type=e}onEnable(){this.list_hero.vScrollBarSkin="",this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_transfer.on(Laya.Event.CLICK,this,this.onTransfer),g.intance.on(ei.UPDATE_HERO_EVENT,this,this.updateHero),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.initContainer()}initContainer(){this.list_hero.visible=!1,this.list_hero.vScrollBarSkin="",this.createHeadList();let e=b.instance.m_heroData.heroVoDic.values,i=Q.filterObjectsByState(e,1),n=Q.filterObjectsByState(e,2),r=Q.filterObjectsByNewFightFlag(e);this.tf_hireHero.text=`${i.length}`,this.tf_proxyTotal.text=`${n.length}`,this.tf_heroTotal.text=`${r.length}`,console.log(i,n)}updateHero(e){this.type=e+1,this.createHeadList()}async createHeadList(){await gt.instance.ownerHero(!0),!this.destroyed&&(this.type?this.onClickTab(this.type):this.onClickTab(1))}async onClickTab(e){if(this.currTab!=e){if(this.setTab(e),e==1){if(this.destroyed)return;var i=await this.getItemByType(1);i.sort((n,r)=>{if(n===null&&r!==null)return 1;if(n!==null&&r===null)return-1;if(n!==null&&r!==null){if(n.heroItem.quality!==r.heroItem.quality)return r.heroItem.quality-n.heroItem.quality;if(n.heroItem.icon===null&&r.heroItem.icon!==null)return 1;if(n.heroItem.icon!==null&&r.heroItem.icon===null)return-1;if(n.heroItem.icon!==r.heroItem.icon)return n.heroItem.icon<r.heroItem.icon?-1:1}return 0}),this.list_hero.array=i,this.list_hero.visible=!0,this.btn_transfer.visible=!0}else{if(this.list_hero.visible=!0,this.destroyed)return;var i=await this.getItemByType(2);i.sort((r,s)=>{if(r===null&&s!==null)return 1;if(r!==null&&s===null)return-1;if(r!==null&&s!==null){if(r.heroItem.quality!==s.heroItem.quality)return s.heroItem.quality-r.heroItem.quality;if(r.heroItem.icon===null&&s.heroItem.icon!==null)return 1;if(r.heroItem.icon!==null&&s.heroItem.icon===null)return-1;if(r.heroItem.icon!==s.heroItem.icon)return r.heroItem.icon<s.heroItem.icon?-1:1}return 0}),this.list_hero.dataSource=i,this.btn_transfer.visible=!1}this.list_hero.selectedIndex=-1,this.hasItem&&(this.list_hero.selectedIndex=0)}}async getItemByType(e){var i=e==1?$e.TYPE_Professional:$e.TYPE_Training;this.items=[],this.hasItem=!1;let n=b.instance.m_heroData.getListByType(i);for(var r=n.length>10?n.length:10,s=0;s<r;s++){var o=n[s];o?(s==0&&(this.hasItem=!0),this.items.push(o)):this.items.push(null)}return this.items}setTab(e){for(let i=1;i<3;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe")}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}onTransfer(){A.intance.openModule(y.HeroTransferView)}onDisable(){g.intance.off(ei.UPDATE_HERO_EVENT,this,this.updateHero)}};Eb=h([Q2("eEFn-xcRTXagUEZFDdSujw")],Eb);var wb=class extends Laya.Box{};var{regClass:J2}=Laya,Tb=class extends wb{set dataSource(t){super.dataSource=t;var e=t;if(!e)return;let n=_.intance.getAttributeDataById(e[0]).identification;this.tf_name.text=n,this.tf_num.text=`+${e[1]}`}};Tb=h([J2("NAU4mWDMR0mrfUY9FO6URw")],Tb);var Cb=class extends Laya.Box{};var{regClass:Z2}=Laya,Sb=class extends Cb{set dataSource(t){super.dataSource=t;var e=t;e&&(this.tf_name.text=m.instance.getUILang(e[1]),this.tf_num.text=e[2])}};Sb=h([Z2("BFrnzfZDRh2v3vDKqrNVwA")],Sb);var Db=class extends Laya.Box{};var{regClass:eM}=Laya,Ab=class extends Db{constructor(){super();this.isBig=!1;this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.skillItem=e,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=D.instance.getSkillIcon(this.skillItem.icon,this.isBig))}};Ab=h([eM("qJVd2M3_Td-5eIx8PsQpAw")],Ab);var kb=class extends Laya.Box{};var{regClass:tM}=Laya,Bb=class extends kb{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.skillItem=e,this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.dataSource=this.skillItem)}toDetail(){this.skillItem&&A.intance.openModule(y.SkillTipDialog,this.skillItem)}};Bb=h([tM("VRh1GpjHSyqm75euC37ZKw")],Bb);var Mb=class extends Laya.Dialog{};var{regClass:iM}=Laya,Rb=class extends Mb{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}setOpenData(e){e&&(this.skillItem=e)}onEnable(){this.item.dataSource=this.skillItem,this.tf_name.text=m.instance.getLanguage(this.skillItem.name);var e=[["type","S_type",m.instance.getLanguage(this.skillItem.name)],["distance","S_distance",this.skillItem.distance],["hurt","S_hurt",this.skillItem.hurt/100+"%"],["cd","S_cd",this.skillItem.cd/1e3+m.instance.getUILang("S_S")],["displacement","S_displacement",this.skillItem.displacement],["targetsType","S_targetsType",m.instance.getUILang("S_targetsType"+this.skillItem.targetsType)]];this.list_skillAttrs.array=e}removeEvent(){}};Rb=h([iM("PiBuXnP8ToeveVbB_bfhUQ")],Rb);var Pb=class extends Laya.Box{};var{regClass:aM}=Laya,Nb=class extends Pb{constructor(){super();this.isBig=!1;this.isAddEvent=!1}set dataSource(e){super.dataSource=e,e&&(this.img_icon.skin=`gameIcon/hero/heroDetail/img_hero_state_${e}.png`)}};Nb=h([aM("kgETBhusT2WQRM1T39-4EA")],Nb);var Ob=class extends Laya.Dialog{};var{regClass:nM}=Laya,Hb=class extends Ob{constructor(){super()}onOpened(t){this.list_record.array=[],this.onGetList()}async onGetList(){var t=await I.requestPost("wxgame/mutiNft/record",{});t&&t.record?(this.list_record.array=t.record,!t.record||t.record.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1):T.instance.notice(m.instance.getLanguage(135))}};Hb=h([nM("nkhiH9TpSY6e2tWJ07b86g")],Hb);var Ub=class extends Laya.Box{};var{regClass:rM}=Laya,Vb=class extends Ub{constructor(){super(...arguments);this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){let e=this.heroTransferDto.toAddress;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}set dataSource(e){super.dataSource=e,this.heroTransferDto=e,this.heroTransferDto&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){if(this.tf_createDate.text=ce.formatTimeStamp(this.heroTransferDto.createTime,"YY-MT-DD HH:MM"),this.tf_tokenId.text=this.heroTransferDto.nftId,this.tf_from.text=Be.abbreviateString(this.heroTransferDto.fromAddress,18),this.tf_to.text=Be.abbreviateString(this.heroTransferDto.toAddress,18),this.heroTransferDto.id>0){var e=new Pt;e.id=this.heroTransferDto.id,e.lv=this.heroTransferDto.lv,e.color=this.heroTransferDto.color,this.heroListItem.needPop=!1,this.heroListItem.dataSource=e}}};Vb=h([rM("STy30_L-RjafQhbdmoDLDw")],Vb);var Fb=class extends Laya.Dialog{};var{regClass:sM}=Laya,Gb=class extends Fb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.checkIndex=1}onEnable(){this.initContainer()}initContainer(){this.check_coin1.on(Laya.Event.CLICK,this,this.onCheck,[1]),this.check_coin2.on(Laya.Event.CLICK,this,this.onCheck,[2]),this.check_coin3.on(Laya.Event.CLICK,this,this.onCheck,[3]),this.check_coin4.on(Laya.Event.CLICK,this,this.onCheck,[4]),this.btn_join.on(Laya.Event.CLICK,this,this.onBuy),this.btn_record.on(Laya.Event.CLICK,this,this.onRecord),this.buyCode.on(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.buyCode.on(Laya.Event.BLUR,this,this.testRechargeCodeInput),this.tf_address.text=`${W.instance.walletAddress}`,this.checkChain(),this.onCheck(1)}async checkChain(){let e=await W.instance.walletClient.getChainId(),i=z.vType==2?Fi.id:Ba.id;e==i?this.getRest():await W.instance.switchChain(i)&&this.getRest()}async getRest(){let e=await W.instance.getIgoUSD(),i=await W.instance.getBalance2(e),r=ri(i,18);this.tf_rest.text=`${Q.truncateToTwoDecimalPlaces(Number(r))}`,console.log(i)}onRechargeCodeInput(){let e=Number(this.buyCode.text),i=Q.isNumber(this.buyCode.text);(e<0||!i)&&(this.buyCode.text="0")}testRechargeCodeInput(){let e=Number(this.buyCode.text);this.buyCode.text=`${Q.formatNumber(e)}`}onCheck(e){this.checkIndex=e;for(let i=1;i<5;i++){let n=this["check_coin"+i];n&&(e==i?n.selected=!0:n.selected=!1)}}async onBuy(){let e=0;switch(this.checkIndex){case 1:e=1e4;break;case 2:e=5e3;break;case 3:e=2e3;break;case 4:e=Number(this.buyCode.text);break}let i=await W.instance.getRechargedIgoUSD(),n=await W.instance.getAllRechargedMoney(),s=Number(ri(n,18)),o=z.vType==2?Fi.id:Ba.id,l=await W.instance.walletClient.getChainId(),c=await W.instance.getIgoLimitTime(),u=new Date().getTime();if(l!==o){await W.instance.switchChain(o)&&this.getRest();return}else if(Number(c)*1e3<=u)T.instance.notice(m.instance.getLanguage(1636));else if(i<=0&&e<100){T.instance.notice(m.instance.getLanguage(1637));return}else if(+(s<e)){T.instance.notice(m.instance.getLanguage(1638));return}else if(Number(this.tf_rest.text)<e){T.instance.notice(m.instance.getLanguage(1639));return}else if(this.passCode.text!=="fodc888"){T.instance.notice(m.instance.getLanguage(1640));return}else{let p=await W.instance.getIgoUSD(),d=z.vType==2?Fi.id:Ba.id;await W.instance.rechargeIgoUSD(e,d,p)&&(T.instance.notice(m.instance.getLanguage(1641)),this.getRest())}}onRecord(){A.intance.openModule(y.IgoRecordDialog)}onDisable(){this.check_coin1.off(Laya.Event.CLICK,this,this.onCheck),this.check_coin2.off(Laya.Event.CLICK,this,this.onCheck),this.check_coin3.off(Laya.Event.CLICK,this,this.onCheck),this.check_coin4.off(Laya.Event.CLICK,this,this.onCheck),this.btn_join.off(Laya.Event.CLICK,this,this.onBuy),this.btn_record.off(Laya.Event.CLICK,this,this.onRecord),this.buyCode.off(Laya.Event.INPUT,this,this.onRechargeCodeInput),this.buyCode.off(Laya.Event.BLUR,this,this.testRechargeCodeInput)}};Gb=h([sM("vvPDCXWeRSidA4q06p09sA")],Gb);var Kb=class extends Laya.Scene{};var{regClass:oM}=Laya,qb=class extends Kb{constructor(){super(...arguments);this.isDown=!1}onAwake(){}onOpened(e){}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_register.on(Laya.Event.CLICK,this,this.onPreResign),this.initPage(),this.refreshJoinBtnRed(),this.refreshTime(),Laya.timer.loop(1e3,this,this.refreshTime)}initPage(){let e=Laya.LocalStorage.getItem(z.COOKIE_CF_LAN),i=e=="zh"?"res/igoPage/img_com_bj1.jpg":"res/igoPage/img_com_bj4.jpg",n=e=="zh"?"res/igoPage/img_com_bj2.jpg":"res/igoPage/img_com_bj5.jpg",r=e=="zh"?"res/igoPage/img_com_bj3.jpg":"res/igoPage/img_com_bj6.jpg";this.img_bg1.skin=i,this.img_bg2.skin=n,this.img_bg3.skin=r;let s=e=="zh"?"res/igoPage/img_com_anniu3.png":"res/igoPage/img_com_anniu2.png",o=e=="zh"?"res/igoPage/img_com_anniu4.png":"res/igoPage/img_com_anniu.png";Laya.timer.once(500,this,()=>{this.btn_join.skin=s,this.btn_register.skin=o}),e=="zh"?(this.tf_mon.y=this.tf_day.y=this.tf_hour.y=this.tf_min.y=this.tf_secs.y=4330,this.btn_register.y=4830):(this.tf_mon.y=this.tf_day.y=this.tf_hour.y=this.tf_min.y=this.tf_secs.y=4380,this.btn_register.y=4851),this.pageBox.scrollRect=new Laya.Rectangle(0,0,2e3,Laya.stage.height);var l=0;console.log("this.pageBox.scrollRect.y",this.pageBox.scrollRect.y);let c=this;this.pageBox.on(Laya.Event.MOUSE_DOWN,this,function(){c.isDown=!0,l=c.pageBox.mouseY}),this.pageBox.on(Laya.Event.MOUSE_UP,this,function(){c.isDown=!1}),this.pageBox.on(Laya.Event.MOUSE_MOVE,this,function(){if(c.isDown){var u=c.pageBox.mouseY-l;l=c.pageBox.mouseY;var p=c.pageBox.scrollRect.y-u;p<0?p=0:p>c.longBox.height-Laya.stage.height&&(p=c.longBox.height-Laya.stage.height),c.pageBox.scrollRect.y=p}})}onDisable(){this.closeHandle&&this.closeHandle.run(),this.removeEvent()}refreshJoinBtnRed(){this.img_red&&(this.img_red.visible=b.instance.getRedDotById(ne.RED_IGO))}removeEvent(){Laya.timer.clear(this,this.refreshTime),this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_join.off(Laya.Event.CLICK,this,this.onJoin),this.btn_register.off(Laya.Event.CLICK,this,this.onPreResign)}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}refreshTime(){let e=new Date(2024,10,1,0,0,0),i=Math.floor(e.getTime()/1e3),n=ce.getTimeDifference(i);n&&(this.tf_mon.text=`${n.months}`,this.tf_day.text=`${n.days}`,this.tf_hour.text=`${n.hours}`,this.tf_min.text=`${n.minutes}`,this.tf_secs.text=`${n.seconds}`)}async onJoin(){await I.requestPost("wxgame/sys/redPointClear",{type:ne.RED_IGO}),A.intance.openModule(y.IgoJoinDialog),this.img_red.visible=!1}onPreResign(){T.instance.notice(m.instance.getLanguage(12))}};qb=h([oM("b4l4liAxTZSR9wvhcYm1kw")],qb);var Wb=class extends Laya.Dialog{};var{regClass:lM}=Laya,Yb=class extends Wb{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.btn_sure.on(Laya.Event.CLICK,this,this.onSure),this.initContainer()}async initContainer(){let e=await W.instance.getIgoRecord();this.list_record.array=e;let i=await W.instance.getMyAllRechargedMoney(),r=Number(ri(i,18));this.tf_all.text=`${r}`,console.log("records",e);let s=0;r<2e3&&r>=100?s=25:r<5e3&&r>=2e3?s=35:r<1e4&&r>=5e3?s=40:r>=1e4&&(s=50),this.tf_rate.text=`${s}%`}onSure(){this.close()}onDisable(){this.btn_sure.off(Laya.Event.CLICK,this,this.onSure)}};Yb=h([lM("8m39UgG6S7mRkF5J0l8ICw")],Yb);var zb=class extends Laya.Box{};var{regClass:cM}=Laya,jb=class extends zb{constructor(){super()}createChildren(){super.createChildren()}set dataSource(t){super.dataSource=t,this.setData(t)}setData(t){if(!t)return;this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy),this.tf_from.text=`${Q.shortenString(W.instance.walletAddress,7,8)}`;let e=t.amount,n=ri(e,18);this.tf_amount.text=`${Q.truncateToTwoDecimalPlaces(Number(n))} USDT`;let r=t.timestamp,s=ce.formatDayAndTime(Number(r)*1e3);this.tf_createDate.text=`${s.date}  ${s.time}`}onClickCopy(){doCopy(W.instance.walletAddress),T.instance.notice(m.instance.getLanguage(132))}onDisable(){this.removeEvent()}removeEvent(){this.btn_copy.off(Laya.Event.CLICK,this,this.onClickCopy)}};jb=h([cM("kYsWN9XrQiiZLpBD1NVAEw")],jb);var $b=class extends Laya.Box{};var{regClass:uM}=Laya,Xb=class extends $b{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.itemVo=e,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(!this.itemVo)return;let e=this.itemVo.itemItem;if(this.knapsackItem.dataSource=this.itemVo,e?this.disabled=!1:this.disabled=!0,this.img_jiaobiao.visible=!1,this.img_win.visible=!1,this.itemVo.m_iId==ve.TYPE_QUAN_MNT){var i;this.itemVo.prizeStatus&&(this.itemVo.prizeStatus==2?(this.img_win.visible=!0,i=m.instance.getUILang("Won")):this.itemVo.prizeStatus==1&&(i=m.instance.getUILang("No Won"))),this.itemVo.chainStatus==1?(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/item/img_chainStatus_2.png",i=m.instance.getUILang("On-Chain")):this.itemVo.lateStatus==1?i=m.instance.getUILang("Expired"):(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/item/img_chainStatus_1.png",i=m.instance.getUILang("Off-Chain"))}}toDetail(){console.log(this.x),!(!this.itemVo||!this.itemVo.needTip)&&(this.itemVo.type===Ge.TYPE_Equipment||this.itemVo.type===Ge.TYPE_CARD)&&g.intance.event(f.SHOW_EQUIP_TIP,{data:this.itemVo,positionX:this.x})}};Xb=h([uM("HYoZb6e-RFKj8fjDKbl-7Q")],Xb);var Qb=class extends Laya.Box{};var{regClass:mM}=Laya,Jb=class extends Qb{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.coinItems=e,this.coinItems&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(this.coinItems){var e=this.coinItems[0];this.txt_num.text=Se.filterNumFormat(b.instance.getConsumeValue(this.coinItems[0]),this.coinItems[1],!1,!0),this.img_icon.skin=D.instance.getMoneyIcon(this.coinItems[0]),this.img_add.visible=e!=ve.TYPE_GOLD}}toDetail(){var e=this.coinItems[0];!this.coinItems||e==ve.TYPE_GOLD||(console.log(e),Ee.onGetMoney(e))}};Jb=h([mM("NIAfVcg_S72kTvDQGuZ7vA")],Jb);var Zb=class extends Laya.Box{};var{regClass:pM}=Laya,eg=class extends Zb{set dataSource(t){super.dataSource=t;var e=t;if(!e)return;this.tf_attNum1.text=`+${e[1]}`,this.tf_attNum2.text=`+${e[2]}`;let i=_.intance.getAttributeDataById(e[0]);this.tf_att1.text=i.identification,this.tf_att2.text=i.identification}};eg=h([pM("9sZiQib_QceUIq6wXx7r9w")],eg);var tg=class extends Laya.Dialog{};var{regClass:hM}=Laya,ig=class extends tg{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.equipData=null}onEnable(){this.btn_upStar.on(Laya.Event.CLICK,this,this.onRisingStar)}setOpenData(e){e&&(console.log(e),this.initContainer(e))}initContainer(e){if(this.equipData=e,this.equipData){let n=this.equipData.m_iId,r=this.equipData.m_iId+1,s=new Pe(n),o=new Pe(r);this.oldEquip.dataSource=s,this.newEquip.dataSource=o;let l=this.oldEquip.getChildByName("txt_num"),c=this.newEquip.getChildByName("txt_num");l&&(l.visible=!1),c&&(c.visible=!1);let u=_.intance.getEquipDataById(r),p=_.intance.getEquipDataById(n);console.log(u.attribute,p.attribute);let d=p.upStar[1];if(u){this.tf_have.text=`${this.equipData.m_iNum}`;let L=u.attribute;this.tf_need.text=`${d}`,this.equipData.m_iNum>d?this.tf_have.color="#88ff71":this.tf_have.color="#ed4842";let v=_.intance.getEquipSuitDataById(r).skill;if(v){var i=_.intance.m_dicSkills.get(v);this.skillListItem.dataSource=i,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;let E=Q.categorizeArrays(p.attribute,u.attribute);this.list_attrs.array=E}}}async onRisingStar(){let e=await I.requestPost("wxgame/equip/star",{bagPk:this.equipData.m_iPk});if(e){g.intance.event(f.EVENT_REFRESH_KNAPSACK,e.bagItem.id);let n=[];var i=new vt;i.id=e.bagItem.id,i.count=1,n.push(i),A.intance.openModule(y.RewardGetDialog,n),this.close()}}onDisable(){}};ig=h([hM("DzwdOKWlRK2iP7OBwMXXoA")],ig);var ag=class extends Laya.Dialog{};var{regClass:dM}=Laya,ng=class extends ag{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.initContainer(),ze.instance.playSoundByName(ze.soundName32)}initContainer(){var e=ct.instance.getOneItem();if(e){var i;e instanceof Array?(i=new Pe(e[0]),i.newAddCnt=e[1]):i=e,this.showItem(i)}}showItem(e){this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=e,this.tf_name.text=m.instance.getLanguage(e.itemItem.name)}onDisable(){g.intance.event(f.EVENT_CHECK_REMAIN,y.ItemGetDialog)}};ng=h([dM("tC2uDJDVQMaI41Lys60O5Q")],ng);var rg=class extends Laya.Box{};var{regClass:fM}=Laya,sg=class extends rg{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.itemVo=e,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=new Pe;if(!this.itemVo)return;this.itemVo.m_iId==ve.TYPE_QUAN_MNT?(this.tf_quanId.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk):this.tf_quanId.visible=!1;let i=this.itemVo.itemItem;A.intance.hasOpenView(y.PveChoosePropsDialog)&&(this.txt_num.visible=!1),i?(this.showAdd?this.txt_num.text=""+Se.formatNumber(this.itemVo.newAddCnt,8):this.itemVo.m_iNum?this.txt_num.text=""+Se.formatNumber(this.itemVo.m_iNum,8):this.txt_num.text=""+Se.formatNumber(this.itemVo.newAddCnt,8),this.img_icon.skin=D.instance.getItemIcon(i.icon),this.img_box.skin="gameIcon/items/itemBg/img_"+i.quality+".png"):(this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"),this.tf_isSch.visible=this.itemVo.isScholarship}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.type===Ge.TYPE_Equipment?A.intance.openModule(y.EquipDetailDialog,this.itemVo):A.intance.openModule(y.KnapsackTipDialog,this.itemVo))}};sg=h([fM("LzxJYKybT_m3CJav3RyDmg")],sg);var og=class extends Laya.Scene{};var{regClass:yM}=Laya,lg=class extends og{constructor(){super(...arguments);this.subBagInfo=null;this.subType=null;this.selectId=null;this.currTab=0;this.quanTabIndex=7;this.totalSubTab=3;this.needRefresh=!1;this.type=1;this.totalTab=8;this.items=[];this.hasItem=!1;this.nftTabIndex=1}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP,this.listPanel1.visible=!1}onOpened(e){e&&e[0]&&(this.type=e[0]||1,this.subType=e[1]),this.initLuckDrawView()}onEnable(){this.nomalY=this.list_btn.y,g.intance.on(f.EVENT_REFRESH_KNAPSACK,this,this.onRefreshKnapsack),g.intance.on(f.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan);for(let i=1;i<this.totalTab;i++)this["btn_"+i].on(Laya.Event.CLICK,this,this.onClickTab,[i]);for(let i=1;i<=this.totalSubTab;i++)this["tab_nft_"+i].on(Laya.Event.CLICK,this,this.onNftTabClick,[i]);this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.listPanel1.vScrollBarSkin="",this.listPanel1.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1),this.box_show.visible=!1,this.box_2.visible=!1;let e=(Laya.stage.height-z.DESIGN_HEIGHT)/2}setTab(e){for(let i=1;i<this.totalTab;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe")}async initLuckDrawView(){await gt.instance.ownerBag(),!this.destroyed&&(this.type?this.onClickTab(this.type):this.onClickTab(1))}async onClickTab(e){if(!(!this.needRefresh&&this.currTab==e)&&(this.setTab(e),this.type=e,this.box_2.visible=!0,!this.destroyed))if(e==this.quanTabIndex)this.onNftTabClick(1);else{var i=await this.getItemByType(e);this.onSetData(i)}}async onSetData(e){if(this.listPanel1.array=e,this.listPanel1.visible=!0,this.selectId!==null){let i=this.getIndexById(e);this.listPanel1.selectedIndex=i,this.selectId=null}else this.listPanel1.selectedIndex=-1,this.hasItem&&(this.listPanel1.selectedIndex=0)}async getItemByType(e,i=1){this.items=[],this.hasItem=!1;var n;if(e==this.quanTabIndex?(this.hengTabBox.visible=!0,n=await b.instance.m_packageData.getQuan(i)):(this.hengTabBox.visible=!1,n=b.instance.m_packageData.getBackByType(e)),e==2){if(!this.subBagInfo){let u=(await I.requestPost("wxgame/lease/bag",{})).list,p={};for(let d of u)d.ticketId in p?p[d.ticketId]+=d.ticketCount:p[d.ticketId]=d.ticketCount;this.subBagInfo=Object.keys(p).map(d=>({ticketId:d,ticketCount:p[d]}))}if(this.subBagInfo)for(let c=0;c<this.subBagInfo.length;c++){let u=this.subBagInfo[c];if(u.ticketCount){var r=new Pe(u.ticketId);r.newAddCnt=u.ticketCount,r.isScholarship=!0,console.log(r),n.push(r)}}console.log(this.subBagInfo)}this.subType!==null&&e==5&&(n=n.filter(c=>c.subType==this.subType));for(var s=n.length>30?n.length:30,o=0;o<s;o++){var l=n[o];l?(o==0&&(this.hasItem=!0),this.items.push(l)):this.items.push(new Pe(0))}return this.items}getIndexById(e){return e.findIndex(n=>n.m_iId==this.selectId)||0}onSelectItem(e,i){if(this.itemVo=this.items[e],this.tf_des.visible=!1,this.tf_des2.visible=!1,console.log(this.itemVo),this.itemVo){let l=this.itemVo.itemItem;if(this.img_icon.skin=D.instance.getItemIcon(l.icon),this.tf_name.text=m.instance.getLanguage(l.name),this.itemVo.m_iId==ve.TYPE_QUAN_MNT){this.tf_quanId.visible=!0,this.tf_expTime.visible=!0,this.tf_quanId.text=this.itemVo.m_iPk,this.tf_expTime.text=m.instance.getLanguage(1802)+": "+ce.formatTimeStamp(this.itemVo.expTime);var n;this.itemVo.prizeStatus?this.itemVo.prizeStatus==2?n=m.instance.getUILang("Won"):this.itemVo.prizeStatus==1&&(n=m.instance.getUILang("No Won")):this.itemVo.chainStatus==1?n=m.instance.getUILang("On-Chain"):this.itemVo.lateStatus==1?n=m.instance.getUILang("Expired"):n=m.instance.getUILang("Off-Chain"),this.tf_status.text=n,this.tf_status.visible=!0}else this.tf_expTime.visible=!1,this.tf_quanId.visible=!1,this.tf_status.visible=!1;if(l.type==Ge.TYPE_Equipment){this.img_att.visible=!0,this.tf_des.text="",this.box_show.visible=!1,this.box_show2.visible=!0,this.tf_name2.text=m.instance.getLanguage(l.name),this.knapsackItem.dataSource=this.itemVo;let c=this.itemVo.itemItem.id;this.tf_name2.color=wt.qualityColors[l.quality-1],this.tf_grade.color=wt.qualityColors[this.itemVo.itemItem.quality-1],this.tf_grade.text=m.instance.getUILang(`Quality_${this.itemVo.itemItem.quality}:`);let u=_.intance.getEquipDataById(c);if(u){this.tf_part.text=m.instance.getUILang(`Part_${u.type}:`);let p=u.attribute;this.list_attrs.array=p;let d=_.intance.getEquipSuitDataById(c);if(d&&d.skill){let L=d.skill;var r=_.intance.m_dicSkills.get(L);this.skillListItem.dataSource=r,this.skillListItem.visible=!0,this.img_skill.visible=!0}else this.skillListItem.visible=!1,this.img_skill.visible=!1}this.list_btn.y=this.nomalY+50}else if(l.type==Ge.TYPE_CARD){this.img_skill.visible=!0,this.img_att.visible=!1,this.tf_des2.visible=!0;let u=_.intance.getArrFromDicItemByKey("id",l.id)[0];this.box_show.visible=!1,this.box_show2.visible=!0,this.tf_des2.text=m.instance.getLanguage(u.des),this.tf_name2.text=m.instance.getLanguage(l.name),this.tf_name2.color=wt.qualityColors[l.quality-1],this.knapsackItem.dataSource=this.itemVo,this.tf_grade.color=wt.qualityColors[this.itemVo.itemItem.quality-1],this.tf_grade.text=m.instance.getUILang(`Quality_${this.itemVo.itemItem.quality}:`),this.tf_part.text=m.instance.getUILang(`Part_${u.type}:`);let p=u.attribute;this.list_attrs.array=p;let d=u.skillId;if(d){var r=_.intance.m_dicSkills.get(d);this.skillListItem.dataSource=r,this.skillListItem.visible=!0}else this.skillListItem.visible=!1;this.list_btn.y=this.nomalY+50}else this.img_skill.visible=!1,this.tf_des.visible=!0,this.tf_des.text=m.instance.getLanguage(l.des),this.box_show.visible=!0,this.box_show2.visible=!1,this.tf_name.text=m.instance.getLanguage(l.name),this.list_btn.y=this.nomalY;var s=l.use,o=[];s&&s.forEach(c=>{if(c==1){var u=!1,p=!1;this.itemVo.subType==8&&b.instance.playerDto.unionLeader!=1||(u=!0),this.itemVo.subType==7&&(p=!1),u&&o.push([c,this.itemVo,p])}else if(c==2){var u=!1,p=!1;if(l&&l.effect.length==2)var d=l.effect[0][0],L=l.effect[0][1],v=b.instance.m_packageData.getCountById(d),p=L>v;o.push([c,this.itemVo,p])}else if(c==3){var p=!1;o.push([c,this.itemVo,p])}else if(c==6){var p=!1,E=b.instance.m_serverTime;if(this.itemVo.chainStatus==1||E>this.itemVo.expTime)var p=!0;o.push([c,this.itemVo,p])}}),this.list_btn.array=o,this.list_btn.visible=!0}else this.list_btn.visible=!1,this.img_icon.skin=null,this.tf_name.text="",this.tf_des.text="",this.box_show.visible=!1,this.box_show2.visible=!1}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}stopAni(e){console.log("stopAni: "+e)}async onRefreshQuan(){this.onRefreshKnapsack(null),T.instance.notice(m.instance.getLanguage(2e3))}async onRefreshKnapsack(e){this.needRefresh=!0,e&&(this.selectId=e),await this.initLuckDrawView(),this.needRefresh=!1}removeEvent(){g.intance.off(f.EVENT_REFRESH_KNAPSACK,this,this.onRefreshKnapsack),g.intance.off(f.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan)}onRisingStar(){A.intance.openModule(y.EquipStarUpDialog,this.itemVo)}onNftTabClick(e){for(let i=1;i<=this.totalSubTab;i++)e==i?(this["tab_nft_"+i].skin="res/shop/img_com_tab (2).png",this["tab_nft_"+i].getChildByName("tf_tit").color="#ffffff",this.getNftDataByIndex(e)):(this["tab_nft_"+i].skin="",this["tab_nft_"+i].getChildByName("tf_tit").color="#84ccff")}async getNftDataByIndex(e){this.nftTabIndex=e;var i=await this.getItemByType(this.quanTabIndex,e);this.onSetData(i)}};lg=h([yM("6IPqO9JvTmygjIZQXMwq2A")],lg);var cg=class extends Laya.Dialog{};var{regClass:bM}=Laya,ug=class extends cg{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}setOpenData(e){e&&(this.itemVo=e)}onEnable(){this.item.dataSource=this.itemVo;let e=this.itemVo.itemItem;this.tf_name.text=m.instance.getLanguage(e.name),this.txt_type.text=m.instance.getLanguage(6060)+m.instance.getLanguage(e.type),this.txt_desc.text=m.instance.getLanguage(e.des)}removeEvent(){}};ug=h([bM("or8jNdIhRpSbAG2JBhH-wA")],ug);var mg=class extends Laya.Dialog{};var{regClass:gM}=Laya,pg=class extends mg{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){ze.instance.playSoundByName(ze.soundName32)}setOpenData(e){e&&(this.reward=e);var i=[],n=this.reward;n.forEach(c=>{if(c.id&&c.id>0){var u=new Pe(c.id);u.newAddCnt=c.count,c.id==3011&&(u.itemItem.icon=c.id),i.push(u)}});var r=this.list_reward.spaceX,s=this.list_reward.itemTemplate.width,o=i.length;this.list_reward.repeatX=o;var l=o*s+r*(o-1);this.list_reward.width=l,this.list_reward.x=this.width-l>>1,this.list_reward.array=i}};pg=h([gM("xwYUFnd4S3uJGIJSjjbRag")],pg);var Jn=class a{constructor(){this.lastTime=0}static get instance(){return a._instance||(a._instance=new a),a._instance}async addTicketLog(t,e){var i=new Date().getTime();if(i-this.lastTime<1e3)return;this.lastTime=i,this.type=t,this.tid=e,_e.instance.showLoadingByInfo(m.instance.getLanguage(1119));let n=z.vType==2?Z.ADDLOG_ADDRESS:Z.ADDLOG_ADDRESS_TEST,r=z.vType==2?Kn:an,s=W.instance.walletAddress,o=await W.instance.walletClient.getChainId();if(n)try{if(o!==r.id&&!await W.instance.switchChain(r.id)){this.onEndQuanList(),console.log("切换失败，请手动切换");return}let c=b.instance.playerDto.pid,u=await W.instance.walletClient.writeContract({address:n,abi:Z.ADDLOG_ABI,functionName:"addTicketLog",args:[c,e,t],account:s}),p;return p=await W.instance.publicClient.waitForTransactionReceipt({hash:u,pollingInterval:1e3}),console.log(`Tx with hash: ${u}`,p),p&&p.status=="success"?(this.waitGetQuanReward(r.id,u),console.log(`Tx successful with hash: ${u}`),u):(this.onEndQuanList(),Ee.TransactionErrorTip(),!1)}catch(c){this.onEndQuanList();var l=c.shortMessage;if(l&&l.indexOf("does not match")!=-1&&(l=m.instance.getLanguage(1118)),console.log(l),T.instance.notice(l),c instanceof G){let u=c.walk(p=>p instanceof Jt);if(u instanceof Jt){let p=u.data?.errorName??"";console.log("============errorName: "+p)}}return null}}onEndQuanList(t=null){_e.instance.hideLoading(),t&&g.intance.event(f.EVENT_REFRESH_QUAN_STATUS,[t])}waitGetQuanReward(t,e){this.chainId=t,this.hashId=e,Laya.timer.loop(2e3,this,this.getQuanReward)}async getQuanReward(){if(this.type==1){var t=await I.requestPost("wxgame/loserTicket/loserTicketChainCheck",{tid:this.tid}).catch(n=>{});t&&t.takeUp==1&&(Laya.timer.clear(this,this.getQuanReward),_e.instance.hideLoading(),this.onEndQuanList(t))}else if(this.type==2){var e=await I.requestPost("wxgame/loserTicket/takeChainCheck",{tid:this.tid}).catch(n=>{});if(e&&e.takeUp==1&&e.bonus>0){Laya.timer.clear(this,this.getQuanReward);var i=new vt;i.id=ve.TYPE_MNT,i.count=e.bonus,_e.instance.hideLoading(),A.intance.openModule(y.RewardGetDialog,[i]),this.onEndQuanList(e)}}}};var hg=class extends Laya.Box{};var{regClass:LM}=Laya,dg=class extends hg{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_transfer.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!!e){this.useType=e[0],this.useType==1?this.btn_transfer.label=m.instance.getUILang("Transfer"):this.useType==2?this.btn_transfer.label=m.instance.getUILang("Combine"):this.useType==3?this.btn_transfer.label=m.instance.getUILang("Rising star"):this.useType==6&&(this.btn_transfer.label=m.instance.getUILang("To Chain")),this.itemVo=e[1];var i=e[2];this.btn_transfer.disabled=i,this.addEvent()}}async toDetail(){if(this.useType)if(this.useType==1)this.itemVo.subType==8?A.intance.openModule(y.UnionTransferView,this.itemVo):this.itemVo.subType==7||this.itemVo.subType==11?A.intance.openModule(y.TicketTransferView,this.itemVo):A.intance.openModule(y.TicketTransferView,this.itemVo);else if(this.useType==2){var e=await I.requestPost("wxgame/equip/composition",{id:this.itemVo.m_iId});e&&e.equipData?(A.intance.openModule(y.RewardGetDialog,[e.equipData]),g.intance.event(f.EVENT_REFRESH_KNAPSACK)):T.instance.notice(m.instance.getLanguage(135))}else this.useType==3?A.intance.openModule(y.EquipStarUpDialog,this.itemVo):this.useType==6&&this.onClaim()}async onClaim(){var e=b.instance.m_serverTime;if(e>this.itemVo.expTime){T.instance.notice(m.instance.getUILang("Expired"));return}var i=1,n=this.itemVo.m_iPk;await Jn.instance.addTicketLog(i,n)&&(console.log("记录逆袭券日志成功"),this.onClaimed())}onClaimed(){this.btn_transfer.disabled=!0}};dg=h([LM("vkadzuILSDikVEPYvNZKcQ")],dg);var fg=class extends Laya.Dialog{};var{regClass:_M}=Laya,yg=class extends fg{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.list_data.visible=!1,this.onInitView(),g.intance.on(f.EVENT_REFRESH_QUAN_STATUS,this,this.onInitView)}async onInitView(){let e=await I.requestPost("wxgame/loserTicket/championPack",{});if(e=e.data,e){let i=b.instance.playerDto.pid;e.sort((n,r)=>{if(n.upStatus===!1&&r.upStatus===!0)return-1;if(n.upStatus===!0&&r.upStatus===!1)return 1;if(n.pid===i&&r.pid!==i)return-1;if(r.pid===i&&n.pid!==i)return 1;let s=Number(n.rank),o=Number(r.rank);return s<o?-1:s>o?1:0}),this.list_data.array=e,this.list_data.visible=!0,!this.list_data.array||this.list_data.array.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1}}onDisable(){g.intance.off(f.EVENT_REFRESH_QUAN_STATUS,this,this.onInitView),g.intance.offAllCaller(this)}};yg=h([_M("OO2lbeVpR06fuUlzarIaOA")],yg);var bg=class extends Laya.Box{};var{regClass:vM}=Laya,gg=class extends bg{addEvent(){this.isAddEvent||(this.btn_claim.on(Laya.Event.CLICK,this,this.onClaim),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.lastDrawDto=e,this.lastDrawDto&&(this.setData(this.lastDrawDto),this.addEvent())}setData(e){let i=e.pid===b.instance.playerDto.pid,n=e.rank+"";if(this.tf_name.text=e.name,this.tf_union.text=m.instance.getMultiLan(e.shortUnionName),this.tf_rank.text=n,this.playerIcon.headSkin=e.head,this.tf_address.text=`${Q.shortenString(e.address,7,4)}`,this.tf_tid.text=e.tid,this.img_flag.skin=D.instance.getCountryIcon(e.country),e.icon){let s=D.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=s,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;this.btn_claim.visible=this.img_bg.visible=i;let r=ve.TYPE_MNT;this.img_coinType.skin=D.instance.getMoneyIcon(r),this.tf_amount.text=Se.formatNumberStr(e.prize,8),e.upStatus?(this.btn_claim.label=m.instance.getUILang("Claimed"),this.btn_claim.disabled=!0):(this.btn_claim.label=m.instance.getUILang("Claim"),this.btn_claim.disabled=!1)}async onClaim(){var e=2,i=this.lastDrawDto.tid;await Jn.instance.addTicketLog(e,i)&&(console.log("兑奖上链成功"),this.onClaimed())}onClaimed(){this.btn_claim.label=m.instance.getUILang("Claimed"),this.btn_claim.disabled=!0}onCopy(){let e=this.lastDrawDto.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};gg=h([vM("IC0pm1gWRlehJmSHpz-Alw")],gg);var Lg=class extends Laya.Scene{};var{regClass:xM}=Laya,_g=class extends Lg{constructor(){super(...arguments);this.currUnionId=1}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onOpened(e){this.currUnionId=e,this.initLuckDrawView()}onEnable(){this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_goFight.on(Laya.Event.CLICK,this,this.goFight),this.btn_help.on(Laya.Event.CLICK,this,this.onHelp),this.btn_lastDraw.on(Laya.Event.CLICK,this,this.onOpenLastDraw)}goFight(){k.instance.arenaType=K.ARENA_TYPE_PROFESSIONAL,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)}onHelp(){var e=m.instance.getLanguage(1799),i=m.instance.getLanguage(1800);A.intance.openModule(y.HelpDialog,[2,e,i])}onOpenLastDraw(){A.intance.openModule(y.LastDrawDialog)}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}async initLuckDrawView(){var e=await I.requestPost("wxgame/loserTicket/bonusInfo",{}),i=e;if(i){this.tf_currPoolAmount.text=i.currentBonus,this.tf_poolAmount.text=m.instance.getUILang("Pool Amount")+": "+i.allBonus;var n=i.localBonus;this.tf_80toCurrent.text=m.instance.getUILang("80% to Current")+": "+n;var r=i.nextBonus;this.tf_20toNext.text=m.instance.getUILang("20% to Next")+": "+r,this.tf_lastPool.text=m.instance.getUILang("From Last Pool")+": "+i.beforeBonus,this.tf_myLcTicket.text=m.instance.getUILang("My L-C ticket")+`: <font color="#ff683a">${i.ticketCount}</font>`,this.tf_drawDate.text=ce.formatTimeStamp(i.openTime,"YY-MT-DD HH:MM")}else T.instance.notice(m.instance.getLanguage(135))}onDisable(){Laya.timer.clearAll(this)}};_g=h([xM("A_npk_biQS6P0BGIhOOH5g")],_g);var vg=class extends Laya.Box{};var{regClass:IM}=Laya,xg=class extends vg{constructor(){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){console.log("OpenScene onEnable："+this.m_strName)}getName(){console.log(this.m_strName)}onDisable(){}};xg=h([IM("sQS5mrqRQLWcBk-SgfBGJw")],xg);var Ig=class extends Laya.Box{};var{regClass:EM}=Laya,Eg=class extends Ig{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}set dataSource(e){super.dataSource=e,this.mailDto=e,this.mailDto&&this.setCurrentOutPut()}async setCurrentOutPut(){this.mailDto&&(this.mailDto.type==2?(this.tf_title.visible=!1,this.fromBox.visible=!0,this.mailDto.fromPlayerName?this.tf_from.text=`From ${this.mailDto.fromPlayerName}`:this.tf_from.text=""):(this.tf_title.visible=!0,this.fromBox.visible=!1,this.tf_title.text=this.mailDto.title),this.tf_time.text=ce.formatDayAndTime(this.mailDto.createTime,".").date,this.img_reward.visible=this.mailDto.reward&&this.mailDto.reward.length>0,this.img_red.visible=(this.mailDto.state==0||this.mailDto.receive==0)&&!this.mailDto.isAnnounce,this.img_box.skin=this.mailDto.state==0?"res/mail/img_mail_state_0.png":"res/mail/img_mail_state_1.png")}};Eg=h([EM("UKoifNR5Qmm4eq8sXy0K3A")],Eg);var wg=class extends Laya.Scene{};var{regClass:wM}=Laya,Tg=class extends wg{constructor(){super(...arguments);this.subBagInfo=null;this.noOpenLock=!1;this.currTab=0;this.type=1;this.items=[];this.hasItem=!1}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP,this.listPanel1.visible=!1}onOpened(e){this.type=e}onEnable(){this.btn_receive.on(Laya.Event.CLICK,this,this.onReceive),this.tf_des.on(Laya.Event.CLICK,this,this.dexclick),this.btn_one_claim.on(Laya.Event.CLICK,this,this.onOneClaim),this.btn_one_deletior.on(Laya.Event.CLICK,this,this.noRead),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1,!1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2,!1]),this.btn_3.on(Laya.Event.CLICK,this,this.onClickTab,[3,!1]),this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy),g.intance.on(f.REFRESH_MAIL_RED,this,this.resetRedData),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.listPanel1.vScrollBarSkin="",this.listPanel1.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1),this.box_show.visible=!1,this.box_2.visible=!1,this.initLuckDrawView();let e=(Laya.stage.height-z.DESIGN_HEIGHT)/2}setTab(e){this.currTab=e;for(let i=1;i<4;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe")}async initLuckDrawView(){let e=await I.requestPost("wxgame/mail/list",{},!0,!0);await b.instance.m_mailData.initData(e.data),this.resetRedData(),!this.destroyed&&(this.type?this.onClickTab(this.type):this.onClickTab(1))}async refreshView(e=!0){let i=await I.requestPost("wxgame/mail/list",{},!0,!0);await b.instance.m_mailData.initData(i.data),this.resetRedData(),e&&this.onClickTab(this.currTab,!0)}refreshMailRed(){let e=b.instance.m_mailData.m_dicTypeList.get(1)}removeHtmlTags(e){return e.replace(/<[^>]+>/g,"")}getAnnounceMail(e){let i=[],n=Laya.LocalStorage.getItem(z.COOKIE_CF_LAN);for(let r=0;r<e.length;r++){let s=e[r],o=n=="zh"?s.title[6]:s.title[1],l=n=="zh"?s.contents[6]:s.contents[1],c=[],u={content:l,createTime:s.createTime,expTime:s.expTime,fromPlayerId:0,pid:1032,receive:0,state:3,title:o,type:1,reward:c,isAnnounce:!0};i.push(u)}return i}async onClickTab(e,i=!1){if(!i){if(this.currTab==e)return;this.setTab(e)}if(e>0){if(this.box_2.visible=!0,this.destroyed)return;var n=await this.getItemByType(e);if(e==3){let r=await I.requestPost("wxgame/sys/noticeAll",{});console.log("announceData============>",r),this.items=this.getAnnounceMail(r.list),n=this.items,this.hasItem=this.items.length>0,this.img_annRed.visible=!1}else n=await this.getItemByType(e);this.listPanel1.array=n,this.listPanel1.visible=!0}this.listPanel1.selectedIndex=-1,this.box_show.visible=!1,this.hasItem?(this.noDataBox.visible=!1,this.listPanel1.selectedIndex=0,this.btn_one_deletior.visible=!0):(this.noDataBox.visible=!0,this.btn_one_deletior.visible=!1),this.currTab==3&&(this.btn_one_deletior.visible=!1)}async getItemByType(e){var i=e;return this.items=[],this.hasItem=!1,this.items=b.instance.m_mailData.getListByType(i),this.hasItem=this.items.length>0,this.items}async onSelectItem(e,i){if(console.log("onSelectItem selectIndex: "+e),this.currMailDto=this.items[e],console.log(this.currMailDto),this.currMailDto){this.tf_title.text=this.currMailDto.title,this.tf_des.text=this.currMailDto.content,this.tf_time.text=ce.formatDayAndTime(this.currMailDto.createTime,".").date;var n=[],r=this.currMailDto.reward;if(r.forEach(o=>{var l=new Pe(o.id);l.newAddCnt=o.count,n.push(l)}),this.list_reward.array=n,this.list_reward.gray=this.currMailDto.receive==1,this.list_reward.length<=0&&this.currTab==3?(this.img_xian.visible=!1,this.panel_des.height=359,this.tf_des.height=this.tf_des.textField.textHeight+10):(this.img_xian.visible=!0,this.panel_des.height=169,this.tf_des.height=this.tf_des.textField.textHeight+10),this.box_show.visible=!0,this.btn_receive.labelSize=28,this.currMailDto.state==0&&!this.noOpenLock){var s=await I.requestPost("wxgame/mail/read",{id:this.currMailDto.id});if(s.errorCode==0){let o=this.listPanel1.selectedIndex;await this.refreshView(),this.listPanel1.selectedIndex=o}}this.noOpenLock=!1,this.currMailDto.type==2?(this.btn_receive.disabled=!1,this.tf_title.visible=!1,this.fromBox.visible=!0,this.panel_des.y=145,this.tf_re.text=`Re ${b.instance.playerDto.name}`,this.tf_re.visible=!0,this.address=this.currMailDto.fromPlayerAddress,this.address?this.tf_from.text=`From ${Q.shortenString(this.address,8,6)}`:this.tf_from.text="",n.length>0?this.currMailDto.receive==0?(this.btn_receive.label="Receive and reply",this.btn_receive.labelSize=24):this.btn_receive.label="Reply":this.btn_receive.label="Reply"):(this.panel_des.y=112,this.tf_re.visible=!1,this.tf_title.visible=!0,this.fromBox.visible=!1,this.currMailDto.reward.length>0&&this.currMailDto.receive==0?(this.btn_receive.label="Receive",this.btn_receive.disabled=!1):(this.btn_receive.disabled=this.currMailDto.state>0,this.btn_receive.label="Mark as read"))}else this.box_show.visible=!1}dexclick(){console.log("click")}async onReceive(){if(this.currMailDto){if(this.currMailDto.type==2){let i={icon:this.currMailDto.fromPlayerIcon,name:this.currMailDto.fromPlayerName,id:this.currMailDto.fromPlayerId};if(this.currMailDto.reward.length>0&&this.currMailDto.receive==0){var e=await I.requestPost("wxgame/mail/receive",{id:this.currMailDto.id});e.errorCode==0?(e.reward&&e.reward.length>0?(A.intance.openModule(y.PrivateChatDialog,i),A.intance.openModule(y.RewardGetDialog,e.reward)):(T.instance.notice(m.instance.getLanguage(2e3)),A.intance.openModule(y.PrivateChatDialog,i)),this.refreshView()):T.instance.notice(m.instance.getLanguage(135))}else A.intance.openModule(y.PrivateChatDialog,i)}else if(this.currMailDto.reward.length>0&&this.currMailDto.receive==0){var e=await I.requestPost("wxgame/mail/receive",{id:this.currMailDto.id});e.errorCode==0?(e.reward&&e.reward.length>0?A.intance.openModule(y.RewardGetDialog,e.reward):T.instance.notice(m.instance.getLanguage(2e3)),this.refreshView()):T.instance.notice(m.instance.getLanguage(135))}}}async onOneClaim(){if(this.currMailDto){var e=await I.requestPost("wxgame/mail/readOneKey",{});e.errorCode==0?(e.reward&&e.reward.length>0?A.intance.openModule(y.RewardGetDialog,e.reward):T.instance.notice(m.instance.getLanguage(2e3)),this.refreshView()):T.instance.notice(m.instance.getLanguage(135))}}async onOneDeletior(){if(this.currMailDto){var e=await I.requestPost("wxgame/mail/delOneKey",{});e.errorCode==0?(T.instance.notice(m.instance.getLanguage(2e3)),this.refreshView()):T.instance.notice(m.instance.getLanguage(135))}}async noRead(){let e=this.listPanel1.array[this.listPanel1.selectedIndex];if(this.noOpenLock=!1,console.log(e),e){let n=this.listPanel1.selectedIndex;var i=await I.requestPost("wxgame/mail/noRead",{id:e.id});this.listPanel1.selectedIndex=n,i.errorCode==0&&(this.listPanel1.selectedIndex==0&&(this.noOpenLock=!0),this.refreshView())}}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}onClickCopy(){this.address&&(doCopy(this.address),T.instance.notice(m.instance.getLanguage(132)))}removeEvent(){this.btn_copy.off(Laya.Event.CLICK,this,this.onClickCopy),g.intance.offAllCaller(this)}onDisable(){this.removeEvent()}resetRedData(){this.img_sysRed.visible=!1,this.img_friendRed.visible=!1,this.img_annRed.visible=!1;let e=b.instance.m_mailData.getRedData();e.system&&(this.img_sysRed.visible=!0),e.friend&&(this.img_friendRed.visible=!0),b.instance.getRedDotById(ne.MAIL_ANNOUNCE_RED)&&(this.img_annRed.visible=!0)}};Tg=h([wM("XwqkX1FmRISr-BmvQwE88Q")],Tg);var Cg=class extends Laya.Box{};var{regClass:TM}=Laya,Sg=class extends Cg{onEnable(){}notice(e){this.speed=2+1;let i=e;this.label_tf.text=e,console.log("notice: ",e),this.image_bg.width=this.label_tf.textField.textWidth+100,this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}update(){this.x-=this.speed}isOffScreen(){return this.x+this.width<0}onDisable(){console.log("barrageSpr recover"),Laya.Pool.recover("barrageSpr",this)}};Sg=h([TM("pMWsUZPhS4iK2yN8OCI4Yw")],Sg);var Dg=class extends Laya.Box{};var{regClass:CM}=Laya,Ag=class extends Dg{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.check_coin.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!e)return;this.addEvent();let i=e;this.check_coin.selected=i[1],this.tf_coin.text=i[2]}onCheck(){this._dataSource[1]=this.check_coin.selected,g.intance.event(f.EVENT_CHECK_ICON_SELECT)}};Ag=h([CM("UTGHsPbQS6C5FohXv8T25Q")],Ag);var kg=class extends Laya.Dialog{};var{regClass:SM}=Laya,Bg=class extends kg{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.isInit=!1;this.numIndex=0;this.coinType=3001;this.nodeId=-1;this.passMoneyNum=0;this.inApply=-1;this.dateOpenState=0;this.startDate={year:0,month:0,day:0,hour:0,minutes:0};this.beforeYearIndex=null;this.beforeMonthIndex=null;this.beforeDayIndex=null;this.beforeHourIndex=null;this.beforeMinuteIndex=null;this.plChoose=[];this.groupWars=[];this.teamDatas=[];this.arenaLvs=[];this.arenaLvDatas=[];this.coinIds=[];this.no=0}async setOpenData(e){if(e){if(this.matchType=e[0],this.isCreate=e[1],this.isBooking=e[2],this.isBookingMust=e[4],this.arenaType=k.instance.arenaType,this.matchType==K.ACTION_CREATE)this.arenaLv=e[3];else if(this.matchType==K.ACTION_CREATE_BOOKING)this.arenaLv=1;else if(this.matchType==K.ACTION_JOIN_BOOKING){var i=e[3];let s;this.roomDto=i[0],this.inApply=i[1];var n=_.intance.m_dicArenaDic.get(this.roomDto.arenaId);this.arenaLv=n.lv,this.arenaType=n.type}else if(this.matchType==K.ACTION_JOIN){var r=e[3];let s;this.roomDto=r;var n=_.intance.m_dicArenaDic.get(this.roomDto.arenaId);this.arenaLv=n.lv,this.arenaType=n.type}this.initContainer()}}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onClose),g.intance.on(f.EVENT_Close_CreateRoom,this,this.onClose),this.btn_create.on(Laya.Event.CLICK,this,this.onCreate),this.input_customName.on(Laya.Event.INPUT,this,this.onInputChange),this.yearList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.yearList,"year"]),this.monthList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.monthList,"month"]),this.dayList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.dayList,"day"]),this.hourList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.hourList,"hour"]),this.minutesList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.minutesList,"minutes"]),this.yearList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.yearList,"year",this.img_date_pad]),this.monthList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.monthList,"month",this.img_date_pad]),this.dayList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.dayList,"day",this.img_date_pad]),this.hourList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.hourList,"hour",this.img_date_pad]),this.minutesList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.minutesList,"minutes",this.img_date_pad]),this.btn_view.on(Laya.Event.CLICK,this,this.onView),this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite),this.box_date.on(Laya.Event.CLICK,this,this.onOpenDate,[this.img_date_pad,this.box_date]),this.yearList.scrollBar.rollRatio=0,this.monthList.scrollBar.rollRatio=0,this.dayList.scrollBar.rollRatio=0,this.hourList.scrollBar.rollRatio=0,this.minutesList.scrollBar.rollRatio=0}onView(){var e=this.roomDto.roomId,i=this.roomDto.teamDto;A.intance.openModule(y.MyTeamDialog,[e,i])}onInvite(){var e=this.roomDto.roomId,i=this.roomDto.teamDto.teamId;A.intance.openModule(y.MyFriendDialog,[e,i])}onClose(){this.close()}onDisable(){g.intance.off(f.EVENT_Close_CreateRoom,this,this.onClose),this.yearList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.monthList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.dayList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.hourList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.minutesList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.yearList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.monthList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.dayList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.hourList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.minutesList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.box_date.on(Laya.Event.CLICK,this,this.onOpenDate,[this.img_date_pad,this.box_date])}initContainer(){if(this.arenaType==K.ARENA_TYPE_TEAM?this.box_teamContainer.visible=!0:(this.box_teamContainer.visible=!1,this.box_bottomContainer.y-=this.box_teamContainer.height-10),this.isCreate?(this.btn_create.label=m.instance.getUILang("Create"),this.isBooking==!1):(this.inApply==1?(this.btn_create.label=m.instance.getLanguage(1556),this.btn_create.disabled=!0):(this.btn_create.label=m.instance.getUILang("Join"),this.btn_create.disabled=!1),this.box_node.disabled=!0,this.arenaLvCombo.disabled=!0,this.teamCombo.disabled=!0,this.coinCombo.disabled=!0,this.input_customName.disabled=!0,this.check_anonymous.disabled=!0,this.check_closeLive.disabled=!0),this.roomDto){let n=this.roomDto.leader;if(n){this.tf_roleName.text=n.name;let r=n.icon;this.playerIcon.headSkin=r,n.country?this.img_country.skin=D.instance.getCountryIcon(n.country+""):this.img_country.skin=null}}else{let n=b.instance.playerDto;if(!n)return;this.tf_roleName.text=n.name;let r=n.icon;this.playerIcon.headSkin=r,this.img_country.skin=D.instance.getCountryIcon(n.country+"")}var e=_.intance.m_dicArenaTypes.get(this.arenaType),i=e.passwordSwitch==1;i?this.box_pwd.disabled=!1:this.box_pwd.disabled=!0,this.initNode(),this.initTime(),this.initPlayerNumCombo(e),this.initTeamCombo(e),this.initArenaLvCombo(e),this.isCreate&&(this.arenaType==K.ARENA_TYPE_PROFESSIONAL||this.arenaType==K.ARENA_TYPE_TEAM)||this.initCoinCombo(e),this.initCustomName(),this.initAnonymous(),this.initCloseLive()}initAnonymous(){this.roomDto?this.check_anonymous.selected=this.roomDto.anonymous==1:this.check_anonymous.selected=!0}initCloseLive(){this.roomDto?this.check_closeLive.selected=this.roomDto.closeLive==1:this.check_closeLive.selected=!0}initCustomName(){let e=_.intance.getGeneralValueById(14);this.tf_nameGold.text=e[1],this.img_nameGold.skin=D.instance.getMoneyIcon(e[0]),console.log(e)}initPlayerNumCombo(e){if(this.groupId)this.box_playerNum_select.visible=!1,this.box_playerNum.visible=!1;else if(this.isCreate?this.plChoose=e.plChoose:this.plChoose=[],this.plChoose.length>0){var i=[];this.plChoose.forEach(s=>{i.push(s)}),console.log("comboData: ",i),this.list_playerNum.selectHandler=new Laya.Handler(this,this.onPlayerNumSelected),this.list_playerNum.renderHandler=Laya.Handler.create(this,this.onPlayerNumRender,null,!1),this.list_playerNum.dataSource=i;let n=-1,r=0;i.length>0&&(n=0),this.list_playerNum.selectedIndex=n,this.box_playerNum_select.visible=!0,this.box_playerNum.visible=!1}else this.box_playerNum_select.visible=!1,this.box_playerNum.visible=!0}onShowPlayNum(){this.groupId?(this.box_playerNum_select.visible=!1,this.box_playerNum.visible=!1):this.plChoose.length>0?(this.box_playerNum_select.visible=!0,this.box_playerNum.visible=!1):(this.box_playerNum_select.visible=!1,this.box_playerNum.visible=!0)}onPlayerNumRender(e,i){e.onChange(this.list_playerNum.selectedIndex==i)}onPlayerNumSelected(e){if(e!=-1){var i=this.plChoose[e];console.log("您选中了 _plChooseItem: "+i),this.numIndex=e,this.isInit&&this.setRoomInfo()}}initTeamCombo(e){let i=_.intance.m_dicGroupWar;this.groupWars=i.values,this.teamDatas=[],this.groupWars.forEach(o=>{if(this.isCreate){if(!this.isBooking&&!this.isBookingMust){if(o.groupPer>0)return}else if(e.arenaType==K.ARENA_TYPE_TEAM){if(o.groupPer==0)return}else if(o.groupPer>0)return}this.teamDatas.push([o,m.instance.getLanguage(o.name)])}),console.log("this.teamDatas: ",this.teamDatas),this.teamCombo.selectHandler=new Laya.Handler(this,this.onSelectedTeam),this.teamCombo.dataSource=this.teamDatas;let n=-1,r=0;if(this.teamDatas.length>0&&(n=0),this.box_myTeam_btn.visible=!1,this.tf_myTeamNum.text="N/A",this.roomDto){var s=this.roomDto.teamDto;s&&(this.tf_myTeamNum.text=`<font color="#fec623" >${s.curNum}</font> / ${s.totalNum}`,this.box_myTeam_btn.visible=!0,this.btn_invite.disabled=s.curNum>=s.totalNum);for(let o of this.teamDatas){if(o[0].id==this.roomDto.groupId){n=r;break}r++}}this.teamCombo.selectedIndex=n}onSelectedTeam(e){e!=-1&&(this.groupId=this.teamDatas[e][0].id,console.log("您选中了 groupWarId"+this.groupId),this.isInit&&this.setRoomInfo())}initArenaLvCombo(e){this.arenaLvs=e.arenaLvs,this.arenaLvDatas=[],this.arenaLvs.forEach(r=>{this.isBooking||this.isBookingMust?r!=4&&this.arenaLvDatas.push([r,m.instance.getUILang("arenaLv_"+r)]):(r<4||r==5)&&this.arenaLvDatas.push([r,m.instance.getUILang("arenaLv_"+r)])}),console.log("this.arenaLvDatas: ",this.arenaLvDatas),this.arenaLvCombo.selectHandler=new Laya.Handler(this,this.onSelectedArenaLv),this.arenaLvCombo.dataSource=this.arenaLvDatas;let i=-1,n=0;if(this.arenaLvDatas.length>0&&(i=0),this.roomDto)for(let r of this.arenaLvDatas){if(r[0]==this.arenaLv){i=n;break}n++}else for(let r of this.arenaLvDatas){if(r[0]==this.arenaLv){i=n;break}n++}this.arenaLvCombo.selectedIndex=i}onSelectedArenaLv(e){if(e!=-1)if(this.arenaLv=this.arenaLvDatas[e][0],console.log("您选中了 arenaLv"+this.arenaLv),this.isCreate&&(this.arenaType==K.ARENA_TYPE_PROFESSIONAL||this.arenaType==K.ARENA_TYPE_TEAM)){var i=_.intance.m_dicArenaTypes.get(this.arenaType);this.initCoinCombo(i,!0)}else this.isInit&&this.setRoomInfo()}initCoinCombo(e,i=!1){this.arenaType==3&&(this.coinCombo.disabled=!0),this.coinIds=[];var n=e.coinTypes,r=[];n.forEach(l=>{if(i&&l==3022){if(this.arenaLv==1){var c=_.intance.m_dicItems.get(l);r.push(m.instance.getLanguage(c.name)),this.coinIds.push(l)}}else{var c=_.intance.m_dicItems.get(l);r.push(m.instance.getLanguage(c.name)),this.coinIds.push(l)}}),this.coinCombo.selectHandler=new Laya.Handler(this,this.onSelectCoin),this.coinCombo.dataSource=r;let s=-1,o=0;if(r.length>0&&(s=0),this.roomDto)for(let l of this.coinIds){if(l==this.roomDto.coinType){s=o;break}o++}this.coinCombo.selectedIndex=s}onSelectCoin(e){e!=-1&&(this.coinType=this.coinIds[e],console.log("您选中了 coinType"+this.coinType),this.isInit||(this.isInit=!0),this.setRoomInfo())}setRoomInfo(){var e=this.arenaType;e==K.ARENA_TYPE_TRAINING?this.arenaItem=_.intance.getSheetDataByMultiKey(_.intance.m_dicArenaNumMulDic,[e,this.arenaLv,this.coinType]):this.arenaItem=_.intance.getSheetDataByMultiKey(_.intance.m_dicArenaMulDic,[e,this.arenaLv,this.coinType]);var i=m.instance.getLanguage(this.arenaItem.name);this.isCreate?this.isBooking||this.isBookingMust?this.arenaType==K.ARENA_TYPE_TEAM?i=m.instance.getLanguage(1711,i):i=m.instance.getLanguage(1557,i):i=m.instance.getLanguage(1558,i):this.isBooking||this.isBookingMust?this.arenaType==K.ARENA_TYPE_TEAM?this.inApply==1?i=m.instance.getLanguage(1712,i):i=m.instance.getLanguage(1713,i):this.inApply==1?i=m.instance.getLanguage(1559,i):i=m.instance.getLanguage(1560,i):i=m.instance.getLanguage(1561,i),this.tf_arenaName.text=i,this.onShowPlayNum(),this.onGetRoomNo()}async onGetRoomNo(){if(this.isCreate){this.btn_create.disabled=!0;let e=this,i=await I.requestPost("wxgame/room/getRoomNameSequence",{arenaId:this.arenaItem.id});if(i){this.no=i.no,this.onSetRoomName(),this.passMoneyNum=i.createNum;let n=_.intance.getGeneralValueById(28),r,s=n[1][0];this.passMoneyNum<=s-2?r=n[0]:r=n[1],this.tf_namePassGold.text=r[2],this.img_namePassGold.skin=D.instance.getMoneyIcon(r[1])}else T.instance.notice(m.instance.getLanguage(135))}else this.tf_min.text=this.roomDto.minCount+"",this.tf_max.text=this.roomDto.maxCount+"",this.tf_roomName.text=B.instance.setRoomAnonymousLabel(this.roomDto.roomName,this.roomDto.anonymous)}onSetRoomName(){if(!this.destroyed){var e=_.intance.m_dicItems.get(this.coinType),i=m.instance.getLanguage(e.name),n="";this.arenaType==K.ARENA_TYPE_PROFESSIONAL?n="PRO."+i:this.arenaType==K.ARENA_TYPE_AIRDROP?n="AD."+i:this.arenaType==K.ARENA_TYPE_TRAINING?n="TRG":this.arenaType==K.ARENA_TYPE_TEAM&&(n="TEAM."+i),n=n+"."+this.no,this.tf_roomName.text=n,this.inApply!=1&&(this.btn_create.disabled=!1)}}onInputChange(){Laya.timer.frameOnce(1,this,this.checkAndTruncate)}checkAndTruncate(){let e=this.input_customName.text,i=0,n="";for(let r=0;r<e.length;r++){let s=e.charAt(r),o=this.isDoubleByte(s)?2:1;if(i+o<=15)n+=s,i+=o;else break}e!==n&&(this.input_customName.text=n,this.input_customName.focus=!0,this.input_customName.editable=!0)}isDoubleByte(e){return e.charCodeAt(0)>255}initTime(){this.box_countdown.visible=!1,this.box_date.disabled=!0,this.matchType==K.ACTION_CREATE?(this.tf_start.text="N/A",this.tf_hour.text=""):this.isCreate?this.initListTime():this.roomDto.startTime>0?(this.tf_start.text=ce.formatTimeStamps(this.roomDto.startTime,"YY-MT-DD"),this.tf_hour.text=ce.formatTimeStamps(this.roomDto.startTime,"HH:MM"),this.box_countdown.visible=!0,this.onStartCountDown()):(this.tf_start.text="N/A",this.tf_hour.text="")}onStartCountDown(){var e=this.roomDto.startTime-this.roomDto.curTime;this.startCoolDownTime=Math.round(e/1e3),this.startCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):(Laya.timer.clear(this,this.onSetCoolTime),this.close())}onSetCoolTime(){this.startCoolDownTime>=0?(this.tf_time.text=ce.formatWithDay(this.startCoolDownTime,":",!0),this.startCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),this.tf_time.text="00:00"),console.log("onSetCoolTime ",this.startCoolDownTime,this.tf_time.text)}initNode(){this.list_node.selectHandler=new Laya.Handler(this,this.handleSelectNode),this.createNodeList(),this.box_node.on(Laya.Event.CLICK,this,this.onOpenNode),this.list_node.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_node.mouseHandler=Laya.Handler.create(this,this.onNodeItemMouse,null,!1),this.list_node.renderHandler=Laya.Handler.create(this,this.onNodeItemRender,null,!1),this.list_node.scrollBar&&this.list_node.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}onNodeItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_node.selectedIndex=i,this.onHideNode())}onListDown(e){e.stopPropagation()}onScrollBarDown(e){e.stopPropagation()}onNodeItemRender(e,i){e.onChange(this.list_node.selectedIndex==i)}onOpenNode(){this.img_node_pad.visible==!1&&(this.img_node_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideNode))}onHideNode(){this.img_node_pad.visible=!1,this.img_date_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideNode),this.img_bg.off(Laya.Event.MOUSE_DOWN,this,this.onHideNode)}handleSelectNode(e){if(console.log("handleSelectNode: "+e),e!=-1){let i=this.list_node.selectedItem;this.nodeId=i.id,this.img_node.skin=D.instance.getNodeIcon(i.area),this.tf_node.text=m.instance.getLanguage(i.name),this.nodeDelaySign.dataSource=i}}createNodeList(){let e=_.intance.m_dicNodes;this.list_node.array=e.values,this.list_node.visible=!0;let i=-1,n=0;if(e.values.length>0&&(i=0),this.roomDto)for(let r of e.values){if(r.id==this.roomDto.nodeId){i=n;break}n++}this.list_node.selectedIndex=i}async onCreate(){let e=this.input_customName.text;if(this.isCreate){if(e!=""&&b.instance.getConsumeValue(ve.TYPE_GOLD)<Number(this.tf_nameGold.text)){T.instance.notice(m.instance.getLanguage(1362));return}if(this.arenaType!=K.ARENA_TYPE_TEAM&&this.numIndex==-1){T.instance.notice(m.instance.getLanguage(1593));return}}let i=this.tf_roomName.text;if(!i||i==""){T.instance.notice(m.instance.getLanguage(1361));return}let n=this.input_pwd.text,r=_.intance.getGeneralValueById(28),s,o=r[1][0];this.passMoneyNum<=o-1?s=r[0]:s=r[1];let l=s[1];if(n&&b.instance.getConsumeValue(s[1])<s[2]){T.instance.notice(m.instance.getLanguage(1639));return}var c=this.arenaItem.id,u=new so;if(u.arenaId=c,u.nodeId=this.nodeId,u.roomName=i,u.customName=e,u.isBookingMust=this.isBookingMust,u.numIndex=this.numIndex,!this.isCreate&&(this.roomDto&&this.roomDto.roomId&&(u.roomId=this.roomDto.roomId,u.teamDto=this.roomDto.teamDto,u.groupId=this.roomDto.groupId),!u.roomId)){T.instance.notice(m.instance.getLanguage(135));return}if(this.matchType==K.ACTION_CREATE_BOOKING){var p=ce.getTimestamp(this.startDate.year,this.startDate.month,this.startDate.day,this.startDate.hour,this.startDate.minutes),d=_.intance.getGeneralValueById(23),L=new Date().getTime()+d*60*1e3;if(p<L){T.instance.notice(m.instance.getLanguage(1562,d));return}u.startTime=p,u.groupId=this.groupId}u.anonymous=this.check_anonymous.selected?1:0,u.closeLive=this.check_closeLive.selected?1:0,De.instance.onCreateAndJoinWithPwd(this.matchType,u,n)}onListStop(e,i){let n=this.startDate,r=Math.floor(e.startIndex),s=r+1,o=this.calculateVisibleHeight(e,r),l=this.calculateVisibleHeight(e,s),c=o+14>=l?r:s;(i==="month"||i==="day"||i==="hour")&&(c=Math.min(c,e.array.length-5)),e.scrollTo(c),e.selectedIndex=c;let u=e.getCell(c+1);u.tf_date.color="#ffffff";let p=u.tf_date.text;if(p&&u){switch(i){case"year":this.onYearChange(c+1),n.year=Number(p);break;case"month":this.onMonthChange(c+1),n.month=Number(p);break;case"day":n.day=Number(p);break;case"hour":n.hour=Number(p);break;case"minutes":n.minutes=Number(p);break}this.refreshStartTime()}}calculateVisibleHeight(e,i){let n=e.getCell(i);return Math.min(n.y+n.height,e.scrollBar.value+e.height)-Math.max(n.y,e.scrollBar.value)}onYearChange(e){!this.yearList.array||this.monthList.selectedIndex<0||this.updateDayList(parseInt(this.yearList.array[e]),parseInt(this.monthList.array[this.monthList.selectedIndex]))}onMonthChange(e){!this.yearList.array||this.monthList.selectedIndex<0||this.updateDayList(parseInt(this.yearList.array[this.yearList.selectedIndex]),parseInt(this.monthList.array[e]))}updateDayList(e,i){let n=[];for(let r=1;r<=Q.getDaysInMonth(e,i);r++)n.push(r.toString());for(let r=1;r<=3;r++)n.push("");n=["",...n],this.dayList.array=n}refreshStartTime(){let e=this.startDate.month>=10?this.startDate.month:`0${this.startDate.month}`,i=this.startDate.day>=10?this.startDate.day:`0${this.startDate.day}`;this.tf_start.text=`${this.startDate.year}-${e}-${i}`;let n=this.startDate.minutes,r=n>=10?`${n}`:`0${n}`;this.tf_hour.text=`${this.startDate.hour}:${r}`}initListTime(){this.box_date.disabled=!1;var e=_.intance.getGeneralValueById(23),i=new Date().getTime()+e*60*1e3;let n=new Date(i);this.startDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),hour:n.getHours(),minutes:n.getMinutes()},this.refreshStartTime()}onScrollBarChange(e,i,n){if(!n.visible)return;let r=this.startDate;console.log("startDate",this.startDate);let s=Math.floor(e.startIndex),o=s+1,l=this.calculateVisibleHeight(e,s),c=this.calculateVisibleHeight(e,o),u=l+14>=c?s:o,p=e.getCell(u+1);p.tf_date.color="#ffffff";let d,L;switch(i){case"year":L=this.beforeYearIndex,this.beforeYearIndex=u+1;break;case"month":L=this.beforeMonthIndex,this.beforeMonthIndex=u+1;break;case"day":L=this.beforeDayIndex,this.beforeDayIndex=u+1;break;case"hour":L=this.beforeHourIndex,this.beforeHourIndex=u+1;break;case"minutes":L=this.beforeMinuteIndex,this.beforeMinuteIndex=u+1;break}L!==u+1&&(d=e.getCell(L),this.resetListStyle(d));let v=p.tf_date.text;if(p.tf_date.color="#ffffff",v&&p){switch(i){case"year":this.onYearChange(u+1),r.year=Number(v);break;case"month":this.onMonthChange(u+1),r.month=Number(v);break;case"day":r.day=Number(v);break;case"hour":r.hour=Number(v);break;case"minutes":r.minutes=Number(v);break}this.refreshStartTime()}}resetListStyle(e){e&&(e.tf_date.color="#357cc0")}onOpenDate(e,i){this.resetColors(this.yearList,this.monthList,this.dayList,this.hourList,this.minutesList),e.visible==!1?(this.dateOpenState=1,this.getDateInfo(),e.visible=!0,this.img_bg.on(Laya.Event.CLICK,this,this.onHideNode)):(e.visible=!1,this.dateOpenState=0)}resetColors(e,i,n,r,s){let o=[e,i,n,r,s];for(let u of o)for(var l=0;l<u.cells.length;l++){var c=u.cells[l];c.tf_date.color="#357cc0"}}getDateInfo(){this.renderDateInfo(this.startDate,this.yearList,this.monthList,this.dayList,this.hourList,this.minutesList)}renderDateInfo(e,i,n,r,s,o){let l=e;this.fillList(i,l.year,2e3,2050),this.fillList(n,l.month,1,12);let c=new Date().getFullYear(),u=new Date().getMonth()+1,p=Q.getDaysInMonth(c,u);this.fillList(r,l.day,1,p),this.fillList(s,l.hour,0,23),this.fillList(o,l.minutes,0,59)}fillList(e,i,n,r){let s=[],o=this.yearList,l=this.monthList,c=this.dayList,u=this.hourList,p=this.minutesList;for(let L=n;L<=r;L++)s.push(L.toString());for(let L=1;L<=3;L++)s.push("");s=["",...s],e.array=s;let d=s.indexOf(`${i}`);if(d>-1){e.scrollTo(d-1),e.selectedIndex=d-1;let L=e.getCell(d);L.tf_date.color="#ffffff",e==o?this.beforeYearIndex=d:e==l?this.beforeMonthIndex=d:e==c?this.beforeDayIndex=d:e==u?this.beforeHourIndex=d:e==p&&(this.beforeMinuteIndex=d)}}};Bg=h([SM("_y9qJpZZRk2p26xdgYPRyA")],Bg);var Mg=class extends Laya.Box{};var{regClass:DM}=Laya,Rg=class extends Mg{constructor(){super(...arguments);this.hasOpened=!1}onEnable(){this.on(Laya.Event.CLICK,this,this.openMaxView),g.intance.on(f.EVENT_UPDATE_MATCH_ROOM,this,this.onUpdateMatchRoom)}onUpdateMatchRoom(){this.tf_coolTime.text=ce.format(B.instance.coolDownTime,":",!1),B.instance.coolDownTime==5&&!this.hasOpened&&(console.log("onUpdateMatchRoom "+B.instance.coolDownTime),this.openMaxView(),this.hasOpened=!0)}openMaxView(){De.instance.openMaxView()}onDisable(){g.intance.off(f.EVENT_UPDATE_MATCH_ROOM,this,this.onUpdateMatchRoom)}};Rg=h([DM("7hINWNN3S8SmWSveWJQJSw")],Rg);var Pg=class{constructor(t){this.normalBarrages=[];this.specialBarrages=[];this.normalBarrageQueue=[];this.specialBarrageQueue=[];this.barrageHeight=44;this.lineNormalBarrageDic=new le;this.lineSpecialBarrageDic=new le;this.screenWidth=t.width,this.screenHeight=t.height,this.barrageContainer=t}addBarrage(t){let e=Laya.Pool.getItemByCreateFun("barrageSpr",De.instance.barrageSprPrefab.create,De.instance.barrageSprPrefab);e.notice(t),e.x=this.screenWidth,this.normalBarrageQueue.push(e)}addSpecialBarrage(t){this.specialBarrageQueue.push(t)}update(){this.updateNormalBarrages(),this.updateSpecialBarrages()}updateNormalBarrages(){for(let e=this.normalBarrages.length-1;e>=0;e--){let i=this.normalBarrages[e];if(i.update(),i.isOffScreen()){this.normalBarrages.splice(e,1);var t=this.lineNormalBarrageDic.get(i.rowIndex);t&&t==i&&this.lineNormalBarrageDic.remove(i.rowIndex),this.barrageContainer.removeChild(i)}}for(;this.normalBarrageQueue.length>0;){let e=this.findAvailableYPositionForNormalBarrage();if(e!==-1){let i=this.normalBarrageQueue.shift();i.y=e*this.barrageHeight,this.normalBarrages.push(i),i.rowIndex=e,this.lineNormalBarrageDic.set(e,i),this.barrageContainer.addChild(i)}else break}}updateSpecialBarrages(){for(let e=this.specialBarrages.length-1;e>=0;e--){let i=this.specialBarrages[e];if(i.update(),i.isFinished()){this.specialBarrages.splice(e,1);var t=this.lineSpecialBarrageDic.get(i.rowIndex);t&&t==i&&this.lineSpecialBarrageDic.remove(i.rowIndex),this.barrageContainer.removeChild(i)}}for(;this.specialBarrageQueue.length>0;){let e=this.findAvailableYPositionForSpecialBarrage();if(e!==-1){let i=this.specialBarrageQueue.shift(),n=this.screenHeight-100-e*this.barrageHeight,r=Laya.Pool.getItemByCreateFun("specialBarrageSpr",De.instance.specialBarrageSprPrefab.create,De.instance.specialBarrageSprPrefab);r.notice(i),r.x=(this.screenWidth-r.width)/2,r.y=n,this.specialBarrages.push(r),r.rowIndex=e,this.lineSpecialBarrageDic.set(e,r),this.barrageContainer.addChild(r)}else break}}findAvailableYPositionForNormalBarrage(){let t=this.screenHeight/2,e=Math.floor(t/this.barrageHeight);for(let n=0;n<e;n++){var i=this.lineNormalBarrageDic.get(n);if(!i||i.x+i.width+10<this.screenWidth)return i?console.log("findAvailableYPositionForNormalBarrage: ",n,i.x,i.width,this.screenWidth,this.screenWidth-(i.x+i.width+10)):console.log("findAvailableYPositionForNormalBarrage: ",n,this.screenWidth),n}return-1}findAvailableYPositionForSpecialBarrage(){for(let i=0;i<5;i++){var e=this.lineSpecialBarrageDic.get(i);if(!e)return console.log("findAvailableYPositionForSpecialBarrage: ",i),i}return-1}};var Ng=class extends Laya.Dialog{};var{regClass:AM}=Laya,Og=class extends Ng{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.isMax=!1;this.groupPer=0;this.lastState=-1;this.isSetRepeat=!1;this.currTab=0}onEnable(){g.intance.on(f.EVENT_CHANGE_HEAD,this,this.onColorSelect),g.intance.on(f.EVENT_CLICK_HERO,this,this.onClickHero),this.btn_switch.on(Laya.Event.CLICK,this,this.onSwitchClick),this.btn_emoji.on(Laya.Event.CLICK,this,this.onEmojiClick),this.btn_color.on(Laya.Event.CLICK,this,this.onColorClick),this.btn_send.on(Laya.Event.CLICK,this,this.onSendClick),this.tf_launch.on(Laya.Event.CLICK,this,this.onShowBarrageBtn),this.img_bg.on(Laya.Event.CLICK,this,this.onHideMenu),this.list_wait_hero.on(Laya.Event.CLICK,this,this.onHideMenu),this.list_team.on(Laya.Event.CLICK,this,this.onHideMenu),this.input_chat.on(Laya.Event.ENTER,this,this.onSendClick),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.btn_3.on(Laya.Event.CLICK,this,this.onClickTab,[3]),this.btn_help.on(Laya.Event.CLICK,this,this.onHelp),this.btn_showSignUp.on(Laya.Event.CLICK,this,this.onShowSignUp),this.btn_min.on(Laya.Event.CLICK,this,this.onMinClick),this.btn_exit.on(Laya.Event.CLICK,this,this.onExitClick),g.intance.event(f.EVENT_ENTER_MATCH_ROOM,!1),g.intance.on(f.EVENT_UPDATE_MATCH_ROOM,this,this.onUpdateMatchRoom),I.stopHeartInRoom=!0,this.initContainer(),Ne.instance.sendCustumEvent(40)}setOpenData(e){e&&(this.isMax=e)}initContainer(){this.list_wait_hero.visible=!0,this.onSetStateTest();var e=B.instance.roomDto,i=B.instance.roomDto.groupId,n=_.intance.m_dicGroupWar.get(i);this.groupPer=n.groupPer;var r=e.roomId,s=e.arenaId,o=e.coinType,l=e.state,c=B.instance.roomWatcher;c&&(this.btn_min.visible=!1,this.btn_showSignUp.visible=!1),console.log("initContainer",i,this.groupPer,c),this.groupPer>0&&!c&&(this.btn_exit.visible=!1),this.tf_live.visible=c;var u=_.intance.m_dicArenaDic.get(s);B.instance.currArenaItem=u,this.tf_arenaName.text=m.instance.getLanguage(u.name),this.arenaNo.text=r+"",De.instance.init(),this.tf_roomName.text=B.instance.setRoomAnonymousLabel(B.instance.roomDto.roomName,B.instance.roomDto.anonymous);var p=B.instance.roomDto.nodeId;if(p){var d=_.intance.m_dicNodes.get(p);this.nodeDelaySign.dataSource=d,this.nodeDelaySign.startTest()}if(this.updateExitCD(),(l==K.STATE_WAIT||l==K.STATE_SIGNUP)&&this.initChat(),this.initCumulative(),l==K.STATE_START){this.list_wait_hero.visible=!1,this.list_team.visible=!1,this.box_barrage_btn.visible=!1;var L=m.instance.getLanguage(1525);this.tf_coolTime.text=L}}updateExitCD(){if(B.instance.roomWatcher){this.btn_exit.disabled=!1,this.tf_exit.text=m.instance.getUILang("Exit");return}var e=Math.round(B.instance.roomDto.joinCd/1e3),i=e-B.instance.currArenaItem.notQuit;i>B.instance.currArenaItem.exitTime&&(i=B.instance.currArenaItem.exitTime),B.instance.limitCd=i,B.instance.limitCd>0?(this.onSetExitTime(),Laya.timer.loop(1e3,this,this.onSetExitTime)):(Laya.timer.clear(this,this.onSetExitTime),this.btn_exit.disabled=!0,this.tf_exit.text="Exit")}onSetExitTime(){B.instance.limitCd>=0?(this.tf_exit.text=m.instance.getUILang("Exit")+" ("+B.instance.limitCd+"s)",B.instance.limitCd--,this.btn_exit.disabled=!1):(Laya.timer.clear(this,this.onSetExitTime),this.btn_exit.disabled=!0,this.tf_exit.text="Exit")}onMinClick(){var e=B.instance.roomDto.state;e==K.STATE_WAIT?B.instance.coolDownTime>5&&(this.close(),De.instance.openMinView()):console.log("不是房间等待状态，不能最小化")}async onExitClick(){var e=B.instance.roomWatcher,i=B.instance.roomDto.state;e||i==K.STATE_WAIT?await I.requestPost("wxgame/room/leave",{roomId:B.instance.roomDto.roomId})?De.instance.close():T.instance.notice(m.instance.getLanguage(135)):console.log("不是房间等待状态，不能退出")}onUpdateMatchRoom(){this.onSetStateTest();var e=B.instance.roomDto.state,i=B.instance.roomDto.groupData,n=this.groupPer>0;this.lastState!=e&&(this.lastState=e,e==K.STATE_WAIT?(this.list_wait_hero.visible=!n,this.list_team.visible=n,this.box_barrage.visible=!0,this.box_barrage_btn.visible=!0,this.box_state_signUp.visible=!1,this.box_state_group.visible=!1):e==K.STATE_SIGNUP?B.instance.currArenaItem.type==K.ARENA_TYPE_PROFESSIONAL||B.instance.currArenaItem.type==K.ARENA_TYPE_TEAM?(this.list_wait_hero.visible=!n,this.list_team.visible=n,this.box_barrage.visible=!0,this.box_barrage_btn.visible=!0,this.box_state_signUp.visible=!0,this.box_state_group.visible=!1,this.onShowSignUp(null)):(this.list_wait_hero.visible=!n,this.list_team.visible=n,this.box_barrage.visible=!0,this.box_barrage_btn.visible=!0,this.box_state_signUp.visible=!1,this.box_state_group.visible=!1):e==K.STATE_GROUPED&&(i&&i.length>0?(this.list_wait_hero.visible=!1,this.list_team.visible=!1,this.box_barrage.visible=!1,this.box_barrage_btn.visible=!1,this.box_state_signUp.visible=!1,this.box_state_group.visible=!0,this.clearChat()):(this.list_wait_hero.visible=!n,this.list_team.visible=n,this.box_barrage.visible=!0,this.box_barrage_btn.visible=!0,this.box_state_signUp.visible=!1,this.box_state_group.visible=!1)));var r=B.instance.roomDto.members.length;this.tf_people.text=r+"";var s=B.instance.roomDto.maxCount;if(B.instance.playerJoinDic==null&&(B.instance.playerJoinDic=new le),this.groupPer>0)this.onGetRoomGroupList(e);else{this.heros=[];for(var o=0;o<s;o++){var l=B.instance.roomDto.members[o];l?(this.heros.push(l),B.instance.playerJoinDic.set(l.id,l)):this.heros.push(null)}(e==K.STATE_WAIT||e==K.STATE_SIGNUP)&&(this.list_wait_hero.array=this.heros)}var c="";if(e==K.STATE_GROUPED?i&&i.length>0?c=m.instance.getLanguage(1376):c=m.instance.getLanguage(1525):e==K.STATE_SIGNUP?B.instance.currArenaItem.type==K.ARENA_TYPE_PROFESSIONAL||B.instance.currArenaItem.type==K.ARENA_TYPE_TEAM?c=m.instance.getLanguage(1089):c=m.instance.getLanguage(1525):c=m.instance.getLanguage(1089),console.log("MatchModel.instance.coolDownTime: "+B.instance.coolDownTime),this.tf_coolTime.text=c+" <font color='#ff5388'>"+ce.format(B.instance.coolDownTime,":",!1)+"</font>",e==K.STATE_WAIT?B.instance.coolDownTime>5?this.btn_min.disabled=!1:this.btn_min.disabled=!0:this.btn_min.disabled=!0,e==K.STATE_WAIT)this.groupPer>0?this.list_team.visible=!0:this.list_wait_hero.visible=!0;else if(e==K.STATE_SIGNUP)this.groupPer>0?this.list_team.visible=!0:this.list_wait_hero.visible=!0,(B.instance.currArenaItem.type==K.ARENA_TYPE_PROFESSIONAL||B.instance.currArenaItem.type==K.ARENA_TYPE_TEAM)&&(this.tf_cumulative.text=m.instance.getLanguage(1374,B.instance.roomDto.groupApplyList.length),this.list_groupApply.array=B.instance.roomDto.groupApplyList);else if(e==K.STATE_GROUPED&&this.groupInfos==null){var i=B.instance.roomDto.groupData;if(this.groupInfos=[],i){var u=1;i.forEach(d=>{this.groupInfos.push([u,d]),u++})}this.list_group.array=this.groupInfos}}onGetRoomGroupList(e){this.heros=[],B.instance.roomDto.members.forEach(s=>{B.instance.playerJoinDic.set(s.id,s)});var i=e==K.STATE_WAIT||e==K.STATE_SIGNUP;if(i){var n=[],r=B.instance.roomDto.roomGroupMap;for(let s in r)r.hasOwnProperty(s)&&n.push(r[s]);this.setListByData(),this.list_team.array=n,this.list_team.selectedIndex=-1}}setListByData(){if(this.isSetRepeat)return;this.isSetRepeat=!0;var e=this.list_team.itemTemplate,i=this.list_team.spaceX,n=this.list_team.spaceY,r=e.list_members.itemTemplate.width,s=e.list_members.itemTemplate.height,o=this.groupPer,l=-1,c=-1,u=3;o<=3?(l=3,this.list_team.repeatX=2):o<=5?(l=5,u=5,this.list_team.repeatX=1):(l=5,u=5,c=o%5===0?o/5:Math.floor(o/5)+1,this.list_team.repeatX=1);var p,d,L,v;l!=-1&&(p=l*r+i*(l-1),L=e.list_members.x+p+22,console.log("memberListW: ",r,l,p,L),l==5&&(this.list_team.width=L)),c!=-1&&(d=c*s+n*(c-1),v=e.list_members.y+d+10,console.log("memberListH: ",s,c,d,v));let E=()=>{var w=Laya.HierarchyParser.parse(this.list_team.itemRender,{skinBaseUrl:this._skinBaseUrl})[0];return l!=-1&&(w.list_members.repeatX=u,w.list_members.width=p,w.img_bg.width=L,w.width=L),c!=-1&&(w.list_members.height=d,w.list_members.repeatY=c,w.img_bg.height=v,w.height=v),w.hideFlags=Laya.HideFlags.HideAndDontSave,w};this.list_team.createItem=E}initChat(){this.lastSendTime=0,this.box_barrage.width=Laya.stage.width,this.box_barrage.x=this.width-this.box_barrage.width>>1,this.box_barrage.visible=!0,this.barrageManager=new Pg(this.box_barrage),Laya.timer.frameLoop(1,this,this.update),Laya.timer.loop(1500,this,this.onRecvMsg),this.onEmojiHide(),this.onColorHide(),this.list_wait_hero.selectHandler=new Laya.Handler(this,this.onUserSelected),this.list_color.selectHandler=new Laya.Handler(this,this.handleSelectColor),this.list_emoji.selectHandler=Laya.Handler.create(this,this.onSelectEmojiItem,[],!1),this.createColorList(),this.onClickTab(1)}clearChat(){Laya.timer.clear(this,this.update),Laya.timer.clear(this,this.onRecvMsg)}update(){this.barrageManager.update()}handleSelectColor(e){if(e!=-1){let i=this.list_color.selectedItem;i&&(b.instance.colorId=i.id),this.onColorHide()}}createColorList(){let e=_.intance.m_dicFontColor;this.list_color.array=e.values,this.list_color.visible=!0;let i=-1,n=0;for(let r of e.values){if(r.id==b.instance.colorId){i=n;break}n++}this.list_color.selectedIndex=i}onUserSelected(e,i){if(console.log("onUserSelected: ",e,i),B.instance.roomDto.anonymous!=1&&this.img_box_btn_2.visible){var n=this.list_wait_hero.selectedItem;if(n){var r=n.name,s=`@${r}`,o=this.input_chat.text;o.indexOf(s)==-1&&(this.input_chat.text=`${s}  ${o}`),this.list_wait_hero.selectedIndex=-1}}}onClickHero(e){if(console.log("onClickHero: ",e),B.instance.roomDto.anonymous!=1&&this.img_box_btn_2.visible&&e){var i=`@${e}`,n=this.input_chat.text;n.indexOf(i)==-1&&(this.input_chat.text=`${i}  ${n}`)}}onColorSelect(e){console.log("fontColorItem: ",e)}onSwitchClick(){console.log("onSwitchClick"),this.box_barrage.visible=!this.box_barrage.visible,this.box_barrage.visible?(this.btn_switch.skin="res/chat/img_chat_switch_1.png",this.btn_send.disabled=!1):(this.btn_switch.skin="res/chat/img_chat_switch_2.png",this.btn_send.disabled=!0)}onEmojiClick(){console.log("onEmojiClick"),this.img_box_emoji.visible==!1?this.onEmojiShow():this.onEmojiHide(),this.onColorHide()}onColorClick(){console.log("onColorClick"),this.img_box_color.visible==!1?this.onColorShow():this.onColorHide(),this.onEmojiHide()}onEmojiShow(){console.log("onEmojiShow"),this.img_box_emoji.visible=!0,this.btn_emoji.skin="res/chat/btn_emoji_1.png"}onEmojiHide(){console.log("onEmojiHide"),this.img_box_emoji.visible=!1,this.btn_emoji.skin="res/chat/btn_emoji_2.png"}onColorShow(){console.log("onColorShow"),this.img_box_color.visible=!0,this.btn_color.skin="res/chat/btn_color_1.png"}onColorHide(){console.log("onColorHide"),this.img_box_color.visible=!1,this.btn_color.skin="res/chat/btn_color_2.png"}onShowBarrageBtn(){this.img_box_btn_2.visible=!0,this.img_box_btn_1.visible=!1}onHideMenu(){this.onEmojiHide(),this.onColorHide()}onSendClick(){console.log("onSendClick");var e=this.input_chat.text;if(!e||e=="")return;let i=Date.now();if(i-this.lastSendTime<1e3){T.instance.notice(m.instance.getLanguage(1359,1));return}this.lastSendTime=i;var n=_.intance.m_dicFontColor.get(b.instance.colorId);let r=n.colorValue;var s=B.instance.roomDto,o=s.roomId;I.requestPost("wxgame/room/danmuPublish",{roomId:o,msg:e,color:r}),this.input_chat.text=""}async onRecvMsg(){console.log("onRecvMsg");let e=await I.requestPost("wxgame/room/danmuLoop",{roomId:B.instance.roomDto.roomId});if(!this.destroyed){var i=e.msgList;i&&i.forEach(n=>{this.onSetMsg(n)})}}onSetMsg(e){var i=e.msg;if(!(!i||i=="")){var n=e.color,r=this.parseEmojis(i);i=r[0];var s=r[1];if(B.instance.roomDto.anonymous!=1){var o=e.name;i=`${o}: ${i}`}i=`<font  color='${n}'>${i}</font>`;var l=e.watch;l?this.barrageManager.addSpecialBarrage(i):this.barrageManager.addBarrage(i)}}parseEmojis(e){let i=e,n=/\[:(\d+)\]/g,r,s=0;for(;(r=n.exec(e))!==null;){let c=parseInt(r[1]);console.log("parseEmojis: ",r[0],r[1]);let u;var o=_.intance.m_dicExpression.get(c);if(o){var l=D.instance.getEmoji(o.type,o.icon);u=`<img src='${l}' width='55' height='55'/>`,s++}else u=r[0];i=i.replace(r[0],u)}return[i,s]}onClickTab(e){if(this.currTab!=e){this.setTab(e);var i=this.getItemByType(e);this.list_emoji.array=i}}setTab(e){for(let i=1;i<4;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("img_tab_icon").skin="res/chat/img_tab_"+i+"_1.png"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("img_tab_icon").skin="res/chat/img_tab_"+i+"_2.png")}getItemByType(e){var i=_.intance.m_dicExpression.values,n=[],r=-1,s=0;return i.forEach(o=>{o.type==e&&n.push(o)}),n}onSelectEmojiItem(e){var i=this.list_emoji.selectedItem;if(console.log("onSelectItem expressionItem: ",i),i){let n=`[:${i.id}]`;this.input_chat.text+=n,this.onEmojiHide(),this.list_emoji.selectedIndex=-1}}isOnlyEmojis(e){return/^(\[:\d+\])*$/.test(e)}initCumulative(){}onHelp(){var e=m.instance.getLanguage(1377),i=m.instance.getLanguage(1378);A.intance.openModule(y.HelpDialog,[2,e,i])}onShowSignUp(e){if(console.log("onShowSignUp"),!B.instance.roomWatcher){var i=B.instance.roomDto.groupApplyList,n=!1;if(i&&i.forEach(L=>{L==b.instance.playerDto.pid&&(n=!0)}),n)e!=null&&T.instance.notice(m.instance.getLanguage(1375));else{var r="",s=B.instance.currArenaItem;if(s.item&&s.item.length>1){var o=s.item[0],l=s.item[1];let L=_.intance.getGeneralValueById(15);var c=2,u=_.intance.m_dicItems.get(o);if(u.itemValue.length>1){var p=D.instance.getMoneyIcon(u.itemValue[0]),d=Se.formatNumber(u.itemValue[1]*l)+"";r=m.instance.getLanguage(1363,L,d,p)}else{var p=D.instance.getMoneyIcon(3005);r=m.instance.getLanguage(1363,L,0,p)}}me.instance().AlertByType(P.MatchConfimDialog,r,P.CANCEL,Laya.Handler.create(this,this.onSignUp))}}}onSignUp(){var e=B.instance.roomDto;De.instance.onCreateAndJoinWithPwd(K.ACTION_SIGNUP,e,"")}onSetStateTest(){}onDisable(){this.removeEvent(),console.log("EnterRoomView onDisable"),g.intance.off(f.EVENT_UPDATE_MATCH_ROOM,this,this.onUpdateMatchRoom),se.intance.preSceneName==Y.M_SCENE_MATCH||(se.intance.currSceneName!=Y.M_SCENE_AIRDROP?(console.log("SceneManager.intance.currSceneName: ",se.intance.currSceneName),k.instance.arenaType=B.instance.currArenaItem.type,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)):g.intance.event(f.EVENT_ENTER_MATCH_ROOM,!0)),this.barrageManager&&(this.barrageManager=null),I.stopHeartInRoom=!1}removeEvent(){Laya.timer.clearAll(this),g.intance.off(f.EVENT_CHANGE_HEAD,this,this.onColorSelect),g.intance.off(f.EVENT_CLICK_HERO,this,this.onClickHero),Laya.Pool.clearBySign("barrageSpr")}};Og=h([AM("IwpLh2K2T5Gh7QXYnJakAw")],Og);var Hg=class extends Laya.Box{};var{regClass:kM}=Laya,Ug=class extends Hg{constructor(){super(...arguments);this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.expressionItem=e,this.expressionItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.expressionItem.id;this.img_emoji.skin=D.instance.getEmoji(this.expressionItem.type,this.expressionItem.icon)}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}onCheck(){g.intance.event(f.EVENT_EMOJI_ICON_SELECT,this.expressionItem)}};Ug=h([kM("UrCKcS-wTbm0LjT3KCsUYA")],Ug);var Vg=class extends Laya.Box{};var{regClass:BM}=Laya,Fg=class extends Vg{set dataSource(e){super.dataSource=e,this.fontColorItem=e,this.fontColorItem&&this.setCurrentOutPut()}async setCurrentOutPut(){let e=this.fontColorItem.id;this.img_color.skin=D.instance.getFontColor(e)}onChange(e){}};Fg=h([BM("Vf8n1XGhQRK0Y2ndcK1U3g")],Fg);var Gg=class extends Laya.Dialog{};var{regClass:MM}=Laya,Kg=class extends Gg{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}setOpenData(e){e&&(this.roomDto=e[0])}onEnable(){g.intance.on(f.EVENT_Close_CreateRoom,this,this.onClose),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.initContainer()}onClose(){this.close()}onDisable(){g.intance.off(f.EVENT_Close_CreateRoom,this,this.onClose)}initContainer(){var e=_.intance.m_dicItems.get(this.roomDto.coinType),i=m.instance.getLanguage(e.name),n=_.intance.m_dicArenaDic.get(this.roomDto.arenaId);this.tf_roomName.text=m.instance.getLanguage(n.name),this.input_pwd.text=""}async onJoin(){let e=this.input_pwd.text;De.instance.onCreateAndJoinWithPwd(K.ACTION_JOIN,this.roomDto,e)}};Kg=h([MM("bn6StZy0ROGBH9GCTateCA")],Kg);var qg=class extends Laya.Scene{};var Wg=class a{constructor(){this._inited=!1}static getInstance(){return a._instance||(a._instance=new a),a._instance}init(){this._inited||(this._inited=!0)}};var{regClass:RM}=Laya,Zn=class extends qg{constructor(){super(...arguments);this.currIconAni=1}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP,Wg.getInstance().init()}async onOpened(e){this.mouseThrough=this.mouseThrough=!0,this.headBox.mouseThrough=!0;let i=this.getChildByName("mcMain");i&&(i.mouseThrough=!0),this.btn_fullScreen.visible=!1,this.updateTopInfo();var n=Laya.stage.width-z.DESIGN_WIDTH>>1;if(this.leftX=this.leftMenu.x,this.rightX=this.rightMenu.x,this.leftMenu.x=this.leftX-n-this.leftMenu.width,this.rightMenu.x=this.rightX+n+this.rightMenu.width,Laya.Tween.to(this.leftMenu,{x:this.leftX-n},500),Laya.Tween.to(this.rightMenu,{x:this.rightX+n},500),this.initBtnLanguage(),this.initBtnAni(),Ne.instance.sendCustumEvent(34),Zn.M_B_FIRST_Open&&(z.bookingId&&De.instance.goBookingCreateRoomDialog(z.bookingId,z.teamId),I.requestPost("wxgame/sys/notice",{type:2},!0,!0).then(o=>{console.log(o);var l=o,l=o;if(l.list&&l.list.length>0){A.intance.openModule(y.NoticeDialog,[2,l]);return}})),Zn.M_B_FIRST_Open=!1,!!b.instance.playerDto){var s=null;showChatBtn(!0,W.instance.walletAddress,s),this.refreshHeadRed(),this.refreshRankRed(),this.refreshIGORed(),this.refreshWheelRed()}}initBtnAni(){for(var e=1;e<6;e++){var i=this["spine_"+e];i.initUrl("gameIcon/effect/main/icon/icon"+e+"/spine.skel","animation",!0),i.visible=!1}Laya.timer.once(1e3,this,this.startBtnAni)}startBtnAni(){this.currIconAni>5&&(this.currIconAni=1),this["spine_"+this.currIconAni].play(0,!1),this["spine_"+this.currIconAni].visible=!0,this.currIconAni++,Laya.timer.once(2e3,this,this.startBtnAni)}changeMailFlag(){}updateTopInfo(){let e=b.instance.playerDto;if(!e)return;this.tf_roleName.text=e.name,this.levelTF.text=e.lv.toString(),e.needTip=!0,this.playerIcon.dataSource=e,this.updateExp(),this.changeMailFlag();let i=new Date(b.instance.m_serverTime);console.log("server time toLocaleString："+i.toLocaleString()),console.log("server time offset date："+b.instance.timeZoneOff/60/60),this.updateLocalAssets()}updateExp(){}requestAssets(){g.intance.event(f.UPDATE_ASSETS)}async updataBalence(){await W.instance.getBalance()}async updateAssets(){await qn.instance.updateAssetsBalance()}updateLocalAssets(){this.tf_3005.text=Se.filterNumFormat(b.instance.getConsumeValue(ve.TYPE_GOLD),0)}onEnable(){for(let e=1;e<6;e++)this["btn_"+e].on(Laya.Event.CLICK,this,this.onClickTab,[e]);this.btn_roomInfo1.on(Laya.Event.CLICK,this,this.onClickRoomInfo,[1]),this.btn_roomInfo2.on(Laya.Event.CLICK,this,this.onClickRoomInfo,[2]),this.btn_roomInfo3.on(Laya.Event.CLICK,this,this.onClickRoomInfo,[3]),Laya.timer.loop(1e3,this,this.refreshRoomTime),this.btn_shop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_shop]),this.btn_guild.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_guild]),this.btn_lcPool.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_lcPool]),this.btn_heroes.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_heroes]),this.btn_backpack.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_backpack]),this.btn_asset.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_asset]),this.btn_scholarshop.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_scholarshop]),this.btn_leaderboard.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_leaderboard]),this.btn_social.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_social]),this.btn_mail.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_mail]),this.btn_activities.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_activities]),this.btn_chat.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_chat]),this.btn_igo.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_igo]),this.btn_setting.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_setting]),this.btn_fullScreen.clickHandler=new Laya.Handler(this,this.onclickBtnHandler,[this.btn_fullScreen]),g.intance.on(f.UPDATE_RED_STATE_EVENT,this,this.changeMailFlag),g.intance.on(f.ROLE_INFO_CHANGE,this,this.updateTopInfo),g.intance.on(f.UPDATE_ASSETS,this,this.updateAssets),g.intance.on($t.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),g.intance.on("CHANG_NAME",this,this.changeName),g.intance.on("open_buy",this,this.openBuyDialog),g.intance.on("msg_173",this,this.onFirstRecharge),g.intance.on("ACCOUNTVO_UPDATE",this,this.updateExp),g.intance.on(f.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),this.initBtnBox(),this.box_Tele1.on(Laya.Event.CLICK,this,this.onBtnTele,[1]),this.box_Tele2.on(Laya.Event.CLICK,this,this.onBtnTele,[2]),this.box_Tele3.on(Laya.Event.CLICK,this,this.onBtnTele,[3]),this.box_Tele4.on(Laya.Event.CLICK,this,this.onBtnTele,[4]),this.btn_LiveChat.on(Laya.Event.CLICK,this,this.onBtnLiveChat,[4]),g.intance.on(f.REFRESH_MAINSCENE_HEAD_RED,this,this.refreshHeadRed),g.intance.on(f.REFRESH_ACTIVITY_RED,this,this.refreshRankRed),g.intance.on(f.REFRESH_IGO_RED,this,this.refreshRankRed),g.intance.on(f.REFRESH_ACTIVITY_RED,this,this.refreshIGORed),g.intance.on(f.REFRESH_WHEEL_RED,this,this.refreshWheelRed)}onClickRoomInfo(e){A.intance.openModule(y.RoomInfoDialog,[e])}onClickTab(e){e==1?(k.instance.arenaType=K.ARENA_TYPE_PROFESSIONAL,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)):e==2?(k.instance.arenaType=K.ARENA_TYPE_AIRDROP,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)):e==3?(k.instance.arenaType=K.ARENA_TYPE_TRAINING,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)):e==4?(k.instance.arenaType=K.ARENA_TYPE_PVE,se.intance.setCurrentScene(Y.M_SCENE_PVE)):e==5&&(k.instance.arenaType=K.ARENA_TYPE_TEAM,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP))}refreshRoomTime(){this.refreshRoomBtnRed()}refreshRoomBtnRed(){this.img_red_1.visible=b.instance.getRedDotById(ne.instance.ROOM_1_1)||b.instance.getRedDotById(ne.instance.ROOM_1_2)||b.instance.getRedDotById(ne.instance.ROOM_1_3)||b.instance.getRedDotById(ne.ROOM_PRE_CONTRACT)||b.instance.getRedDotById(ne.ROOM_PRE_CONTRACT_SELF),this.img_red_2.visible=b.instance.getRedDotById(ne.instance.ROOM_2_1)||b.instance.getRedDotById(ne.instance.ROOM_2_2)||b.instance.getRedDotById(ne.instance.ROOM_2_3),this.img_red_3.visible=b.instance.getRedDotById(ne.instance.ROOM_3_1)||b.instance.getRedDotById(ne.instance.ROOM_3_2)||b.instance.getRedDotById(ne.instance.ROOM_3_3),this.img_red_4.visible=b.instance.getRedDotById(ne.instance.ROOM_4_6),this.img_red_5.visible=b.instance.getRedDotById(ne.instance.ROOM_5_4)||b.instance.getRedDotById(ne.instance.ROOM_5_4_SELF),this.Img_social.visible=b.instance.getRedDotById(ne.ROOM_FRIEND_APPLY),this.red_mail.visible=b.instance.getRedDotById(ne.ROOM_MAIL)||b.instance.getRedDotById(ne.MAIL_ANNOUNCE_RED),this.red_guild.visible=b.instance.getRedDotById(ne.RED_GUILD_APPLY),this.img_red_shields.visible=b.instance.getRedDotById(ne.RED_SHIELDS)||b.instance.getRedDotById(ne.ROOM_OFFER_CARD)||b.instance.getRedDotById(ne.RED_RENTAL)}refreshHeadRed(){this.img_headRed.visible=b.instance.getRedDotById(ne.RED_ACTIVITY1)||b.instance.getRedDotById(ne.RED_ACTIVITY2)||b.instance.getRedDotById(ne.RED_ACTIVITY3)}refreshRankRed(){this.img_rankRed&&(this.img_rankRed.visible=b.instance.getRedDotById(ne.RED_EVERY_RANK_TOTAL)||b.instance.getRedDotById(ne.RED_EVERY_RANK_PRE)||b.instance.getRedDotById(ne.RED_EVERY_RANK_AIR)||b.instance.getRedDotById(ne.RED_EVERY_RANK_TRA)||b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_1)||b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_2)||b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_3)||b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_4)||b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_1)||b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_2)||b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_3)||b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_4))}refreshIGORed(){this.img_igored&&(this.img_igored.visible=b.instance.getRedDotById(ne.RED_IGO))}refreshWheelRed(){this.img_wheelRed&&(this.img_wheelRed.visible=b.instance.getRedDotById(ne.RED_WHEEL))}onFirstRecharge(e){}initBtnBox(){this.sortIconView()}sortIconView(){}async onclickBtnHandler(e){switch(e){case this.btn_shop:se.intance.setCurrentScene(Y.M_SCENE_SHOP);break;case this.btn_heroes:se.intance.setCurrentScene(Y.M_SCENE_HERO);break;case this.btn_backpack:se.intance.setCurrentScene(Y.M_SCENE_KNAPSACK);break;case this.btn_social:{se.intance.setCurrentScene(Y.M_SCENE_FRIEND);break}case this.btn_mail:se.intance.setCurrentScene(Y.M_SCENE_MAIL);break;case this.btn_lcPool:se.intance.setCurrentScene(Y.M_SCENE_LCPOOL);break;case this.btn_guild:b.instance.playerDto.union>0?se.intance.setCurrentScene(Y.M_SCENE_MYUNION,b.instance.playerDto.union):se.intance.setCurrentScene(Y.M_SCENE_UNION);break;case this.btn_setting:A.intance.openModule(y.GameSettingLanguageDialog);break;case this.btn_fullScreen:Ee.fullScreen(!Ee.isFullScreen);break;case this.btn_friend:A.intance.openModule(y.FriendMemberDialog);break;case this.btn_asset:se.intance.setCurrentScene(Y.M_SCENE_ASSET);break;case this.btn_scholarshop:se.intance.setCurrentScene(Y.M_SCENE_SHOLARSHIP);break;case this.btn_chat:this.Img_tele.visible||(this.Img_tele.visible=!0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onHideList));break;case this.btn_leaderboard:se.intance.setCurrentScene(Y.M_SCENE_RANK);break;case this.btn_igo:se.intance.setCurrentScene(Y.M_SCENE_IGO_PAGE);break;case this.btn_activities:se.intance.setCurrentScene(Y.M_SCENE_DAILY_TASK);break;default:T.instance.notice(m.instance.getLanguage(12));break}}openBuyDialog(e){switch(parseInt(e)){case 3:this.buyGoldBtn();break;case 4:this.clickRecharge();break}}onHideList(){this.Img_tele.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideList)}clickRecharge(){if(z.m_bInstantGame==!0){let e=m.instance.getLanguage(500004);me.instance().AlertByType(P.BASEALERTVIEW,e,P.YES);return}g.intance.event(f.EVENT_OPEN_MODULE,[y.RechargeDialog])}changeName(e){}buyGoldBtn(){g.intance.event(f.EVENT_OPEN_MODULE,[y.GetMoreDialog])}onDisable(){g.intance.off(f.UPDATE_RED_STATE_EVENT,this,this.changeMailFlag),g.intance.off(f.ACCOUNTVO_UPDATE,this,this.updateExp),g.intance.off(f.ROLE_INFO_CHANGE,this,this.updateTopInfo),g.intance.off(f.UPDATE_ASSETS,this,this.updateAssets),g.intance.off($t.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),g.intance.off("CHANG_NAME",this,this.changeName),g.intance.off("open_buy",this,this.openBuyDialog),g.intance.off("msg_173",this,this.onFirstRecharge),g.intance.off(f.EVENT_ENTER_MATCH_ROOM,this,this.onEnterMatchRoom),g.intance.off(f.REFRESH_MAINSCENE_HEAD_RED,this,this.refreshHeadRed),g.intance.off(f.REFRESH_ACTIVITY_RED,this,this.refreshIGORed),g.intance.off(f.REFRESH_WHEEL_RED,this,this.refreshWheelRed),g.intance.offAllCaller(this),Laya.Tween.clearAll(this),Laya.timer.clearAll(this),showChatBtn(!1)}onEnterMatchRoom(e){e?Laya.timer.once(2e3,this,this.startBtnAni):Laya.timer.clear(this,this.startBtnAni)}onBtnTele(e){let i=_.intance.getOtcTelegrams(e),n=i.telegram;i&&(z.isInto?(doCopy(n),T.instance.notice(m.instance.getLanguage(1552))):window.open(n,"_blank"))}onBtnLiveChat(){doChatMax()}initBtnLanguage(){}};Zn.M_B_FIRST_Open=!0,Zn=h([RM("pxhiJrX5SkKKvyFr8uIlNA")],Zn);var Yg=class extends Laya.Box{};var{regClass:PM}=Laya,zg=class extends Yg{constructor(){super();this.isAddEvent=!1}onEnable(){g.intance.on(f.EVENT_Game_Delay,this,this.onGameDelay)}onGameDelay(e){var i=_.intance.getGeneralValueById(6),n=i[0],r=i[1];this.tf_delay.text=e+"ms",e>r?(this.img_delay.skin="res/common/comm/img_com_xinhao3.png",this.tf_delay.color=Di.RED):e>n?(this.img_delay.skin="res/common/comm/img_com_xinhao2.png",this.tf_delay.color=Di.YELLOW):(this.img_delay.skin="res/common/comm/img_com_xinhao1.png",this.tf_delay.color=Di.GREEN)}onDisable(){g.intance.off(f.EVENT_Game_Delay,this,this.onGameDelay)}};zg=h([PM("AhgzWGWoRFetvSMsEOSkSg")],zg);var jg=class extends Laya.Box{};var{regClass:NM}=Laya,$g=class extends jg{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.playerDto=e,this.playerDto&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(e){parseInt(e)>0?this.img_head.skin=D.instance.getPlayerIcon(e):this.setImage(e)}async setCurrentOutPut(){if(!this.playerDto)return;let e=this.playerDto.icon;parseInt(e)>0?this.img_head.skin=D.instance.getPlayerIcon(e):this.setImage(e)}setImage(e){this.clearImage();var i=this;Laya.loader.load(e,Laya.Handler.create(this,()=>{i.destroyed||(this.img_head.skin=e)}),null,Laya.Loader.IMAGE,-1,!0,"1111",!1,!1)}clearImage(){this.img_head&&(this.img_head.texture=null)}destroy(e=!0){this.clearImage(),super.destroy(e)}toDetail(){!this.playerDto||!this.playerDto.needTip||A.intance.openModule(y.RoleInfoDialog)}};$g=h([NM("OPT5t2CoSmuYp2zUJWwUWA")],$g);var Xg=class extends Laya.Box{};var{regClass:OM}=Laya,Qg=class extends Xg{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_watch.on(Laya.Event.CLICK,this,this.onWatch),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_view.on(Laya.Event.CLICK,this,this.onView),this.btn_invite.on(Laya.Event.CLICK,this,this.onInvite),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){var e=0,i=this.roomDto.teamDto;i&&(e=i.teamId);var o=this.roomDto.roomId;let n=De.instance.onGetNewUrl(o,e);var r=b.instance.playerDto.name,s=B.instance.setRoomAnonymousLabel(this.roomDto.roomName,this.roomDto.anonymous),o=this.roomDto.roomId,l;e?l=m.instance.getLanguage(1630,r,s,o,e,n):l=m.instance.getLanguage(1563,r,s,o,n),doCopy(l),T.instance.notice(m.instance.getLanguage(132))}onEnable(){}async onWatch(){De.instance.onCreateAndJoinWithPwd(K.ACTION_WATCH,this.roomDto,"")}onInvite(){var e=this.roomDto.roomId,i=this.roomDto.teamDto.teamId;A.intance.openModule(y.MyFriendDialog,[e,i])}onView(){this.roomDto.startTime>0?this.roomDto.groupId?A.intance.openModule(y.TeamInfoDialog,this.roomDto.roomId):De.instance.goBookingCreateRoomDialog(this.roomDto.roomId):De.instance.goMatchCreateRoomDialog(this.roomDto.roomId)}async onJoin(){this.roomDto.startTime>0?De.instance.goBookingCreateRoomDialog(this.roomDto.roomId):De.instance.goMatchCreateRoomDialog(this.roomDto.roomId)}set dataSource(e){super.dataSource=e,this.roomDto=e,this.roomDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){if(this.roomDto.leader){let r=this.roomDto.leader.icon;this.playerIcon.headSkin=r,this.tf_union.text=B.instance.setRoomAnonymousLabel(m.instance.getMultiLan(this.roomDto.leader.shortUnionName),this.roomDto.anonymous)}this.btn_watch.disabled=this.roomDto.closeLive==1&&b.instance.playerDto.watchStatus==0,this.tf_name.text=B.instance.setRoomAnonymousLabel(this.roomDto.roomName,this.roomDto.anonymous),this.tf_customName.text=this.roomDto.customName,this.roomDto.customName?this.tf_union.y=66:this.tf_union.y=56;var e=_.intance.m_dicArenaDic.get(this.roomDto.arenaId);if(e?this.tf_arenaName.text=m.instance.getLanguage(e.name):this.tf_arenaName.text="",this.roomDto.groupId){var i=_.intance.m_dicGroupWar.get(this.roomDto.groupId);this.tf_groupName.text=m.instance.getLanguage(i.name),this.tf_teamTitle.visible=!0,this.roomDto.state==K.STATE_START?(this.tf_people.text='<font color="#25ff63">'+this.roomDto.memberCount+"</font>",this.box_people.visible=!0,this.box_team.visible=!1):(this.tf_teamNum.text='<font color="#25ff63">'+this.roomDto.completeTeamNum+"</font>",this.box_people.visible=!1,this.box_team.visible=!0)}else this.tf_groupName.text="",this.tf_people.text='<font color="#25ff63">'+this.roomDto.memberCount+"</font>/"+this.roomDto.maxCount,this.box_people.visible=!0,this.box_team.visible=!1,this.tf_teamTitle.visible=!1;this.img_coin.visible=this.roomDto.coinType!=ve.TYPE_GOLD,this.img_coin.skin=D.instance.getMoneyIcon(this.roomDto.coinType);var n=_.intance.m_dicNodes.get(this.roomDto.nodeId);this.nodeDelaySign.dataSource=n,this.roomDto.startTime>0?(this.roomDto.closeLive!=1&&b.instance.playerDto.watchStatus==0&&(this.btn_watch.disabled=!0),this.box_booking.visible=!0,this.box_match.visible=!1,this.roomDto.groupId?(this.btn_join.visible=!1,this.btn_view.visible=!0,this.btn_invite.visible=!1):(this.btn_join.visible=!0,this.btn_view.visible=!1,this.btn_invite.visible=!1,this.img_suo.visible=this.roomDto.requirePass),this.img_underway.visible=!1,this.tf_utc_startTime.text=ce.formatTimeStamp(this.roomDto.startTime,"MT-DD HH:MM",!0),this.tf_local_startTime.text=ce.formatTimeStamp(this.roomDto.startTime,"MT-DD HH:MM")):(this.btn_view.visible=!1,this.btn_invite.visible=!1,(this.roomDto.closeLive!=1||b.instance.playerDto.watchStatus==1)&&(this.btn_watch.disabled=!1),this.box_booking.visible=!1,this.box_match.visible=!0,this.roomDto.state!=K.STATE_START?(this.btn_join.visible=!0,this.img_underway.visible=!1,this.tf_seconds.text=ce.format(Math.round(this.roomDto.joinCd/1e3),":",!1),this.img_suo.visible=this.roomDto.requirePass):(this.btn_join.visible=!1,this.img_underway.visible=!0,this.tf_seconds.text=ce.format(Math.round(this.roomDto.fightEndTime/1e3),":",!1)))}};Qg=h([OM("mjmIj9QnSdSPVSuOSeBiLw")],Qg);var Jg=class extends Laya.Dialog{};var{regClass:HM}=Laya,Zg=class extends Jg{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.arenaIndex=1;this.roomInfoData=[["Acquire NFTs: Attain NFTs through the guildís scholarship program, or opt to lease or purchase your own.","Use Professional Tickets: Enter the arena with the Professional Arena Tickets youíve won or purchase actual tickets to amplify your earning potential.","Earnings and Advancement: Compete for major tokens and elevate your gameplay in the Professional Arena, where the stakes are higher and the rewards greater."],["Guild Support: Utilize the NFTs provided by your guild and the Airdrop Arena Tickets you've accumulated to compete.","Climb the Ladder: Demonstrate your abilities in the Airdrop Arena to win Professional Arena Tickets."],["Engage with In-Game NFTs: Start by playing with the gameís NFTs to discover your preferred playstyle and learn the game mechanics in different arena levels.","Skill Improvement: As you play, you'll enhance your abilities and gain experience.","Earn Free Airdrop Arena Tickets: Participate in the Training Arena to earn Airdrop Arena Tickets at no cost.","Level Up and Join a Guild: Progress through skill levels and become part of a guild to access community support and resources."]];this.roomInfoDataZn=[["獲取NFT遊戲角色：經由遊戲公會獎學金獲得或自行購買","專業競技場門票功能：使用專業競技場門票可增加獲勝概率","獎勵：專業競技場內，槓桿更多倍，獎勵更豐厚"],["公會支持：公會可為玩家提供空投競技場門票和NFT贊助","競技攀峰：在空投競技場獲勝玩家可免費獲得專業競技場門票"],["遊戲NFT：選擇遊戲內適合的NFT探索適合自己的競技模式，並了解遊戲機制","技能提升：隨著練習深入，競技技能不斷提升","免費獲得空投競技場門票：在新手練習場打比賽，可免費獲得空投競技場門票","加入公會：選擇一個公會加入，以獲得更多社區和道具支持"]];this.titleData=["Professional Arena","Airdrop Arena","Beginnerís Training Arena"];this.titleDataZn=["專業競技場","空投競技場","新手練習場"];this.playForData=["(Play-to-Earn)","(Play-to-Win)","(Free-to-Play)"];this.playForDataZn=["(邊玩邊賺)","(赢即是赚)","(0門檻)"]}setOpenData(e){e&&(console.log(e),this.arenaIndex=e[0],this.initContainer())}onEnable(){this.btn_join.on(Laya.Event.CLICK,this,this.onClickJoin)}onClose(){this.close()}onDisable(){this.btn_join.off(Laya.Event.CLICK,this,this.onClickJoin)}initContainer(){let e=Laya.LocalStorage.getItem(z.COOKIE_CF_LAN),i=e=="zh"?this.roomInfoDataZn:this.roomInfoData,n=e=="zh"?this.titleDataZn:this.titleData,r=e=="zh"?this.playForDataZn:this.playForData,s=i[this.arenaIndex-1];this.tf_tittle.text=n[this.arenaIndex-1],this.tf_playFor.text=r[this.arenaIndex-1];for(let o=1;o<5;o++){let l=this["tf_"+o],c=s[o-1];l&&c?(l.text=c,l.visible=!0):l.visible=!1}}onClickJoin(){k.instance.arenaType=this.arenaIndex,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP),this.close()}};Zg=h([HM("KgOqc2ShT_q7kN9EyT8fqQ")],Zg);var eL=class extends Laya.Box{};var{regClass:UM}=Laya,tL=class extends eL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_watch.on(Laya.Event.CLICK,this,this.onWatch),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.isAddEvent=!0)}onEnable(){}async onWatch(){De.instance.onCreateAndJoinWithPwd(K.ACTION_WATCH,this.roomDto,"")}async onJoin(){if(this.roomDto.requirePass){var e=_.intance.m_dicNodes.get(this.roomDto.nodeId);if(e&&e.dT>800&&z.Debug<2){T.instance.notice(m.instance.getLanguage(1306));return}A.intance.openModule(y.InputPwdDialog,[this.roomDto])}else De.instance.onCreateAndJoinWithPwd(K.ACTION_JOIN,this.roomDto,"")}set dataSource(e){super.dataSource=e,this.roomDto=e,this.roomDto&&(this.roomDto.state==0?(this.btn_join.visible=!0,this.img_underway.visible=!1,this.img_suo.visible=this.roomDto.requirePass):(this.btn_join.visible=!1,this.img_underway.visible=!0),this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.roomDto.leader.icon;this.playerIcon.headSkin=e,this.tf_name.text=B.instance.setRoomAnonymousLabel(this.roomDto.roomName,this.roomDto.anonymous),this.tf_customName.text=this.roomDto.customName,this.roomDto.customName?this.tf_name.y=19:this.tf_name.y=35,this.btn_watch.disabled=this.roomDto.closeLive==1&&b.instance.playerDto.watchStatus==0,this.tf_union.text=B.instance.setRoomAnonymousLabel(m.instance.getMultiLan(this.roomDto.leader.shortUnionName),this.roomDto.anonymous),this.tf_people.text='<font color="#25ff63">'+this.roomDto.memberCount+"</font>/"+this.roomDto.maxCount,this.img_coin.visible=this.roomDto.coinType!=ve.TYPE_GOLD,this.img_coin.skin=D.instance.getMoneyIcon(this.roomDto.coinType);var i=_.intance.m_dicNodes.get(this.roomDto.nodeId);this.nodeDelaySign.dataSource=i,this.roomDto.state!=10?(this.btn_join.visible=!0,this.img_underway.visible=!1,this.tf_seconds.text=ce.format(Math.round(this.roomDto.joinCd/1e3),":",!1),this.img_suo.visible=this.roomDto.requirePass):(this.btn_join.visible=!1,this.img_underway.visible=!0,this.tf_seconds.text=ce.format(Math.round(this.roomDto.fightEndTime/1e3),":",!1))}};tL=h([UM("YoCqj_dyTb2ZIAnhkSds6Q")],tL);var iL=class extends Laya.Box{};var{regClass:VM}=Laya,aL=class extends iL{onEnable(){}notice(e){this.duration=3e3,this.elapsed=0;let i=e;this.label_tf.text=e,console.log("notice: ",e),this.image_bg.width=this.label_tf.textField.textWidth,this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}update(){this.elapsed+=Laya.timer.delta,this.elapsed>=this.duration&&(this.alpha-=.05,this.alpha<=0&&(this.alpha=0))}isFinished(){return this.alpha<=0}onDisable(){console.log("specialBarrageSpr recover"),Laya.Pool.recover("specialBarrageSpr",this)}};aL=h([VM("O1TfP9clQWS0Yda38eJPHQ")],aL);var nL=class extends Laya.Box{};var{regClass:FM}=Laya,rL=class extends nL{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!!e){if(this.banAccountVo=e,this.roomPlayerDto=this.banAccountVo.roomPlayerDto,this.img_checked.visible=this.banAccountVo.checked,!this.roomPlayerDto){this.img_back.skin="res/matchReady/img_jjc_0.png",this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}}async setCurrentOutPut(){if(this.img_back.skin="res/matchReady/img_jjc_1.png",this.tf_name.text=Be.abbreviateString(this.roomPlayerDto.name),this.box_show.visible=!0,this.destroyed)return;let e=this.roomPlayerDto.icon;this.playerIcon.headSkin=e,this.img_sign.visible=this.roomPlayerDto.leader>0,this.tf_banned.visible=this.banAccountVo.isBanned,this.playerIcon.gray=this.banAccountVo.isBanned}toDetail(){console.log("this.banAccountVo.checked: "+this.banAccountVo.checked),this.banAccountVo.isBanned||(this.banAccountVo.checked=!this.banAccountVo.checked),g.intance.event(f.EVENT_REFRESH_BAN_ACCOUNT)}};rL=h([FM("Ic8NGg94R9ufEgwwaCKQlw")],rL);var sL=class{};var oL=class extends Laya.Dialog{};var{regClass:GM}=Laya,Tc=class extends oL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.allPlayerNum=0;this.selectedNum=0}onEnable(){g.intance.on(f.EVENT_REFRESH_BAN_ACCOUNT,this,this.onRefreshPlayer),this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_ban.on(Laya.Event.CLICK,this,this.onBanPlayer),this.btn_checkBox.on(Laya.Event.CLICK,this,this.onSelectAll),this.list_hero.array=[]}onOpened(e){this.getBanAccounts()}async getBanAccounts(){let e=B.instance.matchDto.members.filter(u=>u.id!==b.instance.playerDto.pid&&!u.npc).map(u=>u.id),i=await I.requestPost("wxgame/player/checkPlayerStatus",{pids:e});var n=[];i&&(n=i.data);let r=n.length;this.playerDatas=[];for(var s=0;s<r;s++){var o=n[s],l=new sL,c=k.instance.matchHeroDic.get(o.pid);l.roomPlayerDto=c,l.checked=!1,l.isBanned=o.status==1,this.playerDatas.push(l)}this.list_hero.array=this.playerDatas,this.updateNum()}onRefreshPlayer(){this.list_hero.refresh(),this.updateNum()}updateNum(){!this.playerDatas||this.playerDatas.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,this.selectedNum=0,this.playerDatas.forEach(e=>{e&&e.checked&&this.selectedNum++}),this.allPlayerNum=this.playerDatas.length,this.tf_myHeroesNum.text=m.instance.getLanguage(1355,this.playerDatas.length),this.tf_selectedNum.text=m.instance.getLanguage(1223,this.selectedNum)}onSelectAll(){var e=this.btn_checkBox.selected;e&&this.playerDatas.forEach(i=>{i&&(i.checked=!1)}),this.playerDatas.forEach(i=>{i&&(i.isBanned||(i.checked=e))}),this.list_hero.refresh(),this.updateNum()}onBack(){this.close()}onBanPlayer(){var e=[];this.playerDatas.forEach(i=>{if(i.checked){var n=i.roomPlayerDto;e.push(n.id)}}),e.length>0?me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1779),P.CANCEL,Laya.Handler.create(this,this.onBanPlayerReal,[e])):T.instance.notice(m.instance.getLanguage(1780))}async onBanPlayerReal(e){let i=await I.requestPost("wxgame/player/killPlayers",{killPidList:e});if(i){var n=i.killPidList;this.playerDatas.forEach(r=>{r&&(r.checked=!1,n.includes(r.roomPlayerDto.id)&&(r.isBanned=!0))}),this.btn_checkBox.selected=!1,this.onRefreshPlayer()}}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(f.EVENT_REFRESH_BAN_ACCOUNT,this,this.onRefreshPlayer)}};Tc.chooseNum=0,Tc=h([GM("MyYi8OCtTGGZZdRjMdMAJw")],Tc);var lL=class extends Laya.Box{};var{regClass:KM}=Laya,Dt=class extends lL{init(t,e,i=28){var n,r;switch(t!=0?(r=bt.getRandInRound(-30,30),e&&e.bj?n=Dt.TYPE_Critical:n=Dt.TYPE_Normal):(r=bt.getRandInRound(-30,30),n=Dt.TYPE_Miss),e?this.pos(r,-180):this.pos(r,-220),this.alpha=1,this.scale(1,1),this.tf_damage.visible=!1,this.box_crit.visible=!1,this.img_miss.visible=!1,n){case Dt.TYPE_Normal:this.tf_damage.text=t+"",this.showNormalDamageEffect();break;case Dt.TYPE_Critical:this.fontClip_damage.value=t+"",this.showCriticalDamageEffect();break;case Dt.TYPE_Miss:this.showMissEffect();break;default:break}}showNormalDamageEffect(){this.tf_damage.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,this.onComplete))}showCriticalDamageEffect(){this.box_crit.visible=!0,this.scale(.2,.2),Laya.Tween.to(this,{scaleX:1.3,scaleY:1.3,alpha:1,y:this.y-70},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1,alpha:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}))}showMissEffect(){this.img_miss.visible=!0,Laya.Tween.to(this,{y:this.y-50,alpha:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.onComplete()}))}onComplete(){this.removeSelf()}onDisable(){Laya.Pool.recover("damageNumber",this)}};Dt.WHITE="#FFFFFF",Dt.ORANGE="#FFA500",Dt.RED="#FF0000",Dt.GREEN="#119c09",Dt.BLUE="#78cefd",Dt.TYPE_Normal="Normal",Dt.TYPE_Miss="Miss",Dt.TYPE_Critical="Critical",Dt=h([KM("nHp6WKzZRIWvyhguidEfqg")],Dt);var cL=class extends Laya.Box{};var{regClass:qM}=Laya,uL=class extends cL{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e;var i=e;if(this.roomPlayer=B.instance.playerJoinDic.get(i),!this.roomPlayer){this.img_back.skin="res/matchReady1/img_com_kawenhao.png",this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}async setCurrentOutPut(){var e=this.parent.parent.parent,i=e.roomGroup.no;if(this.img_back.skin="res/matchReady1/img_com_ka"+i+".png",this.tf_name.text=B.instance.setRoomAnonymousLabel(Be.abbreviateString(this.roomPlayer.name)),this.tf_name.color=wt.noColors[i-1],this.box_show.visible=!0,this.destroyed)return;let n=this.roomPlayer.icon;this.playerIcon.headSkin=n,this.img_sign.visible=this.roomPlayer.leader>0,this.tf_union.text=B.instance.setRoomAnonymousLabel(m.instance.getMultiLan(this.roomPlayer.shortUnionName))}toDetail(){this.roomPlayer.id&&g.intance.event(f.EVENT_CLICK_HERO,this.roomPlayer.name)}};uL=h([qM("560IbDG_RiaXc5KU8Mfx8Q")],uL);var mL=class extends Laya.Box{};var{regClass:WM}=Laya,pL=class extends mL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.roomGroup=e,this.roomGroup&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.img_bg.skin="res/matchReady1/img_com_di"+this.roomGroup.no+".png",this.img_bar.skin="res/matchReady1/img_com_bt"+this.roomGroup.no+".png",this.img_flag.skin=D.instance.getTeamFlag(this.roomGroup.no);var e=_.intance.m_dicTeamName.get(this.roomGroup.no);this.tf_teamName.text=m.instance.getLanguage(e.teamName),this.list_members.array=this.roomGroup.members}};pL=h([WM("Wq7qINYUQWu8m5w93OSbdg")],pL);var hL=class extends Laya.Box{};var{regClass:YM}=Laya,dL=class extends hL{set dataSource(t){if(super.dataSource=t,!!t){var e=t[0];this.tf_groupNum.text=m.instance.getLanguage(1364,e);for(var i=t[1],n=0;n<4;n++){var r=i[n],s=this["listItem_"+(n+1)],o=this["img_line_"+(n+1)];r?(s&&(s.visible=!0,s.dataSource=r),o&&(o.visible=!0)):(s&&(s.visible=!1),o&&(o.visible=!1))}}}};dL=h([YM("nt2hpNSsSwWkkun3CZxOCg")],dL);var fL=class extends Laya.Box{};var{regClass:zM}=Laya,yL=class extends fL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.roomGroupDataDto=e,this.roomGroupDataDto&&(this.roomRankPlayerDto=B.instance.playerEndDic.get(this.roomGroupDataDto.pid),this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.tf_name.text=Be.abbreviateString(this.roomRankPlayerDto.name);let e=this.roomRankPlayerDto.icon;this.playerIcon.headSkin=e,this.tf_rank.text=m.instance.getLanguage(1365,this.roomRankPlayerDto.rankNum);var i=this.roomGroupDataDto.reward;if(i&&i.length>0){var n=i[0];this.img_reward_icon.skin=D.instance.getItemIcon(n.id),this.tf_reward_num.text=n.count+"",this.box_reward.visible=!0}else this.box_reward.visible=!1;var r=this.roomGroupDataDto.pid==b.instance.playerDto.pid,s=r?"#ffce58":"#96d2fc";this.tf_name.color=this.tf_rank.color=this.tf_reward_num.color=s,this.isFirst=this.roomGroupDataDto.rank==1}set isFirst(e){this.img_no1.visible=e}toDetail(){}};yL=h([zM("aVUehRpFSl-pkUZJISXahg")],yL);var bL=class extends Laya.Box{};var{regClass:jM}=Laya,gL=class extends bL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.roomRankPlayerDto=e,this.roomRankPlayerDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.roomRankPlayerDto.id==b.instance.playerDto.pid?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.roomRankPlayerDto.rankNum<4?this.bg.skin="res/matchRank1/img_ranking_bg_"+this.roomRankPlayerDto.rankNum+".png":this.bg.skin="res/matchRank1/img_ranking_bg_4.png",this.roomRankPlayerDto.rankNum<4?(this.img_rankIcon1.skin="res/matchRank1/img_ranking_"+this.roomRankPlayerDto.rankNum+".png",this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.roomRankPlayerDto.id==b.instance.playerDto.pid?this.img_rankIcon2.skin="res/matchRank1/img_ranking_ranking_me.png":this.img_rankIcon2.skin="res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1);let e=this.roomRankPlayerDto.icon;this.playerIcon.headSkin=e,this.playerIcon.gray=this.roomRankPlayerDto.die,this.img_die.visible=this.roomRankPlayerDto.die,this.tf_name.text=this.roomRankPlayerDto.name,this.tf_rank.text=this.roomRankPlayerDto.rankNum+"",this.tf_kill.text=this.roomRankPlayerDto.kill+"",this.tf_score.text=this.roomRankPlayerDto.score+""}};gL=h([jM("vpTYNMB4TfGFK2gaXiPAeg")],gL);var LL=class extends Laya.Dialog{};var{regClass:$M}=Laya,_L=class extends LL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.allItems=[]}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.goMatchEnd);var e=B.instance.matchWatcher;e&&(this.btn_back.label=m.instance.getUILang("Exit"))}setOpenData(e){var i=e[0];this.groupData=e[1],this.mcLanList.vScrollBarSkin="",B.instance.playerEndDic=new le,i.forEach(r=>{if(B.instance.playerEndDic.set(r.id,r),r.id==b.instance.playerDto.pid){this.myRank=r;return}}),this.mcLanList.array=i;let n=-1;this.mcLanList.selectedIndex=n,this.showListEffect(),!k.instance.myPlayer||k.instance.myPlayer.hp>0?this.successAni.visible=!0:this.successAni.visible=!1,console.log("setOpenData",this.successAni.visible),Ne.instance.sendCustumEvent(43)}showListEffect(){this.allItems=[];for(var e=this.mcLanList.array.length,i=0;i<e;i++){var n=this.mcLanList.getCell(i);n?(n.skewX=.5,n.alpha=0,this.allItems.push(n),Laya.timer.once(100+i*500,this,this.startShowItem,[i],!1)):console.log("showListEffect _item is null")}}startShowItem(e){var i=this.allItems[e];if(i==null){console.log("no list item now");return}i.scaleX=0,i.alpha=0,this.mcLanList.tweenTo(e,500),Laya.Tween.to(i,{scaleX:1,alpha:1},100,Laya.Ease.circOut,null,0,!1)}goMatchEnd(){var e=B.instance.matchWatcher;e?this.setToAirdropScene():(A.intance.openModule(y.MatchEndView,[this.myRank,this.groupData]),this.close())}setToAirdropScene(){k.instance.arenaType=B.instance.matchDto.arenaType,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)}onDisable(){this.removeEvent(),this.myRank=this.groupData=null}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};_L=h([$M("NlnToPI4TTuxIDhRKLPChg")],_L);var vL=class extends Laya.Box{};var{regClass:XM}=Laya,xL=class extends vL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,this.pid=e,!!this.pid){if(this.roomRankPlayerDto=B.instance.playerEndDic.get(this.pid),!this.roomRankPlayerDto){console.log("this.pid is null! ",this.pid);return}this.addEvent(),this.setCurrentOutPut()}}async setCurrentOutPut(){this.roomRankPlayerDto.id==b.instance.playerDto.pid?this.tf_name.color="#fff373":this.tf_name.color="#ffffff";let e=this.roomRankPlayerDto.icon;this.playerIcon.headSkin=e,this.playerIcon.gray=this.roomRankPlayerDto.die,this.img_die.visible=this.roomRankPlayerDto.die,this.tf_name.text=this.roomRankPlayerDto.name,this.tf_point.text=this.roomRankPlayerDto.score+""}};xL=h([XM("GW4SVqH4Qzu2Kd5pEN_0dQ")],xL);var IL=class extends Laya.Box{};var{regClass:QM}=Laya,EL=class extends IL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.roomTeamDataDto=e,this.roomTeamDataDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.img_bg.skin="res/matchReady1/img_com_di"+this.roomTeamDataDto.no+".png",this.img_bar.skin="res/matchRank2/img_com_bt"+this.roomTeamDataDto.no+".png",this.roomTeamDataDto.rank<4?(this.img_rankIcon1.skin="res/matchRank1/img_ranking_"+this.roomTeamDataDto.rank+".png",this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin="res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1),this.img_flag.skin=D.instance.getTeamFlag(this.roomTeamDataDto.no);var e=_.intance.m_dicTeamName.get(this.roomTeamDataDto.no);this.tf_teamName.text=m.instance.getLanguage(e.teamName),this.tf_rank.text=this.roomTeamDataDto.rank+"",this.tf_totalPoint.text=this.roomTeamDataDto.score+"",this.list_members.array=this.roomTeamDataDto.members}};EL=h([QM("u3XTNJZVS0eHpoM_8aiWdw")],EL);var wL=class extends Laya.Dialog{};var{regClass:JM}=Laya,TL=class extends wL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.goMatchEnd);var e=B.instance.matchWatcher;e&&(this.btn_back.label=m.instance.getUILang("Exit"))}setOpenData(e){var i=e[0];this.groupData=e[1],this.roomTeamDataDtos=e[2],this.groupId=e[3],B.instance.playerEndDic=new le,i.forEach(d=>{if(B.instance.playerEndDic.set(d.id,d),d.id==b.instance.playerDto.pid){this.myRank=d;return}});var n=_.intance.m_dicGroupWar.get(this.groupId),r=this.list_team.itemTemplate,s=this.list_team.spaceY,o=r.list_members.itemTemplate.height,l=n.groupPer,c=l*o+s*(l-1),u=r.list_members.y+c;console.log("listH: ",o,l,c,u);let p=()=>{var d=Laya.HierarchyParser.parse(this.list_team.itemRender,{skinBaseUrl:this._skinBaseUrl})[0];return d.list_members.height=c,d.img_bg.height=u,d.height=u,d.hideFlags=Laya.HideFlags.HideAndDontSave,d};this.list_team.createItem=p,this.list_team.array=this.roomTeamDataDtos,this.list_team.selectedIndex=-1,!k.instance.myPlayer||k.instance.myPlayer.hp>0?this.successAni.visible=!0:this.successAni.visible=!1,console.log("setOpenData",this.successAni.visible),Ne.instance.sendCustumEvent(43)}goMatchEnd(){var e=B.instance.matchWatcher;e?this.setToAirdropScene():(A.intance.openModule(y.MatchEndView,[this.myRank,this.groupData,this.groupId]),this.close())}setToAirdropScene(){k.instance.arenaType=B.instance.matchDto.arenaType,se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)}onDisable(){this.removeEvent(),this.myRank=this.groupData=null}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};TL=h([JM("46cneqM_QNq4VNWjm8AGdw")],TL);var CL=class extends Laya.Dialog{};var{regClass:ZM}=Laya,SL=class extends CL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.groupId=0;this.states=[K.MATCHEND_REWARD]}onEnable(){this.btn_next.on(Laya.Event.CLICK,this,this.onNext),this.btn_goBattle.on(Laya.Event.CLICK,this,this.setToAirdropScene),this.btn_abandon.on(Laya.Event.CLICK,this,this.onNext),this.btn_claim.on(Laya.Event.CLICK,this,this.onClaim),this.btn_help.on(Laya.Event.CLICK,this,this.onHelp),g.intance.on(f.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan),Ne.instance.sendCustumEvent(43)}onHelp(){Ee.commTipWithYes(m.instance.getLanguage("HELP"))}onNext(){this.states.indexOf(K.MATCHEND_REWARD)!=-1?(this.states=this.states.filter(e=>e!==K.MATCHEND_REWARD),this.states.length>0?this.btn_next.label=m.instance.getUILang("Next"):this.btn_next.label=m.instance.getUILang("Go Battle"),this.btn_next.x=this.box_outside.width-this.btn_next.width>>1):this.states.indexOf(K.MATCHEND_QUAN)!=-1?(this.states=this.states.filter(e=>e!==K.MATCHEND_QUAN),this.box_quan.visible=!0,this.box_pvp.visible=!1,this.box_pve.visible=!1,this.list_reward.visible=!1,this.noDataBox1.visible=!1,this.btn_next.visible=!1):this.states.indexOf(K.MATCHEND_DIEJIA)!=-1?(this.states=this.states.filter(e=>e!==K.MATCHEND_DIEJIA),this.groupInfos&&this.groupInfos.length>0&&(this.box_cumulative.visible=!0,this.box_outside.visible=!1),this.btn_claim.visible=!1,this.btn_next.label=m.instance.getUILang("Go Battle")):this.setToAirdropScene()}async onClaim(){var e=1,i=this.roomGameOverPush.loserTid;await Jn.instance.addTicketLog(e,i)&&(console.log("记录逆袭券日志成功"),this.onClaimed())}onClaimed(){this.btn_claim.label=m.instance.getUILang("Claimed"),this.btn_claim.disabled=!0,this.states.length>0?this.btn_abandon.label=m.instance.getUILang("Next"):this.btn_abandon.label=m.instance.getUILang("Go Battle")}onRefreshQuan(){T.instance.notice(m.instance.getLanguage(2e3))}setToAirdropScene(){k.instance.arenaType=B.instance.matchDto.arenaType,k.instance.arenaType==K.ARENA_TYPE_PVE?se.intance.setCurrentScene(Y.M_SCENE_PVE):se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)}setOpenData(e){this.btn_nextLX=this.btn_next.x;var i=B.instance.matchDto;this.myRankPlayerDto=e[0];var n=e[1];if(this.groupId=e[2],this.roomGameOverPush=B.instance.roomGameOverPush,this.box_quan.visible=!1,this.roomGameOverPush&&this.roomGameOverPush.arenaType==K.ARENA_TYPE_PVE){this.tf_challengeDuration.text=ce.formatWithSecondByMs(this.roomGameOverPush.battleTime),this.tf_historicalRanking.text=this.roomGameOverPush.personalRank+"",this.tf_overallRanking.text=this.roomGameOverPush.totalRank+"",this.box_pvp.visible=!1,this.box_pve.visible=!0,this.btn_next.visible=!0,this.btn_next.x=this.box_outside.width-this.btn_next.width>>1,this.list_reward.visible=!1;var r=this.roomGameOverPush.reward,s=!1;for(let R of r)if(R.id==ve.TYPE_QUAN_PVE){s=!0;break}s?(this.img_pid.visible=!0,this.tf_pid.text=b.instance.playerDto.pid+""):(this.box_pve.y+=60,this.img_pid.visible=!1)}else{this.box_pve.visible=!1,this.box_pvp.visible=!0;var o=!1;if(this.roomGameOverPush.loserTid){o=!0,this.tf_quanId.text=this.roomGameOverPush.loserTid;var l=_.intance.m_dicItems.get(ve.TYPE_QUAN_MNT),c=m.instance.getLanguage(l.name);this.tf_quanName.text=c}if(this.groupInfos=[],n){var u=1;n.forEach(V=>{this.groupInfos.push([u,V]),u++})}this.myRankPlayerDto.rankNum<4?this.img_rankIcon.skin="res/matchEnd1/img_battleend_ranking_"+this.myRankPlayerDto.rankNum+".png":this.img_rankIcon.skin="res/matchEnd1/img_battleend_ranking_4.png",this.list_reward.vScrollBarSkin="",this.tf_rank.text=this.myRankPlayerDto.rankNum+"";var p=[],d=new le,r=B.instance.reward;r.forEach(V=>{var q=d.get(V.id);q?q.newAddCnt=q.newAddCnt+V.count:(q=new Pe(V.id),q.newAddCnt=V.count,p.push(q),d.set(V.id,q))});var L=this.list_reward.spaceX,v=this.list_reward.itemTemplate.width,E=p.length,w=E*v+L*(E-1);this.list_reward.repeatX=E,this.list_reward.width=w,this.btn_next.visible=!0,this.list_reward.x=this.box_outside.width-this.list_reward.width>>1,this.list_reward.array=p,this.list_reward.visible=!0,!this.list_reward.array||this.list_reward.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1;let U=-1;this.list_reward.selectedIndex=U,o&&this.states.push(K.MATCHEND_QUAN),this.groupInfos.length>0&&this.states.push(K.MATCHEND_DIEJIA),this.list_group.array=this.groupInfos}this.onNext()}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(f.EVENT_REFRESH_QUAN_STATUS,this,this.onRefreshQuan)}};SL=h([ZM("y-nP_lRrQVef9uttVJ0rDw")],SL);var DL=class extends Laya.Box{};var{regClass:eR}=Laya,AL=class extends DL{set dataSource(t){if(super.dataSource=t,!!t){var e=t[0];this.tf_groupNum.text=m.instance.getLanguage(1364,e);var i=t[1];this.list_group_players.array=i}}};AL=h([eR("hRg5i0IfRMaPkSUsg-i-Lg")],AL);var kL=class extends Laya.Box{};var{regClass:tR}=Laya,BL=class extends kL{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,this.roomPlayer=e,!this.roomPlayer){this.img_back.skin="res/matchReady/img_jjc_0.png",this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}async setCurrentOutPut(){if(this.img_back.skin="res/matchReady/img_jjc_1.png",this.tf_name.text=B.instance.setRoomAnonymousLabel(Be.abbreviateString(this.roomPlayer.name)),this.box_show.visible=!0,this.destroyed)return;let e=this.roomPlayer.icon;this.playerIcon.headSkin=e,this.img_sign.visible=this.roomPlayer.leader>0,this.tf_union.text=B.instance.setRoomAnonymousLabel(m.instance.getMultiLan(this.roomPlayer.shortUnionName))}toDetail(){this.heroVo.id}};BL=h([tR("PiGdVEY9T-K8CCfWLChS0w")],BL);var je=class{};je.TYPE_normal=!1,je.TYPE_Monster=!0,je.STATE_Idle=1,je.STATE_Patrol=2,je.STATE_Chase=3,je.STATE_Attack=4,je.STATE_Flee=5;var ML=class{constructor(){this.lastUsed=0}get isDefensive(){return this.skillItem.type==4}};var RL=class extends Laya.Sprite{};var{regClass:iR}=Laya,PL=class extends RL{constructor(){super();this.isAddEvent=!1;this.isMe=!1;this.inGround=!1;this.speedRate=1;this.moveSpeed=6;this._speed=6;this.biasSpeed=0;this.lastDirectStr="left";this.directStr="left";this._roleDirection=-1;this.inControl=!1;this.isStop=!1;this.isLockAni=!1;this.aniChange=!1;this.beyond=!1;this.displacementType=0;this.timeStamp=0;this.currArea=0;this.isSetDiquan=!1;this.flashCount=0;this.lastX=-1;this.lastY=-1;this.lastRoleDirection1=-1;this.lastSpeed1=-1;this.lastArea=-1;this.lastMoveIndex=-1;this.attackSequence=[5,3,6,1];this.oldMonsterAttackSequence=[5,1,3,1,6];this.oldUsdBigSkillMonsterAttackSequence=[5,1,3,1];this.monsterAttackSequence=[5,1,3,1,6];this.currentAttackIndex=0;this.isUnderAttack=!1;this.exitRange=500;this.showRange=300;this.closeRange=90;this.attackRange=120;this._monsterTime=100;this.isFocusedOnPlayer=!1}get speed(){return this._speed}set speed(e){this._speed=e,this.biasSpeed=Math.round(this.speed*Math.sin(45*Math.PI/180))}get roleDirection(){return this._roleDirection}set roleDirection(e){this._roleDirection=e,e!=-4&&(e>270||e<90?this.directStr="right":e>90&&e<270&&(this.directStr="left"),this.lastDirectStr!=this.directStr&&(this.heroBox.scaleX=this.directStr=="left"?1:-1,this.lastDirectStr=this.directStr))}set myRoleDirection(e){if(this.roleDirection!=e){this.roleDirection=e;let i=28+Math.sin(e*(Math.PI/180))*(28/4),n=24+Math.sin(e*(Math.PI/180))*(14/2),r=this.img_d.width/2+Math.cos(e*(Math.PI/180))*(this.img_d.width/2),s=this.img_d.height/2+ +Math.sin(e*(Math.PI/180))*(this.img_d.height/2);this.img_arrow.pos(r,s),this.img_gj.rotation=e+90,this.img_arrow.rotation=e,this.img_arrow.width=i,this.img_arrow.height=n}}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(this.roomPlayerDto=e,!!this.roomPlayerDto){if(this.pos(this.roomPlayerDto.x,this.roomPlayerDto.y),this.addEvent(),this.speed=this.roomPlayerDto.speed,this.currArea=this.roomPlayerDto.area,this.heroVo=new Pt,this.roomPlayerDto.heroId?this.heroVo.id=this.roomPlayerDto.heroId:this.heroVo.id=$e.DEFAULT_HERO_ID,this.roomPlayerDto.heroColor?this.heroVo.color=this.roomPlayerDto.heroColor:this.heroVo.color=$e.DEFAULT_HERO_COLOR,this.moveSpeed=this.heroVo.heroItem.mov/30,this.setCurrentOutPut(),this.updataBlood(),this.roomPlayerDto.hp<=0){this._isDead=!0,this.setDead();return}else this._isDead&&this.reLife();this.addDiquanAndBaoqi(),this.applySkillEffect(),this.roomPlayerDto.npc==je.TYPE_Monster&&this.initMatchSkill()}}reLife(){console.log("MatchHeroSpr reLife: "+this.isMe),this._isDead=!1,this._isRealDead=!1,this.alpha=1,this.img_deadImg.visible=!1,this.tf_name.visible=!0,this.box_blood.visible=!0,this.spineNodeBack.visible=!0,this.spineNodeFront.visible=!0,this.heroSk.visible=!0,this.getComponent(Laya.RigidBody).mask=-1,this.target=null}setDead(){console.log("MatchHeroSpr setDead: "+this.isMe),this._isRealDead=!0,this.alpha=.5,this.img_deadImg.visible=!0;var e=this.img_deadImg.y;this.tf_name.visible=!1,this.box_blood.visible=!1,this.spineNodeBack.visible=!1,this.spineNodeFront.visible=!1,this.heroSk.visible=!1,this.img_deadImg.y=0,this.img_deadImg.scale(0,0),this.getComponent(Laya.RigidBody).mask=1;var i=this;Laya.Tween.to(this.img_deadImg,{y:e,scaleX:1,scaleY:1},400,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){i.isMe&&g.intance.event(f.EVENT_GameScene_Gray)}))}updataBlood(){this._healthBar.value=this.roomPlayerDto.hp/this.roomPlayerDto.maxHp}addDiquanAndBaoqi(){if(this.destroyed||this.isSetDiquan)return;this.isSetDiquan=!0;var e=this.roomPlayerDto.equips;if(e instanceof Map){let L=Object.fromEntries(e);console.log("equipMap: "+JSON.stringify(L))}let i=_.intance.getGeneralValueById(25);var n=-1,r=0;for(let L=0;L<i.length;L++){let E=i[L][0];var s;if(e instanceof Map?s=e.get(E+""):s=e[E+""],s){r++;var o=new Pe(s.id),l=o.m_iQuality;(n==-1||l<n)&&(n=l)}}if(n!=-1){n<3&&(n=3);var c=Laya.Pool.getItemByCreateFun(la.aniSkPrefab,k.instance.aniSkPrefab.create,k.instance.aniSkPrefab),u=k.instance["diquanEffect"+n];r>4&&(r=4),c.init(u,"ani_"+r),this.spineNodeBack.addChild(c)}var p=this.heroVo.heroItem.level;if(!this.baoqiSpineSk){if(this.roomPlayerDto.npc==je.TYPE_Monster||p<4)return;this.baoqiSpineSk=new Laya.SpineSkeleton,this.spineNodeBack.addChild(this.baoqiSpineSk),this.baoqiSpineSk.animationName="animation";var d=k.instance["baoqiEffect"+p];this.baoqiSpineSk.templet=d}}setCurrentOutPut(){this.roomPlayerDto.hp>0&&(this.heroSk.needChangeAni=!1,this.heroSk.dataSource=this.heroVo,B.instance.matchWatcher&&this.heroSk.on(Laya.Event.CLICK,this,this.onHeroSkClick)),this.roomPlayerDto&&this.roomPlayerDto.no?k.instance.myPlayer&&k.instance.myPlayer.no==this.roomPlayerDto.no?(this.isOneTeam=!0,this.tf_name.color=Dt.BLUE):(this.isOneTeam=!1,this.tf_name.color=Dt.RED):(this.tf_name.color=wt.qualityColors[this.heroVo.heroItem.quality-1],b.instance.playerDto.pid==this.roomPlayerDto.id?this.isOneTeam=!0:this.isOneTeam=!1),this.roomPlayerDto.npc?this.tf_name.text=Se.getNumberSuffix(this.roomPlayerDto.name):this.tf_name.text=B.instance.setMatchAnonymousLabel(Be.abbreviateString(this.roomPlayerDto.name)),this.roomPlayerDto.country?this.img_country.skin=B.instance.setMatchAnonymousImg(D.instance.getCountryIcon(this.roomPlayerDto.country+"")):this.img_country.visible=!1,this.roomPlayerDto.no?(this.img_flag.skin=D.instance.getTeamFlag(this.roomPlayerDto.no),this.img_flag.visible=!0):this.img_flag.visible=!1,b.instance.playerDto.pid==this.roomPlayerDto.id?this.myRoleDirection=this.roomPlayerDto.dire:this.roleDirection=this.roomPlayerDto.dire}pos(e,i,n){if(super.pos(e,i,n),this.smallHeroImg){var r=k.instance.fromBigToSmall(e,i),s=r[0],o=r[1];this.smallHeroImg.pos(s,o,n)}return this}set visible(e){super.visible=e,this.smallHeroImg&&(this.smallHeroImg.visible=e)}set alpha(e){super.alpha=e,this.smallHeroImg&&(this.smallHeroImg.alpha=e)}onAwake(){}backAni(){}idle(){console.log(`${this.roomPlayerDto.id} 播放 待机 动画`),!this._isDead&&this.heroSk.isReady&&this.heroSk.play($e.ANI_daiji,!0,!1)}walk(){this._isDead||this.heroSk.isReady&&this.heroSk.play($e.ANI_xingzou,!0,!1)}run(){console.log(`${this.roomPlayerDto.id} 播放 跑动 动画`),!this._isDead&&this.heroSk.isReady&&this.heroSk.play($e.ANI_shanbi,!0,!1)}playAttackAnimation(e,i,n,r,s){if(!this._isDead){var o=_.intance.m_dicSkills.get(i);if(console.log(`${this.roomPlayerDto.id} 攻击 , 播放 ${i} 动画`),o.type==1){if(n&&k.instance.onSendAnimation(this.roomPlayerDto.id,i,$e.TYPE_GONGJI),this.isStop=!0,this.heroSk.isReady){var l=this.heroVo.heroItem.quality>3?this.heroVo.heroItem.quality:"";this.heroSk.play($e.ANI_gongji+l,!1)}if(n){var c=k.instance.getAttackTarget(this,o);if(c&&c.length>0){var u=c[0];u.roomPlayerDto.hp>0&&Laya.timer.frameOnce(1,this,this.onRealAttack,[0,o,u.roomPlayerDto.id])}}Laya.timer.frameOnce(20,this,()=>{this.isStop=!1,s(),this.aniChange=!0}),k.instance.playSound(1)}else if(o.type==2){if(n&&k.instance.onSendAnimation(this.roomPlayerDto.id,i,$e.TYPE_TI),this.isStop=!0,this.heroSk.isReady){var l=this.heroVo.heroItem.quality>3?this.heroVo.heroItem.quality:"";this.heroSk.play($e.ANI_ti+l,!1)}n&&Laya.timer.frameOnce(17,this,this.onRealAttack,[0,o]),Laya.timer.frameOnce(30,this,()=>{this.isStop=!1,s(),this.aniChange=!0}),k.instance.playSound(2)}else if(o.type==6)n&&k.instance.onSendAnimation(this.roomPlayerDto.id,i,$e.TYPE_DAZHAO),this.isStop=!0,this.heroSk.isReady&&(console.log("EnumHero.ANI_dazhao: "+$e.ANI_dazhao,e),this.heroSk.play($e.ANI_dazhao,!1)),n&&Laya.timer.frameOnce(30,this,this.onRealAttack,[e,o]),Laya.timer.frameOnce(70,this,()=>{this.isStop=!1,s(),this.aniChange=!0}),k.instance.playSound(2);else if(o.type==7){var p=0;if(n){var c=k.instance.getAttackTarget(this,o);if(c&&c.length>0){var u=c[0];p=u.roomPlayerDto.id,k.instance.onSendAnimation(this.roomPlayerDto.id,i,$e.TYPE_FEI,p)}}else p=r.get("defId");var d=Laya.Pool.getItemByCreateFun("rocketSpr",k.instance.rocketSprPrefab.create,k.instance.rocketSprPrefab),L=k.instance.matchHeroSprDic.get(p);d.init(e,this.x,this.y,L,n),k.instance.box_front.addChild(d),Laya.timer.frameOnce(2,this,()=>{s()}),k.instance.playSound(3)}else if(o.type==5){var v=[];if(this.displacementType=o.displacementType,n){var E=o.displacement>0?o.displacement:50;v=bt.rollCharacterByDir(this.x,this.y,this.roleDirection,E),k.instance.onSendAnimation(this.roomPlayerDto.id,i,$e.TYPE_FEI,-1,v[0],v[1])}else v[0]=r.get("newX"),v[1]=r.get("newY");if(this.isStop=!0,this.heroSk.isReady){var l=this.heroVo.heroItem.quality>3?this.heroVo.heroItem.quality:"";this.heroSk.play($e.ANI_ti+l,!1)}if(this.heroVo.heroItem.race!=4){var w=k.instance.huaEffect;this.huaSpineSk||(this.huaSpineSk=new Laya.SpineSkeleton,this.spineNodeFront.addChild(this.huaSpineSk)),this.huaSpineSk.templet=null,this.huaSpineSk.animationName="animation",this.huaSpineSk.templet=w,this.huaSpineSk.visible=!0,this.huaSpineSk.scaleX=this.directStr=="left"?1:-1,Laya.timer.frameOnce(15,this,()=>{this.onHuaComplate()})}n&&Laya.timer.frameOnce(17,this,this.onRealAttack,[0,o]),Laya.timer.frameOnce(5,this,this.onRoll,[v]),Laya.timer.frameOnce(20,this,()=>{this.isStop=!1,this.displacementType=0,s(),this.aniChange=!0}),k.instance.playSound(3)}else if(o.type==3){var v=[];if(n){var E=o.displacement>0?o.displacement:350;v=bt.rollCharacterByDir(this.x,this.y,this.roleDirection,E),k.instance.onSendAnimation(this.roomPlayerDto.id,i,$e.TYPE_HUA,-1,v[0],v[1])}else v[0]=r.get("newX"),v[1]=r.get("newY");if(this.getComponent(Laya.BoxCollider).isSensor=!0,this.isStop=!0,this.heroSk.isReady&&this.heroSk.play($e.ANI_hua,!1),this.heroVo.heroItem.race!=4&&!this.beyond){var w=k.instance.huaEffect;this.huaSpineSk||(this.huaSpineSk=new Laya.SpineSkeleton,this.spineNodeFront.addChild(this.huaSpineSk)),this.huaSpineSk.templet=null,this.huaSpineSk.animationName="animation",this.huaSpineSk.templet=w,this.huaSpineSk.visible=!0,this.huaSpineSk.scaleX=this.directStr=="left"?1:-1,Laya.timer.frameOnce(15,this,()=>{this.onHuaComplate()})}Laya.timer.frameOnce(5,this,this.onRoll,[v]),Laya.timer.frameOnce(20,this,()=>{this.getComponent(Laya.BoxCollider).isSensor=!1,this.isStop=!1,s(),this.aniChange=!0}),k.instance.playSound(3)}else if(o.type==4){n&&(this.isLockAni=!0,k.instance.onSendAnimation(this.roomPlayerDto.id,i,$e.TYPE_DANG)),this.heroSk.isReady&&this.heroSk.play($e.ANI_dang,!1),this.dunpaiSk||(this.dunpaiSk=k.instance.dunpaiTemplet.buildArmature(0),this.dunpaiSk.x=-45,this.skNode.addChild(this.dunpaiSk)),this.dunpaiSk.play(0,!0);var R=2e3,U=o.buff;if(U.length>2){var V=U[2],q=_.intance.m_dicBuffs.get(V);R=parseInt(q.time+"")}Laya.timer.once(R,this,()=>{this.isLockAni=!1,this.dunpaiSk&&(this.dunpaiSk.stop(),this.dunpaiSk.visible=!1),s(),this.aniChange=!0}),k.instance.playSound(2)}}}parseBuffDto(e,i){if(!this._isDead){var n=_.intance.m_dicSkills.get(e.skillId),r=_.intance.m_dicBuffs.get(e.buffId);if(console.log(`${this.roomPlayerDto.id} 攻击 , 播放 ${e.skillId} 动画, 播放 ${e.buffId} buff`),n.type){var s=e.expireTime;if(s>0){var o=r.buffAni;e.buffId==1008&&(o=n.flightEff);var l=_.intance.m_dicEffects.get(o),c=l.resource,u=Laya.Pool.getItemByCreateFun(la.aniSkPrefab,k.instance.aniSkPrefab.create,k.instance.aniSkPrefab),p=k.instance[c],d="animation";l.anim&&(d=l.anim),u.init(p,d,l.loop==1),l.layer==2?this.spineNodeBack.addChild(u):l.layer==1?this.skNode.addChild(u):this.spineNodeFront.addChild(u);var L=r.buffEffect;L&&L.length>0&&L.forEach(v=>{var E=v[0],w=v[1],R=v[2];E==1?w==1009&&(this.speedRate=1+R/1e4,k.instance.updateMyRoleSpeed()):E==6&&w==1&&g.intance.event(f.EVENT_UPDATE_REDECE_COOL,[w,R/1e4])}),Laya.timer.once(s,this,()=>{l.animEnd?(u&&u.play(l.animEnd,!1),Laya.timer.once(1e3,this,this.removeBuffDto,[L,u])):this.removeBuffDto(L,u)})}}}}removeBuffDto(e,i){i&&(i.stop(),i.visible=!1,i.removeSelf()),e&&e.length>0&&e&&e.length>0&&e.forEach(n=>{var r=n[0],s=n[1],o=n[2];r==1?s==1009&&(this.speedRate=1,k.instance.updateMyRoleSpeed()):r==6&&s==1&&g.intance.event(f.EVENT_UPDATE_REDECE_COOL,[s,0])})}parseBuffEffect(e){if(!this._isDead){var i=_.intance.m_dicBuffs.get(e.buffId),n=_.intance.m_dicEffects.get(i.buffAni);if(console.log(`${this.roomPlayerDto.id} 元素攻击 , 播放 ${e.buffId} 动画`),n){var r=n.resource,s=Laya.Pool.getItemByCreateFun(la.aniSkPrefab,k.instance.aniSkPrefab.create,k.instance.aniSkPrefab),o=k.instance[r],l="animation";n.anim&&(l=n.anim),s.init(o,l,n.loop==1),n.layer==2?this.spineNodeBack.addChild(s):n.layer==1?this.skNode.addChild(s):this.spineNodeFront.addChild(s);var c=n.totalSecond*1e3;Laya.timer.once(c,this,()=>{s&&(s.stop(),s.visible=!1,s.removeSelf())})}e.effectType==2?(this.roomPlayerDto.hp+=e.atk,console.log(`${this.roomPlayerDto.id} 变化的血量 ${e.atk} `),this.updateHealthBar()):this.beyond||this.showDamageLabelDetailDelay(e.atk,300,null)}}onRoll(e){this.inGround||Laya.Tween.to(this,{x:e[0],y:e[1]},330,Laya.Ease.linearNone,null,0,!0)}onHuaComplate(){this.huaSpineSk.stop(),this.huaSpineSk.visible=!1}onRealAttack(e,i,n=-1){if(console.log("onRealAttack",e,n,i.id),n>0)k.instance.onSendAttack(this.roomPlayerDto.id,n,1,i.id);else if(i.type==6){var r=k.instance.getAttackTarget(this,i);if(e>0){var s=[];r&&r.length>0&&r.forEach(l=>{l&&l.roomPlayerDto.hp>0&&s.push(l.roomPlayerDto.id)}),k.instance.onSendAttackBig(e,s)}else r&&r.length>0&&r.forEach(l=>{l&&l.roomPlayerDto.hp>0&&k.instance.onSendAttack(this.roomPlayerDto.id,l.roomPlayerDto.id,1,i.id)})}else{var r=k.instance.getAttackTarget(this,i);if(r&&r.length>0){var o=r[0];o.roomPlayerDto.hp>0&&k.instance.onSendAttack(this.roomPlayerDto.id,o.roomPlayerDto.id,1,i.id)}}}playBeijiAnimation(e){this._isDead||(console.log(`${this.roomPlayerDto.id} 播放 被击 动画`),this.heroSk.isReady&&this.heroSk.play($e.ANI_beiji,!1),Laya.timer.once(1e3,this,()=>{e()}))}playChuShengAnimation(e){this._isDead||(console.log(`${this.roomPlayerDto.id} 播放 出生 动画`),this.heroSk.isReady&&this.heroSk.play($e.ANI_ruchang,!1),Laya.timer.once(1e3,this,()=>{e()}))}attack(e=0,i=0,n=!0,r=null){if(console.log(`${this.roomPlayerDto.id} 攻击 s`),this._isAttacking||this._isDead){console.log(`${this.roomPlayerDto.id} 没有靠近目标或正在攻击中或技能冷却中或已死亡，无法攻击`);return}this._isAttacking=!0,this.playAttackAnimation(e,i,n,r,()=>{this._isAttacking=!1})}takeDamage(e,i){var n=e.skill,r=e.attackValue,s=e.defHp;console.log(`${this.roomPlayerDto.id} 受到 ${r} 伤害s`),!this._isDead&&(this.roomPlayerDto.hp=s,console.log(`${this.roomPlayerDto.id} 受到 ${r} 伤害`),this.updateHealthBar(i),this.beyond||this.showDamageLabel(n,r,e),this._isAttacking&&(console.log(`${this.roomPlayerDto.id} 正在攻击中，受到攻击中断攻击 暂时没有中断攻击`),Laya.timer.clear(this,this.onRealAttack),this._isAttacking=!1),this._isTakingDamage=!0,this.isLockAni=!0,this.beijiSk||(this.beijiSk=k.instance.beijiTemplet.buildArmature(0),this.skNode.addChild(this.beijiSk)),this.beijiSk.play(0,!1),this.playBeijiAnimation(()=>{this.beijiSk&&(this.beijiSk.stop(),this.beijiSk.visible=!1),this._isTakingDamage=!1,this.isLockAni=!1,this.backAni()}))}die(e=null){if(console.log(`${this.roomPlayerDto.id} 死亡s`),!this._isDead){if(console.log(`${this.roomPlayerDto.id} 死亡`),e){var i=bt.judgePosition(e.x-this.x,e.y-this.y);this.roleDirection=i}this._isDead=!0,this.heroSk.isReady&&this.heroSk.play($e.ANI_siwang,!1),Laya.timer.once(2e3,this,this.setDead)}}applySkillEffect(){var e=this.roomPlayerDto.buffDtoList;e&&e.length&&(console.log(`${this.roomPlayerDto.id} 受到技能效果: ${e}`),e.forEach(i=>{var n=_.intance.m_dicBuffs.get(i.buffId);n.triggerTiming==1&&this.roomPlayerDto.id==i.pid&&this.parseBuffDto(i,!1)}))}updateHealthBar(e=null){this.roomPlayerDto.hp<=0&&(this.roomPlayerDto.hp=0,this.die(e)),this._healthBar.value=this.roomPlayerDto.hp/this.roomPlayerDto.maxHp}showDamageLabel(e,i,n){if(i.length>1)for(var r=_.intance.m_dicSkills.get(e),s=r.section,o=s,l=0;l<i.length;l++){var c=i[l];this.showDamageLabelDetailDelay(c,o[l][1],n)}else i.length==1&&this.showDamageLabelDetailDelay(i[0],100,n);var u=this;if(n.allAtkValue!=0){var p=200;this.originalBlendMode=this.img_hp_bg.blendMode,this.flashCount=0,Laya.timer.loop(p,this,this.flashBlood)}}flashBlood(){var e=2;this.flashCount<e?this.img_hp_bg.blendMode===this.originalBlendMode?this.img_hp_bg.blendMode="lighter":(this.img_hp_bg.blendMode=this.originalBlendMode,this.flashCount++):(this.img_hp_bg.blendMode=this.originalBlendMode,Laya.timer.clear(this,this.flashBlood))}showDamageLabelDetailDelay(e,i,n){Laya.timer.once(i,this,this.showDamageLabelDetail,[e,n],!1)}showDamageLabelDetail(e,i){var n=Laya.Pool.getItemByCreateFun("damageNumber",k.instance.damageNumPrefab.create,k.instance.damageNumPrefab);n.init(e,i),this.addChild(n)}onSendMoveData(){if(!this._isDead){var e=this.speed,i=this.roleDirection,n=this.x,r=this.y;if(Math.abs(n-this.lastX)>2||Math.abs(r-this.lastY)>2||this.lastRoleDirection1!=i||this.lastSpeed1!=e||this.lastArea!=this.currArea){this.pos(n,r),this.lastX=n,this.lastY=r,this.lastRoleDirection1=i,this.lastSpeed1=e,this.lastArea=this.currArea;var s=b.instance.m_serverTime;this.timeStamp=s,k.instance.onSendMove(s,this.roomPlayerDto.id,e,i,n,r,this.currArea)}}}beiTui(e){var i=this.roomPlayerDto.id,n=this.x,r=this.y;if(Math.abs(n-this.lastX)>2||Math.abs(r-this.lastY)>2){this.lastX=n,this.lastY=r;var s=b.instance.m_serverTime;this.timeStamp=s,k.instance.onSendTargetMove(s,e,i,n,r)}}onPushMoveData(e,i){if(i!=this.lastMoveIndex)this.lastMoveIndex=i;else return;var n=e.time,r=e.speed,s=e.dire,o=e.x,l=e.y,c=e.area,u=e.npc;if(u){var p=B.instance.matchWatcher;if(p){if(this.roleDirection=s,this.speed=r,r==0?this.idle():this.walk(),this.currArea!=c&&(this.currArea=c),n<=this.timeStamp){console.log("位置数据忽略："+n+" < "+this.timeStamp);return}if(Laya.Tween.to(this,{x:o,y:l},this.monsterTime,Laya.Ease.linearNone,null,0,!0),this.smallHeroImg){var d=k.instance.fromBigToSmall(o,l),L=d[0],v=d[1];Laya.Tween.to(this.smallHeroImg,{x:L,y:v},this.monsterTime,Laya.Ease.linearNone,null,0,!0)}}}else{if(this.roleDirection=s,this.speed!=r?(this.speed=r,r==0?this.idle():this.walk()):r>0&&this.heroSk.isReady&&this.heroSk.sk.animationName==$e.ANI_daiji&&this.walk(),this.currArea!=c&&(this.currArea=c),n<=this.timeStamp){console.log("位置数据忽略："+n+" < "+this.timeStamp);return}if(Math.abs(o-this.lastX)>1||Math.abs(l-this.lastY)>1){var E=60;if(Laya.Tween.to(this,{x:o,y:l},E,Laya.Ease.linearNone,null,0,!0),this.smallHeroImg){var d=k.instance.fromBigToSmall(o,l),L=d[0],v=d[1];Laya.Tween.to(this.smallHeroImg,{x:L,y:v},E,Laya.Ease.linearNone,null,0,!0)}this.lastX=o,this.lastY=l}}}onPushTargetMoveData(e,i,n){if(e<=this.timeStamp){console.log("推人数据忽略："+e+" < "+this.timeStamp);return}(Math.abs(i-this.lastX)>2||Math.abs(n-this.lastY)>2)&&(this.pos(i,n),this.lastX=i,this.lastY=n)}sendToServer(e){}initBirth(e){e?this.createBirthSpine():this.onPlayBirthEnd()}createBirthSpine(){this.heroSk.visible=!1,this.tf_name.visible=!1,this.box_blood.visible=!1,this.chushengBackSpineSk||(this.chushengBackSpineSk=new Laya.SpineSkeleton,this.spineNodeBack.addChild(this.chushengBackSpineSk)),this.chushengFrontSpineSk||(this.chushengFrontSpineSk=new Laya.SpineSkeleton,this.spineNodeFront.addChild(this.chushengFrontSpineSk)),this.chushengBackSpineSk.on(Laya.Event.READY,this,this.onBirthReady);var e=k.instance.ruchangEffects[this.getRandomAnimationType()];this.destroyed||(this.chushengBackSpineSk.animationName="animation2",this.chushengBackSpineSk.templet=e,this.chushengFrontSpineSk.animationName="animation1",this.chushengFrontSpineSk.templet=e)}getRandomAnimationType(){return Math.floor(Math.random()*3)}onBirthReady(){Laya.timer.once(500,this,this.onPlayBirth1)}onPlayBirth1(){this.isLockAni=!0,this.heroSk.visible=!0,this.playChuShengAnimation(()=>{this.isLockAni=!1,this.aniChange=!0});try{this.chushengBackSpineSk.visible=!0,this.chushengBackSpineSk.play("animation2",!1),this.chushengFrontSpineSk.visible=!0,this.chushengFrontSpineSk.play("animation1",!1)}catch{}Laya.timer.once(1300,this,this.onPlayBirthEnd)}onPlayBirthEnd(){this.chushengBackSpineSk&&(this.chushengBackSpineSk.off(Laya.Event.READY,this,this.onPlayBirth1),this.chushengBackSpineSk.destroy(),this.chushengBackSpineSk.removeSelf()),this.chushengFrontSpineSk&&(this.chushengFrontSpineSk.destroy(),this.chushengFrontSpineSk.removeSelf()),this.box_d.visible=!0,this.tf_name.visible=!0,this.box_blood.visible=!0}onHeroSkClick(){k.instance.setOtherHero(this)}setFollowIcon(e){this.img_follow.visible=e}onDisable(){this.heroSk&&this.heroSk.off(Laya.Event.CLICK,this,this.onHeroSkClick),this.chushengBackSpineSk&&this.chushengBackSpineSk.off(Laya.Event.READY,this,this.onPlayBirth1),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),this.smallHeroImg=null}get monsterTime(){var e=B.instance.matchCoolDownTime;return e<30?this._monsterTime/.5:e<60?this._monsterTime/.8:this._monsterTime}set monsterTime(e){this._monsterTime=e}detectPlayer(){if(this.isFocusedOnPlayer||this.isPlayerWithinDetectionRange(k.instance.myHeroSpr))return this.target=k.instance.myHeroSpr,this.target!=null;let e=k.instance.matchHeroSprs;var i=-1,n=null;for(let r of e)r!=this&&this.isPlayerWithinDetectionRange(r)&&r.roomPlayerDto.hp>0&&(i==-1||i>r.roomPlayerDto.hp)&&(i=r.roomPlayerDto.hp,n=r);return n?(this.target=n,!0):!1}isPlayerWithoutDetectionRange(e){return bt.distancePoint(this.x,this.y,e.x,e.y)>this.exitRange}isPlayerWithinDetectionRange(e){return bt.distancePoint(this.x,this.y,e.x,e.y)<this.showRange}chaseLogic(e){var i=new Date().getTime();let n=bt.distancePoint(this.x,this.y,e.x,e.y);return this.skills.filter(o=>n<=o.skillItem.distance&&this.canUseSkill(o,i)).length>0}isAttackToPlayer(e){return e?this.chaseLogic(e):!1}initMatchSkill(){this.sharedCooldowns=0,this.skills=[];var e=this.roomPlayerDto.id,i=_.intance.m_dicMonsters.get(e);this.monsterTime=32*1e3/i.mov;var n=i.skillIds;n&&n.length&&n.forEach(r=>{var s=_.intance.m_dicSkills.get(r),o=new ML;o.id=r,o.skillItem=s,this.skills.push(o)})}canUseSkill(e,i){let n=e.lastUsed||0,r=this.sharedCooldowns||0;return i-n>=e.skillItem.cd&&i-r>=e.skillItem.commCd}useSkill(e,i){e.lastUsed=i,this.sharedCooldowns=i,this.attack(0,e.id)}onNpcSendMoveData(e,i){if(!this._isDead){var n=this.speed,r=this.roleDirection;if(Math.abs(e-this.lastX)>2||Math.abs(i-this.lastY)>2||this.lastRoleDirection1!=r||this.lastSpeed1!=n||this.lastArea!=this.currArea){this.lastX=e,this.lastY=i,this.lastRoleDirection1=r,this.lastSpeed1=n,this.lastArea=this.currArea;var s=b.instance.m_serverTime;this.timeStamp=s,k.instance.onNpcSendMove(s,this.roomPlayerDto.id,n,r,e,i,this.currArea)}}}};PL=h([iR("JIaWsVNzTK2dJIUcev60tQ")],PL);var NL=class extends Laya.Box{};var{regClass:aR}=Laya,OL=class extends NL{init(){var t=B.instance.currArenaItem.coinType;this.img_bing.skin="gameIcon/map/1001/img_bing_"+t+".png"}set dataSource(t){super.dataSource=t}};OL=h([aR("W3qDvbUmSa2SFKJ5iEmjsg")],OL);var HL=class extends Laya.Box{};var{regClass:nR}=Laya,UL=class extends HL{init(){var t=B.instance.currArenaItem.coinType;this.img_bing.skin=D.instance.getItemIcon(t),k.instance.allOrders||(k.instance.allOrders=[]),k.instance.allOrders.push(this.img_mtl)}set dataSource(t){super.dataSource=t}};UL=h([nR("UmH7VSkYTd6D8QA2Eu2OYw")],UL);var VL=class extends Laya.Box{};var{regClass:rR}=Laya,FL=class extends VL{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e;var i=e;this.roomPlayer=B.instance.playerJoinDic.get(i),this.roomPlayer&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.tf_name.text=B.instance.setRoomAnonymousLabel(Be.abbreviateString(this.roomPlayer.name));let e=this.roomPlayer.icon;this.playerIcon.headSkin=e;var i=this.roomPlayer.id==b.instance.playerDto.pid,n=i?"#ffce58":"#96d2fc";this.tf_name.color=n}toDetail(){}};FL=h([rR("YQ6pCsb4S0ibRtZ73-V9-Q")],FL);var GL=class extends Laya.Box{};var{regClass:sR}=Laya,KL=class extends GL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e;var i=e;i&&(this.roomRankPlayerDto=B.instance.playerJoinDic.get(i),this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.tf_name.text=B.instance.setRoomAnonymousLabel(Be.abbreviateString(this.roomRankPlayerDto.name));let e=this.roomRankPlayerDto.icon;this.playerIcon.headSkin=e;var i=this.roomRankPlayerDto.id==b.instance.playerDto.pid,n=i?"#ffce58":"#96d2fc";this.tf_name.color=n}toDetail(){}};KL=h([sR("U8opa1YySD-Mm6RRAvEq9g")],KL);var qL=class extends Laya.Box{};var{regClass:oR}=Laya,WL=class extends qL{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){this.roomPlayerDto=e,this.roomPlayerDto&&(this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.tf_rank.text=this.roomPlayerDto.rankNum+"";let e=this.roomPlayerDto.icon;this.playerIcon.headSkin=e,this.roomPlayerDto.npc?this.tf_name.text=Se.getNumberSuffix(this.roomPlayerDto.name):this.tf_name.text=B.instance.setMatchAnonymousLabel(Be.abbreviateString(this.roomPlayerDto.name)),this.tf_kill.text=this.roomPlayerDto.kill+"",k.instance.myPlayer&&this.roomPlayerDto.id==k.instance.myPlayer.id?(this.img_bg.skin="res/match1/img_ph2.png",this.tf_rank.color="#000000",this.tf_name.color="#ffe64b",this.img_kill.filters=[Ee.YELLOW],this.tf_kill.color="#ffe64b",this.box_item.x=6):(this.img_bg.skin="res/match1/img_ph.png",this.tf_rank.color="#ffffff",this.tf_name.color="#ffffff",this.img_kill.filters=null,this.tf_kill.color="#ffffff",this.box_item.x=15)}};WL=h([oR("XTVFXeI_R768e0Elv_ePAA")],WL);var YL=class extends Laya.Scene{};var{regClass:lR}=Laya,zL=class extends YL{constructor(){super(...arguments);this.type=1}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onOpened(e){this.type=e}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}onEnable(){console.log("MatchReadyRT onEnable"),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_random.on(Laya.Event.CLICK,this,()=>{this.generateName()}),this.btn_enter.on(Laya.Event.CLICK,this,()=>{var e=this.input_username.text;if(console.log("phyBtn"),e==""){alert("用户名不能为空");return}ot.instance.openId=e,ot.instance.initSocket()})}generateRandomName(e){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n="";for(let r=0;r<e;r++){let s=Math.floor(Math.random()*i.length);n+=i.charAt(s)}return n}generateName(){this.input_username.text=this.generateRandomName(8)}onDestroy(){}};zL=h([lR("mOlMVGD3TRCKNoddhyUGLw")],zL);var jL=class extends Laya.Dialog{};var{regClass:cR}=Laya,$L=class extends jL{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){}onOpened(e){this.updateBattleCD()}updateBattleCD(){var e=B.instance.matchDto.startTime-B.instance.matchDto.nowTime;console.log("updateBattleCD: "+e),B.instance.startCoolDownTime=Math.round(e/1e3),B.instance.startCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):(Laya.timer.clear(this,this.onSetCoolTime),this.close())}onSetCoolTime(){B.instance.startCoolDownTime>0?(this.fontClip_reduceTime.value=B.instance.startCoolDownTime+"",this.scaleEffect(),B.instance.startCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),B.instance.matchDto.arenaType==K.ARENA_TYPE_PVE?this.close():this.onMatchStartEnd())}scaleEffect(){var e=this;Laya.Tween.to(this.fontClip_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e.fontClip_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}onMatchStartEnd(){Laya.timer.once(5e3,this,this.close)}onDisable(){this.removeEvent(),B.instance.stopAll=!1}removeEvent(){Laya.timer.clearAll(this),Laya.Tween.clearAll(this)}};$L=h([cR("xpPoFvX_SqiYMO5AaOwGyA")],$L);var XL=class extends Laya.Box{};var{regClass:uR}=Laya,QL=class extends XL{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.itemVo=e,this.itemVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.itemVo&&(this.knapsackItem.showAdd=!0,this.knapsackItem.dataSource=this.itemVo)}toDetail(){!this.itemVo||!this.itemVo.needTip||(this.itemVo.type===Ge.TYPE_Equipment?A.intance.openModule(y.EquipDetailDialog,this.itemVo):A.intance.openModule(y.KnapsackTipDialog,this.itemVo))}};QL=h([uR("WXpxCvqlQ2mKdcJCYlqOeg")],QL);var JL=class extends Laya.Scene{};var{regClass:mR}=Laya,ZL=class extends JL{constructor(){super(...arguments);this.liveNum=0}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP,k.instance.init()}onOpened(e){var i=B.instance.matchDto.startTime-B.instance.matchDto.nowTime;i>0&&A.intance.openModule(y.MatchReadyView);var n=B.instance.matchDto.arenaId,r=B.instance.matchWatcher;r&&(this.headBox.visible=!1,this.btn_exit.on(Laya.Event.CLICK,this,this.onExitClick),this.img_kill.visible=!1,this.box_skills.visible=!1,this.img_smallMap.on(Laya.Event.CLICK,this,this.onSmallMapClick),b.instance.playerDto.killStatus==1&&(this.btn_banAccount.visible=!0,this.btn_banAccount.on(Laya.Event.CLICK,this,this.onBanAccountClick))),this.btn_exit.visible=r,this.tf_live.visible=r;var s=_.intance.m_dicArenaDic.get(n);B.instance.currArenaItem=s;var o=B.instance.currArenaItem.mapid,l=Laya.loader.getRes("gameIcon/map/map_"+o+".lh");this.img_smallMap.skin="res/match1/img_map_"+o+".png";var c=Laya.Pool.getItemByCreateFun("MatchMap1001",l.create,l);c.init(),k.instance.gameMap=c,k.instance.box_players=c.box_players,k.instance.box_behind=c.box_behind,k.instance.box_front=c.box_front,this.matchBox.removeChildren(),this.matchBox.addChild(c);var u=b.instance.playerDto;this.tf_roleName.text=u.name;let p=u.icon;this.playerIcon.headSkin=p,k.instance.initMatch(this,this.onInitEnd),Ne.instance.sendCustumEvent(42);var d=B.instance.matchDto.roomId;if(this.arenaNo.text=d+"",B.instance.roomDto){var L=B.instance.roomDto.nodeId;if(L){var v=_.intance.m_dicNodes.get(L);this.nodeDelaySign.dataSource=v,this.nodeDelaySign.startTest()}}}onSmallMapClick(e){var i=new Laya.Point(e.stageX,e.stageY);let n=this.img_smallMap.globalToLocal(i,!1);k.instance.clickSmallMapToMove(n),console.log("onSmallMapClick: ",e.stageX,e.stageY,"====",n.x,n.y)}onStageClick(e){console.log("onStageClick: ",e.stageX,e.stageY,e)}onInitEnd(e){try{e.updateSkill()}catch(i){console.warn(i)}e.updateKill(),e.updateBattleCD(),Laya.timer.frameLoop(10,e,e.updateCharactersOrder)}onRestoreData(){k.instance.updateMatch(this,this.onInitEnd)}updateSkill(){var e=B.instance.matchWatcher;if(!e){var i=k.instance.myPlayer,n;i.heroId?n=i.heroId:n=$e.DEFAULT_HERO_ID;var r=_.intance.m_dicHeros.get(n),s=r.skillIds;console.log("updateSkill",s);for(var o=s.length,l=0;l<o;l++){var c=s[l],u=_.intance.m_dicSkills.get(c),p=this["matchSkill"+(l+1)];p.keyNum=l+1,p.dataSource=[u,null,null,1];var d;i.skillCd instanceof Map?d=i.skillCd.get(c):d=i.skillCd[c],d&&p.updateSkillCooldown(d),p.updateGlobalCooldown(i.commonCd),p.visible=!0}var L=[],v=i.equips;if(v){let w=_.intance.getGeneralValueById(26);if(w){var E=0;w.forEach(R=>{var U=R[0],V;if(v instanceof Map?V=v.get(U+""):V=v[U+""],V){var q=V.id,te=_.intance.m_dicItems.get(q);te==null&&console.warn("itemItem is null id: "+q);var ee=te.skillId,X=_.intance.m_dicSkills.get(ee),re=this["matchSkill"+(o+E+1)];re.keyNum=o+E+1,re.dataSource=[X,te,U,V.count];var oe=i.cardCd.get(U);oe&&re.updateSkillCooldown(oe),re.disabled=V.count<=0,re.visible=!0,E++}})}}}}updateKill(){k.instance.myPlayer&&(this.tf_kill.text=k.instance.myPlayer.kill+""),this.list_rank.array=this.getSortPlayer(k.instance.matchHeroDic.values),this.tf_remainer.text=this.liveNum+"",this.tf_total.text="/ "+k.instance.matchHeroDic.values.length}getSortPlayer(e){var i=e.slice(),n=i.sort((o,l)=>l.score-o.score),r=[];this.liveNum=0;var s=1;return n.forEach(o=>{o.rankNum=s,o.hp>0&&this.liveNum++,(s<4||o.id==b.instance.playerDto.pid)&&r.push(o),s++}),r}updateBattleCD(){B.instance.matchDto.arenaType==K.ARENA_TYPE_PVE?(this.list_rank.visible=!1,B.instance.matchCoolDownTime=Math.round((B.instance.matchDto.nowTime-B.instance.matchDto.startTime)/1e3),this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):(B.instance.matchCoolDownTime=Math.round(B.instance.matchDto.remainderCd/1e3),B.instance.matchCoolDownTime>0?(this.onSetCoolTime(),Laya.timer.loop(1e3,this,this.onSetCoolTime)):Laya.timer.clear(this,this.onSetCoolTime))}onSetCoolTime(){B.instance.matchDto.arenaType==K.ARENA_TYPE_PVE?(this.fontClip_reduceTime.value=ce.format(B.instance.matchCoolDownTime,":",!1),this.fontClip_reduceTime.skin="res/match1/fontClip_1.png",B.instance.stopAll||B.instance.matchCoolDownTime++):B.instance.matchCoolDownTime>=0?(this.fontClip_reduceTime.value=ce.format(B.instance.matchCoolDownTime,":",!1),B.instance.matchCoolDownTime>90?this.fontClip_reduceTime.skin="res/match1/fontClip_1.png":B.instance.matchCoolDownTime>10?this.fontClip_reduceTime.skin="res/match1/fontClip_2.png":(this.fontClip_reduceTime.skin="res/match1/fontClip_3.png",this.scaleEffect()),B.instance.stopAll||B.instance.matchCoolDownTime--):(Laya.timer.clear(this,this.onSetCoolTime),Laya.timer.once(1e4,this,this.checkMatchRankData))}checkMatchRankData(){B.instance.checkMatchRankData()}scaleEffect(){var e=this;Laya.Tween.to(this.fontClip_reduceTime,{scaleX:1.3,scaleY:1.3},200,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.Tween.to(e.fontClip_reduceTime,{scaleX:1,scaleY:1},200,Laya.Ease.linearInOut)}))}updateCharactersOrder(){k.instance.allOrders.sort((e,i)=>e.y-i.y);for(let e=0;e<k.instance.allOrders.length;e++)k.instance.allOrders[e].zOrder=e;kr.instance.update()}onFirstBloodPush(e){var i=e.pid,n=k.instance.matchHeroDic.get(i);let r=n.icon;this.playerIcon_first.headSkin=r,this.img_firstBlood.visible=!0,this.img_firstBlood.alpha=0,this.img_firstBlood.y=-200,Laya.Tween.to(this.img_firstBlood,{y:92,alpha:1},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onFirstBlood1))}onFirstBlood1(){this.zi_firstBlood.scale(1,1),Laya.Tween.to(this.zi_firstBlood,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFirstBlood2))}onFirstBlood2(){Laya.Tween.to(this.zi_firstBlood,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onFirstBlood3))}onFirstBlood3(){Laya.Tween.to(this.img_firstBlood,{y:-200,alpha:0},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onFirstBlood4),1500)}onFirstBlood4(){this.img_firstBlood.visible=!1}onMutiKillPush(e){this.fontClip_kill.value=e.kill+"";var i=!1;e.kill>=3?(i=!0,this.img_mutiKill.skin="res/match1/img_kill_3s.png"):this.img_mutiKill.skin="res/match1/img_kill_2s.png";var n=e.pid,r=k.instance.matchHeroDic.get(n);let s=r.icon;this.playerIcon_second.headSkin=s,this.img_mutiKill.visible=!0,this.img_mutiKill.alpha=0,this.img_mutiKill.y=-200,Laya.Tween.to(this.img_mutiKill,{y:175,alpha:1},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onMutiKill1,[i]))}onMutiKill1(e){this.zi_mutiKill.scale(1,1),e?Laya.Tween.to(this.zi_mutiKill,{scaleX:1.5,scaleY:1.5},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMutiKill2)):this.onMutiKill3(2e3)}onMutiKill2(){Laya.Tween.to(this.zi_mutiKill,{scaleX:1,scaleY:1},200,Laya.Ease.linearNone,Laya.Handler.create(this,this.onMutiKill3,[1500]))}onMutiKill3(e){Laya.Tween.to(this.img_mutiKill,{y:-200,alpha:0},200,Laya.Ease.linearInOut,Laya.Handler.create(this,this.onMutiKill4),e)}onMutiKill4(){this.img_mutiKill.visible=!1}onGameSceneGray(){this.matchBox.gray=!0}onBanAccountClick(){A.intance.openModule(y.BanAccountView)}async onExitClick(){var e=B.instance.matchWatcher;e?await I.requestPost("wxgame/room/leave",{roomId:B.instance.matchDto.roomId})?(ot.instance.isMatching=!1,this.setToAirdropScene()):T.instance.notice(m.instance.getLanguage(135)):console.log("不是观察者，不能退出")}setToAirdropScene(){k.instance.arenaType=B.instance.matchDto.arenaType,k.instance.arenaType==K.ARENA_TYPE_PVE?se.intance.setCurrentScene(Y.M_SCENE_PVE):se.intance.setCurrentScene(Y.M_SCENE_AIRDROP)}onEnable(){console.log("MatchScene onEnable"),g.intance.on(f.UPDATE_KILL_NUM,this,this.updateKill),g.intance.on(f.EVENT_RESTORE_DATA,this,this.onRestoreData),g.intance.on(f.EVENT_FirstBlood,this,this.onFirstBloodPush),g.intance.on(f.EVENT_MutiKill,this,this.onMutiKillPush),g.intance.on(f.EVENT_GameScene_Gray,this,this.onGameSceneGray),Laya.stage.on(Laya.Event.FOCUS,this,this.onWindowFocus)}onWindowFocus(){k.instance.sendRestoreData()}onDisable(){g.intance.off(f.UPDATE_KILL_NUM,this,this.updateKill),g.intance.off(f.EVENT_RESTORE_DATA,this,this.onRestoreData),g.intance.off(f.EVENT_FirstBlood,this,this.onFirstBloodPush),g.intance.off(f.EVENT_MutiKill,this,this.onMutiKillPush),g.intance.off(f.EVENT_GameScene_Gray,this,this.onGameSceneGray),Laya.stage.off(Laya.Event.FOCUS,this,this.onWindowFocus),Laya.timer.clearAll(this),B.instance.clearData()}};ZL=h([mR("sX0uLhOQSmm8b-_sHNqe5w")],ZL);var{regClass:pR,property:q6e}=Laya,Cc=class extends Laya.Script{constructor(){super()}onAwake(){}onStart(){k.instance.playMusic()}onLateUpdate(){k.instance.moveGameWindow()}onDisable(){Laya.timer.clearAll(this)}};Cc=h([pR("Ply19emtSrqrBk7nHXToAQ")],Cc);var e_=class extends Laya.Box{};var{regClass:hR}=Laya,t_=class extends e_{constructor(){super();this.isBig=!1;this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.skillItem=e,this.skillItem&&(this.txt_num.text="",this.img_icon.skin=D.instance.getMatchSkillIcon(this.skillItem.icon))}};t_=h([hR("iwuFUCOEQRyOjxpy6IkQ2Q")],t_);var i_=class extends Laya.Button{};var{regClass:dR}=Laya,a_=class extends i_{constructor(){super();this.isAddEvent=!1;this.isCanClick=!0;this.skillCooldown=5e3;this.thisGlobalCooldown=1e4;this.globalCooldown=1e4;this.remainingSkillCooldown=0;this.remainingGlobalCooldown=0;this.reduceCooldown=0}onEnable(){this.addEvent()}addEvent(){this.isAddEvent||(g.intance.on(f.EVENT_CLICK_NUM,this,this.onNumberClick),g.intance.on(f.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),g.intance.on(f.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),g.intance.on(f.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.onSkillButtonClick),this.on(Laya.Event.MOUSE_UP,this,this.onSkillButtonUp))}onNumberClick(e){e==this.keyNum&&this.onSkillButtonClick(null)}set dataSource(e){super.dataSource=e,this.skillItem=e[0],this.itemItem=e[1],this.equipPos=e[2],this.count=e[3],this.skillItem&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.skillItem&&(this.skillIconItem.isBig=this.skillItem.icon=="1001",this.skillIconItem.dataSource=this.skillItem,this.itemItem?(this.txt_num.visible=!0,this.updateCount(),this.skillCooldown=this.itemItem.cd*1e3):(this.txt_num.visible=!1,this.skillCooldown=this.skillItem.cd),this.thisGlobalCooldown=this.skillItem.commCd,Laya.timer.frameLoop(1,this,this.updateCooldown))}onSkillButtonUp(e){e&&e.stopPropagation(),$n.clearClickFilter(this)}onSkillButtonClick(e){if(e&&e.stopPropagation(),this.itemItem)if(this.remainingSkillCooldown+this.reduceCooldown<=0){if(console.log("道具技能释放！"),k.instance.myHeroSpr._isDead){console.log("自己已死亡，无法释放道具技能！");return}Laya.Tween.to(this,{scaleX:.8,scaleY:.8},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.linearNone)}));var i=this.itemItem.id;this.skillItem.type==6||this.skillItem.type==7?k.instance.onSendUse(!0,this.equipPos):k.instance.onSendUse(!1,this.equipPos)}else console.log("技能或全局冷却还在进行中，无法释放。");else this.remainingSkillCooldown+this.reduceCooldown<=0&&this.remainingGlobalCooldown+this.reduceCooldown<=0?(console.log("技能释放！"),Laya.Tween.to(this,{scaleX:.8,scaleY:.8},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},100,Laya.Ease.linearNone)})),k.instance.myHeroSpr.attack(0,this.skillItem.id),this.updateSkillCooldown(this.skillCooldown),g.intance.event(f.EVENT_UPDATE_GLOBAL_COOL,[this.thisGlobalCooldown])):console.log("技能或全局冷却还在进行中，无法释放。")}updateSkillCooldown(e){this.remainingSkillCooldown=e}updateItemRemainCooldown(e){var i=e[0];console.log("updateItemRemainCooldown _skillId: "+i),this.itemItem&&i==this.skillItem.id&&(this.count=e[1],this.updateCount(),this.updateSkillCooldown(this.skillCooldown))}updateCount(){this.txt_num.text=this.count+"",this.disabled=!this.count}updateReduceCooldown(e,i){console.log("updateReduceCooldown skillType: "+e),this.skillItem&&e==this.skillItem.type&&(this.reduceCooldown=this.skillCooldown*i)}updateGlobalCooldown(e){this.itemItem||(this.globalCooldown=e,this.remainingGlobalCooldown=e)}updateCooldown(){if(this.remainingSkillCooldown+this.reduceCooldown>0){this.remainingSkillCooldown-=Laya.timer.delta;let e=(this.remainingSkillCooldown+this.reduceCooldown)/1e3;this.txt_time.text=e.toFixed(1),this.updateCooldownMask(this.skillCooldownMask,(this.remainingSkillCooldown+this.reduceCooldown)/this.skillCooldown,"#000000"),this.img_djs.visible=!0,this.txt_time.visible=!0}else this.img_djs.visible=!1,this.txt_time.visible=!1;this.remainingGlobalCooldown+this.reduceCooldown>0?(this.remainingGlobalCooldown-=Laya.timer.delta,this.updateCooldownMask(this.globalCooldownMask,(this.remainingGlobalCooldown+this.reduceCooldown)/this.globalCooldown,"#00000036"),this.globalCooldownMask.visible=!0):this.globalCooldownMask.visible=!1,this.skillIconItem.gray=this.remainingSkillCooldown+this.reduceCooldown>0||this.remainingGlobalCooldown+this.reduceCooldown>0}updateCooldownMask(e,i,n){let r=this.width/2,s=this.width/2,o=this.height/2;e.graphics.clear(),e.graphics.drawPie(s,o,r,-90+360*(1-i),270,n)}onDisable(){g.intance.off(f.EVENT_UPDATE_ITEM_SKILL_COOL,this,this.updateItemRemainCooldown),g.intance.off(f.EVENT_UPDATE_GLOBAL_COOL,this,this.updateGlobalCooldown),g.intance.off(f.EVENT_UPDATE_REDECE_COOL,this,this.updateReduceCooldown),g.intance.offAllCaller(this),Laya.timer.clearAll(this)}};a_=h([dR("x6t-z1VuR52yXWju0qxGBg")],a_);var n_=class extends Laya.Box{};var{regClass:fR}=Laya,r_=class extends n_{constructor(){super(...arguments);this.isReady=!1;this.isGo=!1;this.target=null;this.isMe=!1;this.itemPos=0;this.gravity=.5;this.time=0}onEnable(){this.sk.on(Laya.Event.READY,this,this.onSkReady)}onSkReady(){console.log("RocketSpr onSkReady, this.isGo: ",this.isGo),this.isReady=!0,this.isGo==!1&&(this.initRocket(),this.calculateVelocity())}init(e,i,n,r,s){console.log("RocketSpr init, _isMe: ",s,e,this.isReady,this.x,this.y),this.startX=i,this.startY=n,this.target=r,this.isMe=s,this.itemPos=e,this.time=0,this.sk.rotation=270,this.pos(this.startX,this.startY),console.log("RocketSpr init, this.x, this.y: ",this.x,this.y),this.isReady?(this.isGo=!0,this.initRocket(),this.calculateVelocity()):this.isGo=!1}initRocket(){this.sk.play("animation1",!0,!0),Laya.timer.frameLoop(1,this,this.update)}calculateVelocity(){let e=this.target.x-this.startX,i=this.target.y-this.startY,n=120;this.vx=e/n,this.vy=(i-.5*this.gravity*n*n)/n}update(){if(this.time+=1,this.updateTarget(),this.x=this.startX+this.vx*this.time,this.y=this.startY+this.vy*this.time+.5*this.gravity*this.time*this.time,this.updateRotation(),this.target){let e=this.target.x,i=this.target.y;Math.abs(this.x-e)<10&&Math.abs(this.y-i)<10&&this.hitTarget()}}updateTarget(){let e=this.target.x,i=this.target.y,n=e-this.startX,r=i-this.startY,s=60;this.vx=n/s,this.vy=(r-.5*this.gravity*s*s)/s}updateRotation(){let e=Math.atan2(this.target.y-this.y,this.target.x-this.x);this.sk.rotation=e*(180/Math.PI)}hitTarget(){console.log("Rocket hit the target!"),Laya.timer.clear(this,this.update),this.onRealAttack(),this.playExplosion()}playExplosion(){this.sk.play("animation2",!1,!0),Laya.timer.once(1e3,this,()=>{this.removeSelf()})}onRealAttack(){this.isMe&&k.instance.onSendAttackBig(this.itemPos,[this.target.roomPlayerDto.id])}onDisable(){console.log("RocketSpr onDisable!"),Laya.timer.clearAll(this),Laya.Pool.recover("rocketSpr",this),this.target=null}};r_=h([fR("Fa_gpkaEQ3yUIurydSEtrw")],r_);var s_=class extends Laya.Dialog{};var{regClass:yR}=Laya,o_=class extends s_{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink)}onLink(e){console.log("点击了超链接："+e)}onRefresh(){Ne.instance.reload()}setOpenData(e){if(e){var i=e[0];if(e.length>2?(this.alertTitle.text=e[1],this.alertDesc.text=e[2]):this.alertDesc.text=e[1],i==1){this.canClose=!1;var n=this.getChildByName("close");n.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1;this.alertDesc.height=this.alertDesc.textField.textHeight+20}}onDisable(){}close(e){this.canClose&&super.close(e)}};o_=h([yR("xATCTfSDSkaGtuYn669ofQ")],o_);var l_=class extends Laya.Dialog{};var{regClass:bR}=Laya,c_=class extends l_{constructor(){super()}onEnable(){this.img_show.on(Laya.Event.CLICK,this,this.close)}setOpenData(t){t&&(this.img_show.skin=t)}onDisable(){}};c_=h([bR("RUMV5hpfRdCRzhO9yBDCzg")],c_);var u_=class extends Laya.Dialog{};var{regClass:gR}=Laya,m_=class extends u_{constructor(){super();this.canClose=!0}onEnable(){this.btn_refresh.on(Laya.Event.CLICK,this,this.onRefresh),this.alertDesc.on(Laya.Event.LINK,this,this.onLink),this.btn_left.on(Laya.Event.CLICK,this,this.onChangePage,[!1]),this.btn_right.on(Laya.Event.CLICK,this,this.onChangePage,[!0])}onLink(e){console.log("点击了超链接："+e)}onRefresh(){Ne.instance.reload()}setOpenData(e){if(e){var i=e[0],n=e[1];if(this.list=n.list,this.pageNo=1,this.pageTotal=this.list.length,this.pageTotal<2&&(this.box_page.visible=!1),this.updatePageList(),i==1){this.canClose=!1;var r=this.getChildByName("close");r.visible=!1,this.btn_refresh.visible=!0}else this.btn_refresh.visible=!1}}async onChangePage(e){if(e)this.pageNo++;else{if(this.pageNo<=1)return;this.pageNo--}this.updatePageList()}updatePageList(){this.txt_page.text=this.pageNo+"/"+this.pageTotal,this.btn_left.disabled=this.pageNo<=1,this.btn_right.disabled=this.pageNo>=this.pageTotal,this.setNoticeDetail()}setNoticeDetail(){if(this.pageNo){var e=this.list[this.pageNo-1];e&&(this.alertTitle.text=m.instance.getMultiLan(e.title),this.alertDesc.text=m.instance.getMultiLan(e.contents))}}onDisable(){}close(e){this.canClose&&super.close(e)}};m_=h([gR("iB7UvqEcQ1GFKaVEIy6Bmw")],m_);var p_=class extends Laya.Box{};var{regClass:LR}=Laya,h_=class extends p_{};h_=h([LR("ON5bkSuKSE2gwPDUnRGmrw")],h_);var d_=class extends Laya.Box{};var{regClass:_R}=Laya,f_=class extends d_{onEnable(){}notice(t){this.zOrder=1e7;let e=t;this.label_tf.text=e,this.label_tf.x=68,this.image_bg.width=68*2+this.label_tf.textField.textWidth,e.length/45>1&&(this.image_bg.height=this.label_tf.textField.textHeight+55),this.alpha=1,this.visible=!0}get view(){return this}get width(){return this.image_bg.width}onDisable(){console.log("txtNotice recover"),Laya.Pool.recover("txtNotice",this)}};f_=h([_R("Nm27xWbYSG6mj-EXqPOZ_A")],f_);var y_=class extends Laya.Dialog{};var{regClass:vR}=Laya,b_=class extends y_{constructor(e){super();this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.propValue=1;this.propNum=1;this.propData=null;this.heroPk=null;this.chooseType=1;this.subType=1;this.items=[]}onEnable(){this.txt_num.text="1",this.listPanel1.visible=!1,this.btn_subtract.on(Laya.Event.CLICK,this,this.changePropNum,[!1]),this.btn_add.on(Laya.Event.CLICK,this,this.changePropNum,[!0]),this.listPanel1.selectHandler=new Laya.Handler(this,this.handleSelectProp),this.btn_transfer.on(Laya.Event.CLICK,this,this.onBtnTramsfer),g.intance.on(f.SHOW_EQUIP_TIP,this,this.showEquipTip),this.initPropList()}setOpenData(e){e&&(this.chooseType=e[0],this.subType=e[1],this.chooseType==Ge.CHOOSE_Wallet?(this.btn_transfer.label=m.instance.getUILang("Transfer in"),this.box_count.visible=!0,this.tf_title.text=m.instance.getUILang("Select tickets")):(this.heroPk=e[2],this.btn_transfer.label=m.instance.getUILang("Put on"),this.box_count.visible=!1,this.tf_title.text=m.instance.getUILang("Select equipment")))}changePropNum(e){e?this.propValue+=1:this.propValue=Math.max(this.propValue-1,1),this.txt_num.text=`${this.propValue}`}async initPropList(){await gt.instance.ownerBag();var e=this.getItemByType();this.propData=e,this.listPanel1.array=e,this.listPanel1.selectedIndex=0,this.listPanel1.visible=!0}handleSelectProp(e){if(e!==-1){this.propValue=1,this.txt_num.text="1";let i=this.listPanel1.selectedItem;i&&(this.propNum=Number(i._m_iNum),console.log(this.propNum))}}showEquipTip(e){if(this.chooseType!==Ge.CHOOSE_Wallet){let i=e.data;this.EquipDetailBox.dataSource=i,e.positionX<500?this.EquipDetailBox.x=e.positionX+175:this.EquipDetailBox.x=e.positionX-440,this.EquipDetailBox.visible=!0,this.equipBgBox.visible=!0,this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips)}}hideTips(){this.EquipDetailBox.visible=!1,this.equipBgBox.visible=!1,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}async onBtnTramsfer(){let e=this.propData[this.listPanel1.selectedIndex],i=this.propValue,n={amount:this.propValue,propData:e};g.intance.event(f.EVENT_PVE_CHOOSE_PROP,n),this.close()}getItemByType(){this.items=[];let e=_.intance.getArrFromDicItemByKey("subType",12),i=_.intance.getArrFromDicItemByKey("id",1086);return console.log("skillItem",e,"ticketItem",i),[...i,...e].forEach(r=>{var s=new Pe(r.id);s.newAddCnt=1,this.items.push(s)}),this.items}onDisable(){this.btn_subtract.off(Laya.Event.CLICK,this,this.changePropNum),this.btn_add.off(Laya.Event.CLICK,this,this.changePropNum),this.btn_transfer.off(Laya.Event.CLICK,this,this.onBtnTramsfer),this.stage.off(Laya.Event.CLICK,this,this.hideTips),g.intance.off(f.SHOW_EQUIP_TIP,this,this.showEquipTip)}};b_=h([vR("aFkC9qlwTMKGR-gqNwAz2g")],b_);var g_=class extends Laya.Box{};var{regClass:xR}=Laya,L_=class extends g_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_record.on(Laya.Event.CLICK,this,this.onBtnRecord)}set dataSource(e){if(!e)return;this.playerData=e,super.dataSource=e;let i=e.id===b.instance.playerDto.pid,n=e.rank;if(this.tf_name.text=e.name,this.tf_union.text=m.instance.getMultiLan(e.shortUnionName),this.tf_rank.text=n,this.tf_time.text=ce.formatWithSecondByMs(e.score),this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${Q.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=D.instance.getCountryIcon(e.country),e.icon){let r=D.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=r,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=n<4?`res/rank/img_guild_${n}di.png`:"res/rank/img_guild_4di.png",n<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${n}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=i?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}onCopy(){let e=this.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}onBtnRecord(){this.playerData&&A.intance.openModule(y.PveRecordView,this.playerData)}};L_=h([xR("KfnrNdUwRnGbP3mPsVczIw")],L_);var __=class extends Laya.Box{};var{regClass:IR}=Laya,v_=class extends __{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent}set dataSource(e){super.dataSource=e,e&&(this.recordItem=e,this.tf_day.text=ce.formatTimeStamps(this.recordItem.time,"YY-MT-DD HH:MM:SS"),this.tf_rank.text=`${this.recordItem.rank}`,this.tf_duration.text=ce.formatWithSecondByMs(this.recordItem.duration),this.addEvent())}onDisable(){this.removeEvent()}removeEvent(){}};v_=h([IR("5A7gBlSZRCiXSZqpLgERgg")],v_);var x_=class extends Laya.Dialog{};var I_=class extends Laya.Scene{};var{regClass:ER}=Laya,Ii=class extends I_{constructor(){super(...arguments);this.currTab=0;this.nodeId=-1;this.pageIndex=1;this.nodeIds=[];this.nodeDatas=[];this.pageSize=20;this.scrolLock=!0;this.countryId=999;this.ticketType=0;this.ticketTypeDatas=[]}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}async onOpened(e){}onEnable(){Ii.isExp=!1,this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.box_node.on(Laya.Event.CLICK,this,this.onOpenNode),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),g.intance.on(f.EVENT_CHECK_NODE_SELECT,this,this.onNodeSelected),this.initNode(),this.initCityNodeCombo(),this.rankLanList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange);for(let i=1;i<6;i++)this["btn_"+i].on(Laya.Event.CLICK,this,this.onClickTab,[i]);this.onClickTab(1),this.dayNode=this.dayBox.getChildByName("tf_time"),this.hourNode=this.hourBox.getChildByName("tf_time"),this.minNode=this.minBox.getChildByName("tf_time"),this.secNode=this.secBox.getChildByName("tf_time"),this.msNode=this.msBox.getChildByName("tf_time"),this.initTicketCombo(),this.rankRewardList.array=null,this.rankLanList.visible=!1,this.challenge_room.visible=!1,Laya.LocalStorage.getItem(z.COOKIE_CF_LAN)=="zh"?this.tf_myTeamNum.text='美東時間 2024年11月5日<font color="#fff088">7</font>點':this.tf_myTeamNum.text='Eastern Timer,November 5,2024,<font color="#fff088">7:00</font>AM',this.initCountry(),Laya.timer.loop(1e3,this,this.refreshRoomBtnRed)}onOpenNode(){this.img_node_pad.visible==!1&&(this.img_node_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideNode))}onListDown(e){e.stopPropagation()}initNode(){this.list_node.selectHandler=new Laya.Handler(this,this.handleSelectNode),this.createNodeList(),this.btn_trump.on(Laya.Event.CLICK,this,this.onBtnTrump),this.btn_ticket.on(Laya.Event.CLICK,this,this.onBtnTicket),this.btn_challenge.on(Laya.Event.CLICK,this,this.onBtnChallenge),this.box_node.on(Laya.Event.CLICK,this,this.onOpenNode),this.list_node.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_node.mouseHandler=Laya.Handler.create(this,this.onNodeItemMouse,null,!1),this.list_node.renderHandler=Laya.Handler.create(this,this.onNodeItemRender,null,!1),this.list_node.scrollBar&&this.list_node.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}initCityNodeCombo(){this.nodeIds=[];var e=_.intance.m_dicNodes.values;this.nodeDatas=[],e.forEach(i=>{this.nodeIds.push(i.id),this.nodeDatas.push([i.id,!0,i])}),this.list_node_city.array=this.nodeDatas}onNodeSelected(){this.nodeIds=[],this.nodeDatas.forEach(e=>{e[1]&&this.nodeIds.push(e[0])}),console.log("您选中了 nodeType"+this.nodeIds),this.initRoomListData(),this.getRoomByType()}async getRoomByType(){}onNodeItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_node.selectedIndex=i,this.onHideNode())}onNodeItemRender(e,i){e.onChange(this.list_node.selectedIndex==i)}onScrollBarDown(e){e.stopPropagation()}handleSelectNode(e){if(console.log("handleSelectNode: "+e),e!=-1){let i=this.list_node.selectedItem;this.nodeId=i.id,this.img_node.skin=D.instance.getNodeIcon(i.area),this.tf_node_name.text=m.instance.getLanguage(i.name),this.nodeDelaySign.dataSource=i}}onHideNode(){this.img_node_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideNode),this.img_bg.off(Laya.Event.MOUSE_DOWN,this,this.onHideNode)}createNodeList(){let e=_.intance.m_dicNodes;this.list_node.array=e.values,this.list_node.visible=!0;let i=-1,n=0;if(e.values.length>0&&(i=0),this.roomDto)for(let r of e.values){if(r.id==this.roomDto.nodeId){i=n;break}n++}this.list_node.selectedIndex=i}setTab(e){this.currTab=e;for(let i=1;i<6;i++)if(e==i){this["btn_"+i].getChildByName("btn_yellowBg").visible=!0;let n=this["box_"+i];i==4&&(n=this.box_3),n&&(n.visible=!0),this["btn_"+i].getChildByName("Label").color="#143268"}else{this["btn_"+i].getChildByName("btn_yellowBg").visible=!1,this["btn_"+i].getChildByName("Label").color="#ffffff";let n=this["box_"+i];n&&(n.visible=!1)}}onClickTab(e){this.currTab!=e&&(this.setTab(e),Laya.timer.clear(this,this.refreshTime),Laya.timer.clear(this,this.initRoomListData),Laya.timer.clear(this,this.refreshRoomTime),this.box_country.visible=!1,e==1?this.initCreateRoomData():e==2?(this.initRoomListData(),Laya.timer.loop(5e3,this,this.initRoomListData),Laya.timer.loop(1e3,this,this.refreshRoomTime)):e==3?(this.pageIndex=1,this.getRankData(!1),this.box_country.visible=!0,this.rankLanList.scrollTo(0)):e==4?(this.pageIndex=1,this.getRankData(!0),this.box_country.visible=!0,this.rankLanList.scrollTo(0)):e==5&&this.getRewardRankData())}initCreateRoomData(){let e=b.instance.playerDto,i=b.instance.m_heroData.heroVoDic.values;this.fightHero=this.getFightHeroData(e.fightHeroPk),e.fightHeroPk&&this.fightHero?(this.img_hero.visible=!0,this.img_hero.skin=this.fightHero.simgurl,this.tf_heroName.text=Be.shortHeroStr(this.fightHero.name)):(this.img_hero.visible=!1,this.tf_heroName.text="無"),console.log(this.fightHero)}getFightHeroData(e){let i=b.instance.m_heroData.heroVoDic.values;for(let n=0;n<i.length;n++)if(b.instance.playerDto.fightHeroPk==i[n].pk)return i[n]}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}onBtnTrump(){se.intance.setCurrentScene(Y.M_SCENE_SHOP,[6])}onBtnTicket(){se.intance.setCurrentScene(Y.M_SCENE_SHOP,[2,5])}async onBtnChallenge(){let e=b.instance.playerDto;if(!e.fightHeroPk){T.instance.notice(m.instance.getLanguage(1687));return}console.log(e.fightHeroPk,this.nodeId),this.btn_challenge.disabled=!0,I.requestPost("wxgame/pve/create",{nodeId:this.nodeId,heroPk:this.fightHero.pk,arenaId:this.ticketType}).then(i=>{this.destroyed||(i?(i.roomDto&&(B.instance.roomDto=i.roomDto),i.roomDto?(ot.instance.initSocket(),Laya.timer.once(5e3,this,this.restoreChallengeBtn)):(T.instance.notice(m.instance.getLanguage(135)),this.restoreChallengeBtn())):this.restoreChallengeBtn())}).catch(i=>{this.restoreChallengeBtn()})}restoreChallengeBtn(){this.btn_challenge.disabled=!1}openTimeMechain(){Laya.timer.loop(30,this,this.refreshTime)}refreshTime(){let e=ce.getTimeDifference(173079e4,Wi.DAYS);this.dayNode&&(this.dayNode.text=`${e.days}`),this.hourNode&&(this.hourNode.text=`${e.hours}`),this.minNode&&(this.minNode.text=`${e.minutes}`),this.secNode&&(this.secNode.text=`${e.seconds}`),this.msNode&&(this.msNode.text=`${e.ms}`)}async initRoomListData(){let e=await I.requestPost("wxgame/pve/list",{nodeIds:this.nodeIds});e&&(this.challenge_room.array=e.roomList,this.challenge_room.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0,this.challenge_room.visible=!0)}refreshRoomTime(){let e=this.challenge_room.array;if(!(!e||e.length<1)){for(let i=0;i<e.length;i++)if(e[i]){let n=e[i];n.startTimeDiff+=1e3}this.challenge_room.refresh()}}async getRewardRankData(){let e=await I.requestPost("wxgame/pve/pveLuckUsdt",{});console.log(e),e&&(this.rankRewardList.array=e.rankList,this.rankRewardList.visible=!0)}async getRankData(e=!1){Ii.isExp=e;let i;this.countryId==999?i=await I.requestPost("wxgame/pve/rank",{pageSize:this.pageSize,pageNum:this.pageIndex,exp:Ii.isExp}):i=await I.requestPost("wxgame/pve/rank",{pageSize:this.pageSize,pageNum:this.pageIndex,exp:Ii.isExp,country:this.countryId}),console.log(i),i&&(this.rankLanList.array=i.rankList,this.rankLanList.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e;if(this.countryId==999?e=await I.requestPost("wxgame/pve/rank",{pageSize:this.pageSize,pageNum:this.pageIndex,exp:Ii.isExp}):e=await I.requestPost("wxgame/pve/rank",{pageSize:this.pageSize,pageNum:this.pageIndex,exp:Ii.isExp,country:this.countryId}),console.log(e),e){this.scrolLock=!0;let i=e.rankList;this.rankLanList.array.push(...i),this.rankLanList.array=this.rankLanList.array,Laya.timer.clear(this,this.refreshLock)}}}onScrollBarChange(){this.rankLanList.scrollBar.value>=this.rankLanList.scrollBar.max&&this.loadMoreData()}refreshLock(){this.scrolLock=!0,console.log("重置锁")}refreshRoomBtnRed(){this.img_red_2.visible=b.instance.getRedDotById(ne.instance.ROOM_4_6)}onDisable(){Laya.timer.clear(this,this.refreshLock),Laya.timer.clear(this,this.refreshRoomTime),Laya.timer.clearAll(this),Laya.Tween.clearAll(this),g.intance.off(f.EVENT_CHECK_NODE_SELECT,this,this.onNodeSelected)}initTicketCombo(){var e=_.intance.getGeneralValueById(32);this.ticketTypeDatas=[],e.forEach(n=>{let r=_.intance.getArrFromDicItemByKey("id",n)[0];this.ticketTypeDatas.push([n,m.instance.getLanguage(r.name)])}),console.log("this.ticketTypeDatas: ",this.ticketTypeDatas),this.ticketCombo.selectHandler=new Laya.Handler(this,this.onSelectedRentalType),this.ticketCombo.dataSource=this.ticketTypeDatas;let i=0;this.ticketCombo.selectedIndex=i}onSelectedRentalType(e){if(e!=-1){var i=K.ARENA_TYPE_PVE;let n=_.intance.getArenaTypesInSubByItemId(i,this.ticketTypeDatas[e][0]);n&&(this.ticketType=n.id)}}onCountryItemRender(e,i){e.onChange(this.list_country.selectedIndex==i)}initCountry(){this.list_country.selectHandler=new Laya.Handler(this,this.handleSelectCountry),this.createCountryList(),this.box_country.on(Laya.Event.CLICK,this,this.onOpenCountry),this.list_country.on(Laya.Event.MOUSE_DOWN,this,this.onListDown),this.list_country.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_country.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_country.scrollBar&&this.list_country.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown)}createCountryList(){let e=_.intance.m_dicCountry,n=[{id:999,name:"All"},...e.values];this.list_country.array=n,this.list_country.visible=!0;let r=-1,s=0;this.countryId=999;for(let o of n){if(o.id==this.countryId){r=s;break}s++}this.list_country.selectedIndex=r}handleSelectCountry(e){if(console.log("handleSelectCountry: "+e),e!=-1){let i=this.list_country.selectedItem;this.countryId=i.id,i.id==999?(this.img_flag.visible=!1,this.tf_country.text=m.instance.getLanguage(i.name)):(this.img_flag.visible=!0,this.img_flag.skin=D.instance.getCountryIcon(i.id),this.tf_country.text=m.instance.getLanguage(i.name)),this.currTab==3?(this.pageIndex=1,this.getRankData(!1)):(this.pageIndex=1,this.getRankData(!0))}}onOpenCountry(){this.img_country_pad.visible==!1&&(this.img_country_pad.visible=!0,Laya.stage.once(Laya.Event.MOUSE_DOWN,this,this.onHideCountry))}onHideCountry(){this.img_country_pad.visible=!1,Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.onHideCountry)}onCountryItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_country.selectedIndex=i,this.onHideCountry())}};Ii.isExp=!0,Ii=h([ER("k5ciB37ORFSIRZc17hoKMA")],Ii);var{regClass:wR}=Laya,E_=class extends x_{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.pageIndex=1;this.pageSize=20;this.scrolLock=!0;this.useYlp=!1}onEnable(){this.list_recordLog.visible=!1,this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_sponsor.on(Laya.Event.CLICK,this,this.onBtnSponsor),g.intance.on(f.EVENT_PVE_HAVE_PROP,this,this.initPlayerProp),this.list_recordLog.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange),this.listPanel1.visible=!1}setOpenData(e){this.playerData=e,this.initPlayerProp(),this.initRecord()}setPlayerData(){this.btn_sponsor.disabled=b.instance.playerDto.pid==this.playerData.pid,this.tf_name.text=this.playerData.name,this.tf_union.text=m.instance.getMultiLan(this.playerData.shortUnionName),this.btn_sponsor.visible=this.playerData.rank>10&&b.instance.pveOpen!==1&&this.useYlp,this.playerData.address?(this.fromBox.visible=!0,this.tf_from.text=`${Q.shortenString(this.playerData.address,7,4)}`):this.fromBox.visible=!1,this.playerIcon.headSkin=this.playerData.head,this.img_flag.skin=D.instance.getCountryIcon(this.playerData.country)}onCopy(){let e=this.playerData.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.onBack),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy),this.btn_sponsor.off(Laya.Event.CLICK,this,this.onBtnSponsor),g.intance.off(f.EVENT_PVE_HAVE_PROP,this,this.initPlayerProp),this.list_recordLog.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange)}onBtnSponsor(){A.intance.openModule(y.PveSponsorView,this.playerData)}async initPlayerProp(){let e=await I.requestPost("wxgame/pve/pveChallengeInfo",{id:this.playerData.pid});if(e){this.useYlp=e.useYlp;let i=this.transeToItemVo(e.items);this.listPanel1.array=i,this.listPanel1.visible=!0}this.setPlayerData()}transeToItemVo(e){let i=[];for(let r=0;r<e.length;r++){let s=new Pe;var n=e[r];s.m_iId=n.id,n.pk&&(s.m_iPk=n.pk),s.m_iId=n.id,s.m_iNum=n.count,i.push(s)}return i}async initRecord(){let e=await I.requestPost("wxgame/pve/pveChallengeRecords",{pageSize:this.pageSize,pageNum:this.pageIndex,id:this.playerData.pid,exp:Ii.isExp});e&&(this.list_recordLog.array=e.items,this.list_recordLog.visible=!0)}async loadMoreData(){if(this.scrolLock){this.pageIndex+=1,this.scrolLock=!1,Laya.timer.once(1e4,this,this.refreshLock);let e=await I.requestPost("wxgame/pve/pveChallengeRecords",{pageSize:this.pageSize,pageNum:this.pageIndex,id:this.playerData.pid});if(console.log(e),e){this.scrolLock=!0;let i=e.items;this.list_recordLog.array.push(...i),this.list_recordLog.array=this.list_recordLog.array,Laya.timer.clear(this,this.refreshLock)}}}onScrollBarChange(){this.listPanel1.scrollBar.value>=this.listPanel1.scrollBar.max&&this.loadMoreData()}refreshLock(){this.scrolLock=!0,console.log("重置锁")}onBack(){this.close()}};E_=h([wR("1CSNzmbcSdu78dCzj1J-hw")],E_);var w_=class extends Laya.Box{};var{regClass:TR}=Laya,T_=class extends w_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){if(!e)return;this.playerData=e,super.dataSource=e;let i=e.id===b.instance.playerDto.pid,n=e.rank;if(this.tf_name.text=e.name,this.tf_union.text=m.instance.getMultiLan(e.shortUnionName),this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${Q.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=D.instance.getCountryIcon(e.country),e.icon){let c=D.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=c,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin="res/rank/img_guild_4di.png";var r=_.intance.m_dicPveLuckyDraws.get(n);this.tf_rewardName.text=m.instance.getLanguage(r.name);var s=_.intance.m_dicItems.get(r.token),o=m.instance.getLanguage(s.name),l=Se.formatNumber(r.bonus)+" "+o;this.tf_reward.text=l}onCopy(){let e=this.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};T_=h([TR("rqW6WvFST-agZW2AS9Jy7A")],T_);var C_=class extends Laya.Box{};var{regClass:CR}=Laya,S_=class extends C_{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||this.btn_watch.on(Laya.Event.CLICK,this,this.onWatch)}onEnable(){}async onWatch(){De.instance.onCreateAndJoinWithPwd(K.ACTION_WATCH,this.roomDto,"")}async onJoin(){}set dataSource(e){super.dataSource=e,this.roomDto=e,this.roomDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.roomDto.leader.icon;this.playerIcon.headSkin=e,this.tf_name.text=this.roomDto.leader.name;var i=_.intance.m_dicNodes.get(this.roomDto.nodeId);this.nodeDelaySign.dataSource=i,this.tf_seconds.text=ce.format(Math.round(this.roomDto.startTimeDiff/1e3),":",!1),this.tf_union.text=B.instance.setRoomAnonymousLabel(m.instance.getMultiLan(this.roomDto.leader.shortUnionName),this.roomDto.anonymous)}};S_=h([CR("rDDOphbOQJKQOTPF-QIsAA")],S_);var D_=class extends Laya.Dialog{};var{regClass:SR}=Laya,A_=class extends D_{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.amount=0}onEnable(){this.listPanel1.visible=!1,this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_confirm.on(Laya.Event.CLICK,this,this.confirmSp),this.btn_prop.on(Laya.Event.CLICK,this,this.onBtnProp),g.intance.on(f.EVENT_PVE_CHOOSE_PROP,this,this.onRefreshProp),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}onOpened(e){}async confirmSp(){let e,i=3022;if(!this.propData||this.amount==0)return;let n=this.amount;if(this.propData.itemItem.id==1086){let d=_.intance.m_dicShops.values;e=Q.getShopByGoodsId(d,1086).cost[1],console.log("price",e)}else{let d=_.intance.getGeneralValueById(29);e=d[0][2],i=d[0][1]}let r=b.instance.getConsumeValue(3022),s=new fi(n),o=new fi(e),l=s.multiply(o).getValue(),c=Number(l),u=_.intance.getArrFromDicItemByKey("id",this.propData.itemItem.id);if(u&&u.length>0){var p=_.intance.getSheetDataByMultiKey(_.intance.m_dicShopMulDic,[6,this.propData.itemItem.id]);console.log(p),r<c?T.instance.notice(m.instance.getLanguage(1686)):await I.requestPost("wxgame/pve/sponsor",{shopId:p.id,num:n,playerId:this.playerData.pid})&&(T.instance.notice(m.instance.getLanguage(1685)),g.intance.event(f.EVENT_PVE_HAVE_PROP),this.close())}}async initPlayerProp(){let e=await I.requestPost("wxgame/pve/pveChallengeInfo",{id:this.playerData.pid});if(e){let i=this.transeToItemVo(e.items);this.listPanel1.array=i,this.listPanel1.visible=!0}}transeToItemVo(e){let i=[];for(let r=0;r<e.length;r++){let s=new Pe;var n=e[r];s.m_iId=n.id,n.pk&&(s.m_iPk=n.pk),s.m_iId=n.id,s.m_iNum=n.count,i.push(s)}return i}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(f.EVENT_PVE_CHOOSE_PROP,this,this.onRefreshProp),this.btn_back.off(Laya.Event.CLICK,this,this.onBack),this.btn_confirm.off(Laya.Event.CLICK,this,this.confirmSp),this.btn_prop.off(Laya.Event.CLICK,this,this.onBtnProp),this.btn_copy.off(Laya.Event.CLICK,this,this.onCopy)}setOpenData(e){this.playerData=e,this.setPlayerData(),this.initPlayerProp()}setPlayerData(){this.tf_name.text=this.playerData.name,this.tf_union.text=m.instance.getMultiLan(this.playerData.shortUnionName),this.playerData.address?(this.fromBox.visible=!0,this.tf_from.text=`${Q.shortenString(this.playerData.address,7,4)}`):this.fromBox.visible=!1,this.playerIcon.headSkin=this.playerData.head,this.img_flag.skin=D.instance.getCountryIcon(this.playerData.country)}onBack(){this.close()}onCopy(){let e=this.playerData.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}onRefreshProp(e){if(console.log("buyData",e),this.propData=null,this.amount=0,e){this.buyPropItem.visible=!0;let i=e.propData;this.propData=e.propData;let n=e.amount;this.txt_num.text=n,this.buyPropItem.dataSource=i,this.img_ticket_bg.visible=!1,this.txt_num.visible=!0,this.amount=e.amount;let r=0;if(i.itemItem.id==1086){let u=_.intance.m_dicShops.values;r=Q.getShopByGoodsId(u,1086).cost[1],console.log("price",r)}else r=_.intance.getGeneralValueById(29)[0][2];let s=new fi(n),o=new fi(r),l=s.multiply(o).getValue(),c=Number(l);console.log(`单价${r},总价${c}`),this.tf_price.text=`${c}PT`}}onBtnProp(){A.intance.openModule(y.PveChoosePropsDialog)}};A_=h([SR("t1ULECejSsWhchCZSP3X-Q")],A_);var k_=class extends Laya.Box{};var{regClass:DR}=Laya,B_=class extends k_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){if(!e)return;super.dataSource=e;let i=e.id===b.instance.playerDto.pid,n=e.rank;this.tf_name.text=e.name,this.tf_rank.text=n,this.tf_score.text=e.score,this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${Q.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=D.instance.getCountryIcon(e.country),this.tf_num.text=e.remCount,i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=n<4?`res/rank/img_guild_${n}di.png`:"res/rank/img_guild_4di.png",n<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${n}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=i?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}onCopy(){let e=this.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};B_=h([DR("MI-m6q1ITuGLG_8y-2GWUw")],B_);var M_=class extends Laya.Box{};var{regClass:AR}=Laya,R_=class extends M_{constructor(){super()}createChildren(){super.createChildren()}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy)}set dataSource(e){if(!e)return;super.dataSource=e;let i=e.id===b.instance.playerDto.pid,n=e.rank;if(this.tf_name.text=e.name,this.tf_union.text=m.instance.getMultiLan(e.shortUnionName),this.tf_rank.text=n,this.tf_score.text=e.score,this.playerIcon.headSkin=e.head,e.address?(this.fromBox.visible=!0,this.address=e.address,this.tf_from.text=`${Q.shortenString(e.address,7,4)}`):this.fromBox.visible=!1,this.img_flag.skin=D.instance.getCountryIcon(e.country),e.icon){let r=D.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=r,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;i?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=n<4?`res/rank/img_guild_${n}di.png`:"res/rank/img_guild_4di.png",n<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${n}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=i?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}onCopy(){let e=this.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};R_=h([AR("-msKQoZIRI6E80e53qttmw")],R_);var P_=class extends Laya.Scene{};var{regClass:kR}=Laya,nt=class{};nt.playerRank=0,nt.dailyRank=1,nt.proRank=2,nt.actRank=3;var N_=class extends P_{constructor(){super(...arguments);this.myIndex=-1;this.myUnionIndex=-1;this.unionRankData=null;this.rankIndex=0;this.tabNames={1:"combat scenes",2:"KILL COUNT",3:"number of heroes",4:"damage ranking",5:"wealth ranking"};this.tabNamesDaily={1:"Matches",2:"Matches",3:"Matches",4:"Matches",5:"Matches"};this.btnNames={1:"COMBAT SCENES",2:"KILL COUNT",3:"NUMBER OF HEROES",4:"DAMAGE RANKING",5:"WEALTH RANKING"};this.btnNamesDaily={1:"Total Mathches",2:"Professional Matches",3:"Airdrop Matches",4:"Training RANKING",5:""};this.btnNamesPro={1:"This week",2:"Last week",3:"This month",4:"Last month",5:""};this.currTab=0}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onOpened(e){this.onClickPlayer()}onEnable(){this.rankLanList.visible=!1,this.myBox.visible=!1,this.myUnionBox.visible=!1,this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_1.on(Laya.Event.CLICK,this,this.onClickTab,[1]),this.btn_2.on(Laya.Event.CLICK,this,this.onClickTab,[2]),this.btn_3.on(Laya.Event.CLICK,this,this.onClickTab,[3]),this.btn_4.on(Laya.Event.CLICK,this,this.onClickTab,[4]),this.btn_5.on(Laya.Event.CLICK,this,this.onClickTab,[5]),this.btn_player.on(Laya.Event.CLICK,this,this.onClickPlayer),this.btn_guild.on(Laya.Event.CLICK,this,this.onClickGuild),this.btn_schol.on(Laya.Event.CLICK,this,this.onClickSchol),this.btn_daily.on(Laya.Event.CLICK,this,this.onClickDaily),this.btn_pro.on(Laya.Event.CLICK,this,this.onClickPro),this.btn_act.on(Laya.Event.CLICK,this,this.onClickAct),this.refreshDailyBtnRed(),g.intance.on(f.REFRESH_ACTIVITY_RED,this,this.refreshDailyBtnRed)}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_1.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_2.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_3.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_4.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_5.off(Laya.Event.CLICK,this,this.onClickTab),this.btn_player.off(Laya.Event.CLICK,this,this.onClickPlayer),this.btn_guild.off(Laya.Event.CLICK,this,this.onClickGuild),this.btn_schol.off(Laya.Event.CLICK,this,this.onClickSchol),this.rankLanList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.unionRankLanList.scrollBar.off(Laya.Event.CHANGE,this,this.onUnionScrollBarChange),this.btn_pro.off(Laya.Event.CLICK,this,this.onClickPro),this.btn_act.off(Laya.Event.CLICK,this,this.onClickAct),g.intance.offAllCaller(this)}onClickTab(e){if(this.currTab===e)return;let i;switch(this.rankIndex){case nt.playerRank:i=this.tabNames;break;case nt.dailyRank:i=this.tabNamesDaily;break;case nt.proRank:i=this.tabNamesDaily;break;case nt.actRank:i=this.tabNamesDaily;break}e in i?(this.setTab(e),this.setListData(e),this.rankName.text=i[e]):console.warn(`Tab index ${e} does not have a corresponding name.`);let n=this["btn_"+e].getChildByName("img_red");(this.rankIndex==nt.dailyRank||this.rankIndex==nt.proRank||this.rankIndex==nt.actRank)&&n&&(n.visible=!1),this.rankIndex==nt.actRank?this.tradeUnion.text="Active referrer":this.tradeUnion.text="Guild"}setTab(e){let i;switch(this.rankIndex){case nt.playerRank:i=this.btnNames;break;case nt.dailyRank:i=this.btnNamesDaily;break;case nt.proRank:i=this.btnNamesPro;break;case nt.actRank:i=this.btnNamesPro;break}for(let n=1;n<6;n++)e==n?(this["btn_"+n].getChildByName("selectBox").visible=!0,this["btn_"+n].getChildByName("tf_txt").color="#143f6b"):(this["btn_"+n].getChildByName("selectBox").visible=!1,this["btn_"+n].getChildByName("tf_txt").color="#7ff1fe"),this["btn_"+n].getChildByName("tf_txt").text=i[n];this.btn_5.visible=this.rankIndex==nt.playerRank}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}async setListData(e){let i;switch(this.rankIndex){case nt.playerRank:i=await I.requestPost("wxgame/sys/rank",{type:e});break;case nt.dailyRank:i=await I.requestPost("wxgame/sys/playerFightTimesRank",{type:e-1});break;case nt.proRank:i=await I.requestPost("wxgame/sys/proPlayerTimesWeekMonthRank",{type:e});break;case nt.actRank:i=await I.requestPost("wxgame/sys/remPlayerFightTimesRank",{type:e});break}i?(this.updateSelfData(i.self),this.updateRankList(i.rankList)):(console.error("Error fetching data:",i),T.instance.notice(m.instance.getLanguage(135)))}async setGuildListData(){this.unionRankData||(this.unionRankData=await I.requestPost("wxgame/sys/unionRank",{}));let e=[];if(this.unionRankData){let i=this.unionRankData.rankList,n=this.unionRankData.self;if(n&&this.updateSelfUnionData(n),this.unionRankLanList.scrollTo(0),this.unionRankLanList.visible=!0,this.myUnionBox.visible=!0,this.unionRankLanList.selectedIndex=1,this.unionRankLanList.array=i,this.myUnionBox.visible=!!n,n){let r=i.findIndex(s=>s.id===n.id);this.myUnionIndex=r}}else console.error(`Error fetching data: ${this.unionRankData}`),T.instance.notice(m.instance.getLanguage(135))}updateSelfData(e){if(e){if(this.tf_name.text=e.name,this.tf_union.text=m.instance.getMultiLan(e.shortUnionName),this.tf_score.text=`${e.score}`,this.playerIcon.headSkin=e.head,this.img_flag.skin=D.instance.getCountryIcon(e.country),e.unionId){let i=D.instance.getUnionIcon(e.icon);this.img_lvIcon.skin=i,this.img_lvIcon.visible=!0}else this.img_lvIcon.visible=!1;if(this.rankIndex==nt.actRank?(this.img_lvIcon.visible=!1,this.tf_ref.visible=!0,this.tf_ref.text=`${e.remCount}`,this.tf_union.visible=!1):(this.tf_ref.visible=!1,this.tf_union.visible=!0),e.rank<=0)this.img_rankIcon1.visible=!1,this.tf_rank.text=m.instance.getLanguage(1117),this.img_rankIcon2.visible=!1,this.tf_rank.visible=!0;else if(e.rank<4)this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${e.rank}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1,this.tf_rank.visible=!1;else{let i=e.pid===b.instance.playerDto.pid?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png";this.img_rankIcon2.skin=i,this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1,this.tf_rank.text=`${e.rank}`,this.tf_rank.visible=!0}}}updateSelfUnionData(e){if(e)if(this.union_name.text=m.instance.getMultiLan(e.unionName),this.unionIcon.dataSource=e,this.union_score.text=e.score+"",e.rank<0)this.img_unionIcon1.visible=!1,this.union_rank.text=m.instance.getLanguage(1117),this.img_unionIcon2.visible=!1;else if(e.rank<4)this.img_unionIcon1.skin=`res/matchRank1/img_ranking_${e.rank}.png`,this.img_unionIcon1.visible=!0,this.img_unionIcon2.visible=!1;else{let i="res/matchRank1/img_ranking_ranking_me.png";this.img_unionIcon2.skin=i,this.img_unionIcon2.visible=!0,this.img_unionIcon1.visible=!1,this.union_rank.text=`${e.rank}`}}updateRankList(e){if(e){let i=e.findIndex(n=>n.pid===b.instance.playerDto.pid);this.rankIndex!==nt.actRank?(this.rankLanList.selectedIndex=1,this.rankLanList.array=e,this.myIndex=i,this.rankLanList.scrollTo(0),this.activeList.visible=!1,this.myBox.visible=!0,this.rankLanList.visible=!0):(this.activeList.selectedIndex=1,this.activeList.array=e,this.myIndex=i,this.activeList.scrollTo(0),this.rankLanList.visible=!1,this.myBox.visible=!0,this.activeList.visible=!0)}}onScrollBarChange(){if(!this.rankLanList.array||!this.myIndex&&this.myIndex!==0)return;let e=this.rankLanList.startIndex,i=e+this.rankLanList.repeatX*this.rankLanList.repeatY-1,n=this.rankLanList.getCell(this.myIndex);if(n)if(this.myIndex>=e&&this.myIndex<=i){let o=n.localToGlobal(new Laya.Point(0,0)).y-this.myBox.height-57;o=Math.max(57,Math.min(493,o)),this.myBox.y=o}else this.myBox.y=this.myIndex>i?493:57}onUnionScrollBarChange(){if(!this.unionRankLanList.array||!this.myUnionIndex&&this.myUnionIndex!==0)return;let e=this.unionRankLanList.startIndex,i=e+this.unionRankLanList.repeatX*this.unionRankLanList.repeatY-1,n=this.unionRankLanList.getCell(this.myUnionIndex);if(n)if(this.myUnionIndex>=e&&this.myUnionIndex<=i){let o=n.localToGlobal(new Laya.Point(0,0)).y-this.myUnionBox.height-57;o=Math.max(57,Math.min(499,o)),this.myUnionBox.y=o}else this.myUnionBox.y=this.myUnionIndex>i?499:57}setTabState(e,i,n,r){e.getChildByName("selectBox").visible=i,e.getChildByName("tf_txt").color=i?n:r}onClickPlayer(){this.rankIndex=nt.playerRank,this.refreshDailyBtnRed(),this.onClickTab(1),this.playerRankBox.visible=!0,this.unionBox.visible=!1,this.setTabState(this.btn_player,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_guild,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_schol,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_daily,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_pro,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_act,!1,"#143f6b","#7ff1fe")}onClickDaily(){this.rankIndex=nt.dailyRank,this.refreshDailyBtnRed(),this.onClickTab(1),this.playerRankBox.visible=!0,this.unionBox.visible=!1,this.setTabState(this.btn_player,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_guild,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_schol,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_daily,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_pro,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_act,!1,"#143f6b","#7ff1fe")}onClickGuild(){this.playerRankBox.visible=!1,this.unionBox.visible=!0,this.setTabState(this.btn_player,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_guild,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_schol,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_daily,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_pro,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_act,!1,"#143f6b","#7ff1fe"),this.setGuildListData()}onClickSchol(){this.playerRankBox.visible=!1,this.unionBox.visible=!1,this.setTabState(this.btn_player,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_guild,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_schol,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_daily,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_pro,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_act,!1,"#143f6b","#7ff1fe")}onClickPro(){this.rankIndex=nt.proRank,this.onClickTab(1),this.playerRankBox.visible=!0,this.unionBox.visible=!1,this.setTabState(this.btn_player,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_guild,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_schol,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_daily,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_act,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_pro,!0,"#143f6b","#7ff1fe")}onClickAct(){this.rankIndex=nt.actRank,this.onClickTab(1),this.playerRankBox.visible=!0,this.unionBox.visible=!1,this.setTabState(this.btn_player,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_guild,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_schol,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_daily,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_act,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_pro,!1,"#143f6b","#7ff1fe")}refreshDailyRed(){this.img_red_daily.visible=b.instance.getRedDotById(ne.RED_EVERY_RANK_TOTAL)||b.instance.getRedDotById(ne.RED_EVERY_RANK_PRE)||b.instance.getRedDotById(ne.RED_EVERY_RANK_AIR)||b.instance.getRedDotById(ne.RED_EVERY_RANK_TRA)}refreshProRed(){this.img_red_pro.visible=b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_1)||b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_2)||b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_3)||b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_4)}refreshProAct(){this.img_red_act.visible=b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_1)||b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_2)||b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_3)||b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_4)}refreshDailyBtnRed(){switch(this.rankIndex){case nt.playerRank:this.btn_1.getChildByName("img_red").visible=!1,this.btn_2.getChildByName("img_red").visible=!1,this.btn_3.getChildByName("img_red").visible=!1,this.btn_4.getChildByName("img_red").visible=!1;break;case nt.dailyRank:this.btn_1.getChildByName("img_red").visible=b.instance.getRedDotById(ne.RED_EVERY_RANK_TOTAL),this.btn_2.getChildByName("img_red").visible=b.instance.getRedDotById(ne.RED_EVERY_RANK_PRE),this.btn_3.getChildByName("img_red").visible=b.instance.getRedDotById(ne.RED_EVERY_RANK_AIR),this.btn_4.getChildByName("img_red").visible=b.instance.getRedDotById(ne.RED_EVERY_RANK_TRA);break;case nt.proRank:this.btn_1.getChildByName("img_red").visible=b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_1),this.btn_2.getChildByName("img_red").visible=b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_2),this.btn_3.getChildByName("img_red").visible=b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_3),this.btn_4.getChildByName("img_red").visible=b.instance.getRedDotById(ne.PRO_RANK_DAY_FIGHT_4);break;case nt.actRank:this.btn_1.getChildByName("img_red").visible=b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_1),this.btn_2.getChildByName("img_red").visible=b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_2),this.btn_3.getChildByName("img_red").visible=b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_3),this.btn_4.getChildByName("img_red").visible=b.instance.getRedDotById(ne.REM_RANK_DAY_FIGHT_4);break}this.refreshDailyRed(),this.refreshProRed(),this.refreshProAct()}};N_=h([kR("5_oIkEKDQUyqTP8xY9zMUw")],N_);var O_=class extends Laya.Box{};var{regClass:BR}=Laya,H_=class extends O_{constructor(){super()}createChildren(){super.createChildren()}set dataSource(t){if(!t)return;let e=t.id===b.instance.playerDto.pid,i=t.rank;this.unionIcon.dataSource=t,this.tf_union.text=m.instance.getMultiLan(t.shortUnionName),this.tf_rank.text=i+"",this.tf_score.text=t.score+"",e?this.bg.skin="res/matchRank1/img_ranking_bg_me.png":this.bg.skin=i<4?`res/rank/img_guild_${i}di.png`:"res/rank/img_guild_4di.png",i<4?(this.img_rankIcon1.skin=`res/matchRank1/img_ranking_${i}.png`,this.img_rankIcon1.visible=!0,this.img_rankIcon2.visible=!1):(this.img_rankIcon2.skin=e?"res/matchRank1/img_ranking_ranking_me.png":"res/matchRank1/img_ranking_ranking_4.png",this.img_rankIcon2.visible=!0,this.img_rankIcon1.visible=!1)}};H_=h([BR("O6o6TJNORIGW9WXbhJf91w")],H_);var U_=class extends Laya.Box{};var{regClass:MR,property:THe}=Laya,V_=class extends U_{constructor(){super();this.isAddEvent=!1}set dataSource(e){if(e){if(super.dataSource=e,this.heroVo=e,!this.heroVo){this.img_back.skin=D.instance.getHeroBackIcon(0),this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}}async setCurrentOutPut(){this.img_back.skin=D.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=D.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=Be.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";We.instance.setStar(this,e),this.box_show.visible=!0,this.destroyed}onChange(e){e?this.selectBox.visible=!0:this.selectBox.visible=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}toDetail(){this.heroVo.id&&A.intance.openModule(y.HeroDetailDialog,[this.heroVo])}};V_=h([MR("DixYspEIQnqQazhlHuxLDw")],V_);var F_=class extends Laya.Dialog{};var{regClass:RR}=Laya,G_=class extends F_{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.beforeYearIndex=null;this.beforeMonthIndex=null;this.beforeDayIndex=null;this.beforeHourIndex=null;this.dateOpenState=0;this.dateOpenStateAir=0;this.itemVo=null;this.walletType=0;this.heroPkList=[];this.airWalletDataArray=[];this.currentDate=new Date;this.startDate={year:0,month:0,day:0,hour:0};this.endDate={year:0,month:0,day:0,hour:0};this.heroVo=null}onEnable(){this.box_date.on(Laya.Event.CLICK,this,this.onOpenDate,[this.img_date_pad,this.box_date]),this.box_date2.on(Laya.Event.CLICK,this,this.onOpenDate,[this.img_date_pad,this.box_date2]),this.box_date3.on(Laya.Event.CLICK,this,this.onOpenDateAir,[this.img_date_pad2,this.box_date3]),this.box_date4.on(Laya.Event.CLICK,this,this.onOpenDateAir,[this.img_date_pad2,this.box_date4]),this.yearList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.yearList,"year"]),this.monthList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.monthList,"month"]),this.dayList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.dayList,"day"]),this.hourList.on(Laya.Event.MOUSE_UP,this,this.onListStop,[this.hourList,"hour"]),this.yearList2.on(Laya.Event.MOUSE_UP,this,this.onListStopAir,[this.yearList2,"year"]),this.monthList2.on(Laya.Event.MOUSE_UP,this,this.onListStopAir,[this.monthList2,"month"]),this.dayList2.on(Laya.Event.MOUSE_UP,this,this.onListStopAir,[this.dayList2,"day"]),this.hourList2.on(Laya.Event.MOUSE_UP,this,this.onListStopAir,[this.hourList2,"hour"]),this.yearList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.yearList,"year",this.img_date_pad]),this.monthList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.monthList,"month",this.img_date_pad]),this.dayList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.dayList,"day",this.img_date_pad]),this.hourList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.hourList,"hour",this.img_date_pad]),this.yearList2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.yearList2,"year",this.img_date_pad2]),this.monthList2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.monthList2,"month",this.img_date_pad2]),this.dayList2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.dayList2,"day",this.img_date_pad2]),this.hourList2.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange,[this.hourList2,"hour",this.img_date_pad2]),this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),g.intance.on(f.CHANGE_WALLET_HERO,this,this.onHeroChange),g.intance.on(f.CHANGE_WALLET_HERO_AIR,this,this.onAirHeroChange),g.intance.on(f.CHANGE_WALLET_PROP,this,this.onPropChange),g.intance.on(f.ADD_AIR_WALLET_ITEM,this,this.addAirWalletItem),g.intance.on(f.ADD_AIR_SUB_WALLET_NAME,this,this.addAirWalletNameItem),g.intance.on(f.AIR_SUB_WALLET_OPENHERO,this,this.airdropOpenHeroView),this.hero_box.on(Laya.Event.CLICK,this,this.onHeroBoxClick),this.Img_prop.on(Laya.Event.CLICK,this,this.onPropClick),this.btn_createSubWallet.on(Laya.Event.CLICK,this,this.onCreateSubWallet),this.btn_createSubWalletAir.on(Laya.Event.CLICK,this,this.onCreateSubWalletAir),this.box_Arean.on(Laya.Event.CLICK,this,this.onOpenType),this.tab1.on(Laya.Event.CLICK,this,this.onTabClick,[1]),this.tab2.on(Laya.Event.CLICK,this,this.onTabClick,[2]),this.yearList.scrollBar.rollRatio=0,this.monthList.scrollBar.rollRatio=0,this.dayList.scrollBar.rollRatio=0,this.hourList.scrollBar.rollRatio=0,this.yearList2.scrollBar.rollRatio=0,this.monthList2.scrollBar.rollRatio=0,this.dayList2.scrollBar.rollRatio=0,this.hourList2.scrollBar.rollRatio=0,this.initTime(),this.showHeroData(),this.initDiciList(),this.initTypeList(),this.box_dividends.on(Laya.Event.CLICK,this,this.onOpeDividends),this.tab1.getChildByName("tf_tit").text=`${m.instance.getLanguage(1261)}`,this.tab2.getChildByName("tf_tit").text=`${m.instance.getLanguage(1260)}`}onDisable(){this.removeEvent()}removeEvent(){this.box_date.off(Laya.Event.CLICK,this,this.onOpenDate),this.box_date2.off(Laya.Event.CLICK,this,this.onOpenDate),this.box_date3.off(Laya.Event.CLICK,this,this.onOpenDateAir),this.box_date4.off(Laya.Event.CLICK,this,this.onOpenDateAir),this.yearList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.monthList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.dayList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.hourList.off(Laya.Event.MOUSE_UP,this,this.onListStop),this.yearList2.off(Laya.Event.MOUSE_UP,this,this.onListStopAir),this.monthList2.off(Laya.Event.MOUSE_UP,this,this.onListStopAir),this.dayList2.off(Laya.Event.MOUSE_UP,this,this.onListStopAir),this.hourList2.off(Laya.Event.MOUSE_UP,this,this.onListStopAir),this.yearList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.monthList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.dayList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.hourList.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.yearList2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.monthList2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.dayList2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.hourList2.scrollBar.off(Laya.Event.CHANGE,this,this.onScrollBarChange),this.tf_uid.off(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.off(Laya.Event.FOCUS,this,this.uidFocus),this.hero_box.off(Laya.Event.CLICK,this,this.onHeroBoxClick),this.Img_prop.off(Laya.Event.CLICK,this,this.onPropClick),this.btn_createSubWallet.off(Laya.Event.CLICK,this,this.onCreateSubWallet),this.box_dividends.off(Laya.Event.CLICK,this,this.onOpeDividends),g.intance.off(f.CHANGE_WALLET_HERO,this,this.onHeroChange),g.intance.off(f.CHANGE_WALLET_HERO_AIR,this,this.onAirHeroChange),g.intance.off(f.CHANGE_WALLET_PROP,this,this.onPropChange),g.intance.off(f.ADD_AIR_WALLET_ITEM,this,this.addAirWalletItem),g.intance.off(f.ADD_AIR_SUB_WALLET_NAME,this,this.addAirWalletNameItem),g.intance.off(f.AIR_SUB_WALLET_OPENHERO,this,this.airdropOpenHeroView),g.intance.offAllCaller(this),this.btn_createSubWalletAir.off(Laya.Event.CLICK,this,this.onCreateSubWalletAir),this.box_Arean.off(Laya.Event.CLICK,this,this.onOpenType),this.tab1.off(Laya.Event.CLICK,this,this.onTabClick),this.tab2.off(Laya.Event.CLICK,this,this.onTabClick)}resetColors(e,i,n){let r=[e,i,n];for(let l of r)for(var s=0;s<l.cells.length;s++){var o=l.cells[s];o.tf_date.color="#357cc0"}}onOpenDate(e,i){this.resetColors(this.yearList,this.monthList,this.dayList),this.onHideDivi(),e.visible==!1?(i==this.box_date?(e.y=306,this.dateOpenState=1):(e.y=20,this.dateOpenState=2),this.getDateInfo(),e.visible=!0,this.img_bg.on(Laya.Event.CLICK,this,this.hideAllPad)):(e.visible=!1,this.dateOpenState=0)}onOpenDateAir(e,i){this.resetColors(this.yearList2,this.monthList2,this.dayList2),this.onHideDivi(),e.visible==!1?(i==this.box_date3?(e.x=125,this.dateOpenState=1):(e.x=664,this.dateOpenState=2),this.getDateInfoAir(),e.visible=!0,this.img_bg.on(Laya.Event.CLICK,this,this.hideAllPad)):(e.visible=!1,this.dateOpenStateAir=0)}hideAllPad(){this.img_date_pad.visible=!1,this.img_date_pad2.visible=!1,this.img_bg.off(Laya.Event.CLICK,this,this.hideAllPad)}initTypeList(){let e=_.intance.getArenaTypesInSub(),i={name:"Professional & Airdrop"};e.push(i),this.list_type.array=e,this.list_type.selectHandler=new Laya.Handler(this,this.handleSelectType),this.list_type.mouseHandler=Laya.Handler.create(this,this.onTypeItemMouse,null,!1),this.list_type.renderHandler=Laya.Handler.create(this,this.onTypeItemRender,null,!1),this.list_type.selectedIndex=0}getDateInfo(){this.renderDateInfo(this.dateOpenState,this.startDate,this.endDate,this.yearList,this.monthList,this.dayList,this.hourList)}getDateInfoAir(){this.renderDateInfo(this.dateOpenState,this.startDate,this.endDate,this.yearList2,this.monthList2,this.dayList2,this.hourList2)}renderDateInfo(e,i,n,r,s,o,l){let c=e==1?i:n;this.fillList(r,c.year,2e3,2050),this.fillList(s,c.month,1,12);let u=new Date().getFullYear(),p=new Date().getMonth()+1,d=Q.getDaysInMonth(u,p);this.fillList(o,c.day,1,d),this.fillList(l,c.hour,0,23)}fillList(e,i,n,r){let s=[],o=this.walletType?this.yearList2:this.yearList,l=this.walletType?this.monthList2:this.monthList,c=this.walletType?this.dayList2:this.dayList,u=this.walletType?this.hourList2:this.hourList;for(let d=n;d<=r;d++)s.push(d.toString());for(let d=1;d<=3;d++)s.push("");s=["",...s],e.array=s;let p=s.indexOf(`${i}`);if(p>-1){e.scrollTo(p-1),e.selectedIndex=p-1;let d=e.getCell(p);d.tf_date.color="#ffffff",e==o?this.beforeYearIndex=p:e==l?this.beforeMonthIndex=p:e==c?this.beforeDayIndex=p:e==u&&(this.beforeHourIndex=p)}}onYearChange(e){!this.yearList.array||this.monthList.selectedIndex<0||this.updateDayList(parseInt(this.yearList.array[e]),parseInt(this.monthList.array[this.monthList.selectedIndex]))}onMonthChange(e){!this.yearList.array||this.monthList.selectedIndex<0||this.updateDayList(parseInt(this.yearList.array[this.yearList.selectedIndex]),parseInt(this.monthList.array[e]))}onYearChangeAir(e){!this.yearList2.array||this.monthList2.selectedIndex<0||this.updateDayListAir(parseInt(this.yearList2.array[e]),parseInt(this.monthList2.array[this.monthList.selectedIndex]))}onMonthChangeAir(e){!this.yearList2.array||this.monthList2.selectedIndex<0||this.updateDayListAir(parseInt(this.yearList2.array[this.yearList2.selectedIndex]),parseInt(this.monthList2.array[e]))}updateDayList(e,i){let n=[];for(let r=1;r<=Q.getDaysInMonth(e,i);r++)n.push(r.toString());for(let r=1;r<=3;r++)n.push("");n=["",...n],this.dayList.array=n}updateDayListAir(e,i){let n=[];for(let r=1;r<=Q.getDaysInMonth(e,i);r++)n.push(r.toString());for(let r=1;r<=3;r++)n.push("");n=["",...n],this.dayList2.array=n}calculateVisibleHeight(e,i){let n=e.getCell(i);return Math.min(n.y+n.height,e.scrollBar.value+e.height)-Math.max(n.y,e.scrollBar.value)}onListStop(e,i){let n=this.dateOpenState==1?this.startDate:this.endDate,r=Math.floor(e.startIndex),s=r+1,o=this.calculateVisibleHeight(e,r),l=this.calculateVisibleHeight(e,s),c=o+14>=l?r:s;(i==="month"||i==="day"||i==="hour")&&(c=Math.min(c,e.array.length-5)),e.scrollTo(c),e.selectedIndex=c;let u=e.getCell(c+1);u.tf_date.color="#ffffff";let p=u.tf_date.text;if(p&&u){switch(i){case"year":this.onYearChange(c+1),n.year=Number(p);break;case"month":this.onMonthChange(c+1),n.month=Number(p);break;case"day":n.day=Number(p);break;default:n.hour=Number(p);break}this.refreshStartTime(this.dateOpenState)}}onListStopAir(e,i){let n=this.dateOpenState==1?this.startDate:this.endDate,r=Math.floor(e.startIndex),s=r+1,o=this.calculateVisibleHeight(e,r),l=this.calculateVisibleHeight(e,s),c=o+14>=l?r:s;(i==="month"||i==="day"||i==="hour")&&(c=Math.min(c,e.array.length-5)),e.scrollTo(c),e.selectedIndex=c;let u=e.getCell(c+1);u.tf_date.color="#ffffff";let p=u.tf_date.text;if(p&&u){switch(i){case"year":this.onYearChangeAir(c+1),n.year=Number(p);break;case"month":this.onMonthChangeAir(c+1),n.month=Number(p);break;case"day":n.day=Number(p);break;default:n.hour=Number(p);break}this.refreshStartTime(this.dateOpenState)}}onScrollBarChange(e,i,n){if(!n.visible)return;let r=this.dateOpenState==1?this.startDate:this.endDate;console.log("startDate",this.startDate);let s=Math.floor(e.startIndex),o=s+1,l=this.calculateVisibleHeight(e,s),c=this.calculateVisibleHeight(e,o),u=l+14>=c?s:o,p=e.getCell(u+1);p.tf_date.color="#ffffff";let d,L;switch(i){case"year":L=this.beforeYearIndex,this.beforeYearIndex=u+1;break;case"month":L=this.beforeMonthIndex,this.beforeMonthIndex=u+1;break;case"day":L=this.beforeDayIndex,this.beforeDayIndex=u+1;break;case"hour":L=this.beforeHourIndex,this.beforeHourIndex=u+1;break}L!==u+1&&(d=e.getCell(L),this.resetListStyle(d));let v=p.tf_date.text;if(p.tf_date.color="#ffffff",v&&p){switch(i){case"year":this.onYearChange(u+1),r.year=Number(v);break;case"month":this.onMonthChange(u+1),r.month=Number(v);break;case"day":r.day=Number(v);break;default:r.hour=Number(v);break}this.refreshStartTime(this.dateOpenState)}}async setPlayerName(){try{if(this.tf_uid.text=="")return;var e=await I.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});e&&(this.tf_player_name.text=e.name)}catch{}}uidFocus(){this.tf_uid.text="",this.tf_player_name.text=""}resetListStyle(e){e&&(e.tf_date.color="#357cc0")}refreshStartTime(e){let i,n,r;this.walletType==1?(i=e==1?this.startDate:this.endDate,n=e==1?this.tf_startAir:this.tf_startAir2,r=e==1?this.tf_hourAir:this.tf_hourAir2):(i=e==1?this.startDate:this.endDate,n=e==1?this.tf_start:this.tf_start2,r=e==1?this.tf_hour:this.tf_hour2);let s=i.month>=10?i.month:`0${i.month}`,o=i.day>=10?i.day:`0${i.day}`;n.text=`${i.year}-${s}-${o}`,r.text=`${i.hour}:00`}onHeroBoxClick(){A.intance.openModule(y.WalletChooseHeroDialog,[-1])}onPropClick(){this.list_type.selectedIndex!=1&&A.intance.openModule(y.WalletChoosePropsDialog,[Ge.CHOOSE_Wallet])}async onCreateSubWallet(){if(console.log("this.proCheckBox.selected",this.proCheckBox.selected),console.log("this.airCheckBox.selected",this.airCheckBox.selected),De.instance.inMinWaiting){T.instance.notice(m.instance.getLanguage(1187));return}if(this.tf_uid.text==W.instance.walletAddress){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1162),P.YES),this.tf_uid.text="",this.tf_player_name.text="";return}let e=this.tf_uid.text;if(e.length<=0||this.tf_player_name.text==""){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1161),P.YES);return}if(!this.heroVo){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1167),P.YES);return}let i,n=Number(this.tf_have.text);if(this.list_type.selectedIndex!==1){if(i=this.itemVo&&this.itemVo.m_iId,this.itemVo&&this.itemVo.itemItem.quality==3&&this.heroVo.heroItem.level!==3){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1163),P.YES);return}if((n<1||!this.itemVo)&&this.list_type.selectedIndex==0){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1166),P.YES);return}}else n=0,i=0;let r=ce.dateStringToTimestamp(this.tf_start.text,`${this.startDate.hour}`),s=ce.dateStringToTimestamp(this.tf_start2.text,`${this.endDate.hour}`),o=ce.getCurrentDayTimestamp();if(r<o){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1164),P.YES);return}if(s<=r){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1165),P.YES);return}let l=this.list_type.selectedIndex+1,c=Number(this.tf_div.text.replace("%","")),u=this.heroVo.pk;var p={startTime:r,endTime:s,ticketId:i,ticketCount:n,ratio:c,heroPk:u,openid:e.toLowerCase(),type:l};try{var d=await I.requestPost("wxgame/lease/create",p);d&&(T.instance.notice(m.instance.getLanguage(1168)),this.heroVo.pk==b.instance.playerDto.fightHeroPk&&(b.instance.playerDto.fightHeroPk=""),Laya.timer.once(200,this,()=>{g.intance.event(f.CREATE_SUB_WALLET_SUCCESS)}),this.close())}catch{}}async onCreateSubWalletAir(){let e=ce.dateStringToTimestamp(this.tf_startAir.text,`${this.startDate.hour}`),i=ce.dateStringToTimestamp(this.tf_startAir2.text,`${this.endDate.hour}`),n=ce.getCurrentDayTimestamp(),r=this.getEfficientList(this.airWalletDataArray);if(r.length<=0){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1352),P.YES);return}if(e<n){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1164),P.YES);return}if(i<=e){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1165),P.YES);return}console.log(e,i,n);var s=await I.requestPost("wxgame/lease/mutiCreate",{startTime:e,endTime:i,ratio:0,type:2,data:r});s&&(T.instance.notice(m.instance.getLanguage(1168)),this.close(),Laya.timer.once(200,this,()=>{g.intance.event(f.CREATE_SUB_WALLET_SUCCESS)}))}getEfficientList(e){let i=[];for(let n=0;n<e.length;n++){let r=e[n];r.name.length>0&&r.hero&&i.push({address:r.walletAddress,heroPk:r.hero.pk.toLowerCase()})}return i}showHeroData(){if(this.heroVo){this.img_back.skin=D.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=D.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=Be.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";We.instance.setStar(this,e),this.box_show.visible=!0,this.img_back.visible=!0,this.img_noHero.visible=!1}else this.box_show.visible=!1,this.img_back.visible=!1,this.img_noHero.visible=!0}initDiciList(){var e=_.intance.getGeneralValueById(9);this.list_divi.array=e,this.list_divi.selectHandler=new Laya.Handler(this,this.handleSelectDiv),this.list_divi.mouseHandler=Laya.Handler.create(this,this.onCountryItemMouse,null,!1),this.list_divi.renderHandler=Laya.Handler.create(this,this.onCountryItemRender,null,!1),this.list_divi.scrollBar&&this.list_divi.scrollBar.on(Laya.Event.MOUSE_DOWN,this,this.onScrollBarDown),this.list_divi.selectedIndex=0}initDiciList2(e){if(e==1){var i=_.intance.getGeneralValueById(9);this.list_divi.array=i,this.list_divi.selectedIndex=0}else{var i=_.intance.getGeneralValueById(18);this.list_divi.array=i,this.list_divi.selectedIndex=0}this.handleSelectDiv(0)}handleSelectDiv(e){if(e!=-1){let i=this.list_divi.selectedItem;this.tf_div.text=`${i}%`}}handleSelectType(e){if(this.itemVo=null,e!=-1){let i=this.list_type.selectedItem;this.tf_type.text=`${m.instance.getLanguage(i.name)}`,e==0?(this.clearProp(),this.initDiciList2(1),this.img_lock.visible=!1,this.img_jia.visible=!0):e==2?(this.initDiciList2(2),this.clearProp()):(this.initDiciList2(1),this.img_lock.visible=!0,this.tf_div.text="0%",this.img_jia.visible=!1,this.PropBox.visible=!1)}}onCountryItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_divi.selectedIndex=i,this.onHideDivi())}onTypeItemMouse(e,i){e.type===Laya.Event.CLICK&&(this.list_type.selectedIndex=i,this.onHideDivi())}onCountryItemRender(e,i){e.onChange(this.list_divi.selectedIndex==i)}onTypeItemRender(e,i){e.onChange(this.list_type.selectedIndex==i)}onOpeDividends(){this.list_type.selectedIndex!=1&&(this.img_divi_pad.visible=!0,this.img_bg.once(Laya.Event.MOUSE_DOWN,this,this.onHideDivi))}onHideDivi(){this.img_divi_pad.visible=!1,this.img_type_pad.visible=!1,this.img_bg.off(Laya.Event.MOUSE_DOWN,this,this.onHideDivi)}onScrollBarDown(e){e.stopPropagation()}onHeroChange(e){this.heroVo=e,this.showHeroData()}onOpenType(){this.img_type_pad.visible=!0,this.img_bg.once(Laya.Event.MOUSE_DOWN,this,this.onHideDivi)}onPropChange(e,i){this.itemVo||this.initDiciList2(1),this.itemVo=e;let n=_.intance.m_dicItems.get(e.itemItem.id.toString());this.PropBox.visible=!0,this.img_jia.visible=!1,n&&(this.img_prop_icon.skin=D.instance.getItemIcon(n.icon),this.img_prop_box.skin="gameIcon/items/itemBg/img_"+n.quality+".png",this.tf_all.text=""+Se.formatNumber(e._m_iNum,2),this.tf_have.text=""+Se.formatNumber(i,2))}clearProp(){this.PropBox.visible=!1,this.img_jia.visible=!0}onTabClick(e){e==1?(this.tab1.getChildByName("tf_tit").color="#143268",this.tab1.skin="res/scholarship/img_transfer_tab2.png",this.tab2.getChildByName("tf_tit").color="#429fdf",this.tab2.skin="res/scholarship/img_transfer_tab1.png",this.airBox.visible=!1,this.proBox.visible=!0,this.walletType=0,this.heroVo=null,this.heroPkList=[],this.showHeroData(),this.initTime()):(this.tab1.getChildByName("tf_tit").color="#429fdf",this.tab1.skin="res/scholarship/img_transfer_tab1.png",this.tab2.getChildByName("tf_tit").color="#143268",this.tab2.skin="res/scholarship/img_transfer_tab2.png",this.proBox.visible=!1,this.airBox.visible=!0,this.walletType=1,this.airWalletDataArray=[],this.initAirSubWallet(),this.initTime())}initTime(){let e=new Date;this.startDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours()},this.endDate={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours()},this.refreshStartTime(1),this.refreshStartTime(2)}initAirSubWallet(){this.airWalletDataArray=[],this.airWalletDataArray.push({hero:0,walletAddress:"",name:"",establish:!0,index:0}),this.airWalletDataArray.push({hero:0,walletAddress:"",name:"",establish:!1,index:1}),this.subAirdropWalletList.array=this.airWalletDataArray}addAirWalletItem(){let e={hero:0,walletAddress:"",name:"",establish:!1,index:this.airWalletDataArray.length};this.subAirdropWalletList.visible=!1,this.airWalletDataArray[this.airWalletDataArray.length-1].establish=!0,this.airWalletDataArray.push(e),this.subAirdropWalletList.array=[],this.subAirdropWalletList.array=this.airWalletDataArray,this.subAirdropWalletList.repeatY=this.airWalletDataArray.length-10,this.subAirdropWalletList.scrollTo(this.airWalletDataArray.length-1),this.subAirdropWalletList.visible=!0}addAirWalletNameItem(e){if(e){let i=e.index;this.airWalletDataArray[i].name=e.name,this.airWalletDataArray[i].walletAddress=e.walletAddress}}airdropOpenHeroView(e){A.intance.openModule(y.WalletChooseHeroDialog,[e,this.heroPkList])}onAirHeroChange(e,i){this.airWalletDataArray[i].hero=e,this.heroPkList.push(e.pk)}};G_=h([RR("_bHe6-EiQc-KiQ-mElnEIQ")],G_);var K_=class extends Laya.ComboBox{};var{regClass:PR}=Laya,q_=class extends K_{set defaultLabel(t){}onEnable(){this.getDateInfo()}set dataSource(t){super.dataSource=t;var e=t}set isOpen(t){console.log("isOpen: "+t),this._isOpen!=t&&(this._isOpen=t,this._isOpen?this.img_pad.visible=!0:this.img_pad.visible=!1)}};q_=h([PR("A2yeugt8S3Ot7ec482gdhQ")],q_);var W_=class extends Laya.Box{};var{regClass:NR}=Laya,Y_=class extends W_{set dataSource(e){super.dataSource=e,this.tf_date.text=e}onDisable(){}};Y_=h([NR("fCHaQKFSQ-ew26uygUCKnQ")],Y_);var z_=class extends Laya.Box{};var{regClass:OR}=Laya,j_=class extends z_{set dataSource(e){super.dataSource=e,this.tf_rate.text=`${e}%`}onChange(e){e?(this.selectImg.visible=!0,this.tf_rate.color="#ffffff"):(this.tf_rate.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};j_=h([OR("TToplFpGQGmUqT5SfNnVIg")],j_);var $_=class extends Laya.Dialog{};var{regClass:HR}=Laya,X_=class extends $_{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.employList.visible=!1,this.btn_back.on(Laya.Event.CLICK,this,this.closeEmployView)}async setOpenData(e){this.employList.vScrollBarSkin="";let i=e.heroData,n="";if(i){let r=ce.formatTimeStamp(Number(i.startTime),"YY-MT-DD HH:MM:SS"),s=ce.formatTimeStamp(Number(i.endTime),"YY-MT-DD HH:MM:SS");var e=await I.requestPost("wxgame/lease/heroInfo",{heroPk:i.heroPk});if(e&&e.info){let l=_.intance.m_dicShops.values,c=i.leaseType;if(c==0){let q=Q.getTitleByGoodsId(l,e.info.ticketId);q&&(n=m.instance.getLanguage(q)),e.info.ticketId==0&&(n=m.instance.getLanguage(1260))}else switch(c){case 1:n=m.instance.getLanguage(1261);break;case 2:n=m.instance.getLanguage(1260);break;case 3:n=`${m.instance.getLanguage(1260)}+${m.instance.getLanguage(1261)}`;break}let u="",p=e.info.allTicketCount,d=e.info.remainTicketCount,L=p-d;L<=0?u="0%":u=`${Math.round(e.info.winTimes/L*100)}%`;let v={Address:e.info.targetAddress,"Proxy player":i.playerName,Arena:n,"Remaining ticket":[i.remainCount,e.info.ticketId],"Combat scene":`${L}`,"Winner probability":`${u}`,Deserter:`${e.info.taopao}`,"Start date":r,"End date":s},w=Object.getOwnPropertyNames(v).map(q=>[q,v[q]]);this.employList.array=w;let R=-1;this.employList.selectedIndex=R,this.employList.visible=!0;let U=b.instance.m_heroData.heroVoDic.get(i.heroPk);if(this.img_back.skin=D.instance.getHeroBackIcon(U.heroItem.quality),this.img_front.skin=D.instance.getHeroFrontIcon(U.heroItem.quality),this.img_hero.skin=U.simgurl,this.tf_name.text=Be.shortHeroStr(U.name),i.reward&&i.reward.length>0){let q=Q.findFirstTypeAndNotGold(i.reward);q?(this.tf_score.text=q.count,this.img_money.skin=D.instance.getMoneyIcon(q.id),this.img_money.visible=!0):(this.tf_score.text="0",this.img_money.visible=!1)}else this.tf_score.text="0",this.img_money.visible=!1;let V=U.heroItem.level+"";We.instance.setStar(this,V)}}}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.closeEmployView)}closeEmployView(){this.close()}};X_=h([HR("4pjAWg8HScmRe8ukNRQsGg")],X_);var Q_=class extends Laya.Box{};var{regClass:UR}=Laya,J_=class extends Q_{constructor(){super()}createChildren(){super.createChildren()}set dataSource(t){super.dataSource=t,this.setEmploy(t)}setEmploy(t){if(!t)return;let e=t[0],i=t[1];this.item_name.text=e,this.item_value.visible=!0,e!=="Remaining ticket"&&e!=="Received"&&e!=="Bonus"&&(this.moneyImg.visible=!1),this.tf_address.visible=!1,e==="Agent Date"||e==="End Date"?this.item_value.text=ce.formatTimeStamp(Number(i),"YY-MT-DD HH:MM:SS"):e=="Remaining ticket"?(this.item_value.text=i[0],this.moneyImg.skin=`gameIcon/items/item/img_${i[1]}.png`):e=="Address"?(this.tf_address.visible=!0,this.item_value.visible=!1,this.tf_address.text=`${Q.shortenString(i,8,6)}`,this.btn_copy.on(Laya.Event.CLICK,this,this.onClickCopy,[i])):this.item_value.text=i}onClickCopy(t){t&&(doCopy(t),T.instance.notice(m.instance.getLanguage(132)))}onDisable(){this.removeEvent()}removeEvent(){this.btn_copy.off(Laya.Event.CLICK,this,this.onClickCopy)}};J_=h([UR("TAG-i7slRsKkXRu8SsaWHg")],J_);var Z_=class extends Laya.Dialog{};var{regClass:VR}=Laya,ev=class extends Z_{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.list_rental.visible=!1,this.showRentalData(),this.tf_rentedEarned.text=m.instance.getUILang("Rented-earned"),this.tf_proxyEarned.text=m.instance.getUILang("Proxy-earned"),this.tf_winRate.text=m.instance.getUILang("victory")}async showRentalData(){var e=await I.requestPost("wxgame/lease/listAll",{});this.list_rental.array=e.list,this.list_rental.visible=!0,!e.list||e.list.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,console.log(e)}onDisable(){this.removeEvent()}removeEvent(){}};ev=h([VR("peF5WS5zQgGqZq82ro5IyQ")],ev);var tv=class extends Laya.Box{};var{regClass:FR}=Laya,iv=class extends tv{constructor(){super()}createChildren(){super.createChildren()}set dataSource(t){super.dataSource=t,this.setEmploy(t)}setEmploy(t){if(!t)return;let e=ce.formatDayAndTime(t.startTime),i=ce.formatDayAndTime(t.endTime);this.tf_createDate.text=e.date,this.tf_endDate.text=i.date,this.tf_player.text=t.playerName;let n=_.intance.m_dicShops.values,r=t.leaseType;if(r==0){let l=Q.getTitleByGoodsId(n,t.ticketId);l&&(this.tf_arena.text=m.instance.getLanguage(l)),t.ticketId==0&&(this.tf_arena.text=m.instance.getLanguage(1260))}else switch(r){case 1:this.tf_arena.text=m.instance.getLanguage(1261);break;case 2:this.tf_arena.text=m.instance.getLanguage(1260);break;case 3:this.tf_arena.text=`${m.instance.getLanguage(1260)}+${m.instance.getLanguage(1261)}`;break}this.tf_dividends.text=`${t.leaseRatio}%`,this.tf_fight.text=`${t.fightTimes}`,this.tf_vic.text=`${t.winRate}%`;let s=t.leaseReward,o=t.proxyReward;if(s&&s.length>0){let l=Q.findFirstTypeAndNotGold(s);l&&(this.tf_earned.text=Se.filterNumFormat(l.count,2),this.img_coinType.skin=D.instance.getMoneyIcon(l.id),this.img_coinType.visible=!0)}else this.tf_earned.text="0",this.img_coinType.visible=!1;if(o&&o.length>0){let l=Q.findFirstTypeAndNotGold(o);l&&(this.tf_proxy.text=Se.filterNumFormat(l.count,2),this.img_coinType2.skin=D.instance.getMoneyIcon(l.id),this.img_coinType2.visible=!0)}else this.tf_proxy.text="0",this.img_coinType2.visible=!1}};iv=h([FR("bVHWCHZxQDSIcXWzNcq-MA")],iv);var av=class extends Laya.Box{};var{regClass:GR,property:n4e}=Laya,nv=class extends av{constructor(){super();this.isAddEvent=!1}set dataSource(e){if(e){if(super.dataSource=e,this.heroVo=e,!this.heroVo){this.img_back.skin=D.instance.getHeroBackIcon(0),this.box_show.visible=!1;return}this.addEvent(),this.setCurrentOutPut()}}async setCurrentOutPut(){this.img_back.skin=D.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=D.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=Be.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";We.instance.setStar(this,e),this.box_show.visible=!0,this.heroVo.state==1?(this.img_state.skin="gameIcon/hero/heroDetail/img_hero_state_2.png",this.img_state.visible=!0):this.heroVo.state==2?(this.img_state.skin="gameIcon/hero/heroDetail/img_hero_state_3.png",this.img_state.visible=!0):this.img_state.visible=!1}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}onDisable(){this.off(Laya.Event.CLICK,this,this.toDetail)}toDetail(){this.heroVo.id&&A.intance.openModule(y.HeroDetailDialog,[this.heroVo])}};nv=h([GR("vJhsY0hvQjyUXjU0-8xV7g")],nv);var rv=class extends Laya.Box{};var{regClass:KR}=Laya,sv=class extends rv{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,e&&(this.img_coin.skin=D.instance.getMoneyIcon(e.id),this.money_value.text=e.count,this.addEvent())}};sv=h([KR("TjAZ1yG-QkG5fetB03VUuA")],sv);var ov=class extends Laya.Scene{};var{regClass:qR,property:w4e}=Laya,lv=class extends ov{constructor(){super(...arguments);this.text=""}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onEnable(){this.list_hero.vScrollBarSkin="",this.RentalList.visible=!1,this.RevenueList.visible=!1,this.subWalletList.visible=!1,this.btn_sch.on(Laya.Event.CLICK,this,this.onClickSch),this.btn_jia.on(Laya.Event.CLICK,this,this.onClickJia),this.btn_yi.on(Laya.Event.CLICK,this,this.onClickYi),g.intance.on(f.CREATE_SUB_WALLET_SUCCESS,this,this.createSubWalletSuccess),this.btn_subwallet.on(Laya.Event.CLICK,this,this.onClickSubwallet),this.btn_createSubWallet.on(Laya.Event.CLICK,this,this.onClickCreateSubwallet),this.btn_rental.on(Laya.Event.CLICK,this,this.onClickRentalRecord),this.close&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.onClickSch(),this.initHeroData()}async setMoneyData(){let e=await I.requestPost("wxgame/lease/outline",{});if(e&&e.reward){let i=Q.processItemsArray(e.reward)[0];this.RentalList.array=i,this.RentalList.visible=!0}if(e&&e.childReward){let i=Q.processItemsArray(e.childReward)[0];this.RevenueList.array=i,this.RevenueList.visible=!0}}initContainer(e){this.list_hero.visible=!1,this.list_hero.vScrollBarSkin="",this.createHeadList(e)}async createHeadList(e){if(!this)return;let i=e;if(i){this.list_hero.selectedIndex=1,this.list_hero.array=i,this.list_hero.visible=!0,this.tf_heroTotal.text=`${this.list_hero.array.length}`;let n=-1;this.list_hero.selectedIndex=n}(!i||i.length<=0)&&(this.noDataBox.visible=!0)}async initHeroData(){await gt.instance.ownerHero(!0)}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}setTabState(e,i,n,r){e.getChildByName("selectBox").visible=i,e.getChildByName("tf_txt").color=i?n:r}onClickSch(){this.box_1.visible=!0,this.list_hero.visible=!1,this.subWalletBox.visible=!1,this.noDataBox.visible=!1,this.setTabState(this.btn_sch,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_jia,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_yi,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_subwallet,!1,"#143f6b","#7ff1fe"),this.setMoneyData()}async onClickJia(){await gt.instance.ownerHero(),this.box_1.visible=!1,this.list_hero.visible=!0,this.subWalletBox.visible=!1,this.noDataBox.visible=!1,this.setTabState(this.btn_jia,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_sch,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_yi,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_subwallet,!1,"#143f6b","#7ff1fe");let e=b.instance.m_heroData.heroVoDic.values,i=Q.filterObjectsByState(e,1);this.initContainer(i)}async onClickYi(){await gt.instance.ownerHero(),this.box_1.visible=!1,this.list_hero.visible=!0,this.subWalletBox.visible=!1,this.noDataBox.visible=!1;let e=b.instance.m_heroData.heroVoDic.values,i=Q.filterObjectsByState(e,2);this.initContainer(i),this.setTabState(this.btn_yi,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_sch,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_jia,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_subwallet,!1,"#143f6b","#7ff1fe")}async onClickSubwallet(){this.box_1.visible=!1,this.list_hero.visible=!1,this.subWalletBox.visible=!0,this.noDataBox.visible=!1,this.setTabState(this.btn_subwallet,!0,"#143f6b","#7ff1fe"),this.setTabState(this.btn_sch,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_jia,!1,"#143f6b","#7ff1fe"),this.setTabState(this.btn_yi,!1,"#143f6b","#7ff1fe");var e=await I.requestPost("wxgame/lease/list",{});if(e){let i=e.list;i.sort((r,s)=>s.createTime-r.createTime);let n=e.list.length;for(let r=0;r<i.length;r++)i[r].rank=r+1;if(i){this.subWalletList.selectedIndex=1,i.push(void 0),i.push(void 0),i.push(void 0),this.subWalletList.array=i,this.tf_subTotal.text=`${n}`,this.subWalletList.visible=!0;let r=-1;this.subWalletList.selectedIndex=r}(!i||i.length<=0)&&(this.noDataBox.visible=!0)}}createSubWalletSuccess(){Laya.timer.once(800,this,this.onClickSubwallet)}onClickCreateSubwallet(){A.intance.openModule(y.CreateSubWalletDialog)}onClickRentalRecord(){A.intance.openModule(y.RentalRecordDialog)}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.setToMainScene),this.btn_sch.off(Laya.Event.CLICK,this,this.onClickSch),this.btn_jia.off(Laya.Event.CLICK,this,this.onClickJia),this.btn_yi.off(Laya.Event.CLICK,this,this.onClickYi),this.btn_subwallet.off(Laya.Event.CLICK,this,this.onClickSubwallet),this.btn_createSubWallet.off(Laya.Event.CLICK,this,this.onClickCreateSubwallet),g.intance.offAllCaller(this)}};lv=h([qR("eB5n1zn1RD2i2F-bAki-sQ")],lv);var cv=class extends Laya.Box{};var{regClass:WR}=Laya,uv=class extends cv{constructor(){super();this.isAddEvent=!1;this.allData=null}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}this.allData=e,g.intance.on(f.CHANGE_WALLET_HERO_AIR,this,this.onAirHeroChange),this.btn_add.on(Laya.Event.CLICK,this,this.onClickAdd,[e]),this.img_noHero.on(Laya.Event.CLICK,this,this.onClickNohero),this.tf_address.on(Laya.Event.BLUR,this,this.setPlayerName),this.setData()}setData(){this.dataBox.visible=this.allData.establish,this.btn_add.visible=!this.allData.establish,this.allData.hero?this.showHeroData(this.allData.hero):(this.box_show.visible=!1,this.img_back.visible=!1,this.img_noHero.visible=!0),this.allData.walletAddress.length>0?this.tf_address.text=this.allData.walletAddress:this.tf_address.text="",this.allData.name.length>0?this.tf_playerName.text=this.allData.name:this.tf_playerName.text=""}onClickAdd(){g.intance.event(f.ADD_AIR_WALLET_ITEM,[this.allData.index])}onClickNohero(){g.intance.event(f.AIR_SUB_WALLET_OPENHERO,[this.allData.index])}onAirHeroChange(e,i){!e||i!==this.allData.index||this.showHeroData(e)}showHeroData(e){this.allData.hero=e,this.box_show.visible=!0,this.img_back.visible=!0,this.img_noHero.visible=!1,this.img_back.skin=D.instance.getHeroBackIcon(e.heroItem.quality),this.img_front.skin=D.instance.getHeroFrontIcon(e.heroItem.quality),this.img_hero.skin=e.simgurl,this.tf_name.text=Be.shortHeroStr(e.name);let i=e.heroItem.level+"";We.instance.setStar(this,i)}async setPlayerName(){try{if(this.tf_address.text=="")return;if(this.tf_address.text==W.instance.walletAddress){T.instance.notice(m.instance.getLanguage(1162));return}var e=await I.requestPost("wxgame/sys/queryName",{openid:this.tf_address.text.toLowerCase()});e&&(console.log(e),this.tf_playerName.text=e.name,g.intance.event(f.ADD_AIR_SUB_WALLET_NAME,[{name:e.name,walletAddress:this.tf_address.text,index:this.allData.index}]))}catch{console.log("未找到该玩家，请核对地址")}}onDisable(){g.intance.off(f.CHANGE_WALLET_HERO_AIR,this,this.onAirHeroChange),this.btn_add.off(Laya.Event.CLICK,this,this.onClickAdd),this.img_noHero.off(Laya.Event.CLICK,this,this.onClickNohero),this.tf_address.off(Laya.Event.BLUR,this,this.setPlayerName)}};uv=h([WR("8bSpqI3UR8KoEpwSxDv_7g")],uv);var mv=class extends Laya.Box{};var{regClass:YR}=Laya,pv=class extends mv{constructor(){super();this.isAddEvent=!1;this.heroPk=null}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,!e){this.visible=!1;return}let{rank:i,heroPk:n,ticketId:r,playerName:s,remainCount:o,reward:l,leaseType:c}=e;this.tf_rank.text=i,this.heroPk=n;let u=_.intance.m_dicShops.values;if(c==0){let p=Q.getTitleByGoodsId(u,r);p&&(this.tf_arena.text=m.instance.getLanguage(p)),r==0&&(this.tf_arena.text=m.instance.getLanguage(1260))}else switch(c){case 1:this.tf_arena.text=m.instance.getLanguage(1261);break;case 2:this.tf_arena.text=m.instance.getLanguage(1260);break;case 3:this.tf_arena.text=`${m.instance.getLanguage(1260)}+${m.instance.getLanguage(1261)}`;break}if(this.tf_name.text=s,this.tf_venue.text=o,this.btn_detail.off(Laya.Event.CLICK,this,this.onClickDetail),this.btn_detail.on(Laya.Event.CLICK,this,this.onClickDetail,[e]),this.addEvent(),l&&l.length>0){let p=Q.findFirstTypeAndNotGold(l);p&&(this.tf_score.text=p.count,this.img_money.skin=D.instance.getMoneyIcon(p.id),this.img_money.visible=!0)}else this.tf_score.text="0",this.img_money.visible=!1}onClickDetail(e){A.intance.openModule(y.EmployInfoDialog,{heroData:e})}onDisable(){this.btn_detail&&this.btn_detail.off(Laya.Event.CLICK,this,this.onClickDetail)}};pv=h([YR("5iGLLzQkR8mqhVsrdybXCQ")],pv);var hv=class extends Laya.Box{};var{regClass:zR}=Laya,dv=class extends hv{set dataSource(e){e&&(super.dataSource=e,e.name=="Professional & Airdrop"?this.tf_rate.text="Professional & Airdrop":this.tf_rate.text=`${m.instance.getLanguage(e.name)}`)}onChange(e){e?(this.selectImg.visible=!0,this.tf_rate.color="#ffffff"):(this.tf_rate.color="#357cc0",this.selectImg.visible=!1)}onDisable(){}};dv=h([zR("_iWKrJX7QK6BqGFWXcrKUw")],dv);var fv=class extends Laya.Dialog{};var{regClass:jR}=Laya,yv=class extends fv{constructor(e){super();this.itemIndex=-1;this.heroList=[];this.useHeroList=[]}onEnable(){console.log(b.instance.playerDto.fightHeroPk),this.list_hero.visible=!1,this.createHeadList(),this.btn_transfer.on(Laya.Event.CLICK,this,this.onBtnTramsfer)}async setOpenData(e){this.itemIndex=e[0],this.useHeroList=e[1]}onBtnTramsfer(){let e=this.list_hero.selectedIndex;if(e<0){me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1167),P.YES);return}let i=this.heroList[e];this.itemIndex!==-1?g.intance.event(f.CHANGE_WALLET_HERO_AIR,[i,this.itemIndex]):g.intance.event(f.CHANGE_WALLET_HERO,i),console.log("onBtnTramsfer",e),this.close()}async createHeadList(){if(!this)return;await gt.instance.ownerHero();let e=b.instance.m_heroData.heroVoDic.values;if(this.itemIndex!==-1?this.heroList=Q.filterObjectsByState(e,0,this.useHeroList):this.heroList=Q.filterObjectsByState(e,0),this.heroList.sort((i,n)=>{if(i===null&&n!==null)return 1;if(i!==null&&n===null)return-1;if(i!==null&&n!==null){if(i.heroItem.quality!==n.heroItem.quality)return n.heroItem.quality-i.heroItem.quality;if(i.heroItem.icon===null&&n.heroItem.icon!==null)return 1;if(i.heroItem.icon!==null&&n.heroItem.icon===null)return-1;if(i.heroItem.icon!==n.heroItem.icon)return i.heroItem.icon<n.heroItem.icon?-1:1}return 0}),this.heroList){this.list_hero.array=this.heroList,this.list_hero.visible=!0;let i=-1;this.list_hero.selectedIndex=i}}onDisable(){this.btn_transfer.off(Laya.Event.CLICK,this,this.onBtnTramsfer)}};yv=h([jR("8aIFsnkXTaWPXwTKHxCGpQ")],yv);var bv=class extends Laya.Dialog{};var{regClass:$R}=Laya,gv=class extends bv{constructor(e){super();this.propValue=1;this.propNum=1;this.propData=null;this.heroPk=null;this.chooseType=1;this.subType=1;this.posNum=1;this.items=[]}onEnable(){this.txt_num.text="1",this.listPanel1.visible=!1,this.btn_subtract.on(Laya.Event.CLICK,this,this.changePropNum,[!1]),this.btn_add.on(Laya.Event.CLICK,this,this.changePropNum,[!0]),this.listPanel1.selectHandler=new Laya.Handler(this,this.handleSelectProp),this.btn_transfer.on(Laya.Event.CLICK,this,this.onBtnTramsfer),g.intance.on(f.SHOW_EQUIP_TIP,this,this.showEquipTip),this.initPropList()}setOpenData(e){e&&(this.chooseType=e[0],this.subType=e[1],this.posNum=e[3],this.equipList=e[4],this.chooseType==Ge.CHOOSE_Wallet?(this.btn_transfer.label=m.instance.getUILang("Transfer in"),this.box_count.visible=!0,this.tf_title.text=m.instance.getUILang("Select tickets")):(this.heroPk=e[2],this.btn_transfer.label=m.instance.getUILang("Put on"),this.box_count.visible=!1,this.tf_title.text=m.instance.getUILang("Select equipment")))}changePropNum(e){e?this.propValue=Math.min(this.propValue+1,this.propNum):this.propValue=Math.max(this.propValue-1,1),this.txt_num.text=`${this.propValue}`}async initPropList(){await gt.instance.ownerBag();var e=this.getItemByType();this.propData=e,this.listPanel1.array=e,this.listPanel1.selectedIndex=0,this.listPanel1.visible=!0}handleSelectProp(e){if(e!==-1){this.propValue=1,this.txt_num.text="1";let i=this.listPanel1.selectedItem;i&&(this.propNum=Number(i._m_iNum),console.log(this.propNum))}}showEquipTip(e){if(this.chooseType!==Ge.CHOOSE_Wallet){let i=e.data;this.EquipDetailBox.dataSource=i,e.positionX<500?this.EquipDetailBox.x=e.positionX+175:this.EquipDetailBox.x=e.positionX-440,this.EquipDetailBox.visible=!0,this.equipBgBox.visible=!0,this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips)}}hideTips(){this.EquipDetailBox.visible=!1,this.equipBgBox.visible=!1,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}async onBtnTramsfer(){let e=this.propData[this.listPanel1.selectedIndex],i=this.propValue;if(i<=0||!e){this.chooseType==Ge.CHOOSE_Wallet?me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1166),P.YES):T.instance.notice(m.instance.getLanguage(1282,m.instance.getLanguage(e.itemItem.name)));return}if(this.chooseType==Ge.CHOOSE_Wallet)g.intance.event(f.CHANGE_WALLET_PROP,[e,i]),this.close();else if(this.heroPk){let n=this.listPanel1.selectedItem,r=this.subType;this.subType==12&&(r=this.posNum);let s=await I.requestPost("wxgame/equip/wear",{heroPk:this.heroPk,bagPk:n.m_iPk,pos:r});s&&(console.log(s),s.cur.pos=s.pos,this.close(),g.intance.event(ei.UPDATE_HERO_EQUIP,s.cur))}}getItemByType(){this.items=[];var e;if(this.chooseType==Ge.CHOOSE_Wallet){this.subType=7;let r=b.instance.m_packageData.getListBySubType(this.subType),s=b.instance.m_packageData.getListBySubType(13);e=[...r,...s]}else e=b.instance.m_packageData.getListBySubType(this.subType);for(var i=0;i<e.length;i++){var n=e[i];this.equipList&&this.equipList.length>0?this.equipList.indexOf(n.itemItem.id)<0&&this.items.push(n):this.items.push(n)}return this.items}onDisable(){this.btn_subtract.off(Laya.Event.CLICK,this,this.changePropNum),this.btn_add.off(Laya.Event.CLICK,this,this.changePropNum),this.btn_transfer.off(Laya.Event.CLICK,this,this.onBtnTramsfer),this.stage.off(Laya.Event.CLICK,this,this.hideTips),g.intance.off(f.SHOW_EQUIP_TIP,this,this.showEquipTip)}};gv=h([$R("WY66k0UbQfiwaG80emIzjA")],gv);var Lv=class extends Laya.Box{};var{regClass:XR}=Laya,_v=class extends Lv{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.addEvent(),this.setCurrentOutPut(e)}async setCurrentOutPut(e){if(e){let i=_.intance.m_dicItems.get(e.ticketId.toString());this.txt_num.text=""+Se.formatNumber(e.ticketCount,8),this.img_icon.skin=D.instance.getItemIcon(i.icon),this.img_box.skin="gameIcon/items/itemBg/img_"+i.quality+".png"}else this.txt_num.text="",this.img_icon.skin=null,this.img_box.skin="gameIcon/items/itemBg/img_0.png"}};_v=h([XR("QLIqcx2YSRWf6b4T0P4N6Q")],_v);var vv=class extends Laya.Box{};var{regClass:QR}=Laya,xv=class extends vv{set dataSource(e){super.dataSource=e,e&&(this.tf_data.text=e)}onDisable(){}onChange(e){e?(this.selectImg.visible=!0,this.tf_data.color="#ffffff"):(this.tf_data.color="#357cc0",this.selectImg.visible=!1)}};xv=h([QR("3viWNkWoRRS9EWM3SzguDg")],xv);var Iv=class extends Laya.Dialog{};var{regClass:JR}=Laya,Ev=class extends Iv{constructor(){super();this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.addL=1}onEnable(){this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_send.on(Laya.Event.CLICK,this,this.buyTicket)}setOpenData(e){if(e){console.log(e),this.shopItem=e[0],this.tf_name.text=m.instance.getLanguage(this.shopItem.title),this.tf_des.text=m.instance.getLanguage(this.shopItem.des),this.tf_price.text=`${this.shopItem.cost[1]}`,this.img_moneyIcon.skin=D.instance.getMoneyIcon(this.shopItem.cost[0]),this.img_icon.skin=D.instance.getItemIcon(this.shopItem.icon);var i=_.intance.m_dicItems.get(this.shopItem.icon);this.img_box.skin="gameIcon/items/itemBg/img_"+i.quality+".png",this.setItemNum(),b.instance.pveOpen==1&&this.shopItem.id==2041?(this.addL=100,this.btn_plus.disabled=!0,this.btn_reduce.disabled=!0,this.tf_num.disabled=!0,this.setItemNum()):(this.btn_plus.disabled=!1,this.btn_reduce.disabled=!1,this.tf_num.disabled=!1)}}onDisable(){}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}setItemNum(){this.tf_num.text=this.addL+"";let e=new fi(this.addL),i=new fi(this.shopItem.cost[1]),n=e.multiply(i).getValue();this.tf_needMoney.text=`${n}`}changeItemNum(){var e=parseInt(this.tf_num.text);(!e||e<1)&&(e=1),this.addL=e,this.setItemNum()}async buyTicket(){let e=Laya.Handler.create(this,()=>{this.close()});await gt.instance.recruitItem(this.shopItem.id,this.addL,e)}};Ev=h([JR("HVS6mG75Rv-dixx4tHjp2g")],Ev);var wv=class extends Laya.Box{};var{regClass:ZR}=Laya,Tv=class extends wv{constructor(){super(...arguments);this.coins=[[3022,2],[3001,2],[3011,2],[3013,4],[3010,2],[3007,4],[3006,6],[3015,2],[3016,2],[3005,0]]}onEnable(){let e=(Laya.stage.width-z.DESIGN_WIDTH)/2;this.img_coinsBg.right-=e,console.log("dWidth: "+e),this.updateLocalAssets(),g.intance.on(f.ROLE_INFO_CHANGE,this,this.updateLocalAssets),g.intance.on($t.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets),this.coins=_.intance.getGeneralValueById(19),this.list_coin.array=this.coins}onDisable(){g.intance.off(f.ROLE_INFO_CHANGE,this,this.updateLocalAssets),g.intance.off($t.UPDATE_LOCAL_WALLET_LIST_EVENT,this,this.updateLocalAssets)}updateLocalAssets(){this.list_coin.refresh()}};Tv=h([ZR("7P9MlqipSaG6QoKpQowDbQ")],Tv);var Cv=class extends Laya.Dialog{};var{regClass:eP}=Laya,Sv=class extends Cv{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.heroVo=null;this.rentalDto=null;this.coinType=3001;this.rentalTypeDatas=[];this.coinIds=[]}onEnable(){g.intance.on(f.CHANGE_WALLET_HERO,this,this.onHeroChange),this.hero_box.on(Laya.Event.CLICK,this,this.onHeroBoxClick),this.btn_create.on(Laya.Event.CLICK,this,this.onCreate)}async setOpenData(e){e&&e.length>0&&(this.rentalDto=e[0]),this.initContainer()}initContainer(){if(this.rentalDto){this.alertTitle.text=m.instance.getUILang("Modify rental information"),this.heroVo=new Pt;var e=this.rentalDto.heroDto;We.instance.setHeroVoByHeroDto(this.heroVo,e),this.input_amount.text=this.rentalDto.amount+"",this.input_minPeriod.text=this.rentalDto.minPeriod+"",this.input_maxPeriod.text=this.rentalDto.maxPeriod+"",this.input_hoursPeriod.text=this.rentalDto.minPeriod+"",this.rentalDto.pwdStr&&(this.input_pwd.text=this.rentalDto.pwdStr+""),this.input_telegram.text=this.rentalDto.hostPlayer.telegram+"",this.btn_create.label=m.instance.getUILang("Modify"),this.box_postPin.visible=!1,this.btn_create.x=412}else{this.alertTitle.text=m.instance.getUILang("Post rental information");var i;if(this.rentalType||this.rentalType==2){i=_.intance.m_dicHeroRent.get(2);var n=i.timeRange;this.input_minPeriod.text=n[0]+"",this.input_maxPeriod.text=n[1]+""}else{i=_.intance.m_dicHeroRent.get(1);var r=i.timeRange;this.input_hoursPeriod.text=r[0]+""}var s=b.instance.playerDto.telegram;s&&(this.input_telegram.text=s+""),this.btn_create.label=m.instance.getUILang("Post rental"),this.btn_create.x=529}this.showHeroData(),this.initRentalTypeCombo(),this.initCoinCombo()}initRentalTypeCombo(){var e=_.intance.m_dicHeroRent.values;this.rentalTypeDatas=[],e.forEach(r=>{this.rentalTypeDatas.push([r.type,m.instance.getLanguage(r.name)])}),console.log("this.rentalTypeDatas: ",this.rentalTypeDatas),this.rentalTypeCombo.selectHandler=new Laya.Handler(this,this.onSelectedRentalType),this.rentalTypeCombo.dataSource=this.rentalTypeDatas;let i=-1,n=0;if(this.rentalTypeDatas.length>0&&(i=0),this.rentalDto)for(let r of this.rentalTypeDatas){if(r[0]==this.rentalDto.rentalType){i=n;break}n++}this.rentalTypeCombo.selectedIndex=i}onSelectedRentalType(e){e!=-1&&(this.rentalType=this.rentalTypeDatas[e][0],console.log("您选中了 rentalType"+this.rentalType),this.setRoomInfo())}setRoomInfo(){var e=this.rentalType;if(e==1?(this.input_amount.text="0",this.coinCombo.selectedIndex=0,this.input_amount.disabled=!0,this.coinCombo.disabled=!0,this.box_hour.visible=!0,this.box_day.visible=!1):(this.input_amount.disabled=!1,this.coinCombo.disabled=!1,this.box_hour.visible=!1,this.box_day.visible=!0),!this.rentalDto){var i;if(this.rentalType==2){i=_.intance.m_dicHeroRent.get(2);var n=i.timeRange;this.input_minPeriod.text=n[0]+"",this.input_maxPeriod.text=n[1]+"",this.input_amount.text="1"}else{i=_.intance.m_dicHeroRent.get(1);var r=i.timeRange;this.input_hoursPeriod.text=r[0]+"",this.input_amount.text="0"}}}initCoinCombo(){var e=_.intance.m_dicHeroRent.get(2);this.coinIds=e.rentToken;var i=[];this.coinIds.forEach(s=>{var o=_.intance.m_dicItems.get(s);i.push(m.instance.getLanguage(o.name))}),this.coinCombo.selectHandler=new Laya.Handler(this,this.onSelectCoin),this.coinCombo.dataSource=i;let n=-1,r=0;if(i.length>0&&(n=0),this.rentalDto)for(let s of this.coinIds){if(s==this.rentalDto.coinType){n=r;break}r++}this.coinCombo.selectedIndex=n}onSelectCoin(e){e!=-1&&(this.coinType=this.coinIds[e],console.log("您选中了 coinType"+this.coinType))}onHeroChange(e){this.heroVo=e,this.showHeroData()}onDisable(){this.removeEvent()}removeEvent(){this.hero_box.off(Laya.Event.CLICK,this,this.onHeroBoxClick),this.btn_create.off(Laya.Event.CLICK,this,this.onCreate),g.intance.off(f.CHANGE_WALLET_HERO,this,this.onHeroChange)}onHeroBoxClick(){A.intance.openModule(y.WalletChooseHeroDialog,[-1])}async onCreate(){if(De.instance.inMinWaiting){T.instance.notice(m.instance.getLanguage(1187));return}if(!this.heroVo){T.instance.notice(m.instance.getLanguage(1671));return}var e=parseFloat(this.input_amount.text),i;let n=parseInt(this.input_maxPeriod.text);var r;if(this.rentalType==2){if(!(e>0)){T.instance.notice(m.instance.getLanguage(1670));return}i=parseInt(this.input_minPeriod.text),r=_.intance.m_dicHeroRent.get(2);var s=r.timeRange;if(Number.isNaN(i)||i<s[0]){T.instance.notice(m.instance.getLanguage(1667,s[0]));return}if(Number.isNaN(i)||n>s[1]){T.instance.notice(m.instance.getLanguage(1666,s[1]));return}if(n<i){T.instance.notice(m.instance.getLanguage(1668));return}}else{i=parseInt(this.input_hoursPeriod.text),console.log("minPeriod: ",i),r=_.intance.m_dicHeroRent.get(1);var o=r.timeRange;if(Number.isNaN(i)||i<o[0]||i>o[1]){T.instance.notice(m.instance.getLanguage(1669,o[0],o[1]));return}}let l=this.input_telegram.text;if(l==""){T.instance.notice(m.instance.getLanguage(1672));return}let c=this.input_pwd.text,u=this.input_postPin.text,p=this.heroVo.pk;var d=0;if(this.rentalDto)d=this.rentalDto.id;else if(u==""){T.instance.notice(m.instance.getLanguage(1673));return}var L={pk:p,rentalType:this.rentalType,minPeriod:i,maxPeriod:n,amount:e,coinType:this.coinType,telegram:l,pwd:c,postPin:u,rentId:d};try{var v="wxgame/hero/postRental";this.rentalDto&&(v="wxgame/hero/updateRental");var E=await I.requestPost(v,L);E&&(T.instance.notice(m.instance.getLanguage(2e3)),this.heroVo.pk==b.instance.playerDto.fightHeroPk&&(b.instance.playerDto.fightHeroPk=""),Laya.timer.once(200,this,()=>{g.intance.event(f.CREATE_SUB_WALLET_SUCCESS)}),this.close())}catch{}}showHeroData(){if(this.heroVo){this.img_back.skin=D.instance.getHeroBackIcon(this.heroVo.heroItem.quality),this.img_front.skin=D.instance.getHeroFrontIcon(this.heroVo.heroItem.quality),this.img_hero.skin=this.heroVo.simgurl,this.tf_name.text=Be.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";We.instance.setStar(this,e),this.box_show.visible=!0,this.img_back.visible=!0,this.img_noHero.visible=!1}else this.box_show.visible=!1,this.img_back.visible=!1,this.img_noHero.visible=!0}};Sv=h([eP("eequnT3KT7SdRQE-AcHqBw")],Sv);var Dv=class extends Laya.Box{};var{regClass:tP}=Laya,Av=class extends Dv{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.heroVo=e,this.heroVo&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.heroSk.dataSource=this.heroVo,this.tf_name.text=Be.shortHeroStr(this.heroVo.name);let e=this.heroVo.heroItem.level+"";We.instance.setStar(this,e)}};Av=h([tP("IcuwbMwvRKqMyiXxDzW-dA")],Av);var kv=class extends Laya.Dialog{};var{regClass:iP}=Laya,Bv=class extends kv{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.initContainer(),ze.instance.playSoundByName(ze.soundName32)}initContainer(){var e=ct.instance.getOneItem();e&&this.showItem(e)}showItem(e){let i=this.heroListItem;i.dataSource=e}onDisable(){g.intance.event(f.EVENT_CHECK_REMAIN,y.HeroGetDialog)}};Bv=h([iP("mrqJhWahTxuTjeSGIs559Q")],Bv);var Mv=class extends Laya.Dialog{};var{regClass:aP}=Laya,Rv=class extends Mv{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.rentalDto=null}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_cancel.on(Laya.Event.CLICK,this,this.onCancel),this.btn_modify.on(Laya.Event.CLICK,this,this.onModify)}async setOpenData(e){e&&(this.rentalDto=e),this.initContainer()}initContainer(){if(this.rentalDto){if(this.rentalHeroListItem.needPop=!0,this.rentalHeroListItem.dataSource=this.rentalDto,this.tf_name.text=this.rentalDto.hostPlayer.name+"",this.rentalDto.rentalType==1)this.tf_amount.text=m.instance.getUILang("FREE"),this.tf_period.text=m.instance.getLanguage(1659,this.rentalDto.minPeriod);else{var e=_.intance.m_dicItems.get(this.rentalDto.coinType),i=m.instance.getLanguage(e.name),n=Se.formatNumber(this.rentalDto.amount)+"",r=m.instance.getLanguage(1657,n,i);this.tf_amount.text=r,this.tf_period.text=m.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod)}this.tf_telegram.text="@"+this.rentalDto.hostPlayer.telegram}}onCopy(){let e=this.tf_telegram.text;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}onModify(){A.intance.openModule(y.CreateRentalDialog,[this.rentalDto])}async onCancel(){try{var e=await I.requestPost("wxgame/hero/cancelRental",{rentId:this.rentalDto.id});e&&(T.instance.notice(m.instance.getLanguage(2e3)),this.close())}catch{}}};Rv=h([aP("1SOPEqweRfCcPk1cmtAm_w")],Rv);var Pv=class extends Laya.Dialog{};var{regClass:nP}=Laya,Nv=class extends Pv{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.rentalDto=null;this.addL=1}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_rent.on(Laya.Event.CLICK,this,this.onBuyRent)}async setOpenData(e){e&&(this.rentalDto=e),this.initContainer()}initContainer(){if(this.rentalDto){if(this.rentalHeroListItem.needPop=!0,this.rentalHeroListItem.dataSource=this.rentalDto,this.tf_name.text=this.rentalDto.hostPlayer.name+"",this.rentalDto.rentalType==1)this.tf_amount.text=m.instance.getUILang("FREE"),this.tf_period.text=m.instance.getLanguage(1659,this.rentalDto.minPeriod);else{var e=_.intance.m_dicItems.get(this.rentalDto.coinType),i=m.instance.getLanguage(e.name),n=Se.formatNumber(this.rentalDto.amount)+"",r=m.instance.getLanguage(1657,n,i);this.tf_amount.text=r,this.tf_period.text=m.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod)}if(this.tf_telegram.text="@"+this.rentalDto.hostPlayer.telegram,this.rentalDto.clientPlayer?this.tf_clientAddress.text=this.rentalDto.clientPlayer.address:this.tf_clientAddress.text=W.instance.walletAddress,this.addL=this.rentalDto.minPeriod,this.setItemNum(),this.rentalDto.rentalType==1)this.box_count.disabled=!0,this.tf_days.text=m.instance.getUILang("Hours"),this.img_coinType.visible=!1;else{this.box_count.disabled=!1,this.tf_days.text=m.instance.getUILang("Hours");let o=this.rentalDto.coinType;this.img_coinType.skin=D.instance.getMoneyIcon(o),this.img_coinType.visible=!0}var s=b.instance.playerDto.telegram;s&&(this.input_telegram.text=s+"")}}onCopy(){let e=this.tf_telegram.text;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.onBtnchangeItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.onBtnchangeItemNum();break}}onBtnchangeItemNum(){console.log("changeItemNum");var e=this.addL;!e||e<this.rentalDto.minPeriod?e=this.rentalDto.minPeriod:(!e||e>this.rentalDto.maxPeriod)&&(e=this.rentalDto.maxPeriod),this.addL=e,this.setItemNum()}setItemNum(){this.tf_num.text=this.addL+"";let e=new fi(this.addL),i=new fi(this.rentalDto.amount),n=new fi(1.05),r=e.multiply(i).multiply(n).getValue();this.rentalDto.rentalType==1?this.tf_needMoney.text=m.instance.getUILang("FREE"):this.tf_needMoney.text=`${r}`}changeItemNum(){console.log("changeItemNum");var e=parseInt(this.tf_num.text);!e||e<this.rentalDto.minPeriod?e=this.rentalDto.minPeriod:(!e||e>this.rentalDto.maxPeriod)&&(e=this.rentalDto.maxPeriod),this.addL=e,this.setItemNum()}async onBuyRent(){let e=this.input_telegram.text;if(e==""){T.instance.notice(m.instance.getLanguage(1672));return}let i=this.input_pwd.text;var n=0;this.rentalDto&&(n=this.rentalDto.id);var r={rentId:n,day:this.addL,pwd:i,telegram:e};try{var s=await I.requestPost("wxgame/hero/buyRent",r);s&&(T.instance.notice(m.instance.getLanguage(2e3)),this.close())}catch{}}};Nv=h([nP("LmvdC_zJSDCFyZNK7p5Jhw")],Nv);var Ov=class extends Laya.Dialog{};var{regClass:rP}=Laya,Hv=class extends Ov{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER;this.rentalDto=null}onEnable(){this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.btn_clientCopy.on(Laya.Event.CLICK,this,this.onClientCopy)}async setOpenData(e){e&&(this.rentalDto=e),this.initContainer()}initContainer(){if(this.rentalDto){if(b.instance.playerDto.pid==this.rentalDto.hostPlayer.id?this.alertTitle.text=m.instance.getUILang("My leased NFT information"):this.rentalDto.clientPlayer&&b.instance.playerDto.pid==this.rentalDto.clientPlayer.id?this.alertTitle.text=m.instance.getUILang("My rented NFT information"):this.alertTitle.text=m.instance.getUILang("Rented NFT information"),this.rentalHeroListItem.needPop=!0,this.rentalHeroListItem.dataSource=this.rentalDto,this.tf_name.text=this.rentalDto.hostPlayer.name+"",this.rentalDto.rentalType==1)this.tf_amount.text=m.instance.getUILang("FREE"),this.tf_period.text=m.instance.getLanguage(1659,this.rentalDto.minPeriod);else{var e=_.intance.m_dicItems.get(this.rentalDto.coinType),i=m.instance.getLanguage(e.name),n=Se.formatNumber(this.rentalDto.amount)+"",r=m.instance.getLanguage(1657,n,i);this.tf_amount.text=r,this.tf_period.text=m.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod)}if(this.tf_telegram.text="@"+this.rentalDto.hostPlayer.telegram,this.rentalDto.clientPlayer){this.tf_clientName.text=this.rentalDto.clientPlayer.name,this.tf_clientTelegram.text="@"+this.rentalDto.clientPlayer.telegram,this.tf_clientAddress.text=this.rentalDto.clientPlayer.address;var s=ce.formatTimeStamp(this.rentalDto.startTime,"YY-MT-DD HH:MM:SS")+" ~ "+ce.formatTimeStamp(this.rentalDto.endTime,"YY-MT-DD HH:MM:SS");if(this.rentalDto.rentalType==1){var o=(this.rentalDto.endTime-this.rentalDto.startTime)/1e3/3600,l=Math.floor(o);this.tf_clientPeriod.text=s+`
(`+m.instance.getLanguage(1659,l)+")",this.tf_clientAmount.text=m.instance.getUILang("FREE"),this.img_coinType.visible=!1}else{var o=(this.rentalDto.endTime-this.rentalDto.startTime)/1e3/3600,l=Math.floor(o);this.tf_clientPeriod.text=s+`
(`+m.instance.getLanguage(1659,l)+")";var e=_.intance.m_dicItems.get(this.rentalDto.coinType),i=m.instance.getLanguage(e.name);this.tf_clientAmount.text=Se.formatNumberStr(this.rentalDto.totalAmount,8)+" "+i,this.img_coinType.visible=!1}var c=(this.rentalDto.endTime-b.instance.m_serverTime)/1e3;c<0&&(c=0),this.tf_clientRemain.text=ce.formatWithDay(c)}}}onCopy(){let e=this.tf_telegram.text;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}onClientCopy(){let e=this.tf_clientTelegram.text;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}};Hv=h([rP("fu0MF2szTCSq2tJ6Bpd2Bg")],Hv);var yo=class extends Laya.Box{};var{regClass:sP}=Laya,Uv=class extends yo{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.shopItem=e,this.shopItem&&(this.addEvent(),this.setCurrentOutPut())}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}onDisable(){this.off(Laya.Event.CLICK,this,this.toDetail)}async setCurrentOutPut(){let e=this.BagItem.getChildByName("selectBox");e.visible=!1,this.BagItem.dataSource=this.shopItem}toDetail(){console.log(this.x),this.shopItem&&(this.shopItem.type===Ge.TYPE_Equipment||this.shopItem.type===Ge.TYPE_CARD)&&g.intance.event(f.SHOW_EQUIP_SHOP_TIP,{data:this.shopItem,positionX:this.x})}};Uv=h([sP("NeXqnO0GSzGqgAW6thqXMA")],Uv);var Vv=class extends Laya.Box{};var{regClass:oP}=Laya,Fv=class extends Vv{constructor(){super(...arguments);this.isAddEvent=!1;this.needPop=!1}addEvent(){this.isAddEvent||(this.isAddEvent=!0,this.on(Laya.Event.CLICK,this,this.toDetail))}set dataSource(e){super.dataSource=e,this.rentalDto=e,this.rentalDto&&(this.needPop&&this.addEvent(),this.setCurrentOutPut())}setCurrentOutPut(){this.rentalDto.status==0?(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/shop/img_com_weizu.png",this.tf_status.text=m.instance.getUILang("For rent")):this.rentalDto.status==1?(this.img_jiaobiao.visible=!0,this.img_jiaobiao.skin="res/shop/img_com_yizu.png",this.tf_status.text=m.instance.getUILang("Rented")):this.img_jiaobiao.visible=!1,this.rentalDto&&(this.heroVo=new Pt,We.instance.setHeroVoByHeroDto(this.heroVo,this.rentalDto.heroDto),this.heroListItem.needPop=!1,this.heroListItem.dataSource=this.heroVo),this.rentalDto.hostPlayer&&(this.hostPid=this.rentalDto.hostPlayer.id),this.rentalDto.clientPlayer&&(this.clientPid=this.rentalDto.clientPlayer.id)}toDetail(){this.heroVo.id&&(console.log("this.hostPid: ",this.hostPid,"this.clientPid: ",this.clientPid),A.intance.openModule(y.HeroDetailDialog,[this.heroVo,this.hostPid,this.clientPid]))}};Fv=h([oP("O6PE6cUjT7yJadU6VROKcg")],Fv);var Gv=class extends Laya.Box{};var{regClass:lP}=Laya,Kv=class extends Gv{constructor(){super();this.isAddEvent=!1;this.needPop=!0}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.rentalDto=e,this.rentalDto&&(this.needPop&&this.addEvent(),this.setRentalData())}setRentalData(){if(this.img_my.visible=b.instance.playerDto.pid==this.rentalDto.hostPlayer.id,this.img_lock.visible=this.rentalDto.pwd,this.rentalDto.rentalType==2){this.tf_free.visible=!0;var e=_.intance.m_dicItems.get(this.rentalDto.coinType),i=m.instance.getLanguage(e.name),n=Se.formatNumber(this.rentalDto.amount)+"",r=m.instance.getLanguage(1657,n,i);this.tf_free.text=r,this.tf_period.text=m.instance.getLanguage(1658,this.rentalDto.minPeriod,this.rentalDto.maxPeriod)}else this.tf_free.visible=!0,this.tf_free.text=m.instance.getUILang("FREE"),this.tf_period.text=m.instance.getLanguage(1659,this.rentalDto.minPeriod);this.rentalHeroListItem.dataSource=this.rentalDto}toDetail(){var e=this.parent.parent.parent.parent.parent,i=e.nftTabIndex;console.log("nftTabIndex: "+i),this.rentalDto.status==1?A.intance.openModule(y.MyRentedDialog,this.rentalDto):i==4?A.intance.openModule(y.MyLeasedDialog,this.rentalDto):this.rentalDto.status==0&&(b.instance.playerDto.pid==this.rentalDto.hostPlayer.id?A.intance.openModule(y.MyLeasedDialog,this.rentalDto):A.intance.openModule(y.MyRentalBuyDialog,this.rentalDto))}};Kv=h([lP("B3yEIK7uQ02c8r0diwvrqg")],Kv);var qv=class extends Laya.Box{};var{regClass:cP}=Laya,Wv=class extends qv{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.shopItem=e,this.shopItem&&this.setCurrentOutPut()}async setCurrentOutPut(){if(this.tf_name.text=m.instance.getLanguage(this.shopItem.title),this.img_liked.visible=!1,this.img_red_shields_1.visible=!1,this.shopItem.cost.length>1?(this.img_const.skin=D.instance.getMoneyIcon(this.shopItem.cost[0]),this.tf_const.text=Se.formatNumber(this.shopItem.cost[1])+"",this.img_const.visible=!0,this.tf_const.visible=!0,this.tf_const.color="#ffffff",this.img_ask.visible=!1,this.shopItem.type==5?this.gray=!1:this.gray=this.shopItem.open==0,this.disabled=!1):(this.disabled=!0,this.img_const.visible=!1,this.tf_const.visible=!1,this.img_ask.visible=!1),this.shopItem.type==1)this.tf_name.color=wt.qualityColors[parseInt(this.shopItem.icon)-1],this.img_bg.skin=D.instance.getHeroQuality(this.shopItem.icon),this.img_icon.skin=D.instance.getHeroEggIcon(this.shopItem.icon);else if(this.shopItem.type==4)this.tf_name.color=wt.qualityColors[parseInt(this.shopItem.icon)-1],this.img_bg.skin=D.instance.getHeroQuality(this.shopItem.icon),this.img_icon.skin=D.instance.getChestIcon(this.shopItem.icon);else if(this.shopItem.type==5)if(this.shopItem.icon){var e=_.intance.m_dicItems.get(this.shopItem.icon);this.img_bg.skin=D.instance.getHeroQuality(e.quality+""),this.tf_name.color=wt.qualityColors[e.quality-1],this.img_icon.skin=D.instance.getItemIcon(this.shopItem.icon),this.img_red_shields_1.visible=!1,this.img_liked.visible=!1;var i=this.shopItem.currLike>=this.shopItem.totalLike;this.tf_const.visible=!0}else{var n=6;this.img_bg.skin=D.instance.getHeroQuality(n+""),this.tf_name.color=wt.qualityColors[n-1],this.img_icon.skin="res/shop/img_com_tub.png"}}};Wv=h([cP("awS07ko0RBaxCnxXWqiR4g")],Wv);var{regClass:uP}=Laya,Yv=class extends yo{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.shopItem=e,this.shopItem&&(this.addEvent(),this.setCurrentOutPut())}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.buyTicket),this.isAddEvent=!0)}async setCurrentOutPut(){if(this.tf_name.text=m.instance.getLanguage(this.shopItem.title),this.img_const.skin=D.instance.getMoneyIcon(this.shopItem.cost[0]),this.tf_const.text=Se.formatNumber(this.shopItem.cost[1])+"",this.shopItem.type==2){var e=_.intance.m_dicItems.get(this.shopItem.icon);this.img_bg.skin=D.instance.getItemQualityIcon(e.quality+""),this.tf_name.color=wt.qualityColors[e.quality-1],this.img_icon.skin=D.instance.getItemIcon(this.shopItem.icon)}}buyTicket(){A.intance.openModule(y.BuyTicketDialog,[this.shopItem])}};Yv=h([uP("din69PYeRbSapMB2H6E06g")],Yv);var zv=class extends Laya.Scene{};var{regClass:mP}=Laya,jv=class extends zv{constructor(){super(...arguments);this.currTab=0;this.type=1;this.selectItemId=-1;this.oid=1;this.addL=1;this.price=0;this.isSkReady=!1;this.nftType=1;this.nftTabIndex=1;this.coinTypes=[];this.coinDatas=[]}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onOpened(e){e&&e.length>0&&(this.type=e[0],e[1]!=null&&(this.selectItemId=e[1]),this.onClickTab(this.type))}onEnable(){g.intance.on(f.SHOW_EQUIP_SHOP_TIP,this,this.showEquipTip),g.intance.on(f.EVENT_HERO_DRAW_BACK,this,this.onDrawBack),g.intance.on(f.EVENT_END_HEROBUY,this,this.onWaitHeroInfoBack),g.intance.on(f.EVENT_CHECK_ICON_SELECT,this,this.onCoinSelected);for(let i=0;i<6;i++)this["tab"+i].on(Laya.Event.CLICK,this,this.onTabClick,[i]);for(let i=1;i<5;i++)this["tab_nft_"+i].on(Laya.Event.CLICK,this,this.onNftTabClick,[i]);this.btn_help.on(Laya.Event.CLICK,this,this.onHelp),this.tf_num.on(Laya.Event.BLUR,this,this.setItemNum),this.btn_recruit.on(Laya.Event.CLICK,this,this.onRecruit),this.btn_like.on(Laya.Event.CLICK,this,this.onLike),this.img_icon.on(Laya.Event.CLICK,this,this.onShowImg),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.btn_offers.on(Laya.Event.CLICK,this,this.onOffer),this.btn_create.on(Laya.Event.CLICK,this,this.onCreateRental);for(let i=1;i<7;i++)this["btn_"+i].on(Laya.Event.CLICK,this,this.onClickTab,[i]);this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.listPanel1.vScrollBarSkin="",this.listPanel1.selectHandler=Laya.Handler.create(this,this.onSelectItem,[],!1),this.listPanel2.vScrollBarSkin="",this.listPanel2.selectHandler=Laya.Handler.create(this,this.onSelectItem,[],!1),this.img_sk.on(Laya.Event.PLAYED,this,this.stopAni,[2]),this.box_2.visible=!1,this.initLuckDrawView();let e=(Laya.stage.height-z.DESIGN_HEIGHT)/2;Laya.timer.loop(1e3,this,this.refreshRedDot),this.img_red_offer.visible=b.instance.getRedDotById(ne.ROOM_OFFER_CARD)}async onRecruit(){if(this.shopItem.type==1){if(this.shopItem.open==0){T.instance.notice(m.instance.getLanguage(12));return}z.Debug==2?(this.setChou1Ani("animation"+this.shopItem.icon+"_1"),await gt.instance.recruit1(this.shopItem.id)):T.instance.notice(m.instance.getLanguage(12))}else{if(this.shopItem.open==0){T.instance.notice(m.instance.getLanguage(12));return}await gt.instance.recruitItem(this.shopItem.id,this.addL)}}onWaitHeroInfoBack(){this.setChou2Ani("animation"+this.shopItem.icon+"_2"),_e.instance.hideLoading()}setTab(e){for(let i=1;i<7;i++)e==i?(this["btn_"+i].getChildByName("selectBox").visible=!0,this["btn_"+i].getChildByName("tf_txt").color="#143f6b",this["btn_"+i].getChildByName("img_tab_icon").skin="res/shop/img_shop_"+i+"_s.png"):(this["btn_"+i].getChildByName("selectBox").visible=!1,this["btn_"+i].getChildByName("tf_txt").color="#7ff1fe",this["btn_"+i].getChildByName("img_tab_icon").skin="res/shop/img_shop_"+i+".png")}async initLuckDrawView(){this.destroyed||(this.type?this.onClickTab(this.type):this.onClickTab(1))}async onClickTab(e){if(this.currTab!=e){if(this.setTab(e),this.box_2.visible=!0,this.btn_help.visible=!1,Laya.timer.clear(this,this.getRoomByType),e==1){this.box_6.visible=!1;var i=this.getItemByType(1);this.shopItems=i[0],this.listPanel1.array=this.shopItems,this.listPanel1.selectedIndex=-1,this.listPanel1.selectedIndex=i[1],this.listPanel1.visible=!0,this.listPanel2.visible=!1,this.listPanel3.visible=!1,this.box_middle.visible=!0,this.box_offers.visible=!1,this.listPanel4.visible=!1}else if(e==2)this.box_6.visible=!1,this.selectItemId==-1?this.onTabClick(5):this.selectItemId==5?this.onTabClick(this.selectItemId):this.onTabClick(0),this.listPanel3.visible=!0,this.listPanel2.visible=!1,this.listPanel1.visible=!1,this.box_middle.visible=!1,this.box_offers.visible=!1,this.listPanel4.visible=!1;else if(e==3){this.box_6.visible=!1;var i=this.getItemByType(4);this.shopItems=i[0],this.listPanel1.dataSource=this.shopItems,this.listPanel1.selectedIndex=-1,this.listPanel1.selectedIndex=i[1],this.listPanel1.visible=!0,this.listPanel3.visible=!1,this.listPanel2.visible=!1,this.box_middle.visible=!0,this.box_offers.visible=!1,this.listPanel4.visible=!1}else if(e==4){this.box_6.visible=!1,this.btn_help.visible=!1,await this.getLikeInfo();var i=this.getItemByType(5);this.shopItems=i[0],this.listPanel1.dataSource=this.shopItems,this.listPanel1.selectedIndex=-1,this.listPanel1.selectedIndex=i[1],this.listPanel1.visible=!0,this.listPanel2.visible=!1,this.box_middle.visible=!0,this.listPanel3.visible=!1,this.box_offers.visible=!1,this.listPanel4.visible=!1}else e==5?(this.box_6.visible=!1,this.showOffer(),this.listPanel1.visible=!1,this.listPanel2.visible=!1,this.box_middle.visible=!1,this.listPanel3.visible=!1,this.box_offers.visible=!0,this.listPanel4.selectedIndex=-1):e==6&&(this.list_hero.array=null,this.initCoinCombo(),this.onNftTabClick(1),this.listPanel3.visible=!1,this.listPanel2.visible=!1,this.listPanel1.visible=!1,this.box_middle.visible=!1,this.box_offers.visible=!1,this.listPanel4.visible=!1,this.box_6.visible=!0);this.tabBox.visible=this.listPanel3.visible}}async showOffer(){let e=await I.requestPost("wxgame/offers/getInfo",{});if(e&&e.itemList){this.oid=e.oid,console.log(e);let r=e.itemList;var i=[];for(let s=0;s<r.length;s++){let o;if(r[s]instanceof Array){o=new vt,o.id=r[s][0],o.count=r[s][1];var n=new Pe(o.id);n.newAddCnt=o.count,i.push(n)}}this.listPanel4.array=i,this.listPanel4.visible=!0,this.btn_offers.disabled=!e.receive,e.receive?this.btn_offers.label="claim with one click":this.btn_offers.label="Claimed"}}async getLikeInfo(){this.likeDic=new le,this.likedDic=new le;let e=await I.requestPost("wxgame/dun/info",{});var i=e.itemInfo,n=e.star;i&&i.forEach(r=>{this.likeDic.set(r[0],r)}),n&&n.forEach(r=>{this.likedDic.set(r,!0)})}async onLike(){let e=await I.requestPost("wxgame/dun/star",{id:this.shopItem.id});if(e){var i=e.id,n=e.star;this.likeDic.set(i,[i,n]),this.likedDic.set(i,!0),this.selectItemId=parseInt(this.shopItem.icon);var r=this.getItemByType(5);this.shopItems=r[0],this.listPanel1.dataSource=this.shopItems,this.listPanel1.selectedIndex=-1,this.listPanel1.selectedIndex=r[1],this.listPanel1.visible=!0,this.listPanel2.visible=!1,this.listPanel4.visible=!1,T.instance.notice(m.instance.getLanguage(2e3))}}getItemByType(e,i=3){var n=_.intance.m_dicShops.values,r=[],s=-1,o=0;return n.forEach(l=>{if(l.type==e){if(e==5){var c=this.likeDic.get(l.id),u=this.likedDic.get(l.id);if(c){var p=c[1];l.currLike=p||0,l.liked=!!u}else l.currLike=0,l.liked=!1}if(e==2&&i!==1){var d=_.intance.m_dicItems.get(l.icon);d.quality==i&&r.push(l)}else r.push(l);this.selectItemId!=-1&&parseInt(l.icon)==this.selectItemId&&(s=o,this.selectItemId=-1),o++}}),s==-1&&r.length>0&&(s=0),[r,s]}onSelectItem(e){if(this.shopItem=this.shopItems[e],console.log(this.shopItem),this.shopItem){if(this.tf_name.text=m.instance.getLanguage(this.shopItem.title),this.tf_des.text=m.instance.getLanguage(this.shopItem.des),this.shopItem.cost.length>1)this.img_const.skin=D.instance.getMoneyIcon(this.shopItem.cost[0]),this.addL=1,this.price=Se.formatNumber(this.shopItem.cost[1]);else if(this.shopItem.open==0){T.instance.notice(m.instance.getLanguage(12));return}this.setPriceByNum();var i=this.shopItem.type;if(this.btn_recruit.disabled=!1,this.btn_recruit.visible=!1,this.btn_like.visible=!1,this.img_liked.visible=!1,this.img_const.visible=!1,this.tf_const.visible=!1,this.img_ask.visible=!1,i==1)this.btn_recruit.visible=!0,this.img_const.visible=!0,this.tf_const.visible=!0,z.Debug<2&&(this.btn_recruit.disabled=!0),this.img_icon.visible=!1,this.img_sk.visible=!0,this.setIdleAni("animation"+this.shopItem.icon+"_0"),this.box_count.visible=!1;else if(i==2)this.btn_recruit.visible=!0,this.img_const.visible=!0,this.tf_const.visible=!0,this.img_icon.skin=D.instance.getItemBigIcon(this.shopItem.icon),this.img_icon.y=60,this.img_icon.visible=!0,this.img_sk.visible=!1,this.box_count.visible=!0;else if(i==4)this.btn_recruit.visible=!0,this.img_const.visible=!0,this.tf_const.visible=!0,this.img_icon.skin=D.instance.getChestBigIcon(this.shopItem.icon),this.img_icon.y=110,this.img_icon.visible=!0,this.img_sk.visible=!1,this.box_count.visible=!1;else if(i==5){this.btn_recruit.visible=!0,this.img_const.visible=!0;var n=this.shopItem.currLike<this.shopItem.totalLike||this.shopItem.open==0;this.tf_const.visible=!0,this.img_ask.visible=!1,this.btn_recruit.gray=!1,this.btn_like.visible=!1,this.img_liked.visible=!1,this.img_red_shields_1.visible=!this.shopItem.liked,this.tf_like.text=this.shopItem.currLike+"/"+this.shopItem.totalLike,this.img_icon.skin=D.instance.getItemBigIcon(this.shopItem.icon),this.img_icon.y=80,this.img_icon.visible=!0,this.img_sk.visible=!1,this.box_count.visible=!1}}else this.tf_name.text="",this.tf_des.text="",this.img_icon.visible=!1,this.img_sk.visible=!1,this.box_count.visible=!1,this.btn_recruit.visible=!1}setItemNum(){var e=parseInt(this.tf_num.text);(!e||e<1)&&(e=1),this.addL=e,this.setPriceByNum()}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.setPriceByNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setPriceByNum();break}}setPriceByNum(){this.tf_num.text=this.addL+"",this.tf_const.text=Se.filterNumFormat(this.addL*this.price,8,!0)}onShowImg(){if(this.shopItem){var e=this.shopItem.type;if(e==5){var i=D.instance.getItemBigBigIcon(this.shopItem.icon);A.intance.openModule(y.ImgDialog,i)}}}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}stopAni(e){console.log("stopAni: "+e),this.isSkReady||(this.isSkReady=!0,this.callLater(this.stopSk))}stopSk(){this.img_sk.paused(),this.img_sk.stop()}setIdleAni(e){this.isSkReady?(this.img_sk.play(e,!1),this.img_sk.stop()):this.img_sk.animationName=e}setChou1Ani(e){this.isSkReady?this.img_sk.play(e,!0):this.img_sk.animationName=e}setChou2Ani(e){this.isSkReady?this.img_sk.play(e,!1):this.img_sk.animationName=e,Laya.timer.once(800,this,this.openHeroGetView)}openHeroGetView(){ct.instance.autoPop=!0,yi.instance.startShow(),this.setIdleAni("animation"+this.shopItem.icon+"_0")}onDrawBack(e){}refreshRedDot(){this.img_red_shields.visible=b.instance.getRedDotById(ne.RED_SHIELDS),this.img_red_6.visible=b.instance.getRedDotById(ne.RED_RENTAL)}onHelp(){if(this.shopItem){var e=_.intance.m_dicLikeIt.get(this.shopItem.id),i;e&&(i=e.sign);var n=m.instance.getLanguage(1532),r=m.instance.getLanguage(i);A.intance.openModule(y.HelpDialog,[2,n,r])}}startAni(){this.img_sk.paused(),this.img_sk.play(0,!1)}removeEvent(){Laya.timer.clearAll(this),g.intance.off(f.EVENT_HERO_DRAW_BACK,this,this.onDrawBack),g.intance.off(f.EVENT_END_HEROBUY,this,this.onWaitHeroInfoBack),g.intance.off(f.SHOW_EQUIP_SHOP_TIP,this,this.showEquipTip),g.intance.off(f.EVENT_CHECK_ICON_SELECT,this,this.onCoinSelected)}onTabClick(e){for(let i=0;i<6;i++)e==i?(this["tab"+i].skin="res/shop/img_com_tab_1.png",this["tab"+i].getChildByName("tf_tit").color="#143268",this.getTicketDataByIndex(e+1)):(this["tab"+i].skin="",this["tab"+i].getChildByName("tf_tit").color="#79c7fe")}getTicketDataByIndex(e){var i=this.getItemByType(2,e);this.shopItems=i[0],this.listPanel3.dataSource=this.shopItems,this.listPanel3.selectedIndex=-1,this.listPanel3.selectedIndex=i[1],this.listPanel3.scrollTo(i[1])}async onOffer(){let e=await I.requestPost("wxgame/offers/receive",{oid:this.oid});if(e){if(e.reward.length>0){let i=e.reward,n=[];i.forEach(r=>{var s=new vt;s.id=r.id,s.count=r.count,n.push(s)}),A.intance.openModule(y.RewardGetDialog,n)}this.img_red_offer.visible=!1,this.btn_offers.disabled=!e.receive,e.receive?this.btn_offers.label="claim with one click":this.btn_offers.label="Claimed"}}showEquipTip(e){let i=e.data;this.EquipDetailBox.dataSource=i,e.positionX<418?this.EquipDetailBox.x=e.positionX+200:this.EquipDetailBox.x=e.positionX-460,this.EquipDetailBox.visible=!0,this.equipBgBox.visible=!0,this.equipBgBox.on(Laya.Event.CLICK,this,this.hideTips)}hideTips(){this.EquipDetailBox.visible=!1,this.equipBgBox.visible=!1,this.equipBgBox.off(Laya.Event.CLICK,this,this.hideTips)}onNftTabClick(e){this.list_hero.array=null;for(let i=1;i<5;i++)e==i?(this["tab_nft_"+i].skin="res/shop/img_com_tab (2).png",this["tab_nft_"+i].getChildByName("tf_tit").color="#ffffff",this.getNftDataByIndex(e)):(this["tab_nft_"+i].skin="",this["tab_nft_"+i].getChildByName("tf_tit").color="#84ccff");e==1?this.list_nft_coin.visible=!1:this.list_nft_coin.visible=!1}getNftDataByIndex(e){if(this.btn_create.visible=e==4,this.nftTabIndex=e,e==1){this.nftType=2;var i=this.getRoomByType()}else if(e==2){this.nftType=1;var i=this.getRoomByType()}else if(e==3)var i=this.getRoomByType();else if(e==4)var i=this.getRoomByType();Laya.timer.loop(3e3,this,this.getRoomByType)}showCoinCombo(){this.nftTabIndex==1?this.list_nft_coin.visible=!1:this.list_nft_coin.visible=!1}initCoinCombo(){this.showCoinCombo();var e=_.intance.m_dicHeroRent.get(2);this.coinTypes=[];var i=e.rentToken;this.coinDatas=[],i.forEach(n=>{this.coinTypes.push(n);var r=_.intance.m_dicItems.get(n);this.coinDatas.push([n,!0,m.instance.getLanguage(r.name)])}),this.list_nft_coin.array=this.coinDatas}onCoinSelected(){this.coinTypes=[],this.coinDatas.forEach(e=>{e[1]&&this.coinTypes.push(e[0])}),console.log("您选中了 coinType"+this.coinTypes),this.getRoomByType()}async getRoomByType(){let e;if(this.nftTabIndex==3){if(e=await I.requestPost("wxgame/hero/myRented",{}),this.destroyed)return}else if(this.nftTabIndex==4){if(e=await I.requestPost("wxgame/hero/myRentedLeased",{}),this.destroyed)return}else if(e=await I.requestPost("wxgame/hero/rentalMarket",{type:this.nftType,coinTypeList:this.coinTypes}),this.destroyed)return;this.list_hero.array=e.list,this.list_hero.array.length>0?this.noDataBox.visible=!1:this.noDataBox.visible=!0}onCreateRental(){A.intance.openModule(y.CreateRentalDialog,[])}onDisable(){Laya.timer.clear(this,this.getRoomByType)}};jv=h([mP("IPCUkD5kRse3Gz5tw0Aovw")],jv);var $v=class extends Laya.Dialog{};var{regClass:pP}=Laya,Xv=class extends $v{constructor(e){super();this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_POP;this.m_iPositionType=C.CENTER}onEnable(){this.list_head.vScrollBarSkin="",this.btn_confirm.on(Laya.Event.CLICK,this,this.onRegister),this.initContainer()}initContainer(){this.list_head.vScrollBarSkin="",this.list_head.selectHandler=new Laya.Handler(this,this.handleSelectHead),this.createHeadList()}handleSelectHead(e){if(e!=-1){let i=this.list_head.selectedItem.id;b.instance.guildIcon=i,this.unionIcon.headSkin=b.instance.guildIcon}}createHeadList(){let e=_.intance.m_dicIconBadge;this.list_head.array=e.values,this.list_head.visible=!0;let i=-1,n=0;this.unionIcon.headSkin=b.instance.guildIcon;for(let r of e.values){if(r.id==b.instance.guildIcon){i=n;break}n++}this.list_head.selectedIndex=i}onRegister(){let e=b.instance.guildIcon;g.intance.event(f.EVENT_MODIFY_HEAD,[e]),this.close()}};Xv=h([pP("VhAfw9RDSVu06yGY3eOJbg")],Xv);var Qv=class extends Laya.Dialog{};var{regClass:hP}=Laya,Jv=class extends Qv{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){g.intance.on(f.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead),this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_change.on(Laya.Event.CLICK,this,this.onChangeHead),this.btn_apply.on(Laya.Event.CLICK,this,this.onApply)}setOpenData(e){if(console.log("setOpenData: ",e),e){var i=e[0];this.onSetUnionInfo(i),this.subUnionDto=e[1],this.onSetSubUnionInfo(this.subUnionDto)}}onBack(){this.close()}onSetUnionInfo(e){e&&(this.tf_guildName.text=m.instance.getMultiLan(e.unionName)),this.tf_heroNum.text=b.instance.m_heroData.getCount()+"",this.tf_address.text=Be.formatWalletAddress(W.instance.walletAddress)}onSetSubUnionInfo(e){if(this.subUnionDto){this.input_name.text=m.instance.getMultiLan(e.unionName),this.textArea_des.text=m.instance.getMultiLan(e.desc),this.input_address.text=e.collectionToken,this.unionIcon.headSkin=e.icon;var i=e.status;this.onSetState(i)}else this.unionIcon.headSkin=b.instance.guildIcon,this.onSetState(0)}onSetState(e){e==1?(this.img_underReview.visible=!0,this.img_notPassed.visible=!1,this.btn_apply.visible=!1):e==2?(this.img_underReview.visible=!1,this.img_notPassed.visible=!0,this.btn_apply.visible=!0):(this.img_underReview.visible=!1,this.img_notPassed.visible=!1,this.btn_apply.visible=!0)}onChangeModifyHead(e){b.instance.guildIcon=e,this.unionIcon.headSkin=e}onChangeHead(){A.intance.openModule(y.ChangeUnionIconDialog)}async onApply(){let e=this.input_name.text,i=this.textArea_des.text,n=this.input_address.text;if(e=e.trim(),!b.instance.guildIcon){T.instance.notice(m.instance.getLanguage(1189));return}if(e==""){T.instance.notice(m.instance.getLanguage(31));return}if(i==""){T.instance.notice(m.instance.getLanguage(1190));return}if(n==""){T.instance.notice(m.instance.getLanguage(1191));return}let r={icon:b.instance.guildIcon,name:e,intro:i,recAddress:n};var s=await I.requestPost("wxgame/union/create",r);if(s&&s.unionBaseDto){var o=s.unionBaseDto.status;this.onSetState(o),T.instance.notice(m.instance.getLanguage(1192)),g.intance.event(f.EVENT_SUB_GUILD_UPDATE)}}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(f.EVENT_MODIFY_HEAD,this,this.onChangeModifyHead)}};Jv=h([hP("K1XqPbcNQUGnysSD4yhBLQ")],Jv);var Zv=class extends Laya.Dialog{};var{regClass:dP}=Laya,ex=class extends Zv{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){this.btn_memberList.on(Laya.Event.CLICK,this,this.onShowMemberList),this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_applicationList.on(Laya.Event.CLICK,this,this.onShowApplicationList),this.btn_referral.on(Laya.Event.CLICK,this,this.onShowReferralList),this.refreshApplyBtnRed(),Laya.timer.loop(1e3,this,this.refreshApplyBtnRed)}setOpenData(e){if(console.log("setOpenData: ",e),e){var i=e[0];this.onSetUnionInfo(i),this.subUnionDto=e[1],this.onSetSubUnionInfo(this.subUnionDto)}}onShowApplicationList(){A.intance.openModule(y.UnionMemberApplyView,this.subUnionDto.id)}onShowReferralList(){A.intance.openModule(y.UnionReferralView,this.subUnionDto.id)}onBack(){this.close()}onShowMemberList(){this.subUnionDto&&A.intance.openModule(y.UnionMemberView,[this.subUnionDto,!0])}onSetUnionInfo(e){e&&(this.tf_guildName.text=m.instance.getMultiLan(e.unionName)),this.tf_heroNum.text=b.instance.m_heroData.getCount()+"",this.tf_address.text=Be.formatWalletAddress(W.instance.walletAddress)}refreshApplyBtnRed(){this.img_red_1.visible=b.instance.getRedDotById(ne.RED_GUILD_APPLY)}onSetSubUnionInfo(e){e?(this.unionIcon.dataSource=e,this.tf_name.text=m.instance.getMultiLan(e.unionName),this.tf_des.text=m.instance.getMultiLan(e.desc),this.tf_lv.text=m.instance.getUILang("LV.")+e.lv,this.tf_num.text="<font color='#25ff63'>"+e.memberNum+"</font>/"+e.maxMemberNum,this.img_lvIcon.skin=D.instance.getUnionLvIcon(e.lv),this.box_show.visible=!0,this.tf_receiveAddress.text=Be.formatWalletAddress(e.collectionToken),this.btn_applicationList.visible=e.leader==b.instance.playerDto.pid,this.btn_referral.visible=e.leader==b.instance.playerDto.pid):this.box_show.visible=!1}onDisable(){Laya.timer.clearAll(this)}};ex=h([dP("qhJFEWQoRbixaYt5MGd9TQ")],ex);var tx=class extends Laya.Scene{};var{regClass:fP}=Laya,ix=class extends tx{constructor(){super(...arguments);this.currTab=0;this.currUnionId=1;this.createStatus=0}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onOpened(e){this.box_show.visible=!1,this.currUnionId=e,this.initLuckDrawView()}onEnable(){g.intance.on(f.EVENT_SUB_GUILD_UPDATE,this,this.initSubGuild),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.btn_apply.on(Laya.Event.CLICK,this,this.onApply),this.btn_memberList.on(Laya.Event.CLICK,this,this.onShowMemberList),this.btn_guildList.on(Laya.Event.CLICK,this,this.onShowGuildList),this.btn_applicationList.on(Laya.Event.CLICK,this,this.onShowApplicationList),this.btn_referral.on(Laya.Event.CLICK,this,this.onShowReferralList),Laya.timer.loop(1e3,this,this.refreshApplyBtnRed)}refreshApplyBtnRed(){!this.btn_apply.disabled&&this.tf_createSub.text==m.instance.getUILang("My Guild")?this.img_red_1.visible=b.instance.getRedDotById(ne.RED_GUILD_APPLY):this.img_red_1.visible=!1,this.btn_applicationList.disabled?this.img_red_2.visible=!1:this.img_red_2.visible=b.instance.getRedDotById(ne.RED_GUILD_APPLY)}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}onApply(){this.createStatus==2?this.subUnionDto.status==0?A.intance.openModule(y.MySubUnionView,[this.unionDto,this.subUnionDto]):A.intance.openModule(y.CreateSubUnionView,[this.unionDto,this.subUnionDto]):A.intance.openModule(y.CreateSubUnionView,[this.unionDto,this.subUnionDto])}onShowMemberList(){this.unionDto&&A.intance.openModule(y.UnionMemberView,[this.unionDto,!1])}onShowGuildList(){A.intance.openModule(y.UnionListView)}onShowApplicationList(){A.intance.openModule(y.UnionMemberApplyView,this.unionDto.id)}onShowReferralList(){A.intance.openModule(y.UnionReferralView,this.unionDto.id)}async initLuckDrawView(){var e=b.instance.playerDto.union,i=await I.requestPost("wxgame/union/info",{unionId:this.currUnionId});this.unionDto=i.unionDto,this.unionDto?this.onSetUnionInfo(this.unionDto):T.instance.notice(m.instance.getLanguage(135)),this.initSubGuild()}async initSubGuild(){var e=await I.requestPost("wxgame/union/createInfo",{});e?(this.createStatus=e.createStatus,e.unionBaseDto?(this.subUnionDto=e.unionBaseDto,this.btn_apply.disabled=!1,this.tf_createSub.text=m.instance.getUILang("My Guild")):this.createStatus==0?this.btn_apply.disabled=!0:this.createStatus==1?this.btn_apply.disabled=!1:this.createStatus==2&&(e.unionBaseDto.status==0?(this.btn_apply.disabled=!1,this.tf_createSub.text=m.instance.getUILang("My Guild")):(this.btn_apply.disabled=!1,this.tf_createSub.text=m.instance.getUILang("My Guild")))):T.instance.notice(m.instance.getLanguage(135))}onSetUnionInfo(e){e?(this.unionIcon.dataSource=e,this.tf_name.text=m.instance.getMultiLan(e.unionName),this.tf_des.text=m.instance.getMultiLan(e.desc),this.tf_lv.text=m.instance.getUILang("LV.")+e.lv,this.tf_num.text="<font color='#25ff63'>"+e.memberNum+"</font>/"+e.maxMemberNum,this.img_lvIcon.skin=D.instance.getUnionLvIcon(e.lv),this.box_show.visible=!0,e.parentId>0?(this.btn_applicationList.disabled=!0,this.btn_referral.disabled=!0):e.leader!=b.instance.playerDto.pid?(this.btn_applicationList.disabled=!0,this.btn_referral.disabled=!0):this.subUnionDto?(this.btn_applicationList.disabled=!1,this.btn_referral.disabled=!1):(this.btn_applicationList.disabled=!1,this.btn_referral.disabled=!1)):this.box_show.visible=!1}onDisable(){g.intance.off(f.EVENT_SUB_GUILD_UPDATE,this,this.initSubGuild),Laya.timer.clearAll(this)}};ix=h([fP("KR8HZN1dSv2Bz_62yIgOrg")],ix);var ax=class extends Laya.Box{};var{regClass:yP}=Laya,nx=class extends ax{constructor(){super();this.isAddEvent=!1;this.addL=1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.ticketMemberAddressVo=e,this.ticketMemberAddressVo?(this.btn_add.visible=!1,this.box_address.visible=!0,this.tf_uid.text=this.ticketMemberAddressVo.openid,this.tf_player_name.text=this.ticketMemberAddressVo.playerName,console.log("data1: ",e),this.knapsackItem.dataSource=this.ticketMemberAddressVo.itemVo,this.tf_num.text=this.ticketMemberAddressVo.num+""):(this.btn_add.visible=!0,this.box_address.visible=!1,console.log("data2: ",e)),this.addEvent()}onAdd(){g.intance.event(f.EVENT_ADD_TICKET_ADDRESS)}async setPlayerName(){try{if(this.tf_uid.text=="")return;this.ticketMemberAddressVo.openid=this.tf_uid.text.toLowerCase();var e=await I.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});e&&(console.log(e),this.tf_player_name.text=e.name,this.ticketMemberAddressVo.checked=!0,this.ticketMemberAddressVo.playerName=e.name)}catch{console.log("未找到该玩家，请核对地址")}}uidFocus(){this.ticketMemberAddressVo.openid="",this.ticketMemberAddressVo.playerName="",this.ticketMemberAddressVo.checked=!1,this.tf_uid.text="",this.tf_player_name.text=""}changeItemNum(){var e=parseInt(this.tf_num.text);(!e||e<1)&&(e=1),this.addL=e,this.setItemNum()}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}setItemNum(){this.tf_num.text=this.addL+"",this.ticketMemberAddressVo.num=this.addL}};nx=h([yP("KK3UEIk8ToiricaiUr9L3A")],nx);var rx=class extends Laya.Dialog{};var sx=class{};var{regClass:bP}=Laya,ox=class extends rx{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_transfer.on(Laya.Event.CLICK,this,this.onTransferItem),g.intance.on(f.EVENT_ADD_TICKET_ADDRESS,this,this.onAddticketAddress)}setOpenData(e){console.log("setOpenData: ",e),this.itemVo=e,this.itemVo.itemItem.subType==11?this.onAddticketAddress(!0):this.list_address.array=[null]}onBack(){this.close()}async onTransferItem(){var e=[];if(this.list_address.array.forEach(n=>{n&&n.checked&&n.playerName&&n.openid&&n.num>0&&e.push({address:n.openid,num:n.num})}),e.length>0){var i=await I.requestPost("wxgame/equip/ticketTransfer",{list:e,id:this.itemVo.m_iId});if(i){T.instance.notice(m.instance.getLanguage(2e3)),g.intance.event(f.EVENT_REFRESH_KNAPSACK);let n=Laya.Handler.create(this,()=>{this.list_address.array=[null]});me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1551),P.SURE,n)}else T.instance.notice(m.instance.getLanguage(135))}else T.instance.notice(m.instance.getLanguage(1348))}onAddticketAddress(e=!1){let i=new sx;i.num=1,i.itemVo=this.itemVo,e?this.list_address.array=[i]:(this.list_address.array||(this.list_address.array=[null]),this.list_address.setItem(this.list_address.array.length-1,i),this.list_address.addItem(null),this.list_address.refresh(),this.list_address.tweenTo(this.list_address.array.length-1))}onDisable(){this.removeEvent()}removeEvent(){this.btn_back.off(Laya.Event.CLICK,this,this.onBack),this.btn_transfer.off(Laya.Event.CLICK,this,this.onTransferItem),g.intance.off(f.EVENT_ADD_TICKET_ADDRESS,this,this.onAddticketAddress)}};ox=h([bP("oLjG6sBpQqemEHt7q1F9GA")],ox);var lx=class extends Laya.Box{};var{regClass:gP}=Laya,cx=class extends lx{constructor(){super();this.showAdd=!1;this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.toDetail),this.isAddEvent=!0)}set dataSource(e){this.unionItem=e,this.unionItem&&(this.addEvent(),this.setCurrentOutPut())}set headSkin(e){this.img_head.skin=D.instance.getUnionIcon(e)}async setCurrentOutPut(){if(!this.unionItem)return;let e=this.unionItem.icon;this.img_head.skin=D.instance.getUnionIcon(e)}toDetail(){}};cx=h([gP("lK37x6YwQ9umJIqReZht4Q")],cx);var ux=class extends Laya.Box{};var{regClass:LP}=Laya,mx=class extends ux{set dataSource(e){super.dataSource=e,this.iconBadgeItem=e,this.iconBadgeItem&&this.setCurrentOutPut()}async setCurrentOutPut(){this.unionIcon.headSkin=this.iconBadgeItem.id}};mx=h([LP("TRVoEDtUSRaEW71V6oCpew")],mx);var px=class extends Laya.Box{};var{regClass:_P}=Laya,hx=class extends px{constructor(){super();this.isAddEvent=!1}addEvent(){this.isAddEvent||(this.btn_viewMembers.on(Laya.Event.CLICK,this,this.onViewMeber),this.isAddEvent=!0)}onViewMeber(){A.intance.openModule(y.UnionMemberView,[this.unionDto,!1])}set dataSource(e){super.dataSource=e,this.unionDto=e,this.unionDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.unionIcon.dataSource=this.unionDto,this.tf_name.text=m.instance.getMultiLan(this.unionDto.unionName),this.tf_lv.text=m.instance.getUILang("LV.")+this.unionDto.lv,this.tf_num.text="<font color='#25ff63'>"+this.unionDto.memberNum+"</font>/"+this.unionDto.maxMemberNum,this.tf_pendingMember.text=m.instance.getLanguage(1530,this.unionDto.noJoinNum),this.img_lvBg.skin=D.instance.getUnionLvDiIcon(this.unionDto.lv),this.img_lvIcon.skin=D.instance.getUnionLvIcon(this.unionDto.lv)}onChange(e){e?this.bg.skin="res/union1/img_trade_bg_2.png":this.bg.skin="res/union1/img_trade_bg_1.png"}};hx=h([_P("eauuiADeT9SAqEYe1ms81w")],hx);var dx=class extends Laya.Dialog{};var{regClass:vP}=Laya,fx=class extends dx{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack)}onOpened(e){this.initLuckDrawView()}setOpenData(e){}async initLuckDrawView(){var e=await I.requestPost("wxgame/union/list",{});if(e){this.list_guild.array=e.unionList;let i=-1;this.list_guild.selectedIndex=i}else T.instance.notice(m.instance.getLanguage(135))}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this)}};fx=h([vP("vJwx3qloTmiGGRpFF6Qm1A")],fx);var yx=class extends Laya.Box{};var{regClass:xP}=Laya,bx=class extends yx{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_agree.on(Laya.Event.CLICK,this,this.onAgree),this.btn_refuse.on(Laya.Event.CLICK,this,this.onRefuse),this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){let e=this.unionApplyMemberDto.address;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}async onAgree(){if(this.unionApplyMemberDto.pid){var e=await I.requestPost("wxgame/union/doAudit",{uid:this.unionApplyMemberDto.uid,playerId:this.unionApplyMemberDto.pid,agree:!0});e&&T.instance.notice(m.instance.getLanguage(1193)),g.intance.event(f.EVENT_UNION_APPLY_MEMBER_UPDATE)}}async onRefuse(){if(this.unionApplyMemberDto.pid){var e=await I.requestPost("wxgame/union/doAudit",{uid:this.unionApplyMemberDto.uid,playerId:this.unionApplyMemberDto.pid,agree:!1});e&&T.instance.notice(m.instance.getLanguage(1194)),g.intance.event(f.EVENT_UNION_APPLY_MEMBER_UPDATE)}}set dataSource(e){super.dataSource=e,this.unionApplyMemberDto=e,this.unionApplyMemberDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.unionApplyMemberDto.head;this.playerIcon.headSkin=e,this.img_flag.skin=D.instance.getCountryIcon(this.unionApplyMemberDto.country),this.tf_name.text=this.unionApplyMemberDto.name,this.tf_fightTimes.text=this.unionApplyMemberDto.fightTimes+"",this.tf_state.text=ce.formatTimeAgo(this.unionApplyMemberDto.lastLoginTime),this.tf_state.color=ce.colorTimeAgo(this.unionApplyMemberDto.lastLoginTime),this.tf_address.text=Be.abbreviateString(this.unionApplyMemberDto.address,10)}};bx=h([xP("FPhs_TdtQbCxXS40Ic50Wg")],bx);var gx=class extends Laya.Dialog{};var{regClass:IP}=Laya,Lx=class extends gx{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_agreeAll.on(Laya.Event.CLICK,this,this.onAgreeAll),g.intance.on(f.EVENT_UNION_APPLY_MEMBER_UPDATE,this,this.onUpdateApplyMember),this.list_member.array=[]}setOpenData(e){console.log("setOpenData: ",e),Number.isInteger(e)&&(this.currUnionId=e,this.onUpdateApplyMember())}async onUpdateApplyMember(){var e=await I.requestPost("wxgame/union/auditList",{unionId:this.currUnionId});e&&e.auditList?this.list_member.array=e.auditList:T.instance.notice(m.instance.getLanguage(135))}onBack(){this.close()}async onAgreeAll(){if(this.list_member.array.length>0){var e=await I.requestPost("wxgame/union/doAudit",{uid:this.currUnionId,playerId:0,agree:!0});e&&T.instance.notice(m.instance.getLanguage(1195)),g.intance.event(f.EVENT_UNION_APPLY_MEMBER_UPDATE)}}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(f.EVENT_UNION_APPLY_MEMBER_UPDATE,this,this.onUpdateApplyMember)}};Lx=h([IP("LXw-3_bwSmqCzdUAekakYg")],Lx);var _x=class extends Laya.Box{};var{regClass:EP}=Laya,vx=class extends _x{constructor(){super();this.isAddEvent=!1;this.tgUrl=""}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.btn_move.on(Laya.Event.CLICK,this,this.onMoveClick),this.btn_tg.on(Laya.Event.CLICK,this,this.onBtnTgClick),this.isAddEvent=!0)}async onAdd(){if(this.unionMemberDto.isfriend){let e={icon:this.unionMemberDto.head,name:this.unionMemberDto.name,id:this.unionMemberDto.pid};A.intance.openModule(y.PrivateChatDialog,e);return}if(this.unionMemberDto.pid){let e=_.intance.getGeneralValueById(11);if(b.instance.friendNum>=e){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(301),P.YES);return}if(this.unionMemberDto.openid==W.instance.walletAddress){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(200),P.YES);return}if(this.unionMemberDto.isfriend){me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(202),P.YES);return}let i=await I.requestPost("wxgame/friend/addFriend",{openid:this.unionMemberDto.openid});console.log(i),i&&me.instance().AlertByType(P.BASEALERTVIEW,Le.instance.get(307),P.YES,Laya.Handler.create(this,()=>{this.btn_add.disabled=!0}))}}set dataSource(e){super.dataSource=e,this.unionMemberDto=e,this.unionMemberDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){let e=this.unionMemberDto.head;this.playerIcon.headSkin=e,this.img_flag.skin=D.instance.getCountryIcon(this.unionMemberDto.country),this.tf_name.text=this.unionMemberDto.name;let i=this.unionMemberDto.isMy;b.instance.playerDto.unionLeader&&i&&this.unionMemberDto.pid!==b.instance.playerDto.pid?this.btn_move.visible=!0:this.btn_move.visible=!1,this.unionMemberDto.isLeader&&!i?(this.tgUrl=this.unionMemberDto.tgUrl,this.img_hui.visible=!0,this.btn_tg.visible=!0,!this.tgUrl||this.tgUrl.length<=0?this.btn_tg.visible=!1:this.btn_tg.visible=!0):(this.img_hui.visible=!1,this.btn_tg.visible=!1),this.tf_unionName.text=m.instance.getMultiLan(this.unionMemberDto.unionName),this.tf_fightTimes.text=this.unionMemberDto.fightTimes+"",this.tf_state.text=ce.formatTimeAgo(this.unionMemberDto.lastLoginTime),this.tf_state.color=ce.colorTimeAgo(this.unionMemberDto.lastLoginTime),this.unionMemberDto.openid==W.instance.walletAddress&&(this.btn_add.visible=!1),this.btn_add.label="Add as a friend",this.unionMemberDto.isfriend&&(this.btn_add.label="send msg")}async onMoveClick(){let e=this.unionMemberDto.unionId;await I.requestPost("wxgame/union/doKickOutMember",{unionId:e,playerId:this.unionMemberDto.pid})&&g.intance.event(f.UPDATE_UNION_MEMBER_LIST,this.unionMemberDto.pid)}onBtnTgClick(){this.tgUrl?window.open(this.tgUrl,"_blank"):T.instance.notice(m.instance.getLanguage(1524))}};vx=h([EP("l73FEB2CRGihzisJBs63MQ")],vx);var xx=class extends Laya.Dialog{};var{regClass:wP}=Laya,Ix=class extends xx{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.pageIndex=1;this.pages=0;this.currUnionId=0;this.isMy=!1;this.scrolLock=!0;this.pageSize=20}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),g.intance.on(f.UPDATE_UNION_MEMBER_LIST,this,this.updateUnionMemberList),this.list_member.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange)}async setOpenData(e){this.myFriendData=await I.requestPost("wxgame/friend/friendList",{}),this.myFriendData&&this.myFriendData.list&&(b.instance.friendNum=this.myFriendData.list.length),this.unionData=e[0],this.isMy=e[1],console.log("setOpenData: ",this.unionData);var i=this.unionData.id;this.initLuckDrawView(i)}async initLuckDrawView(e){this.currUnionId=e;var i;this.isMy?i=await I.requestPost("wxgame/union/myUnionMemberPageList",{pageSize:this.pageSize,pageIndex:this.pageIndex}):i=await I.requestPost("wxgame/union/memberPageList",{unionId:e,pageSize:this.pageSize,pageIndex:this.pageIndex});var n=i.list;this.pages=i.pages;var r=i.memberNum,s=i.maxMemberNum;this.tf_num.text="<font color='#25ff63'>"+r+"</font>/"+s;let o=this.isMyFriendData(n,this.myFriendData.list,e);console.log(o),this.list_member.array=o}isMyFriendData(e,i,n){for(let r of e){let s=!1;for(let o of i)if(r.openid===o.openid){s=!0;break}r.isfriend=s,r.unionId=n,r.isMy=this.isMy,r.isLeader=r.pid==this.unionData.leader,r.tgUrl=this.unionData.tgUrl}return e}onBack(){this.close()}updateUnionMemberList(e){console.log(e),console.log(this.list_member.array),this.list_member.array=this.deleteItemByPid(this.list_member.array,e),console.log(this.list_member.array)}deleteItemByPid(e,i){return e.filter(n=>n.pid!==i)}onDisable(){this.removeEvent()}onScrollBarChange(){this.list_member.scrollBar.value>=this.list_member.scrollBar.max&&this.loadMoreData()}refreshLock(){this.scrolLock=!0,console.log("重置锁")}async loadMoreData(){if(this.scrolLock&&(this.scrolLock=!1,console.log("到底了"),Laya.timer.once(1e4,this,this.refreshLock),this.pageIndex<this.pages)){this.pageIndex+=1;var e;if(this.isMy?e=await I.requestPost("wxgame/union/myUnionMemberPageList",{pageSize:this.pageSize,pageIndex:this.pageIndex}):e=await I.requestPost("wxgame/union/memberPageList",{unionId:this.currUnionId,pageSize:this.pageSize,pageIndex:this.pageIndex}),e){var i=e.list;this.pages=e.pages,this.scrolLock=!0;var n=e.memberNum,r=e.maxMemberNum;this.tf_num.text="<font color='#25ff63'>"+n+"</font>/"+r;let s=this.isMyFriendData(i,this.myFriendData.list,this.currUnionId);this.list_member.array.push(...s),this.list_member.array=this.list_member.array,Laya.timer.clear(this,this.refreshLock)}}}removeEvent(){Laya.Tween.clearAll(this),Laya.timer.clearAll(this),g.intance.offAllCaller(this)}};Ix=h([wP("439XbfImQxS4I-Vced8JKA")],Ix);var Ex=class extends Laya.Box{};var{regClass:TP}=Laya,wx=class extends Ex{constructor(){super();this.isAddEvent=!1}set dataSource(e){super.dataSource=e,this.unionDto=e,this.unionDto&&this.setCurrentOutPut()}async setCurrentOutPut(){this.unionIcon.dataSource=this.unionDto,this.tf_name.text=m.instance.getMultiLan(this.unionDto.unionName),this.tf_lv.text=m.instance.getUILang("LV.")+this.unionDto.lv,this.tf_num.text="<font color='#25ff63'>"+this.unionDto.memberNum+"</font>/"+this.unionDto.maxMemberNum,this.img_lvBg.skin=D.instance.getUnionLvDiIcon(this.unionDto.lv),this.img_lvIcon.skin=D.instance.getUnionLvIcon(this.unionDto.lv),this.tf_pendingMember.text=m.instance.getLanguage(1530,this.unionDto.noJoinNum)}onChange(e){e?this.bg.skin="res/union1/img_trade_bg_2.png":this.bg.skin="res/union1/img_trade_bg_1.png"}};wx=h([TP("cbbqawzdSI2g161G69xpUg")],wx);var Tx=class extends Laya.Box{};var{regClass:CP}=Laya,Cx=class extends Tx{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.btn_copy.on(Laya.Event.CLICK,this,this.onCopy),this.isAddEvent=!0)}onCopy(){let e=this.unionDto.collectionToken;doCopy(e),T.instance.notice(m.instance.getLanguage(132))}set dataSource(e){super.dataSource=e,this.unionDto=e,this.unionDto&&(this.addEvent(),this.setCurrentOutPut())}async setCurrentOutPut(){this.unionIcon.dataSource=this.unionDto,this.tf_name.text=m.instance.getMultiLan(this.unionDto.unionName),this.tf_lv.text=m.instance.getUILang("LV.")+this.unionDto.lv,this.tf_num.text="<font color='#25ff63'>"+this.unionDto.memberNum+"</font>/"+this.unionDto.maxMemberNum,this.img_lvBg.skin=D.instance.getUnionLvDiIcon(this.unionDto.lv),this.img_lvIcon.skin=D.instance.getUnionLvIcon(this.unionDto.lv),this.tf_address.text=Be.abbreviateString(this.unionDto.collectionToken,24)}};Cx=h([CP("NTRu0sy9SDCKgxglHtnEdw")],Cx);var Sx=class extends Laya.Dialog{};var{regClass:SP}=Laya,Dx=class extends Sx{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER}onEnable(){this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.list_junior.array=[]}setOpenData(e){console.log("setOpenData: ",e),Number.isInteger(e)&&(this.currUnionId=e,this.onUpdateApplyMember())}async onUpdateApplyMember(){var e=await I.requestPost("wxgame/union/unionRelation",{unionId:this.currUnionId});e?(this.tf_referralNum.text=m.instance.getLanguage(1308,e.childUnionNum),this.tf_memberNum.text=m.instance.getLanguage(1309,e.childUnionMemberNum),this.list_senior.array=e.parent?[e.parent]:[],!this.list_senior.array||this.list_senior.array.length<=0?this.noDataBox1.visible=!0:this.noDataBox1.visible=!1,e.childList&&(this.list_junior.array=e.childList),!e.childList||e.childList.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1):T.instance.notice(m.instance.getLanguage(135))}onBack(){this.close()}onDisable(){this.removeEvent()}removeEvent(){}};Dx=h([SP("Ls1FVCY8RxeSChhaMnjcKA")],Dx);var Ax=class extends Laya.Scene{};var{regClass:DP}=Laya,kx=class extends Ax{constructor(){super(...arguments);this.currTab=0;this.type=1;this.joinStatusDic=new le;this.items=[]}onAwake(){this.m_iLayerType=C.M_POP,this.m_iPositionType=C.UP}onOpened(e){this.type=e}onEnable(){this.btn_search.on(Laya.Event.CLICK,this,this.onSearch),this.btn_join.on(Laya.Event.CLICK,this,this.onJoin),this.btn_back&&this.btn_back.on(Laya.Event.CLICK,this,this.setToMainScene),this.list_union.vScrollBarSkin="",this.list_union.selectHandler=Laya.Handler.create(this,this.onSelectItem,null,!1),this.list_union.renderHandler=Laya.Handler.create(this,this.onItemRender,null,!1),this.box_show.visible=!1,this.box_list.visible=!1,this.initLuckDrawView();let e=(Laya.stage.height-z.DESIGN_HEIGHT)/2}async initLuckDrawView(){var e=await I.requestPost("wxgame/union/list",{});e?this.unionData=e.unionList:T.instance.notice(m.instance.getLanguage(135)),this.getJoinStatus()}async getJoinStatus(){var e=await I.requestPost("wxgame/union/joinStatus",{});e?(this.joinStatusDic=new le,this.joinStatusDic.set(e.unionId,e.joinStatus)):T.instance.notice(m.instance.getLanguage(135)),this.getItemByName(""),this.box_list.visible=!0}getItemByName(e){if(this.list_union.selectedIndex=-1,this.items=[],this.unionData){var i=this.unionData.length;this.tf_totalNum.text=m.instance.getLanguage(1355,i);for(var n=0;n<i;n++){var r=this.unionData[n],s=m.instance.getMultiLan(r.unionName);Be.caseInsensitiveSearchWithRegex(s,e)&&this.items.push(r)}}this.list_union.array=this.items,this.items.length>0?this.list_union.selectedIndex=0:this.list_union.selectedIndex=-1}onSearch(){var e=this.input_search.text;this.getItemByName(e)}onJoin(){this.currUnionDto&&(b.instance.playerDto.union>0?se.intance.setCurrentScene(Y.M_SCENE_MYUNION,this.currUnionDto.id):me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(141),P.CANCEL,Laya.Handler.create(this,this.onJoinSure)))}async onJoinSure(){if(this.currUnionDto){var e=await I.requestPost("wxgame/union/join",{unionId:this.currUnionDto.id});e.errorCode==0?e.unionId&&e.unionId>0?(b.instance.playerDto.union=e.unionId,se.intance.setCurrentScene(Y.M_SCENE_MYUNION,b.instance.playerDto.union),T.instance.notice(m.instance.getLanguage(2e3))):T.instance.notice(m.instance.getLanguage(1196)):T.instance.notice(m.instance.getLanguage(135))}}onItemRender(e,i){e.onChange(this.list_union.selectedIndex==i)}onSelectItem(e,i){if(this.currUnionDto=this.items[e],console.log(this.currUnionDto),this.currUnionDto){this.unionIcon.dataSource=this.currUnionDto,this.tf_name.text=m.instance.getMultiLan(this.currUnionDto.unionName),this.tf_des.text=m.instance.getMultiLan(this.currUnionDto.desc),this.tf_lv.text=m.instance.getUILang("LV.")+this.currUnionDto.lv,this.tf_num.text="<font color='#25ff63'>"+this.currUnionDto.memberNum+"</font>/"+this.currUnionDto.maxMemberNum,this.img_lvBg.skin=D.instance.getUnionLvDiIcon(this.currUnionDto.lv),this.img_lvIcon.skin=D.instance.getUnionLvIcon(this.currUnionDto.lv);var n=this.joinStatusDic.get(this.currUnionDto.id);b.instance.playerDto.union>0?this.btn_join.label=m.instance.getUILang("Enter"):n?n==1?this.btn_join.label=m.instance.getLanguage(1210):n==2?this.btn_join.label=m.instance.getUILang("Enter"):this.btn_join.label=m.instance.getUILang("Join"):this.btn_join.label=m.instance.getUILang("Join"),this.box_show.visible=!0}else this.box_show.visible=!1}setToMainScene(){se.intance.setCurrentScene(Y.M_SCENE_MAIN)}removeEvent(){}};kx=h([DP("VfpfbqXcSQalDIkuosz8Rw")],kx);var Bx=class extends Laya.Box{};var{regClass:AP}=Laya,Mx=class extends Bx{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.tf_uid.on(Laya.Event.BLUR,this,this.setPlayerName),this.tf_uid.on(Laya.Event.FOCUS,this,this.uidFocus),this.btn_add.on(Laya.Event.CLICK,this,this.onAdd),this.isAddEvent=!0)}set dataSource(e){super.dataSource=e,this.unionMemberAddressVo=e,console.log("data: ",e),this.unionMemberAddressVo?(this.btn_add.visible=!1,this.box_address.visible=!0,this.tf_uid.text=this.unionMemberAddressVo.openid,this.tf_player_name.text=this.unionMemberAddressVo.playerName,console.log("data1: ",e)):(this.btn_add.visible=!0,this.box_address.visible=!1,console.log("data2: ",e)),this.addEvent()}onAdd(){g.intance.event(f.EVENT_ADD_UNIONMEMBER_ADDRESS)}async setPlayerName(){try{if(this.tf_uid.text=="")return;this.unionMemberAddressVo.openid=this.tf_uid.text.toLowerCase();var e=await I.requestPost("wxgame/sys/queryName",{openid:this.tf_uid.text.toLowerCase()});e&&(console.log(e),this.tf_player_name.text=e.name,this.unionMemberAddressVo.checked=!0,this.unionMemberAddressVo.playerName=e.name)}catch{console.log("未找到该玩家，请核对地址")}}uidFocus(){this.unionMemberAddressVo.openid="",this.unionMemberAddressVo.playerName="",this.unionMemberAddressVo.checked=!1,this.tf_uid.text="",this.tf_player_name.text=""}};Mx=h([AP("JU_R7IZ9Q9uq6BU_eahAuQ")],Mx);var Rx=class extends Laya.Box{};var{regClass:kP}=Laya,Px=class extends Rx{constructor(){super();this.isAddEvent=!1}createChildren(){super.createChildren()}addEvent(){this.isAddEvent||(this.on(Laya.Event.CLICK,this,this.onCheck),this.isAddEvent=!0)}set dataSource(e){if(super.dataSource=e,this.unionMemberVo=e,!this.unionMemberVo)return;this.check_coin.selected=this.unionMemberVo.checked,this.unionMemberDto=this.unionMemberVo.unionMemberDto;let i=this.unionMemberDto.head;this.playerIcon.headSkin=i,this.tf_name.text=this.unionMemberDto.name,this.addEvent()}onCheck(){this.unionMemberVo.checked=!this.unionMemberVo.checked,console.log("onCheck: ",this.unionMemberVo.checked),g.intance.event(f.EVENT_REFRESH_UNIONMEMBER_TRANSFER)}};Px=h([kP("gGFdZxctQPm-SO2zLew1hg")],Px);var Nx=class{};var Ox=class extends Laya.Dialog{};var Hx=class{};var{regClass:BP}=Laya,Ux=class extends Ox{constructor(){super(...arguments);this.m_strName="我是OpenSceneRuntime";this.m_iLayerType=C.M_PANEL;this.m_iPositionType=C.CENTER;this.myHeroesNum=0;this.selectedNum=0;this.addL=1}onEnable(){this.tf_num.on(Laya.Event.BLUR,this,this.changeItemNum),this.btn_back.on(Laya.Event.CLICK,this,this.onBack),this.btn_transfer.on(Laya.Event.CLICK,this,this.onTransferItem),this.btn_checkBox.on(Laya.Event.CLICK,this,this.onSelectAll),this.btn_reduce.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_reduce]),this.btn_plus.clickHandler=new Laya.Handler(this,this.handleClickBtn,[this.btn_plus]),g.intance.on(f.EVENT_REFRESH_UNIONMEMBER_TRANSFER,this,this.onRefreshUnionMemberTransfer),g.intance.on(f.EVENT_ADD_UNIONMEMBER_ADDRESS,this,this.onAddUnionMemberAddress),this.list_members.array=[]}setOpenData(e){console.log("setOpenData: ",e),this.itemVo=e,this.showItem(),this.getUnionMembers(),this.list_address.array=[null]}showItem(){this.knapsackItem.dataSource=this.itemVo}async getUnionMembers(){var e=await I.requestPost("wxgame/union/members",{}),i=e.list;console.log("获得公会成员 unionMemberDtos: ",i),this.unionMemberVos=[],i&&i.length>0&&i.forEach(n=>{if(n&&n.pid!=b.instance.playerDto.pid){var r=new Nx;r.unionMemberDto=n,this.unionMemberVos.push(r)}}),this.list_members.array=this.unionMemberVos,this.updateNum()}onAddUnionMemberAddress(){console.log("onAddUnionMemberAddress: ",this.list_address.array),this.list_address.setItem(this.list_address.array.length-1,new Hx),this.list_address.addItem(null),this.list_address.refresh(),this.list_address.tweenTo(this.list_address.array.length-1)}onRefreshUnionMemberTransfer(){this.list_members.refresh(),this.updateNum()}updateNum(){!this.unionMemberVos||this.unionMemberVos.length<=0?this.noDataBox.visible=!0:this.noDataBox.visible=!1,this.selectedNum=0,this.unionMemberVos.forEach(e=>{e&&e.checked&&this.selectedNum++}),this.myHeroesNum=this.unionMemberVos.length,this.tf_selectedNum.text=m.instance.getLanguage(1223,this.selectedNum)}onSelectAll(){var e=this.btn_checkBox.selected;this.unionMemberVos.forEach(i=>{i&&(i.checked=e)}),this.list_members.refresh(),this.updateNum()}changeItemNum(){var e=parseInt(this.tf_num.text);(!e||e<1)&&(e=1),this.addL=e,this.setItemNum()}handleClickBtn(e){switch(e){case this.btn_reduce:this.addL>1&&this.addL--,this.setItemNum();break;case this.btn_plus:this.addL<99999&&this.addL++,this.setItemNum();break}}setItemNum(){this.tf_num.text=this.addL+""}onBack(){this.close()}async onTransferItem(){var e=[];if(this.unionMemberVos.forEach(n=>{n.checked&&e.push(n.unionMemberDto.openid)}),this.list_address.array.forEach(n=>{n&&n.checked&&e.push(n.openid)}),e.length>0){var i=await I.requestPost("wxgame/equip/airdropTicketTransfer",{addressList:e,id:this.itemVo.m_iId,transferNum:this.addL});if(i){T.instance.notice(m.instance.getLanguage(2e3)),g.intance.event(f.EVENT_REFRESH_KNAPSACK);let n=Laya.Handler.create(this,()=>{this.list_address.array=[null],this.getUnionMembers()});me.instance().AlertByType(P.BASEALERTVIEW,m.instance.getLanguage(1551),P.SURE,n)}else T.instance.notice(m.instance.getLanguage(135))}else T.instance.notice(m.instance.getLanguage(1348))}onDisable(){this.removeEvent()}removeEvent(){g.intance.off(f.EVENT_REFRESH_UNIONMEMBER_TRANSFER,this,this.onRefreshUnionMemberTransfer),g.intance.off(f.EVENT_ADD_UNIONMEMBER_ADDRESS,this,this.onAddUnionMemberAddress)}};Ux=h([BP("xnUTxKqCQUuIl8QBpuYoxg")],Ux);var{regClass:MP,property:Wqe}=Laya,Sc=class extends Laya.Script{constructor(){super()}onEnable(){this.owner.getComponent(Laya.RigidBody).setVelocity({x:0,y:-10})}onTriggerEnter(t,e,i){this.owner.removeSelf()}onUpdate(){this.owner.y<-10&&this.owner.removeSelf()}onDisable(){Laya.Pool.recover("bullet",this.owner)}};Sc=h([MP("hIXP-u9_RfeIwPLhNGNjGw")],Sc);var{regClass:RP,property:jqe}=Laya,Dc=class extends Laya.Script{constructor(){super()}onEnable(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onClick)}onClick(t){Laya.stage.width=1334,Laya.stage.height=750,Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_WIDTH,Laya.Scene.open("scenes/Index.ls")}onDisable(){this.owner.off(Laya.Event.MOUSE_DOWN,this)}};Dc=h([RP("DQCudilORvOvMM7hTH8i7w")],Dc);var{regClass:PP,property:NP}=Laya,sn=class extends Laya.Script{constructor(){super();this.level=1}get itemId(){return this._itemId}set itemId(e){this._itemId=e,this.owner.skin="resources/UI/images/bag/"+e+".png"}onEnable(){this._rig=this.owner.getComponent(Laya.RigidBody),this.level=Math.round(Math.random()*5)+1}onUpdate(){}onCollisionEnter(e){console.log("collision: ",e)}onTriggerEnter(e,i,n){var r=this.owner;if(console.log("owener: ",r),e.label==="buttle"&&r.parent){let s=Laya.Pool.getItemByCreateFun("effect",this.createEffect,this);s.pos(r.x,r.y),r.parent.addChild(s),s.play(0,!0),r.removeSelf(),Laya.SoundManager.playSound("resources/sound/destroy.wav")}}createEffect(){let e=new Laya.Animation;e.loadAnimation("resources/ani/TestAni.ani"),e.on(Laya.Event.COMPLETE,null,i);function i(){e.removeSelf(),Laya.Pool.recover("effect",e)}return e}onDisable(){Laya.Pool.recover("dropBox",this.owner)}};h([NP({type:"number"})],sn.prototype,"level",2),sn=h([PP("3L23NCFLSAieUApqTrVoCQ")],sn);var{regClass:OP,property:Zqe}=Laya,Mr=class extends Laya.Script{constructor(){super();this.touchHeroIds=new le;this.touchGlasses=new le;this.updateIndex=0;this.turnSpeed=1;this.turningSpeed=.1;this.lastDirectionAngle=0;this._state=je.STATE_Idle;this.lastState=je.STATE_Idle;this.isFirst=!1;this.patrolIndex=0;this.lastPath=[];this.thresholdDistance=3}onAwake(){}onEnable(){if(this.owner.roomPlayerDto.npc==je.TYPE_Monster){var e=B.instance.matchWatcher;e||Laya.timer.loop(500,this,this.updateMonster)}}onCollisionEnter(e){console.log(this.constructor.name+" onCollisionEnter collision",e)}onCollisionStay(e){console.log(this.constructor.name+" onCollisionStay collision",e)}onCollisionExit(e){console.log(this.constructor.name+" onCollisionExit collision",e)}onTriggerEnter(e,i,n){if(e.label!=="ground"){if(e.label&&e.label.startsWith("grass"))this.owner.isMe&&(e.owner.alpha=.7,this.touchGlasses.set(e.label,!0),this.setMyCurrArea());else if(e.label==="item")this.owner.enterItemId=e.owner.getComponent(sn).itemId;else if(e.label==="role"){var r=e.owner.roomPlayerDto.id;if(this.touchHeroIds.set(r,e.owner),this.owner.displacementType==2){var s=k.instance.canAttack(this.owner,e.owner);s&&Laya.Tween.clearAll(this.owner)}}}}onTriggerStay(e,i,n){}onTriggerExit(e,i,n){if(e.label==="ground")this.owner.inGround=!1;else if(e.label&&e.label.startsWith("grass"))this.owner.isMe&&(e.owner.alpha=1,this.touchGlasses.remove(e.label),this.setMyCurrArea());else if(e.label==="item")this.owner.enterItemId==e.owner.getComponent(sn).itemId&&(this.owner.enterItemId=0);else if(e.label==="role"){var r=e.owner.roomPlayerDto.id;this.touchHeroIds.remove(r)}}setMyCurrArea(){this.touchGlasses.keys.length>0?this.owner.currArea=1:this.owner.currArea=0,this.owner.onSendMoveData()}onLateUpdate(){var e=this.owner.parent,i=e.localToGlobal(Laya.Point.TEMP.setTo(this.owner.x,this.owner.y)),n=100;i.x>=0-n&&i.x<=Laya.stage.width+n&&i.y>=0-n&&i.y<=Laya.stage.height+n?(this.owner.heroSk.resume(),this.owner.beyond=!1):(this.owner.heroSk.paused(),this.owner.beyond=!0)}onUpdate(){if(this.owner.isOneTeam)this.owner.isMe?this.owner._isDead||(k.instance.myHeroSpr.currArea>0?this.owner.alpha=.6:this.owner.alpha=1):this.owner._isRealDead?this.owner.visible=!1:this.owner.currArea>0?(this.owner.visible=!0,this.owner.alpha=.6):(this.owner.visible=!0,this.owner.alpha=1);else{var e=B.instance.matchWatcher;this.owner._isRealDead?e||k.instance.myHeroSpr._isDead?this.owner.visible=!1:this.owner.visible=!1:this.owner.currArea>0?e||k.instance.myHeroSpr.currArea==this.owner.currArea?(this.owner.visible=!0,this.owner.alpha=.6):this.owner.visible=!1:(this.owner.visible=!0,this.owner.alpha=1);return}if(!this.owner.isStop){if(this.owner.speed>0){let i=this.getJoystickDirectionAngle(),n=this.calculateAngleDifference(i,this.lastDirectionAngle);if(Math.abs(n)>10?this.startTurning():this.stopTurning(),this.lastDirectionAngle=i,this.owner.isLockAni||(this.lastSpeed!=this.owner.speed||this.owner.aniChange)&&(this.owner.aniChange=!1,this.owner.heroSk.isReady&&this.owner.walk(),this.lastSpeed=this.owner.speed),this.owner.roleDirection>=0){let r=1*this.owner.speed*this.turnSpeed,s=this.owner.roleDirection*(Math.PI/180),o=r*Math.cos(s),l=r*Math.sin(s);this.owner.pos(Math.round(this.owner.x+o),Math.round(this.owner.y+l))}this.owner.inControl&&!this.owner._isDead&&this.touchHeroIds.values.forEach(r=>{var s=k.instance.canTui(this.owner,r);s&&r.beiTui(this.owner.roomPlayerDto.id)})}else this.owner.isLockAni||(this.lastSpeed!=this.owner.speed||this.owner.aniChange)&&(this.owner.aniChange=!1,this.owner.idle(),this.lastSpeed=this.owner.speed);this.updateIndex==0&&this.owner.onSendMoveData(),this.updateIndex++,this.updateIndex>0&&(this.updateIndex=0)}}getJoystickDirectionAngle(){return this.owner.roleDirection}calculateAngleDifference(e,i){let n=Math.abs(e-i);return n>180?360-n:n}startTurning(){this.turnSpeed*=this.turningSpeed}stopTurning(){this.turnSpeed=1}onDisable(){Laya.timer.clearAll(this)}get state(){return this._state}set state(e){this._state=e}updateMonster(){if(this.owner._isDead||B.instance.stopAll)return;var e=new Date().getTime(),i=!1;this.isFirst=!1,this.lastState!=this.state&&(this.isFirst=!0,this.lastState=this.state,console.log("state: "+this.state)),i&&(this.isUnderAttack=!0,this.handleUnderAttack(e));var n;this.owner.target&&(n=bt.calculateDistance(this.owner,this.owner.target));let r=bt.calculateDistance(this.owner,k.instance.myHeroSpr);switch(this.state){case je.STATE_Idle:this.handleIdle();break;case je.STATE_Patrol:this.handlePatrol();break;case je.STATE_Chase:this.chaseLogic(n,e,r);break;case je.STATE_Attack:this.handleAttack(e);break;case je.STATE_Flee:this.handleFlee();break}var s=B.instance.matchCoolDownTime;s>30&&this.checkStateTransitions(r)}handleUnderAttack(e){let n=this.owner.skills.filter(r=>r.isDefensive&&this.owner.canUseSkill(r,e));n.length>0&&this.useSkill(n[0],e)}useSkill(e,i){this.owner.useSkill(e,i),console.log(`Using skill ${e.id} on target!`)}handleIdle(){this.owner.detectPlayer()?this.state=je.STATE_Chase:this.owner.isFocusedOnPlayer||(this.state=je.STATE_Patrol)}handlePatrol(){this.isFirst&&this.randomMove(),this.owner.detectPlayer()&&(this.state=je.STATE_Chase)}randomMove(){let e=k.instance.getNodeAt(this.owner.x,this.owner.y),n=k.instance.getNeighbors(e).filter(c=>k.instance.isWalkableAt(c.x,c.y));if(n.length===0)return;let r=Math.floor(Math.random()*n.length),s=n[r],o=s.y*32+16,l=s.x*32+16;this.startPathfinding(o,l)}chaseLogic(e,i,n){let r=e&&e<=this.owner.attackRange,s=n<=this.owner.attackRange;this.owner.isFocusedOnPlayer?s?(this.owner.target=k.instance.myHeroSpr,this.state=je.STATE_Attack,this.updateMonster()):this.moveToTarget():s?(this.owner.target=k.instance.myHeroSpr,this.state=je.STATE_Attack,this.updateMonster()):r?(this.owner.smallHeroImg&&Laya.Tween.clearAll(this.owner.smallHeroImg),Laya.Tween.clearAll(this.owner),this.state=je.STATE_Attack,this.updateMonster()):this.moveToTarget()}moveToTarget(){if(!this.owner.target||this.owner.target._isDead){this.owner.target=null,this.state=je.STATE_Idle;return}this.owner.isFocusedOnPlayer?this.moveToTargetDetail():this.owner.isPlayerWithoutDetectionRange(this.owner.target)?this.state=je.STATE_Idle:this.moveToTargetDetail()}moveToTargetDetail(){let i=this.owner.target.x,n=this.owner.target.y,r=i-this.owner.x,s=n-this.owner.y,o=Math.sqrt(r*r+s*s),l=Math.atan2(s,r),c=i-Math.cos(l)*90,u=n-Math.sin(l)*90;this.startPathfinding(c,u)}handleAttack(e){if(this.owner.isStop){console.log("handleAttack: this.owner.isStop "+this.owner.isStop);return}if(this.isFirst&&(this.owner.smallHeroImg&&Laya.Tween.clearAll(this.owner.smallHeroImg),Laya.Tween.clearAll(this.owner)),this.isUnderAttack){this.handleUnderAttack(e),this.isUnderAttack=!1;return}if(!this.owner.target||this.owner.target._isDead){this.owner.target=null,this.state=je.STATE_Idle;return}var i=bt.judgePosition(this.owner.target.x-this.owner.x,this.owner.target.y-this.owner.y);this.owner.roleDirection=i,this.owner.onNpcSendMoveData(this.owner.x,this.owner.y),this.owner.lastTarget!=this.owner.target&&(this.owner.currentAttackIndex=0,this.owner.monsterAttackSequence=this.owner.oldMonsterAttackSequence);var n,r=!1;this.owner.target==k.instance.myHeroSpr?(n=this.owner.attackSequence,r=!0):n=this.owner.monsterAttackSequence;let s=n[this.owner.currentAttackIndex],o=this.owner.skills.find(u=>u.skillItem.type===s);var l=!1;if(o)if(this.owner.canUseSkill(o,e))if(bt.calculateDistance(this.owner,this.owner.target)<=o.skillItem.distance){var c=!1;s!=6||r?c=!0:Math.random()<.2&&(c=!0,l=!0),c&&this.useSkill(o,e)}else{this.state=je.STATE_Chase;return}else{this.owner.currentAttackIndex=(this.owner.currentAttackIndex+1)%n.length,this.state=je.STATE_Flee;return}this.owner.currentAttackIndex=(this.owner.currentAttackIndex+1)%n.length,l&&(this.owner.monsterAttackSequence=this.owner.oldUsdBigSkillMonsterAttackSequence),this.owner.lastTarget=this.owner.target}checkStateTransitions(e){e<=this.owner.showRange&&this.owner.target!=k.instance.myHeroSpr&&(this.owner.target=k.instance.myHeroSpr,this.state=je.STATE_Chase)}handleFlee(){if(this.isFirst)try{this.runAway()}catch(e){console.warn(e),this.state=je.STATE_Idle}else this.state=je.STATE_Idle}multiplyByRandomRange(e){let r=Math.random()*.3999999999999999+.8;return e*r*100}runAway(){if(!this.owner.target||this.owner.target._isDead){this.owner.target=null,this.state=je.STATE_Idle;return}let e=this.getFleeDirection();console.log("runAway: ",e);var i=this.owner.x+this.multiplyByRandomRange(e.x),n=this.owner.y+this.multiplyByRandomRange(e.y);this.startPathfinding(i,n)}getFleeDirection(){if(!this.owner.target)return new Laya.Point(0,0);let e=this.owner.x-this.owner.target.x,i=this.owner.y-this.owner.target.y,n=Math.sqrt(e*e+i*i);return new Laya.Point(e/n,i/n)}startPathfinding(e,i){try{this.path=k.instance.getEveryPath(new Laya.Point(this.owner.x,this.owner.y),new Laya.Point(e,i))}catch(r){console.warn(r),this.path=[],this.state=je.STATE_Idle}let n=this.path;this.lastPath=n,this.moveAlongPath()}shouldUpdatePath(e){if(!e||e.length===0)return!1;let i=this.lastPath[this.lastPath.length-1];if(i){let n=e[e.length-1];return bt.getDistance(i,n)>this.thresholdDistance}else return!0}moveAlongPath(){if(this.path)if(this.path.length>0){let s=this.path.shift(),o=s.y*32+16,l=s.x*32+16;var e=bt.judgePosition(o-this.owner.x,l-this.owner.y);if(this.owner.roleDirection=e,this.owner.smallHeroImg){var i=k.instance.fromBigToSmall(o,l),n=i[0],r=i[1];Laya.Tween.to(this.owner.smallHeroImg,{x:n,y:r},this.owner.monsterTime,Laya.Ease.linearNone,null,0,!0)}this.owner.isLockAni||(this.owner.aniChange=!1,this.owner.heroSk.isReady&&this.owner.walk()),Laya.Tween.to(this.owner,{x:o,y:l},this.owner.monsterTime,Laya.Ease.linearNone,Laya.Handler.create(this,this.moveAlongPath),0,!0),this.owner.onNpcSendMoveData(o,l)}else this.state==je.STATE_Patrol&&this.randomMove()}};Mr=h([OP("DknC7B57SZi-09Mz092daQ")],Mr);var{regClass:HP,property:ZS}=Laya,on=class extends Laya.Script{constructor(){super();this.createBoxInterval=1e3;this._time=0;this._started=!1;this.updateStop=!1}onEnable(){let e=["resources/UI/images/test/b1.png"];Laya.loader.load(e).then(i=>{this._time=Date.now(),this._gameBox=this.owner.getChildByName("gameBox"),Laya.stage.on(Laya.Event.BLUR,this,()=>{this.updateStop=!0}),Laya.stage.on(Laya.Event.FOCUS,this,()=>{this.updateStop=!1}),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onStageClick)})}onStart(){let e=this.owner.getChildByName("ground").getComponent(Laya.BoxCollider);e.width=Laya.stage.width}onUpdate(){if(this.updateStop)return;let e=Date.now();e-this._time>this.createBoxInterval&&this._started&&(this._time=e,this.createBox())}createBox(){let e=Laya.Pool.getItemByCreateFun("dropBox",this.dropBox.create,this.dropBox);e.pos(Math.random()*(Laya.stage.width-100),-100),this._gameBox.addChild(e)}onStageClick(e){e.stopPropagation();let i=Laya.Pool.getItemByCreateFun("bullet",this.bullet.create,this.bullet);i.pos(Laya.stage.mouseX,Laya.stage.mouseY),this._gameBox.addChild(i)}startGame(){this._started||(this._started=!0,this.enabled=!0)}stopGame(){this._started=!1,this.enabled=!1,this.createBoxInterval=1e3,this._gameBox.removeChildren()}};h([ZS({type:Laya.Prefab})],on.prototype,"dropBox",2),h([ZS({type:Laya.Prefab})],on.prototype,"bullet",2),on=h([HP("5iJgbfCiSn6Rc8upAfHtjA")],on);var Vx=class extends Laya.Scene{};var{regClass:UP,property:mWe}=Laya,Rr=class extends Vx{constructor(){super();Rr.instance=this}onEnable(){this._control=this.getComponent(on),this.tipLbll.on(Laya.Event.CLICK,this,this.onTipClick)}onTipClick(e){this.tipLbll.visible=!1,this._score=0,this.scoreLbl.text="分数：",this._control.startGame()}addScore(e=1){this._score+=e,this.scoreLbl.text="分数："+this._score,this._control.createBoxInterval>600&&this._score%20==0&&(this._control.createBoxInterval-=20)}stopGame(){this.tipLbll.visible=!0,this.tipLbll.text="游戏结束了，点击屏幕重新开始",this._control.stopGame()}};Rr=h([UP("Y5UkAabiTgWFZQnBL1EpEw")],Rr);var Fx=class extends Laya.Scene{};var{regClass:VP,property:gWe}=Laya,Ac=class extends Fx{constructor(){super()}onOpened(t){t&&(this.msgLab.x=t.point&&t.point.x?t.point.x:Laya.stage.mouseX-50,this.msgLab.y=t.point&&t.point.y?t.point.y:Laya.stage.mouseY-80,this.msgLab.text=t.text,Laya.Tween.to(this.msgLab,{y:this.msgLab.y-100,alpha:0},1e3,Laya.Ease.linearNone))}};Ac=h([VP("9kGOzpbbSOWSAmN0l9VtfQ")],Ac);var Gx=class extends Laya.Scene{};var{regClass:FP,property:xWe}=Laya,kc=class extends Gx{constructor(){super()}onEnable(){Laya.Physics2D.I&&(Laya.Physics2D.I.enableDebugDraw=!1),this.tabBindViewStack(),this.topTab.selectedIndex=0,this.item0Tab.selectedIndex=0}onClicked(){let t=this.item2Tab.getChildByName("item2"),e=this.item2Tab.getChildByName("item3"),i=this.item2Tab.getChildByName("item4");t.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Scene.open("scenes/uiDemo/page/OpenMainScene.ls",!1)}),e.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Scene.open("scenes/uiDemo/page/OpenScene.ls",!1)}),i.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Scene.open("scenes/uiDemo/page/Dialog.ls",!1,{title:"弹窗的标题",text:"弹窗的具体文本……"})})}tabBindViewStack(){this.topTab.selectHandler=new Laya.Handler(this,t=>{this.tabPage.selectedIndex=t,t==1&&(this.item1Tab.selectedIndex=0),t==2&&(this.item2Tab.selectedIndex=0),t==3&&(this.item3Tab.selectedIndex=0),t==4&&(this.item4Tab.selectedIndex=0),Laya.Physics2D.I&&(Laya.Physics2D.I.enableDebugDraw=!1),at.instance.iframeElement&&at.instance.closeVideo(),t==2&&this.item2Page.selectedIndex==1&&!at.instance.iframeElement&&at.instance.createElementVideo()}),this.item0Tab.selectHandler=new Laya.Handler(this,t=>{this.item0Page.selectedIndex=t}),this.item1Tab.selectHandler=new Laya.Handler(this,t=>{this.item1Page.selectedIndex=t,t!==4&&Laya.Physics2D.I?Laya.Physics2D.I.enableDebugDraw=!1:t==4&&Laya.Physics2D.I&&(Laya.Physics2D.I.enableDebugDraw=!0)}),this.item2Tab.selectHandler=new Laya.Handler(this,t=>{switch(this.item2Page.selectedIndex=t,t){case 1:!at.instance.iframeElement&&at.instance.createElementVideo();break;case 2:Laya.Scene.open("scenes/uiDemo/page/OpenMainScene.ls",!1);break;case 3:Laya.loader.load("prefab/uiDemo/page/Win.lh").then(e=>{let i=e.create();this.tabPage.parent.addChild(i)});break;case 4:Laya.loader.load("prefab/uiDemo/page/Dialog.lh").then(e=>{e.create().show()});break}t!==1&&at.instance.iframeElement&&at.instance.closeVideo()}),this.item3Tab.selectHandler=new Laya.Handler(this,t=>{this.item3Page.selectedIndex=t}),this.item4Tab.selectHandler=new Laya.Handler(this,t=>{this.item4Page.selectedIndex=t})}onDisable(){}};kc=h([FP("gbAKGLFtQ5WL6-NpVocAEA")],kc);var{regClass:GP,property:Kx}=Laya,ln=class extends Laya.Script{constructor(){super(...arguments);this.isPlay=!1}onAwake(){console.log("创建动画模板"),this.createAniTemplate("moveB"),this.createAniTemplate("moveC"),this.createAniTemplate("moveE"),this.createAniTemplate("moveF"),this.createAniTemplate("moveH"),this.createAniTemplate("moveI"),this.createAniTemplate("moveK"),this.createAniTemplate("moveL"),this.aniSource.play(0,!0,"moveB")}onEnable(){this.playAni.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isPlay=!0,this.aniSource.play(0,!0,this.selectAni.selectedLabel)}),this.stopAni.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isPlay=!1,this.aniSource.isPlaying&&this.aniSource.stop()}),this.selectAni.selectHandler=new Laya.Handler(this,()=>{this.isPlay?this.aniSource.play(0,!0,this.selectAni.selectedLabel):this.aniSource.play(0,!1,this.selectAni.selectedLabel)})}createAniTemplate(e,i=8){let n=[];for(let r=0;r<i;r++)n.push("resources/UI/role/atlasAni/139x/"+e+r+".png");Laya.Animation.createFrames(n,e)}onError(e){console.log("加载失败: "+e)}};h([Kx({type:Laya.Button})],ln.prototype,"playAni",2),h([Kx({type:Laya.Button})],ln.prototype,"stopAni",2),h([Kx({type:Laya.ComboBox})],ln.prototype,"selectAni",2),h([Kx({type:Laya.Animation})],ln.prototype,"aniSource",2),ln=h([GP("tmkUlMggQi20FZpy6nC1aw")],ln);var{regClass:KP,property:qx}=Laya,cn=class extends Laya.Script{constructor(){super(...arguments);this.isPlay=!1}onEnable(){this.isPlay=!0,this.playAnimation(this.selectAni.selectedLabel),this.playAni.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isPlay=!0,this.playAnimation(this.selectAni.selectedLabel)}),this.stopAni.on(Laya.Event.MOUSE_DOWN,this,()=>{this.isPlay=!1,this.aniSource.isPlaying&&this.aniSource.stop()}),this.selectAni.selectHandler=new Laya.Handler(this,()=>{this.isPlay?this.playAnimation(this.selectAni.selectedLabel):this.playAnimation(this.selectAni.selectedLabel,!1)})}playAnimation(e,i=!0,n=7){let r=[];for(let s=0;s<n;s++)r.push("resources/UI/role/frameAni/"+e+s+".png");this.aniSource.loadImages(r).play(0,i)}};h([qx({type:Laya.Button})],cn.prototype,"playAni",2),h([qx({type:Laya.Button})],cn.prototype,"stopAni",2),h([qx({type:Laya.ComboBox})],cn.prototype,"selectAni",2),h([qx({type:Laya.Animation})],cn.prototype,"aniSource",2),cn=h([KP("8gw7FS4iT1q8EhdN3sWklQ")],cn);var{regClass:qP,property:kWe}=Laya,eD=Laya.Event,WP=Laya.SpineSkeleton,Bc=class extends Laya.Script{constructor(){super(...arguments);this.skinArray=["goblin","goblingirl"];this.skinIndex=0;this.spineAniIndex=6}onEnable(){this.createLayaSpine(),this.createSpine()}createLayaSpine(){this.skeletonNode=this.owner.getChildByName("skeletonNode"),Laya.loader.load("resources/UI/role/spineAni/goblins.sk").then(e=>{this.skeletonAni=e.buildArmature(1),this.skeletonNode.addChild(this.skeletonAni),this.skeletonAni.x=128,this.skeletonAni.y=390,this.spineAniNum=this.skeletonAni.getAnimNum(),this.skeletonAni.play(0,!0),this.changeSkin(),this.skeletonNode.on(eD.CLICK,this,this.changeSkin)})}parseComplete(){}createSpine(){this.spineNode=this.owner.getChildByName("spineNode"),Laya.loader.load("resources/UI/role/spineAni/spineboy-pma.skel",Laya.Loader.SPINE).then(e=>{this.spineAni=new WP,this.spineAni.templet=e,this.spineNode.addChild(this.spineAni),this.spineAni.scale(.3,.3),this.spineAni.pos(220,390),this.spineAniNum=this.spineAni.getAnimNum(),this.spineAni.play(this.spineAniIndex,!0),this.spineNode.on(eD.CLICK,this,this.changeAni)})}spineParseComplete(){}changeAni(){++this.spineAniIndex>=this.spineAniNum&&(this.spineAniIndex=5),this.spineAni.play(this.spineAniIndex,!0,!0)}changeSkin(){this.skeletonAni.showSkinByName(this.skinArray[this.skinIndex]),++this.skinIndex>=this.skinArray.length&&(this.skinIndex=0)}};Bc=h([qP("qTd2xmRXT4i0Re94qly0Lg")],Bc);var{regClass:YP,property:Mc}=Laya,tD=Laya.Event,zP=Laya.Point,Ra=class extends Laya.Script{constructor(){super();this.runAniName="runRight,runRDown1,runRDown2,runRDown3,runDown,runLDown3,runLDown2,runLDown1,runLeft,runLUp1,runLUp2,runLUp3,runUp,runRUp3,runRUp2,runRUp1";this.standAniName="right,Rdown,down,Ldown,left,Lup,up,Rup";this.stageMouse=new zP;this.angle=0;this.isMoving=!1;this.isRun=!1}onEnable(){this.createMap(),this.sceneWindow.on(tD.MOUSE_UP,this,this.mouseUp),this.roleAniNode=this.roleAni.create(),this.sceneWindow.addChild(this.roleAniNode),this.roleAniNode.pivot(this.roleAniNode.width/2,this.roleAniNode.height/2+26),this.roleAniNode.scale(.6,.6),this.roleAniNode.x=this.lastX=26*32+16,this.roleAniNode.y=this.lastY=16*32+16,this._animator=this.roleAniNode.getComponent(Laya.Animator2D);let e=this._animator.getDefaultState();console.log(e.name),this.createWallMap()}createWallMap(){Laya.loader.load("resources/tiledMap/map1_32.json").then(()=>{let i=Laya.loader.getRes("resources/tiledMap/map1_32.json").data.layers[2],n=i.data,r=i.width,s=i.height;console.log(n);let o;o=new Array;for(var l=r,c=s,u=0;u<c;u++){o[u]=new Array;for(var p=0;p<l;p++)n[u*l+p]==0?o[u][p]=1:o[u][p]=0}console.log(o),this.graph=new window.Graph(o),this.opts=[],this.opts.closest=!0,this.opts.heuristic=window.astar.heuristics.diagonal})}mouseUp(e){if(this.isMoving)return;this.stageMouse.x=Laya.stage.mouseX,this.stageMouse.y=Laya.stage.mouseY;let i=this.gameMap.globalToLocal(this.stageMouse);console.log(i);var n=this.graph.grid[Math.ceil(this.roleAniNode.y/32)-1][Math.ceil(this.roleAniNode.x/32)-1],r=this.graph.grid[Math.ceil(i.y/32)-1][Math.ceil(i.x/32)-1];console.log(n,r),this._everyPath=window.astar.search(this.graph,n,r,{closest:this.opts.closest}),console.log(this._everyPath),this._everyPath.length>0&&(this.isMoving=!0),Laya.timer.loop(100,this,this.loopfun)}loopfun(){if(this._everyPath.length>0){let e=this._everyPath[0].y*32+16,i=this._everyPath[0].x*32+16;e==this.lastX?i>this.lastY?this.angle=90:this.angle=270:e>this.lastX?this.angle=0:this.angle=180,this.switchAni("run"),this.lastX=e,this.lastY=i,Laya.Tween.to(this.roleAniNode,{x:e,y:i},100),this._everyPath.splice(0,1)}else this.switchAni("stand"),Laya.timer.clear(this,this.loopfun),this.isMoving=!1}createMap(){this.tiledMap=new Laya.TiledMap,this.tiledMap.createMap("resources/tiledMap/map1_32.json",new Laya.Rectangle(0,0,this.sceneWindow.width,this.sceneWindow.height),new Laya.Handler(this,this.completeHandler))}onLoaded(){this.tiledMap.mapSprite().removeSelf(),this.gameMap.addChild(this.tiledMap.mapSprite())}completeHandler(e=null){this.onLoaded()}switchAni(e){if(e=="run"){let i=this.getOrientation(this.angle,this.runAniName);this._animator.play(i),this.isRun=!0}else{this.isRun=!1;let i=this.getOrientation(this.angle,this.standAniName);this.lastAngle!==this.angle&&this._animator.play(i)}}getOrientation(e,i){let n=i.split(","),r=360/n.length;return n[Math.floor(e/r)]}onDisable(){Laya.stage.off(tD.MOUSE_UP,this,this.mouseUp),this.tiledMap&&this.tiledMap.destroy()}};h([Mc({type:Laya.Sprite})],Ra.prototype,"gameMap",2),h([Mc({type:Laya.Prefab})],Ra.prototype,"roleAni",2),h([Mc({type:"string"})],Ra.prototype,"runAniName",2),h([Mc({type:"string"})],Ra.prototype,"standAniName",2),h([Mc({type:Laya.Panel})],Ra.prototype,"sceneWindow",2),Ra=h([YP("zBb5TGy7Swu5_GpFiGzUng")],Ra);var{regClass:jP,property:NWe}=Laya,iD=Laya.Rectangle,Pr=class extends Laya.Script{constructor(){super(...arguments);this._rect1=iD.TEMP;this._rect2=iD.TEMP}rectDetection(e,i){return!(e.x>i.x+i.width||e.x+e.width<i.x||e.y>i.y+i.height||e.y+e.height<i.y)}collisionWith(e,i,n){let r=[];if(n==0){var s=Laya.Point.create(),o=e.width/2,l=e.height/2,c=Laya.Point.create(),u,p;s.x=e.x+o,s.y=e.y+l,u=this.rectToRadius(e.width,e.height)}else if(n==2){var d,L;L=this.arrayToPoint(e)}for(let v=0;v<i.length;v++)if(e!=i[v])switch(n){case 0:c.x=i[v].x+i[v].width/2,c.y=i[v].y+i[v].height/2,p=this.rectToRadius(i[v].width,i[v].height),this.circleDetection(s,c,u+p)&&r.push(i[v]);break;case 1:this.rectDetection(e,i[v])&&r.push(i[v]);break;case 2:e.name==="c1"?(d=this.arrayToPoint(i[v]),this.circleAndPolygonDetection(e,d,i[v])&&r.push(i[v])):i[v].name==="c1"?this.circleAndPolygonDetection(i[v],L,e)&&r.push(i[v]):(d=this.arrayToPoint(i[v]),this.polygonDetection(L,d,e,i[v])&&r.push(i[v]));break}return r}circleAndPolygonDetection(e,i,n){let r=this.getSides(i),s=[],o=Laya.Point.create(),l=Laya.Point.create(),c=e.hitArea._hit._cmds[0].radius,u=this.getNodeCoord(i,n);o.x=e.x+e.hitArea._hit._cmds[0].x,o.y=e.y+e.hitArea._hit._cmds[0].y,l=this.getNearestPoint(o,u),s.push(new Laya.Point(l.x-o.x,l.y-o.y));for(let p=0,d=r.length;p<d;p++)s.push(this.perpendicular(r[p]));for(let p=0,d=s.length;p<d;p++){let L=s[p],v=this.getCircleProjection(o,L,c),E=this.getPolygonProjection(u,L);if(!this.isOverlap(v,E))return!1}return!0}getNearestPoint(e,i){let n=i[0],r=this.getDistance(e,n),s,o;for(let l=1;l<i.length;l++)s=i[l],o=this.getDistance(e,s),o<r&&(r=o,n=s);return n}polygonDetection(e,i,n,r){let s=this.getSides(e).concat(this.getSides(i)),o=[],l=this.getNodeCoord(e,n),c=this.getNodeCoord(i,r);for(let u=0,p=s.length;u<p;u++)o.push(this.perpendicular(s[u]));for(let u=0,p=o.length;u<p;u++){let d=o[u],L=this.getPolygonProjection(l,d),v=this.getPolygonProjection(c,d);if(!this.isOverlap(L,v))return!1}return!0}isOverlap(e,i){let n,r;return n=e.min<i.min?e.min:i.min,r=e.max>i.max?e.max:i.max,e.max-e.min+(i.max-i.min)>=r-n}getNodeCoord(e,i){let n=[];for(let r=0;r<e.length;r++){let s=Laya.Point.create();s.x=e[r].x+i.x+i.hitArea._hit._cmds[0].x,s.y=e[r].y+i.y+i.hitArea._hit._cmds[0].y,n.push(s)}return n}getPolygonProjection(e,i){let n=null,r=null;for(let s=0;s<e.length;s++){let o=this.dotProduct(e[s],i)/this.getLength(i);(n===null||o<n)&&(n=o),(r===null||o>r)&&(r=o)}return{min:n,max:r}}getCircleProjection(e,i,n){let r=this.dotProduct(e,i)/this.getLength(i);return{min:r-n,max:r+n}}rectToRadius(e,i){let n;return e==i?n=e/2:n=Math.sqrt(e*e+i*i)/2,n}circleDetection(e,i,n){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))<=n}circlesCollision(e,i,n,r){let s=this.subtract(e,i),o=this.getCircleProjection(e,s,n),l=this.getCircleProjection(i,s,r);return!!this.isOverlap(o,l)}arrayToPoint(e){let i=[],n=[];if(n=e.hitArea._hit._cmds[0].points,n&&n.length>3)for(let r=0;r<n.length/2;r++)i[r]=Laya.Point.create(),i[r].x=n[r*2],i[r].y=n[r*2+1];return i}perpendicular(e){let i=Laya.Point.create();return i.x=e.y,i.y=-e.x,i}getNormal(e){let i=Math.sqrt(e.x*e.x+e.y*e.y);return new Laya.Point(e.y/i,(0-e.x)/i)}getSides(e){var i=e,n=i.length,r=new Array;if(n>=3){for(var s=1,o=i[0];s<n;s++){let l=i[s];r.push(this.subtract(l,o)),o=l}r.push(this.subtract(i[0],i[n-1]))}return r}getLength(e){return Math.sqrt(e.x*e.x+e.y*e.y)}dotProduct(e,i){return e.x*i.x+e.y*i.y}subtract(e,i){return Laya.Point.create().setTo(e.x-i.x,e.y-i.y)}getDistance(e,i){let n=e.x-i.x,r=e.y-i.y;return Math.sqrt(n*n+r*r)}};Pr=h([jP("naI7Ga3ZQzuwHxZXbiaZEw")],Pr);var Wx=class extends Laya.View{};var{regClass:$P,property:VWe}=Laya,un=class extends Wx{constructor(){super();this._detectionType=0;this.collisionNodes=null;un.i=this}onEnable(){this.collisionNodes=[this.c1,this.p1,this.p2],this._script=this.getComponent(Pr),this.detectionType.selectHandler=new Laya.Handler(this,this.onSelected),this.detectionType.selectedIndex=0}onSelected(e){switch(console.log("onSelected:"+e),this._detectionType=e,e){case 0:this.setCircleLine([this.c11,this.p11,this.p22]);break;case 1:this.setRectLine([this.c11,this.p11,this.p22]);break;case 2:this.c11.graphics.clear(),this.p11.graphics.clear(),this.p22.graphics.clear();break}}collisionWith(e){let i;i=this._script.collisionWith(e,this.collisionNodes,this._detectionType),i.length>0?(i.push(e),this.setLineWidth(i)):this.retsetLineWidth()}setLineWidth(e){for(let i=0;i<e.length;i++)e[i]._graphics._cmds[0].lineWidth=3}retsetLineWidth(){for(let e=0;e<this.collisionNodes.length;e++)this.collisionNodes[e]._graphics._cmds[0].lineWidth=0}setCircleLine(e,i=1,n="#1e00fb"){for(let r=0;r<e.length;r++){e[r].graphics.clear();let s=e[r].width/2,o=e[r].height/2,l=this._script.rectToRadius(e[r].width,e[r].height);e[r].graphics.drawCircle(s,o,l,null,n,i)}}setRectLine(e,i=1,n="#1e00fb"){for(let r=0;r<e.length;r++)e[r].graphics.clear(),e[r].graphics.drawRect(e[r].x,e[r].y,e[r].width,e[r].height,null,n,i)}};un=h([$P("RrGHZH_SROCrF5XxFa05sg")],un);var{regClass:XP,property:bo}=Laya,Nr=Laya.Event,aD=Laya.Point,ca=class extends Laya.Script{constructor(){super();this.runAniName="runRight,runRDown1,runRDown2,runRDown3,runDown,runLDown3,runLDown2,runLDown1,runLeft,runLUp1,runLUp2,runLUp3,runUp,runRUp3,runRUp2,runRUp1";this.standAniName="right,Rdown,down,Ldown,left,Lup,up,Rup";this.stageMouse=new aD;this.axisPivot=new aD;this.angle=0;this.radian=0;this.isMoving=!1;this.isRun=!1;this.mLastX=0;this.mLastY=0}onEnable(){this.createMap(),this.joystickAxis=this.joystickBG.getChildByName("joystickAxis"),this.maxDistance=this.joystickBG.width-this.joystickAxis.width,this.axisPivot.x=this.joystickAxis.x,this.axisPivot.y=this.joystickAxis.y,this.sceneWindow.on(Nr.MOUSE_DOWN,this,this.mouseDown),this.sceneWindow.on(Nr.MOUSE_MOVE,this,this.mouseMove),this.sceneWindow.on(Nr.MOUSE_UP,this,this.mouseUp),this.sceneWindow.on(Nr.MOUSE_OUT,this,this.mouseUp),this.roleAniNode=this.roleAni.create(),this.sceneWindow.addChild(this.roleAniNode),this.roleAniNode.pivot(this.roleAniNode.width/2,this.roleAniNode.height/2),this.roleAniNode.x=this.sceneWindow.width/2,this.roleAniNode.y=this.sceneWindow.height/2,this._animator=this.roleAniNode.getComponent(Laya.Animator2D);let e=this._animator.getDefaultState();console.log(e.name)}createMap(){this.tiledMap=new Laya.TiledMap,this.tiledMap.createMap("resources/tiledMap/desert_new.json",new Laya.Rectangle(0,0,this.sceneWindow.width,this.sceneWindow.height),new Laya.Handler(this,this.completeHandler))}onLoaded(){this.tiledMap.mapSprite().removeSelf(),this.gameMap.addChild(this.tiledMap.mapSprite())}completeHandler(e=null){this.onLoaded()}mouseDown(e){this.touchId=e.touchId,this.isMoving=!0,this.updateJoystickPoint()}updateJoystickPoint(){this.stageMouse.x=Laya.stage.mouseX,this.stageMouse.y=Laya.stage.mouseY;let e=this.joystickBG.globalToLocal(this.stageMouse),i=e.x-this.joystickAxis.width/2,n=e.y-this.joystickAxis.height/2;this.radian=Math.atan2(n-this.axisPivot.y,i-this.axisPivot.x),this.lastAngle=this.angle,this.angle=Math.round(this.radian*180/Math.PI*10)/10,this.angle<0&&(this.angle+=360),this.getDistance(this.joystickBG.width/2,this.joystickBG.height/2,e.x,e.y)>this.maxDistance&&this.lastAngle!==this.angle?(this.joystickAxis.x=Math.floor(Math.cos(this.radian)*this.maxDistance)+this.axisPivot.x,this.joystickAxis.y=Math.floor(Math.sin(this.radian)*this.maxDistance)+this.axisPivot.y):this.joystickAxis.pos(e.x-this.joystickAxis.width/2,e.y-this.joystickAxis.height/2),this.switchAni("run")}switchAni(e){if(e=="run"){let i=this.getOrientation(this.angle,this.runAniName);i!==this.lastRunAniName&&(this.lastRunAniName=i,this._animator.play(i)),this.isRun=!0}else{this.isRun=!1;let i=this.getOrientation(this.angle,this.standAniName);this.lastAngle!==this.angle&&this._animator.play(i)}}mouseUp(e){e.touchId==this.touchId&&(this.touchId=null,this.isMoving=!1,this.joystickAxis.pos(this.axisPivot.x,this.axisPivot.y),this.switchAni("stand"))}mouseMove(e){e.touchId==this.touchId&&this.updateJoystickPoint()}getOrientation(e,i){let n=i.split(","),r=360/n.length;return n[Math.floor(e/r)]}onUpdate(){this.isMoving&&this.updateRoleMove()}updateRoleMove(){this.switchAni("run");let e=Math.cos(this.radian)*2*5,i=Math.sin(this.radian)*2*5;this.mLastX+=e,this.mLastY+=i,console.log("mLastX: "+this.mLastX,", mLastY: "+this.mLastY),this.tiledMap.moveViewPort(this.mLastX,this.mLastY)}getDistance(e,i,n,r){let s=e-n,o=i-r;return Math.sqrt(s*s+o*o)}onDisable(){Laya.stage.off(Nr.MOUSE_DOWN,this,this.mouseDown),Laya.stage.off(Nr.MOUSE_UP,this,this.mouseUp),Laya.stage.off(Nr.MOUSE_MOVE,this,this.mouseMove),this.tiledMap&&this.tiledMap.destroy()}};h([bo(Laya.Sprite)],ca.prototype,"gameMap",2),h([bo(Laya.Prefab)],ca.prototype,"roleAni",2),h([bo({type:"string"})],ca.prototype,"runAniName",2),h([bo({type:"string"})],ca.prototype,"standAniName",2),h([bo({type:Laya.Panel})],ca.prototype,"sceneWindow",2),h([bo(Laya.Image)],ca.prototype,"joystickBG",2),ca=h([XP("k2DFVaFIQEyMRaElgOWsVw")],ca);var Yx=class extends Laya.Box{};var{regClass:QP}=Laya,Rc=class extends Yx{constructor(){super();this.lastIndex=-1}onEnable(){let e="resources/json/bagList.json";Laya.loader.fetch(e,"json").then(i=>{i.bagList&&i.bagList.length>0&&(this.bagList.array=i.bagList,this.bagList.renderHandler=new Laya.Handler(this,this.onListRender),this.bagList.selectHandler=new Laya.Handler(this,this.onListSelect),this.bagList.mouseHandler=new Laya.Handler(this,this.onListMouse),this.bagList.vScrollBarSkin="")})}onListRender(e,i){i>this.bagList.array.length||i<0}onListSelect(e){this.tips.visible=!0,this.bagList.array[e].listItemBG={skin:"resources/UI/images/bg/bg100-1.png"},this.lastIndex!==-1&&(this.bagList.array[this.lastIndex].listItemBG={skin:"resources/UI/images/bg/bg100-0.png"}),this.lastIndex=e,this.itemImg.skin=this.bagList.array[e].listItemImg.skin,this.itemNumber.text="数量 "+this.bagList.array[e].listItemNumber.text,this.itemReadme.text=this.bagList.array[e].readme}onListMouse(e,i){}onDisable(){}};Rc=h([QP("fimeRTYXT46eMH6komwhJQ")],Rc);var{regClass:JP,property:jE}=Laya,er=class extends Laya.Script{constructor(){super()}onEnable(){var e=this.getDataSourece();Laya.loader.load("prefab/ComboList.lh").then(i=>{let n=i.create();this.comboList=n,this.comboList.array=e,this.comboList.repeatY=e.length,this.combo2.list=this.comboList,this.combo2.list.width=this.combo2.width,this.combo2.list.hScrollBarSkin="",this.combo2.selectHandler=new Laya.Handler(this,this.onSelected2)}),this.combo1.selectHandler=new Laya.Handler(this,this.onSelected1)}onSelected1(e){this.selectedText.text="您选中了："+this.combo1.selectedLabel}onSelected2(e){this.selectedText.text="您选中了："+(e<0?"":this.comboList.array[e].label)}getDataSourece(){for(var e=[],i=0;i<10;i++)e[i]={optText:{text:"选项"+(i+1)}};return e}onDisable(){}};h([jE({type:Laya.ComboBox})],er.prototype,"combo1",2),h([jE({type:Laya.ComboBox})],er.prototype,"combo2",2),h([jE({type:Laya.Label})],er.prototype,"selectedText",2),er=h([JP("M6bGyqDSRCGU3TkvNeqvRw")],er);var zx=class extends Laya.View{};var{regClass:ZP}=Laya,Pc=class extends zx{onEnable(){this.hList.array=this.getListDataSource(),this.hList.scrollTo(1);let e=this.hList.cells[1].getChildByName("icon");e.scaleX=e.scaleY=2,this.hList.scrollBar.on(Laya.Event.CHANGE,this,this.onScrollBarChange),this.leftLimit=this.getLeftLimit(),this.rightLimit=this.getRightLimit()}onScrollBarChange(){var e=this.hList.scrollBar.value,i=this.hList.array;if(e>this.leftLimit){var n=i.shift();i[i.length]=n,this.hList.array=i,this.hList.scrollBar.value=e-this.hList.cells[0].width-this.hList.spaceX,this.iconTweenToLeft()}else e<this.rightLimit&&(n=i.pop(),i.unshift(n),this.hList.array=i,this.hList.scrollBar.value=e+this.hList.cells[0].width+this.hList.spaceX,this.iconTweenToRight())}iconTweenToLeft(e=200){let i=this.hList.cells[0].getChildByName("icon");i.scaleX=i.scaleY=2,Laya.Tween.to(i,{scaleX:1,scaleY:1},e);let n=this.hList.cells[1].getChildByName("icon");n.scaleX=n.scaleY=1,Laya.Tween.to(n,{scaleX:2,scaleY:2},e)}iconTweenToRight(e=200){let i=this.hList.cells[1].getChildByName("icon");i.scaleX=i.scaleY=2,Laya.Tween.to(i,{scaleX:1,scaleY:1},e);let n=this.hList.cells[2].getChildByName("icon");n.scaleX=n.scaleY=1,Laya.Tween.to(n,{scaleX:2,scaleY:2},e)}getRightLimit(){return this.hList.cells[0].width-this.hList.spaceX}getLeftLimit(){return this.hList.cells[0].width*2+this.hList.spaceX}getListDataSource(e=5){let i=[];for(let n=0;n<e;n++)i[n]={},i[n].icon={skin:`resources/UI/role/r${n}.png`};return i}};Pc=h([ZP("WFag7yYwR9q-iI31OJUedg")],Pc);var{regClass:eN,property:jx}=Laya,mn=class extends Laya.Script{constructor(){super();this.optStatus=[];this.timestampFormat=(e,i)=>{let n=i?new Date(i):new Date,r={"M+":n.getMonth()+1,"D+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"S+":n.getMilliseconds()};new RegExp("(Y+)").test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in r)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,RegExp.$1.length==1?r[s]:("00"+r[s]).substr((""+r[s]).length)));return e}}onEnable(){let e="resources/json/mailList.json";Laya.loader.fetch(e,"json").then(i=>{let n=i.mailList;n&&n.length>0&&(this.mailList.array=n,this.mailList.mouseHandler=new Laya.Handler(this,this.onListMouse),this.mailList.repeatY=n.length,this.mailList.vScrollBarSkin=""),this.addMail.on(Laya.Event.CLICK,this,this.addMialItem),this.selectDel.on(Laya.Event.CLICK,this,this.listSelectDel),this.selectFlag.on(Laya.Event.CLICK,this,this.listSelectFlag)})}listSelectFlag(){if(this.optStatus.length>0){for(let e=0;e<this.optStatus.length;e++){let i=this.optStatus[e];this.mailList.array[i].flag=1,this.mailList.array[i].flagStatus={skin:"resources/UI/images/comp/img_mail_open.png"},this.mailList.array[i].flagBtn={label:"标为未读",labelColors:"#3277f3,#3277f3,#3277f3"}}this.mailList.refresh(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"已成功标记"})}else Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"没有勾选项，请先勾选"})}listSelectDel(){if(this.optStatus.length>0){this.optStatus.sort(function(e,i){return i-e});for(let e=0;e<this.optStatus.length;e++)this.mailList.array.splice(this.optStatus[e],1);this.optStatus=[],this.mailList.refresh(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"已成功删除"})}else Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"没有勾选项，请先勾选"})}addMialItem(){var e=this.mailList.startIndex+1;let i={mailTitle:{text:"这里是新增加的邮件"+e},mailDateTime:{text:this.timestampFormat("YYYY-MM-DD hh:mm")},opt:{visible:!1},flagStatus:{skin:"resources/UI/images/comp/img_mail.png"},flagBtn:{label:"标为已读",labelColors:"#000000,#000000,#000000"}};if(this.mailList.array.splice(e,0,i),this.optStatus.length>0)for(let n=0;n<this.optStatus.length;n++)this.optStatus[n]>=e&&(this.optStatus[n]+=1);this.mailList.refresh()}onListMouse(e,i){if(e.type==Laya.Event.CLICK){var n=this.optStatus.indexOf(i);switch(e.target.name){case"optBG":n===-1?(this.mailList.array[i].opt={visible:!0},this.optStatus.push(i)):(this.mailList.array[i].opt={visible:!1},this.optStatus.splice(n,1)),this.mailList.refresh();break;case"mailTitle":Laya.Scene.open("scenes/uiDemo/Dialog.scene",!1,{title:this.mailList.array[i].mailTitle.text,text:"邮件内容，此处省略1000字……………………"}),this.mailList.array[i].flag=1,this.mailList.array[i].flagStatus={skin:"resources/UI/images/comp/img_mail_open.png"},this.mailList.array[i].flagBtn={label:"标为未读",labelColors:"#3277f3,#3277f3,#3277f3"},this.mailList.refresh();break;case"flagBtn":this.mailList.array[i].flag===1?(this.mailList.array[i].flag=0,this.mailList.array[i].flagStatus={skin:"resources/UI/images/comp/img_mail.png"},this.mailList.array[i].flagBtn={label:"标为已读",labelColors:"#000000,#000000,#000000"}):(this.mailList.array[i].flag=1,this.mailList.array[i].flagStatus={skin:"resources/UI/images/comp/img_mail_open.png"},this.mailList.array[i].flagBtn={label:"标为未读",labelColors:"#3277f3,#3277f3,#3277f3"}),this.mailList.refresh();break;case"delBtn":if(this.mailList.array.splice(i,1),n>-1){this.optStatus.splice(n,1);for(let r=n;r<this.optStatus.length;r++)this.optStatus[r]-=1}this.mailList.refresh(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"删除成功"});break}}}};h([jx({type:Laya.List})],mn.prototype,"mailList",2),h([jx({type:Laya.Button})],mn.prototype,"addMail",2),h([jx({type:Laya.Button})],mn.prototype,"selectDel",2),h([jx({type:Laya.Button})],mn.prototype,"selectFlag",2),mn=h([eN("HzpJPDUEQN69Xg1VasHb-w")],mn);var{regClass:tN,property:go}=Laya,ua=class extends Laya.Script{constructor(){super();this.scrollBarIsStop=!1;this.msgIdNow=1;this.itemIsOpen=!1;this.itemOpenId=-1;this.redHotStatus=[];this.mouseDown=!1}onEnable(){this.refreshList.array=this.createListData(9),this.refreshList.repeatY=this.refreshList.array.length,this.refreshList.vScrollBarSkin="",this.toLine.on(Laya.Event.CLICK,this,this.onToLineBtn),this.toTop.on(Laya.Event.CLICK,this,this.onToTopBtn),this.toBottom.on(Laya.Event.CLICK,this,this.onToBottomBtn),this.refreshList.on(Laya.Event.MOUSE_UP,this,this.stageOnMouseUp),this.refreshList.on(Laya.Event.MOUSE_OUT,this,this.stageOnMouseUp),this.refreshList.scrollBar.stopMoveLimit=this.scrollBarIsStopBind.bind(this),this.refreshLimit("dragTopLimit",80),this.refreshLimit("dragBottomLimit",80,20),this.refreshList.mouseHandler=new Laya.Handler(this,this.onListMouse)}stageOnMouseUp(){this.mouseDown=!1}refreshLimit(e,i,n=0,r=2e3){e==="dragTopLimit"?this.refreshList.scrollBar.topMoveLimit=i:e==="dragBottomLimit"&&(this.refreshList.scrollBar.bottomMoveLimit=i),this.refreshList.scrollBar.on(e,this,()=>{if(console.log("达到了滚动限制:"+e),this.refreshLoading.visible=!0,e==="dragTopLimit"){this.refreshLoading.bottom=NaN,this.refreshLoading.top=n;var s=this.createListData(5,"顶部新增的标题");s=s.concat(this.refreshList.array);var o=0+5,l=0;if(this.redHotStatus.length>0)for(let c=0;c<this.redHotStatus.length;c++)this.redHotStatus[c]+=5}else if(e==="dragBottomLimit"){this.refreshList.scrollBar.disableDrag=!0,this.refreshLoading.top=NaN,this.refreshLoading.bottom=n;var s=this.createListData(5,"底部新增的标题");s=this.refreshList.array.concat(s);var o=this.refreshList.array.length-1,l=o+5}this.scrollBarIsStop=!0,Laya.timer.once(r,this,()=>{this.refreshList.array=s,this.refreshList.scrollTo(l),this.refreshList.selectedIndex=o,this.scrollBarIsStop=!1,this.refreshList.scrollBar.backToNormal(),this.refreshLoading.visible=!1})})}onListMouse(e,i){e.type==Laya.Event.MOUSE_DOWN&&(this.mouseDown=!0,this.itemIsOpen?(this.itemIsOpen=!1,this.itemOpenId=-1,Laya.Tween.to(this.openedItem,{x:0},500,null,Laya.Handler.create(this,()=>{this.refreshList.scrollBar.disableDrag=!1}))):(this.moveLastPos=e.target.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),e.target.on(Laya.Event.MOUSE_MOVE,this,this.onItemBoxMouseMove,[e.target,i]))),e.type==Laya.Event.MOUSE_UP&&(this.mouseDown=!1,this.itemOnMouseUp()),e.type==Laya.Event.CLICK&&(e.target.name=="flag"&&this.onClickFlag(i),e.target.name=="del"&&this.onClickDel(i))}itemOnMouseUp(){if(this.itemIsOpen){var e;this.openedItem.x<-80?e=-262:(this.itemIsOpen=!1,e=0),e!==this.openedItem.x&&Laya.Tween.to(this.openedItem,{x:e},500),this.refreshList.scrollBar.disableDrag=!1,this.itemOpenId!==-1&&(this.openedItem.off(Laya.Event.MOUSE_MOVE,this,this.onItemBoxMouseMove),this.itemOpenId=-1)}}onClickFlag(e){var i=this.redHotStatus.indexOf(e);i==-1?(this.refreshList.array[e].avatar={},this.refreshList.array[e].avatar.redHot={visible:!0},this.refreshList.array[e].flag={flagText:{text:"标记已读"}},this.redHotStatus.push(e)):(this.refreshList.array[e].avatar={redHot:{visible:!1}},this.refreshList.array[e].flag={flagText:{text:"标记未读"}},this.redHotStatus.splice(i,1)),this.refreshList.refresh()}onClickDel(e){this.refreshList.array.splice(e,1),this.itemOpenId=-1;var i=this.redHotStatus.indexOf(e);if(i>-1&&this.redHotStatus.splice(e,1),this.redHotStatus.length>0)for(let n=0;n<this.redHotStatus.length;n++)this.redHotStatus[n]>e&&(this.redHotStatus[n]+=1);this.refreshList.refresh()}onItemBoxMouseMove(e,i){if(this.mouseDown){let n=e.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),r=this.moveLastPos.x-n.x,s=this.moveLastPos.y-n.y;Math.abs(r)>Math.abs(s)&&!this.itemIsOpen&&(this.openedItem=e,this.itemIsOpen=!0,this.refreshList.scrollBar.disableDrag=!0,this.itemOpenId=i),this.itemIsOpen&&(this.openedItem.x-=r,this.openedItem.x<-262?this.openedItem.x=-262:this.openedItem.x>0&&(this.openedItem.x=0))}else this.refreshList.scrollBar.disableDrag=!1}scrollBarIsStopBind(){return this.scrollBarIsStop}onToLineBtn(){let e=parseInt(this.lineNumber.text)-1;this.refreshList.scrollTo(e),e<this.refreshList.array.length&&(this.refreshList.selectedIndex=e)}onToTopBtn(){this.refreshList.scrollTo(0),this.refreshList.selectedIndex=0}onToBottomBtn(){let e=this.refreshList.array.length-1;this.refreshList.scrollTo(e),this.refreshList.selectedIndex=e}createListData(e=5,i="初始测试标题"){let n=new Date,r=n.getHours()<10?"0"+n.getHours():""+n.getHours(),s=n.getMinutes()<10?"0"+n.getMinutes():""+n.getMinutes();for(var o=[],l=0;l<e;l++){let c={text:r+" : "+s};o[l]={},o[l].msgTime=c,o[l].msgTitle={text:i+(this.msgIdNow+l)},o[l].avatar={redHot:{visible:!1}}}return this.msgIdNow+=l,o}onDisable(){}};h([go({type:Laya.List})],ua.prototype,"refreshList",2),h([go({type:Laya.Button})],ua.prototype,"toLine",2),h([go({type:Laya.Button})],ua.prototype,"toTop",2),h([go({type:Laya.Button})],ua.prototype,"toBottom",2),h([go({type:Laya.Box})],ua.prototype,"refreshLoading",2),h([go({type:Laya.Label})],ua.prototype,"lineNumber",2),ua=h([tN("m0TR8w0gTbWSvHbZTzrORA")],ua);var $x=class extends Laya.View{};var{regClass:iN,property:cYe}=Laya,Nc=class extends $x{onEnable(){this.tree1.xml=this.getTreeData(!0),this.tree2.xml=this.getTreeData(!1)}getTreeData(t){let e="<data>";if(t)e+="<dir itemLabel='一级目录一' isOpen='false'><file itemLabel='二级子项1 '/><file itemLabel='二级子项2 '/><file itemLabel='二级子项3 '/><file itemLabel='二级子项4 '/><file itemLabel='二级子项5 '/></dir><dir itemLabel='一级目录二' isOpen='true'><file itemLabel='二级子项1 '/><file itemLabel='二级子项2 '/><file itemLabel='二级子项3 '/></dir><dir itemLabel='一级目录三' isOpen='false'><file itemLabel='二级子项1 '/><file itemLabel='二级子项2 '/><file itemLabel='二级子项3 '/><file itemLabel='二级子项4 '/><file itemLabel='二级子项5 '/></dir><file itemLabel='一级子项1 '/><file itemLabel='一级子项2 '/>";else for(let i=0;i<5;i++){e+="<item title='目录"+(i+1)+"' isOpen='true'>";for(let n=0;n<5;n++)e+="<subpage title='子项标题"+(n+1)+"' />";e+="</item>"}return e+="</data>",new Laya.XML(e)}};Nc=h([iN("GJWtWFwsQoqNpjA1k42SpQ")],Nc);var Xx=class extends Laya.Scene{};var{regClass:aN,property:dYe}=Laya,Oc=class extends Xx{onEnable(){}onDisable(){}};Oc=h([aN("JQ1fkq03ThewqQWRXQPgmw")],Oc);var{regClass:nN,property:bYe}=Laya,Or=class extends Laya.Script{constructor(){super()}baseUI(e){this.window=e,this.searchCloseButton(e)}searchCloseButton(e){for(let i=0;i<e.numChildren;i++){let n=e.getChildAt(i);n instanceof Laya.Button&&n.name=="closeBtn"?(n.on(Laya.Event.MOUSE_DOWN,this,()=>{this.window.close()}),console.log("baseUI 发现closeBtn，统一添加关闭事件")):this.searchCloseButton(n)}}onDisable(){}};Or=h([nN("7Fkz4T7JQ5ujwNcIx9lGNA")],Or);var{regClass:rN,property:_Ye}=Laya,Hc=class extends Or{constructor(){super()}onEnable(){this.ui=this.owner,this.baseUI(this.ui)}onDisable(){}};Hc=h([rN("utN7JQs_T3iw6KqWT-beFQ")],Hc);var Qx=class extends Laya.Box{};var{regClass:sN,property:wYe}=Laya,nD=Laya.Event,rD=Laya.Mouse,Uc=class extends Qx{constructor(){super()}onEnable(){Laya.Browser.onPC?(this.panel.on(nD.MOUSE_OVER,this,()=>{rD.cursor="move"}),this.panel.on(nD.MOUSE_OUT,this,()=>{rD.cursor="auto"})):this.topLab.text="背景可拖拽，双指缩放改变大小"}};Uc=h([sN("9s1SW9WKRrSodo6JY27VSw")],Uc);var{regClass:oN,property:Jx}=Laya,pn=class extends Laya.Script{constructor(){super()}onEnable(){this.graphics=this.graphicsSprite.graphics,Laya.timer.loop(2e3,this,()=>{this.changeImgSkin(),this.changeSpriteTexture(),this.changeFillTexture(),this.changeTexture()})}changeImgSkin(){this.Img.skin=this.randomImg()}changeSpriteTexture(){this.spImg.loadImage(this.randomImg(!0,6,5))}changeFillTexture(){this.graphics.clear();let e=this.randomImg(!0,4);Laya.loader.load(e).then(i=>{this.graphics.fillTexture(i,0,0,1,1)})}changeTexture(){this.textureImg.graphics.clear();let e=Laya.loader.getRes(this.randomImg(!0,8));this.textureImg.graphics.drawTexture(e)}randomImg(e=!1,i=8,n=1){let r=Math.floor(Math.random()*(i-n+1))+n;return e?"resources/UI/role/m"+r+".png":"resources/UI/role/w"+r+".png"}onDisable(){}};h([Jx({type:Laya.Image})],pn.prototype,"Img",2),h([Jx({type:Laya.Sprite})],pn.prototype,"spImg",2),h([Jx({type:Laya.Sprite})],pn.prototype,"graphicsSprite",2),h([Jx({type:Laya.Sprite})],pn.prototype,"textureImg",2),pn=h([oN("ulgCMWfCQKiihSJynpbJFg")],pn);var Zx=class extends Laya.View{};var{regClass:lN,property:BYe}=Laya,e0=Laya.Event,Vc=class extends Zx{onEnable(){this._hitArea.on(e0.MOUSE_DOWN,this,()=>{this._hitArea.off(e0.MOUSE_MOVE,this,this.bg3MaskMove),this._hitArea.startDrag(),this._hitArea.on(e0.MOUSE_MOVE,this,this.bg3MaskMove)}),this._mask.on(e0.MOUSE_MOVE,this,this.maskMove)}bg3MaskMove(t){t.stopPropagation(),this.bg3Mask.x=this._hitArea.x,this.bg3Mask.y=this._hitArea.y}maskMove(){let t=this.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),e=t.x-this._mask.width/this.bg2.scaleX/2,i=t.y-this._mask.height/this.bg2.scaleY/2;e>80&&i>80&&(this._mask.x=t.x-this._mask.width/this.bg2.scaleX/2,this._mask.y=t.y-this._mask.height/this.bg2.scaleY/2,this.bg2.x=(-t.x-this._mask.width/2)*(this.bg2.scaleX-1),this.bg2.y=(-t.y-this._mask.height/2)*(this.bg2.scaleY-1))}};Vc=h([lN("zt0rBsEST9KVJgcimd7SFA")],Vc);var{regClass:cN,property:Hr}=Laya,Yi=class extends Laya.Script{constructor(){super()}onEnable(){this.changeMouseCursor(),this.throughTab.selectHandler=new Laya.Handler(this,this.onSwitchTab)}onSwitchTab(e){switch(e){case 0:this.leftBg.hitTestPrior=!0,this.rightBg.hitTestPrior=!0;break;case 1:this.leftBg.hitTestPrior=!1,this.rightBg.hitTestPrior=!1;break}}changeMouseCursor(){this.leftBg.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Mouse.cursor="move"}),this.leftBg.on(Laya.Event.MOUSE_OUT,this,()=>{Laya.Mouse.cursor="auto"}),this.rightBg.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Mouse.cursor="move"}),this.rightBg.on(Laya.Event.MOUSE_OUT,this,()=>{Laya.Mouse.cursor="auto"}),this.leftBg.on(Laya.Event.CLICK,this,()=>{Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了左侧的可点击区域",point:{x:Laya.stage.mouseX-100}}),console.log("click "+this.leftBg.name)}),this.rightBg.on(Laya.Event.CLICK,this,()=>{Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了右侧的可点击区域",point:{x:Laya.stage.mouseX-120}}),console.log("click "+this.rightBg.name)}),this.btn1.on(Laya.Event.CLICK,this,e=>{e.stopPropagation(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了测试按钮1"}),console.log("click btn1")}),this.btn2.on(Laya.Event.CLICK,this,e=>{e.stopPropagation(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了测试按钮2"}),console.log("click btn2")}),this.close1.on(Laya.Event.CLICK,this,e=>{e.stopPropagation(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了左侧关闭按钮",point:{x:Laya.stage.mouseX-100}}),console.log("click "+this.close1.name)}),this.close2.on(Laya.Event.CLICK,this,e=>{e.stopPropagation(),Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:"点击了右侧关闭按钮",point:{x:Laya.stage.mouseX-120}}),console.log("click "+this.close2.name)})}onDisable(){}};h([Hr({type:Laya.Tab})],Yi.prototype,"throughTab",2),h([Hr({type:Laya.Sprite})],Yi.prototype,"leftBg",2),h([Hr({type:Laya.Sprite})],Yi.prototype,"rightBg",2),h([Hr({type:Laya.Button})],Yi.prototype,"btn1",2),h([Hr({type:Laya.Button})],Yi.prototype,"btn2",2),h([Hr({type:Laya.Sprite})],Yi.prototype,"close1",2),h([Hr({type:Laya.Sprite})],Yi.prototype,"close2",2),Yi=h([cN("AmLUThtNSaW6zL9W205gyg")],Yi);var{regClass:uN,property:t0}=Laya,hn=class extends Laya.Script{onEnable(){this.bTop.getComponent(Laya.BoxCollider).width=this.bTop.width,this.bBottom.getComponent(Laya.BoxCollider).width=this.bBottom.width,this.bRight.getComponent(Laya.BoxCollider).height=this.bRight.height,this.bLeft.getComponent(Laya.BoxCollider).height=this.bLeft.height}};h([t0({type:Laya.Image})],hn.prototype,"bTop",2),h([t0({type:Laya.Image})],hn.prototype,"bBottom",2),h([t0({type:Laya.Image})],hn.prototype,"bRight",2),h([t0({type:Laya.Image})],hn.prototype,"bLeft",2),hn=h([uN("jp5l8WZtQLuVyfU4ljEFyQ")],hn);var i0=class extends Laya.View{};var{regClass:mN,property:GYe}=Laya,Fc=class extends i0{onEnable(){this.testProgress()}testProgress(){this.loading2.value=.01,this.loadText.text="资源加载中……",Laya.timer.loop(100,this,this.changeProgress)}changeProgress(){this.loading2.value+=.05,this.loading2.value==1&&(this.loadText.text="资源加载完成",Laya.timer.clear(this,this.changeProgress),Laya.timer.once(3e3,this,()=>{this.testProgress()}))}};Fc=h([mN("9w97n2rXRjiACN_vzizQPw")],Fc);var{regClass:pN,property:WYe}=Laya,tr=class extends Laya.Script{constructor(){super()}onStart(){this._anim=this.owner.getComponent(Laya.Animator)}isPlayanimaByName(e=0){let i=this._anim.getControllerLayer(e);if(i==null)return!1;let n=i.getCurrentPlayState();return n==null?!1:n.animatorState.clip.islooping?!0:n._finish}isSameByName(e,i=0){let n=this._anim.getControllerLayer(i);if(n==null)return!1;let r=n.getCurrentPlayState();if(r==null)return!1;if(r.animatorState.name==e)return!0}playAnim(e,i=!1){if(i){if(this.isSameByName(e))return;this._anim.play(e,0,0);return}this.isPlayanimaByName()||this._anim.play(e,0,0)}};tr=h([pN("q0uAMn-DTUm70T4fGtxGlw")],tr);var yt=Laya.InputManager,{regClass:hN,property:ZYe}=Laya,Gc=class extends Laya.Script{constructor(){super(...arguments);this.currRockerBar=null;this.maxDistance=80;this.isMouseDown=!1;this.mouseDownPosition=new Laya.Point;this._currentMouse=new Laya.Point;this.initRockerBarPosition=new Laya.Point;this.key1Pressed=!1;this.key2Pressed=!1;this.key3Pressed=!1;this.key4Pressed=!1;this.key5Pressed=!1;this.key6Pressed=!1;this.key7Pressed=!1;this.key8Pressed=!1;this.directionOffset=0;this.isKeyRun=!1}onEnable(){Laya.InputManager.multiTouchEnabled=!0}onStart(){this.currRockerBar=this.owner.getChildByName("freebar"),this.img_freebar_arrow=this.owner.getChildByName("img_freebar_arrow"),this.freetrack=this.owner.getChildByName("freetrack"),this.img_arrow_left=this.freetrack.getChildByName("img_arrow_left"),this.img_arrow_right=this.freetrack.getChildByName("img_arrow_right"),this.img_arrow_up=this.freetrack.getChildByName("img_arrow_up"),this.img_arrow_down=this.freetrack.getChildByName("img_arrow_down"),this.img_freebar_arrow.visible=!1,Laya.Browser.onPC?this.freetrack.visible=!0:this.img_arrow_left.visible=this.img_arrow_right.visible=this.img_arrow_up.visible=this.img_arrow_down.visible=!1,this.initialise()}initialise(){this.initRockerBarPosition.setTo(this.currRockerBar.x,this.currRockerBar.y),this.currRockerBar.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.onMouseMove),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.onMouseUp)}onSkillKeyDown(e,i,n){switch(e.stopPropagation(),i){case 1:this.key1Pressed=n;break;case 2:this.key2Pressed=n;break;case 3:this.key3Pressed=n;break}}onMouseDown(e){B.instance.stopAll||(e.stopPropagation(),this.isMouseDown=!0,this.currRockerBar.selected=!0,Laya.Browser.onPC||(this.freetrack.visible=!0),this.mouseDownPosition.setTo(this.owner.mouseX,this.owner.mouseY),console.log("onMouseDown this.owner.mouse: ",this.owner.mouseX,this.owner.mouseY),this.isKeyRun=!1,this.touchId=e.touchId)}onMouseUp(e){this.isMouseDown&&this.endClick(e)}endClick(e){this.isMouseDown=!1,this.currRockerBar.x=this.initRockerBarPosition.x,this.currRockerBar.y=this.initRockerBarPosition.y,this.currRockerBar.selected=!1,this.setDir(-4)}onMouseMove(e){if(!this.isMouseDown||!this.currRockerBar)return;e.stopPropagation(),this._currentMouse.setTo(e.stageX,e.stageY);let i=this.owner.globalToLocal(this._currentMouse,!1),n=i.x-this.mouseDownPosition.x,r=i.y-this.mouseDownPosition.y;if(Math.sqrt(n**2+r**2)<this.maxDistance)this.currRockerBar.x=this.initRockerBarPosition.x+n,this.currRockerBar.y=this.initRockerBarPosition.y+r;else{let o=Math.atan2(n,r);this.currRockerBar.x=Math.sin(o)*this.maxDistance+this.initRockerBarPosition.x,this.currRockerBar.y=Math.cos(o)*this.maxDistance+this.initRockerBarPosition.y}if(Math.abs(n)>this.directionOffset||Math.abs(r)>this.directionOffset){let o=bt.judgePosition(n,r);this.setDir(o)}}onUpdate(){B.instance.stopAll||this.getKeyboardPressed()}setDir(e){if(this.lastDirection!=e&&(k.instance.setMyHeroDirection(e),this.lastDirection=e),e==-4)this.img_freebar_arrow.visible=!1;else{this.img_freebar_arrow.visible=!0;let i=e+90;this.img_freebar_arrow.rotation=i}}getKeyboardPressed(){if(yt.hasKeyDown(Laya.Keyboard.W)&&yt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(225)):yt.hasKeyDown(Laya.Keyboard.W)&&yt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(315)):yt.hasKeyDown(Laya.Keyboard.S)&&yt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(135)):yt.hasKeyDown(Laya.Keyboard.S)&&yt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(45)):yt.hasKeyDown(Laya.Keyboard.W)?(this.isKeyRun=!0,this.setDir(270)):yt.hasKeyDown(Laya.Keyboard.D)?(this.isKeyRun=!0,this.setDir(0)):yt.hasKeyDown(Laya.Keyboard.S)?(this.isKeyRun=!0,this.setDir(90)):yt.hasKeyDown(Laya.Keyboard.A)?(this.isKeyRun=!0,this.setDir(180)):this.isKeyRun&&this.setDir(-4),yt.hasKeyDown(Laya.Keyboard.H)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_1)){if(this.key1Pressed)return;this.key1Pressed=!0,g.intance.event(f.EVENT_CLICK_NUM,1),Laya.timer.once(500,this,this.notKey1Pressed)}if(yt.hasKeyDown(Laya.Keyboard.J)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_2)){if(this.key2Pressed)return;this.key2Pressed=!0,g.intance.event(f.EVENT_CLICK_NUM,2),Laya.timer.once(500,this,this.notKey2Pressed)}if(yt.hasKeyDown(Laya.Keyboard.K)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_3)){if(this.key3Pressed)return;this.key3Pressed=!0,g.intance.event(f.EVENT_CLICK_NUM,3),Laya.timer.once(500,this,this.notKey3Pressed)}if(yt.hasKeyDown(Laya.Keyboard.L)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_4)){if(this.key4Pressed)return;this.key4Pressed=!0,g.intance.event(f.EVENT_CLICK_NUM,4),Laya.timer.once(500,this,this.notKey4Pressed)}if(yt.hasKeyDown(Laya.Keyboard.M)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_5)){if(this.key5Pressed)return;this.key5Pressed=!0,g.intance.event(f.EVENT_CLICK_NUM,5),Laya.timer.once(500,this,this.notKey5Pressed)}if(yt.hasKeyDown(Laya.Keyboard.N)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_6)){if(this.key6Pressed)return;this.key6Pressed=!0,g.intance.event(f.EVENT_CLICK_NUM,6),Laya.timer.once(500,this,this.notKey6Pressed)}if(yt.hasKeyDown(Laya.Keyboard.B)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_7)){if(this.key7Pressed)return;this.key7Pressed=!0,g.intance.event(f.EVENT_CLICK_NUM,7),Laya.timer.once(500,this,this.notKey7Pressed)}if(yt.hasKeyDown(Laya.Keyboard.V)||yt.hasKeyDown(Laya.Keyboard.NUMPAD_8)){if(this.key8Pressed)return;this.key8Pressed=!0,g.intance.event(f.EVENT_CLICK_NUM,8),Laya.timer.once(500,this,this.notKey8Pressed)}}notKey1Pressed(){this.key1Pressed=!1}notKey2Pressed(){this.key2Pressed=!1}notKey3Pressed(){this.key3Pressed=!1}notKey4Pressed(){this.key4Pressed=!1}notKey5Pressed(){this.key5Pressed=!1}notKey6Pressed(){this.key6Pressed=!1}notKey7Pressed(){this.key7Pressed=!1}notKey8Pressed(){this.key8Pressed=!1}getKeyPressed(e){var i=e.toParentPoint(new Laya.Point(e.x,e.y));return i.x>e.x&&i.x<e.x+e.width&&i.y>e.y&&i.y<e.y+e.height}getDistance(e,i,n,r){let s=e-n,o=i-r;return Math.sqrt(s*s+o*o)}onDisable(){Laya.InputManager.multiTouchEnabled=!1}};Gc=h([hN("7cTqWb35RwygSkuWy4QkgQ")],Gc);var Lo=class{static playSkillEffect(t,e,i){var n=["Attack01","Attack02","Attack03","Attack04"],r=n[e];Laya.Sprite3D.load(t,Laya.Handler.create(null,function(s){i.addChild(s);var o=s.getChildByName(r);o.active=!0;var l=o.getComponent(Laya.ShurikenParticleRenderer);l._particleSystem.play(),setTimeout(()=>{s.removeSelf()},1e3)}))}static playEnemyHurtSkillEffect(t,e){Laya.Sprite3D.load(t,Laya.Handler.create(null,function(i){e.addChild(i);var n="Attack",r=i.getChildByName(n),s=r.getComponent(Laya.ShurikenParticleRenderer);if(s._particleSystem.play(),r.numChildren>0)for(let c=0;c<r.numChildren;c++){var o=r.getChildAt(c),l=o.getComponent(Laya.ShurikenParticleRenderer);l._particleSystem.play()}setTimeout(()=>{i.removeSelf()},1e3)}))}static playNormalEffect(t,e){Laya.Sprite3D.load(t,Laya.Handler.create(null,function(i){e.addChild(i);var n=i,r=n.getComponent(Laya.ShurikenParticleRenderer);if(r._particleSystem.play(),n.numChildren>0)for(let l=0;l<n.numChildren;l++){var s=n.getChildAt(l),o=s.getComponent(Laya.ShurikenParticleRenderer);o._particleSystem.play()}setTimeout(()=>{i.removeSelf()},1e3)}))}};var{regClass:dN,property:sD}=Laya,Ur=class extends Laya.Script{constructor(){super();this.followTarget=null;this.speed=.02;this.mLife=5;this.mIsEnd=!1;this.mIsAttack=!1;this.mIsAttackStart=!1;this.mCanPlayFirst=!0;this.mAttackDelayTime=0;this.mCurrentIndex=0;this.followTarget=k.instance.getCurrentHero()}onUpdate(){if(!this.mIsEnd){this.followTarget==null&&(this.followTarget=k.instance.getCurrentHero());var e=new Laya.Vector3(this.followTarget.transform.position.x,0,this.followTarget.transform.position.z),i=new Laya.Vector3(this.owner.transform.position.x,0,this.owner.transform.position.z),n=Laya.Vector3.distance(e,i);if(n<10)if(n<=1)this.mIsAttack?this.isAttackendByPlayer():(this.mCanPlayFirst?(this.mCanPlayFirst=!1,this.attackPlayer()):(this.mAttackDelayTime=this.mAttackDelayTime+Laya.timer.delta,this.mAttackDelayTime>1e3&&(this.mAttackDelayTime=0,this.attackPlayer())),this.mIsAttackStart=!1),k.instance.insertValidList(this.owner);else{this.mAttackDelayTime=0;var r=new Laya.Vector3;Laya.Vector3.subtract(e,i,r),Laya.Vector3.normalize(r,r),this.owner.transform.lookAt(e,Laya.Vector3.Up);var s=this.owner.transform.position;s.vadd(new Laya.Vector3(r.x*this.speed,0,r.z*this.speed),s),this.owner.transform.position=s,this.anim&&this.anim.playAnim("run",!0),this.mCanPlayFirst=!0,this.mIsAttackStart=!1,this.mIsAttack=!1}else this.anim&&this.anim.playAnim("ldle",!0),k.instance.removeValidListByValue(this.owner);this.mLife<=0&&(this.mIsEnd=!0,this.anim&&this.anim.playAnim("die",!0),setTimeout(()=>{k.instance.removeValidListByValue(this.owner),this.owner.removeSelf();var o=k.instance.getCurrentPlane(),l=this.mCurrentIndex;k.instance.createEnemy(o.getChildAt(l),l)},600))}}setCurrentIndex(e){this.mCurrentIndex=e}setLife(e){this.mLife=e}attackPlayer(){Lo.playEnemyHurtSkillEffect("resources/prefab/eff_monster.lh",this.owner.getChildAt(0)),k.instance.playSound(2),this.anim&&this.anim.playAnim("attack",!0),setTimeout(()=>{this.mIsEnd||this.anim&&this.anim.playAnim("ldle",!0)},500)}isAttackendByPlayer(){this.mIsAttackStart||(this.anim&&this.anim.playAnim("shouji",!0),Lo.playNormalEffect("resources/prefab/eff_shouji.lh",this.owner.getChildAt(0)),setTimeout(()=>{this.mIsEnd||(this.anim&&this.anim.playAnim("shouji",!0),this.mIsAttack=!1)},500),this.mIsAttackStart=!0)}getLife(){return this.mLife}setIsAttack(e){this.mIsAttack=e}};h([sD({type:tr})],Ur.prototype,"anim",2),h([sD({type:"number"})],Ur.prototype,"speed",2),Ur=h([dN("eWO-rqURQ6ag7phXtJPZCA")],Ur);var{regClass:fN,property:Kc}=Laya,Pa=class extends Laya.Script{constructor(){super();this.animname="";this.force=!1;this.isBig=!1;this.isCanClick=!0}onStart(){g.intance.on(f.EVENT_CLICK_NUM3,this,this.onMouseClick)}onMouseClick(e){this.isCanClick&&(Laya.Tween.to(this.btn_pic,{scaleX:1.1,scaleY:1.1},250,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this.btn_pic,{scaleX:1,scaleY:1},150,Laya.Ease.linearIn)})),k.instance.myHeroSpr.getComponent(Mr).catchItem(),k.instance.playSound(1),this.anim1&&(this.anim1.playAnim(this.animname,this.force),setTimeout(()=>{this.anim1.playAnim("idle",this.force),this.isCanClick=!0},500)))}onDestroy(){g.intance.offAllCaller(this)}};h([Kc({type:tr})],Pa.prototype,"anim1",2),h([Kc({type:"string"})],Pa.prototype,"animname",2),h([Kc({type:"boolean"})],Pa.prototype,"force",2),h([Kc({type:"boolean"})],Pa.prototype,"isBig",2),h([Kc({type:Laya.Sprite})],Pa.prototype,"btn_pic",2),Pa=h([fN("xovkzdhOSuOc_JJKi_7s2g")],Pa);var{regClass:yN,property:oD}=Laya,Vr=class extends Laya.Script{constructor(){super();this.isBig=!1;this.isCanClick=!0}onStart(){g.intance.on(f.EVENT_CLICK_NUM,this,this.onNumberClick)}onNumberClick(e){e==1?this.isBig||this.onMouseClick(null):this.isBig&&this.onMouseClick(null)}onMouseClick(e){if(this.isCanClick){this.isCanClick&&(this.isCanClick=!1);var i=k.instance.getValidList();Laya.Tween.to(this,{scaleX:1.1,scaleY:1.1},250,Laya.Ease.linearIn,Laya.Handler.create(this,()=>{Laya.Tween.to(this,{scaleX:1,scaleY:1},150,Laya.Ease.linearIn)}));var n=0;this.isBig?(k.instance.myHeroSpr.attack(),k.instance.playSound(3)):(k.instance.myHeroSpr.attack(),k.instance.playSound(1)),setTimeout(()=>{this.isCanClick=!0},500)}}getDistance(e,i){return Math.sqrt(e*e+i*i)}getDistanceByPoint(e,i,n,r){let s=e-n,o=i-r;return Math.sqrt(s*s+o*o)}onDestroy(){g.intance.offAllCaller(this)}};h([oD({type:"boolean"})],Vr.prototype,"isBig",2),h([oD({type:Laya.Sprite})],Vr.prototype,"btn_pic",2),Vr=h([yN("ye1w48wgTbqktuLPDOjmkw")],Vr);var{regClass:bN,property:_ze}=Laya,qc=class extends Laya.Script{constructor(){super(...arguments);this.maxX=0;this.minX=-90;this.maxY=0;this.minY=-580;this.scaleSize=.1;this.lastDistance=0;this.startedSingleTouchDrag=!1}onEnable(){this.owner.on(Laya.Event.MOUSE_DOWN,this,this.onMouseDown),this.onMouseWheel()}onMouseWheel(){this.owner.on(Laya.Event.MOUSE_WHEEL,this,e=>{let i=this.owner.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY));e.delta>0&&(this.owner.scaleX+=this.scaleSize,this.owner.scaleY+=this.scaleSize),e.delta<0&&(this.owner.scaleX-=this.scaleSize,this.owner.scaleY-=this.scaleSize,this.owner.scaleX<1&&(this.owner.scaleX=1),this.owner.scaleY<1&&(this.owner.scaleY=1));let n=this.owner.globalToLocal(new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY)),r=(n.x-i.x)*this.owner.scaleX,s=(n.y-i.y)*this.owner.scaleY;r+=this.owner.x,s+=this.owner.y,this.updateLimit(),r>this.maxX?this.owner.x=this.maxX:r<this.minX?this.owner.x=this.minX:this.owner.x=r,s>this.maxY?this.owner.y=this.maxY:s<this.minY?this.owner.y=this.minY:this.owner.y=s})}onStart(){this.updateLimit()}updateLimit(){let e=this.owner.parent;this.minX=Math.min(e.width-this.owner.width*this.owner.scaleX,0),this.minY=Math.min(e.height-this.owner.height*this.owner.scaleY,0)}onMouseDown(e){if(e.stopPropagation(),e.touches&&e.touches.length>1){this.startedSingleTouchDrag&&(this.owner.stopDrag(),this.startedSingleTouchDrag=!1);let i=this.setPivot(e);!i.x||!i.y?console.log("(((((((((((((((((((((((",this.lastPivot,JSON.parse(JSON.stringify(e.touches))):(this.lastDistance=this.getDistance(e),this.lastPivot=i,this.owner.on(Laya.Event.MOUSE_MOVE,this,this.mouseMove))}else this.owner.startDrag(),this.startedSingleTouchDrag=!0}onMouseUp(e){this.owner.off(Laya.Event.MOUSE_MOVE,this,this.mouseMove)}getDistance(e){var i=0;if(e.touches&&e.touches.length>1){let n=e.touches[0].pos.x-e.touches[1].pos.x,r=e.touches[0].pos.y-e.touches[1].pos.y;i=Math.sqrt(n*n+r*r)}return i}mouseMove(e){let i=this.getDistance(e);this.owner.scaleX+=(i-this.lastDistance)*(this.scaleSize/10),this.owner.scaleY+=(i-this.lastDistance)*(this.scaleSize/10),this.owner.scaleX<1&&(this.owner.scaleX=1),this.owner.scaleY<1&&(this.owner.scaleY=1),this.owner.scaleX>5&&(this.owner.scaleX=5),this.owner.scaleY>5&&(this.owner.scaleY=5);let n=this.setPivot(e);if(!n.x||!n.y)console.log("$$$$$$$$$$$",n,JSON.parse(JSON.stringify(e.touches)));else{this.updateLimit();let r=(n.x-this.lastPivot.x)*this.owner.scaleX,s=(n.y-this.lastPivot.y)*this.owner.scaleY;r+=this.owner.x,s+=this.owner.y,r>this.maxX?this.owner.x=this.maxX:r<this.minX?this.owner.x=this.minX:this.owner.x=r,s>this.maxY?this.owner.y=this.maxY:s<this.minY?this.owner.y=this.minY:this.owner.y=s,this.lastDistance=i}}setPivot(e){if(e.touches&&e.touches.length>=2){let i=this.owner.globalToLocal(new Laya.Point(e.touches[0].pos.x,e.touches[0].pos.y)),n=this.owner.globalToLocal(new Laya.Point(e.touches[1].pos.x,e.touches[1].pos.y));return new Laya.Point((i.x+n.x)/2,(i.y+n.y)/2)}return this.lastPivot}onUpdate(){this.owner.x>this.maxX&&(this.owner.x=this.maxX),this.owner.x<this.minX&&(this.owner.x=this.minX),this.owner.y>this.maxY&&(this.owner.y=this.maxY),this.owner.y<this.minY&&(this.owner.y=this.minY)}addTestPoint(e,i="#ff0000",n=2){let r=new Laya.Sprite;r.graphics.drawCircle(0,0,n,i),this.owner.addChild(r),r.pos(e.x,e.y)}};qc=h([bN("c71-MoP2RIyCrdBAfjnIgw")],qc);var{regClass:gN,property:LN}=Laya,_o=class extends Laya.Script{constructor(){super(...arguments);this.tipsText="";this.isDown=!1}onEnable(){this.tipsText.replace(/(^\s*)|(\s*$)/g,"")}onMouseDown(){this.owner.startDrag(),this.isDown=!0}onMouseUp(){this.isDown=!1}onMouseMove(){this.isDown&&un.i.collisionWith(this.owner)}onMouseOver(){Laya.Mouse.cursor="move",this.tipsText!==""&&Laya.Scene.open("scenes/uiDemo/Msg.ls",!1,{text:this.tipsText})}onMouseOut(){Laya.Mouse.cursor="auto"}};h([LN({type:"string"})],_o.prototype,"tipsText",2),_o=h([gN("oWa7FUgoQ6CqtyJh_D1Y2w")],_o);var{regClass:_N,property:Wc}=Laya,a0=Laya.Event,lD=Laya.Point,Na=class extends Laya.Script{constructor(){super();this.runAniName="runRight,runRDown1,runRDown2,runRDown3,runDown,runLDown3,runLDown2,runLDown1,runLeft,runLUp1,runLUp2,runLUp3,runUp,runRUp3,runRUp2,runRUp1";this.standAniName="right,Rdown,down,Ldown,left,Lup,up,Rup";this.stageMouse=new lD;this.axisPivot=new lD;this.angle=0;this.radian=0;this.isMoving=!1;this.isRun=!1}onEnable(){this.joystickBG=this.owner,this.joystickAxis=this.owner.getChildByName("joystickAxis"),this.maxDistance=this.joystickBG.width-this.joystickAxis.width,this.axisPivot.x=this.joystickAxis.x,this.axisPivot.y=this.joystickAxis.y,this.sceneWindow.on(a0.MOUSE_DOWN,this,this.mouseDown),this.sceneWindow.on(a0.MOUSE_MOVE,this,this.mouseMove),this.sceneWindow.on(a0.MOUSE_UP,this,this.mouseUp),this.sceneWindow.on(a0.MOUSE_OUT,this,this.mouseUp),this.roleAniNode=this.roleAni.create(),this.gameMap.addChild(this.roleAniNode),this.roleAniNode.pivot(this.roleAniNode.width/2,this.roleAniNode.height/2),this.roleAniNode.x=this.gameMap.width/2,this.roleAniNode.y=this.gameMap.height/2,this._animator=this.roleAniNode.getComponent(Laya.Animator2D)}mouseDown(e){this.touchId=e.touchId,this.isMoving=!0,this.updateJoystickPoint()}updateJoystickPoint(){this.stageMouse.x=Laya.stage.mouseX,this.stageMouse.y=Laya.stage.mouseY;let e=this.joystickBG.globalToLocal(this.stageMouse),i=e.x-this.joystickAxis.width/2,n=e.y-this.joystickAxis.height/2;this.radian=Math.atan2(n-this.axisPivot.y,i-this.axisPivot.x),this.lastAngle=this.angle,this.angle=Math.round(this.radian*180/Math.PI*10)/10,this.angle<0&&(this.angle+=360),console.log("radian: "+this.radian+", angle: "+this.angle),this.getDistance(this.joystickBG.width/2,this.joystickBG.height/2,e.x,e.y)>this.maxDistance&&this.lastAngle!==this.angle?(this.joystickAxis.x=Math.floor(Math.cos(this.radian)*this.maxDistance)+this.axisPivot.x,this.joystickAxis.y=Math.floor(Math.sin(this.radian)*this.maxDistance)+this.axisPivot.y):this.joystickAxis.pos(e.x-this.joystickAxis.width/2,e.y-this.joystickAxis.height/2),this.switchAni("run")}switchAni(e){if(e=="run"){let i=this.getOrientation(this.angle,this.runAniName);i!==this.lastRunAniName&&(this.lastRunAniName=i,this._animator.play(i)),this.isRun=!0}else{this.isRun=!1;let i=this.getOrientation(this.angle,this.standAniName);this.lastAngle!==this.angle&&this._animator.play(i)}}mouseUp(e){e.touchId==this.touchId&&(this.touchId=null,this.isMoving=!1,this.joystickAxis.pos(this.axisPivot.x,this.axisPivot.y),this.switchAni("stand"))}mouseMove(e){e.touchId==this.touchId&&this.updateJoystickPoint()}getOrientation(e,i){let n=i.split(","),r=360/n.length;return n[Math.floor(e/r)]}onUpdate(){this.isMoving&&this.updateRoleMove()}updateRoleMove(){this.switchAni("run");let e=Math.cos(this.radian)*2,i=Math.sin(this.radian)*2;(e<0&&this.gameMap.x<0||e>0&&this.gameMap.x>this.sceneWindow.width-this.gameMap.width)&&(this.gameMap.x-=e),(i<0&&this.gameMap.y<0||i>0&&this.gameMap.y>this.sceneWindow.height-this.gameMap.height)&&(this.gameMap.y-=i)}getDistance(e,i,n,r){let s=e-n,o=i-r;return Math.sqrt(s*s+o*o)}};h([Wc({type:Laya.Prefab})],Na.prototype,"roleAni",2),h([Wc({type:"string"})],Na.prototype,"runAniName",2),h([Wc({type:"string"})],Na.prototype,"standAniName",2),h([Wc({type:Laya.Sprite})],Na.prototype,"gameMap",2),h([Wc({type:Laya.Box})],Na.prototype,"sceneWindow",2),Na=h([_N("Pl5-_PonSLe-7mCnxeXfRw")],Na);var{regClass:vN,property:Sze}=Laya,Yc=class extends Laya.Script{constructor(){super();this.isOpen=!0}onEnable(){this.toolbarBG=this.owner.parent,this._owner=this.owner,this.menu=this.owner.parent.getChildByName("menu")}onMouseDown(e){e.stopPropagation(),this.isOpen?(Laya.Tween.to(this.toolbarBG,{width:106},1e3,Laya.Ease.strongOut),Laya.Tween.to(this._owner,{x:52,rotation:540},1e3,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{this.isOpen=!1})),Laya.Tween.to(this.menu,{alpha:0},300,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{this.menu.visible=!1}))):(Laya.Tween.to(this.toolbarBG,{width:460},1e3,Laya.Ease.strongOut),Laya.Tween.to(this._owner,{x:402,rotation:-360},1e3,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{this.isOpen=!0})),Laya.Tween.to(this.menu,{alpha:1},200,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{this.menu.visible=!0})))}onDisable(){}};Yc=h([vN("hPkwKQvKQTaeBeEpHxNUEA")],Yc);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
